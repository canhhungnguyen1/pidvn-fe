"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[9265],{74696:(ee,F,l)=>{l.d(F,{GB:()=>G,Vz:()=>U,pc:()=>b});var f=l(15215),i=l(54438),e=l(73586),v=l(7605),w=l(58728),z=l(40713),u=l(16042),R=l(57806),I=l(21025),_=l(70317),D=l(72544),T=l(28203),W=l(26841);const M=["*"],N=["collapseHeader"];function H(r,y){if(1&r&&(i.qex(0),i.nrm(1,"span",7),i.bVm()),2&r){const c=y.$implicit,h=i.XpG(2);i.R7$(),i.Y8G("nzType",c||"right")("nzRotate",h.nzActive?90:0)}}function O(r,y){if(1&r&&(i.j41(0,"div"),i.DNE(1,H,2,2,"ng-container",3),i.k0s()),2&r){const c=i.XpG();i.R7$(),i.Y8G("nzStringTemplateOutlet",c.nzExpandedIcon)}}function $(r,y){if(1&r&&(i.qex(0),i.EFF(1),i.bVm()),2&r){const c=i.XpG();i.R7$(),i.JRh(c.nzHeader)}}function C(r,y){if(1&r&&(i.qex(0),i.EFF(1),i.bVm()),2&r){const c=i.XpG(2);i.R7$(),i.JRh(c.nzExtra)}}function k(r,y){if(1&r&&(i.j41(0,"div",4),i.DNE(1,C,2,1,"ng-container",3),i.k0s()),2&r){const c=i.XpG();i.R7$(),i.Y8G("nzStringTemplateOutlet",c.nzExtra)}}const x="collapse";let b=(()=>{class r{constructor(c,h,p,E){this.nzConfigService=c,this.cdr=h,this.directionality=p,this.destroy$=E,this._nzModuleName=x,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(x).pipe((0,v.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,v.Q)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(c){this.listOfNzCollapsePanelComponent.push(c)}removePanel(c){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(c),1)}click(c){this.nzAccordion&&!c.nzActive&&this.listOfNzCollapsePanelComponent.filter(h=>h!==c).forEach(h=>{h.nzActive&&(h.nzActive=!1,h.nzActiveChange.emit(h.nzActive),h.markForCheck())}),c.nzActive=!c.nzActive,c.nzActiveChange.emit(c.nzActive)}static#e=this.\u0275fac=function(h){return new(h||r)(i.rXU(u.yx),i.rXU(i.gRc),i.rXU(T.dS,8),i.rXU(I.y4))};static#t=this.\u0275cmp=i.VBU({type:r,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(h,p){2&h&&i.AVh("ant-collapse-icon-position-start","left"===p.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===p.nzExpandIconPosition)("ant-collapse-ghost",p.nzGhost)("ant-collapse-borderless",!p.nzBordered)("ant-collapse-rtl","rtl"===p.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[i.Jv_([I.y4]),i.aNF],ngContentSelectors:M,decls:1,vars:0,template:function(h,p){1&h&&(i.NAR(),i.SdG(0))},encapsulation:2,changeDetection:0})}return(0,f.Cg)([(0,u.H4)(),(0,_.H3)()],r.prototype,"nzAccordion",void 0),(0,f.Cg)([(0,u.H4)(),(0,_.H3)()],r.prototype,"nzBordered",void 0),(0,f.Cg)([(0,u.H4)(),(0,_.H3)()],r.prototype,"nzGhost",void 0),r})();const B="collapsePanel";let U=(()=>{class r{markForCheck(){this.cdr.markForCheck()}constructor(c,h,p,E,V,K){this.nzConfigService=c,this.ngZone=h,this.cdr=p,this.destroy$=E,this.nzCollapseComponent=V,this.noAnimation=K,this._nzModuleName=B,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new i.bkB,this.nzConfigService.getConfigChangeEventForComponent(B).pipe((0,v.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,e.R)(this.collapseHeader.nativeElement,"click").pipe((0,w.p)(()=>!this.nzDisabled),(0,v.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#e=this.\u0275fac=function(h){return new(h||r)(i.rXU(u.yx),i.rXU(i.SKi),i.rXU(i.gRc),i.rXU(I.y4),i.rXU(b,1),i.rXU(W.z,8))};static#t=this.\u0275cmp=i.VBU({type:r,selectors:[["nz-collapse-panel"]],viewQuery:function(h,p){if(1&h&&i.GBs(N,7),2&h){let E;i.mGM(E=i.lsd())&&(p.collapseHeader=E.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(h,p){2&h&&i.AVh("ant-collapse-no-arrow",!p.nzShowArrow)("ant-collapse-item-active",p.nzActive)("ant-collapse-item-disabled",p.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[i.Jv_([I.y4]),i.aNF],ngContentSelectors:M,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(h,p){1&h&&(i.NAR(),i.j41(0,"div",1,0),i.DNE(2,O,2,1,"div"),i.j41(3,"span",2),i.DNE(4,$,2,1,"ng-container",3),i.k0s(),i.DNE(5,k,2,1,"div",4),i.k0s(),i.j41(6,"div",5)(7,"div",6),i.SdG(8),i.k0s()()),2&h&&(i.BMQ("aria-expanded",p.nzActive),i.R7$(2),i.vxM(2,p.nzShowArrow?2:-1),i.R7$(2),i.Y8G("nzStringTemplateOutlet",p.nzHeader),i.R7$(),i.vxM(5,p.nzExtra?5:-1),i.R7$(),i.AVh("ant-collapse-content-active",p.nzActive),i.Y8G("@.disabled",!(null==p.noAnimation||!p.noAnimation.nzNoAnimation))("@collapseMotion",p.nzActive?"expanded":"hidden"))},dependencies:[R.C,R.m,D.Y3,D.Dn],encapsulation:2,data:{animation:[z.GE]},changeDetection:0})}return(0,f.Cg)([(0,_.H3)()],r.prototype,"nzActive",void 0),(0,f.Cg)([(0,_.H3)()],r.prototype,"nzDisabled",void 0),(0,f.Cg)([(0,u.H4)(),(0,_.H3)()],r.prototype,"nzShowArrow",void 0),r})(),G=(()=>{class r{static#e=this.\u0275fac=function(h){return new(h||r)};static#t=this.\u0275mod=i.$C({type:r});static#i=this.\u0275inj=i.G2t({imports:[U]})}return r})()},79116:(ee,F,l)=>{l.d(F,{as:()=>q,et:()=>re,r:()=>ae,zn:()=>j});var f=l(15215),i=l(60177),e=l(54438),v=l(73586),w=l(45286),z=l(7605),u=l(58728),R=l(19493),I=l(49090),_=l(16042),D=l(70317),T=l(5667),W=l(40713),M=l(21025),N=l(72544),H=l(345),O=l(32753),$=l(76939),C=l(67336),k=l(28203);const x=["imgRef"],b=["imagePreviewWrapper"];function B(n,m){if(1&n){const t=e.RV6();e.j41(0,"div",13),e.bIt("click",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onSwitchLeft(o))}),e.nrm(1,"span",14),e.k0s(),e.j41(2,"div",15),e.bIt("click",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onSwitchRight(o))}),e.nrm(3,"span",16),e.k0s()}if(2&n){const t=e.XpG();e.AVh("ant-image-preview-switch-left-disabled",t.index<=0),e.R7$(2),e.AVh("ant-image-preview-switch-right-disabled",t.index>=t.images.length-1)}}function U(n,m){if(1&n&&(e.j41(0,"li",5),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Lme("",t.index+1," / ",t.images.length,"")}}function G(n,m){if(1&n){const t=e.RV6();e.j41(0,"li",17),e.bIt("click",function(){const o=e.eBV(t).$implicit;return e.Njj(o.onClick())}),e.nrm(1,"span",18),e.k0s()}if(2&n){let t;const s=m.$implicit,o=e.XpG();e.AVh("ant-image-preview-operations-operation-disabled",o.zoomOutDisabled&&"zoomOut"===s.type),e.R7$(),e.Y8G("nzType",s.icon)("nzRotate",null!==(t=s.rotate)&&void 0!==t?t:0)}}function r(n,m){if(1&n&&e.nrm(0,"img",20,1),2&n){const t=e.XpG().$implicit,s=e.XpG();e.xc7("width",t.width)("height",t.height)("transform",s.previewImageTransform),e.BMQ("src",s.sanitizerResourceUrl(t.src),e.B4B)("srcset",t.srcset)("alt",t.alt)}}function y(n,m){if(1&n&&e.DNE(0,r,2,9,"img",19),2&n){const t=m.$index,s=e.XpG();e.vxM(0,t===s.index?0:-1)}}const c=["*"],E="image";function Q(n,m,t){const s=n+m,o=(m-t)/2;let a=null;return m>t?(n>0&&(a=o),n<0&&s<t&&(a=-o)):(n<0||s>t)&&(a=n<0?o:-o),a}class Z{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}}const Y={x:0,y:0};let J=(()=>{class n{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){const t=this.nzConfigService.getConfigForComponent(E)||{};return this.config.nzMaskClosable??t.nzMaskClosable??!0}constructor(t,s,o,a,g,d){this.ngZone=t,this.cdr=s,this.nzConfigService=o,this.config=a,this.destroy$=g,this.sanitizer=d,this._defaultNzZoom=1,this._defaultNzScaleStep=.5,this._defaultNzRotate=0,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationStateChanged=new e.bkB,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"},{icon:"swap",onClick:()=>{this.onHorizontalFlip()},type:"flipHorizontally"},{icon:"swap",onClick:()=>{this.onVerticalFlip()},type:"flipVertically",rotate:90}],this.zoomOutDisabled=!1,this.position={...Y},this.closeClick=new e.bkB,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=this.config.nzFlipHorizontally??!1,this.flipVertically=this.config.nzFlipVertically??!1,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,v.R)(this.imagePreviewWrapper.nativeElement,"mousedown").pipe((0,z.Q)(this.destroy$)).subscribe(()=>{this.isDragging=!0}),(0,v.R)(this.imagePreviewWrapper.nativeElement,"wheel").pipe((0,z.Q)(this.destroy$)).subscribe(t=>{this.ngZone.run(()=>this.wheelZoomEventHandler(t))})})}setImages(t,s){s&&(this.scaleStepMap=s),this.images=t,this.markForCheck()}switchTo(t){this.index=t,this.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.visible=!1,this.closeClick.emit()}onZoomIn(){const t=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=t,this.updatePreviewImageTransform(),this.updateZoomOutDisabled()}onZoomOut(){if(this.zoom>1){const t=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=t,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.zoom<=1&&this.reCenterImage()}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(t){t.preventDefault(),t.stopPropagation(),this.prev()}onSwitchRight(t){t.preventDefault(),t.stopPropagation(),this.next()}onHorizontalFlip(){this.flipHorizontally=!this.flipHorizontally,this.updatePreviewImageTransform()}onVerticalFlip(){this.flipVertically=!this.flipVertically,this.updatePreviewImageTransform()}wheelZoomEventHandler(t){t.preventDefault(),t.stopPropagation(),this.handlerImageTransformationWhileZoomingWithMouse(t,t.deltaY),this.handleImageScaleWhileZoomingWithMouse(t.deltaY),this.updatePreviewImageWrapperTransform(),this.updatePreviewImageTransform(),this.markForCheck()}onAnimationStart(t){this.animationStateChanged.emit(t)}onAnimationDone(t){this.animationStateChanged.emit(t)}onDragEnd(t){this.isDragging=!1;const s=this.imageRef.nativeElement.offsetWidth*this.zoom,o=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:a,top:g}=function K(n){const m=n.getBoundingClientRect(),t=document.documentElement;return{left:m.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:m.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}(this.imageRef.nativeElement),{width:d,height:P}=function te(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}(),L=this.rotate%180!=0,A=function V(n){let m={};return n.width<=n.clientWidth&&n.height<=n.clientHeight&&(m={x:0,y:0}),(n.width>n.clientWidth||n.height>n.clientHeight)&&(m={x:Q(n.left,n.width,n.clientWidth),y:Q(n.top,n.height,n.clientHeight)}),m}({width:L?o:s,height:L?s:o,left:a,top:g,clientWidth:d,clientHeight:P});(0,D.n9)(A.x)||(0,D.n9)(A.y)?this.position={...this.position,...A}:!(0,D.n9)(A.x)&&!(0,D.n9)(A.y)&&(this.position={x:t.source.getFreeDragPosition().x,y:t.source.getFreeDragPosition().y})}sanitizerResourceUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom*(this.flipHorizontally?-1:1)}, ${this.zoom*(this.flipVertically?-1:1)}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}handlerImageTransformationWhileZoomingWithMouse(t,s){let o;const a=this.imageRef.nativeElement,d=getComputedStyle(a).transform.match(/matrix.*\((.+)\)/);o=d?+d[1].split(", ")[0]:this.zoom;const P=(t.clientX-a.getBoundingClientRect().x)/o,L=(t.clientY-a.getBoundingClientRect().y)/o,S=s<0?this.scaleStep/2:-this.scaleStep/2;this.position.x+=-P*S*2+a.offsetWidth*S,this.position.y+=-L*S*2+a.offsetHeight*S}handleImageScaleWhileZoomingWithMouse(t){this.isZoomedInWithMouseWheel(t)?this.onZoomIn():this.onZoomOut(),this.zoom<=1&&this.reCenterImage()}isZoomedInWithMouseWheel(t){return t<0}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=!1,this.flipVertically=!1,this.reCenterImage()}reCenterImage(){this.position={...Y}}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.SKi),e.rXU(e.gRc),e.rXU(_.yx),e.rXU(Z),e.rXU(M.y4),e.rXU(H.up))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["nz-image-preview"]],viewQuery:function(s,o){if(1&s&&(e.GBs(x,5),e.GBs(b,7)),2&s){let a;e.mGM(a=e.lsd())&&(o.imageRef=a.first),e.mGM(a=e.lsd())&&(o.imagePreviewWrapper=a.first)}},hostAttrs:[1,"ant-image-preview-root"],hostVars:6,hostBindings:function(s,o){1&s&&e.Kam("@fadeMotion.start",function(g){return o.onAnimationStart(g)})("@fadeMotion.done",function(g){return o.onAnimationDone(g)}),2&s&&(e.zvX("@.disabled",o.config.nzNoAnimation)("@fadeMotion",o.visible?"enter":"leave"),e.xc7("z-index",o.config.nzZIndex),e.AVh("ant-image-preview-moving",o.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[e.Jv_([M.y4]),e.aNF],decls:17,vars:5,consts:[["imagePreviewWrapper",""],["imgRef",""],[1,"ant-image-preview-mask"],[1,"ant-image-preview-operations-wrapper"],[1,"ant-image-preview-operations"],[1,"ant-image-preview-operations-progress"],[1,"ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled"],["tabindex","-1",1,"ant-image-preview-wrap",3,"click"],["role","dialog","aria-modal","true",1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragEnded","cdkDragFreeDragPosition"],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType","nzRotate"],["cdkDragHandle","",1,"ant-image-preview-img",3,"width","height","transform"],["cdkDragHandle","",1,"ant-image-preview-img"]],template:function(s,o){if(1&s){const a=e.RV6();e.nrm(0,"div",2),e.j41(1,"div",3),e.DNE(2,B,4,4),e.j41(3,"ul",4),e.DNE(4,U,2,2,"li",5),e.Z7z(5,G,2,4,"li",6,e.fX1),e.k0s()(),e.j41(7,"div",7),e.bIt("click",function(d){return e.eBV(a),e.Njj(o.maskClosable&&d.target===d.currentTarget&&o.onClose())}),e.j41(8,"div",8),e.nrm(9,"div",9),e.j41(10,"div",10)(11,"div",11)(12,"div",12,0),e.bIt("cdkDragEnded",function(d){return e.eBV(a),e.Njj(o.onDragEnd(d))}),e.Z7z(14,y,1,1,null,null,e.fX1),e.k0s()()(),e.nrm(16,"div",9),e.k0s()()}2&s&&(e.R7$(2),e.vxM(2,o.images.length>1?2:-1),e.R7$(2),e.vxM(4,o.images.length>1?4:-1),e.R7$(),e.Dyx(o.operations),e.R7$(7),e.xc7("transform",o.previewImageWrapperTransform),e.Y8G("cdkDragFreeDragPosition",o.position),e.R7$(2),e.Dyx(o.images))},dependencies:[N.Y3,N.Dn,T.Fb,T.T1],encapsulation:2,data:{animation:[W.LD]},changeDetection:0})}return n})();class oe{constructor(m,t,s){this.previewInstance=m,this.config=t,this.overlayRef=s,this.destroy$=new w.B7,s.keydownEvents().pipe((0,u.p)(o=>this.config.nzKeyboard&&(o.keyCode===C._f||o.keyCode===C.UQ||o.keyCode===C.LE)&&!(0,C.rp)(o))).subscribe(o=>{o.preventDefault(),o.keyCode===C._f&&m.onClose(),o.keyCode===C.UQ&&this.prev(),o.keyCode===C.LE&&this.next()}),s.detachments().subscribe(()=>{this.overlayRef.dispose()}),m.closeClick.pipe((0,R.s)(1),(0,I.n)(()=>m.animationStateChanged),(0,u.p)(o=>"done"===o.phaseName),(0,z.Q)(this.destroy$)).subscribe(()=>{this.close()})}switchTo(m){this.previewInstance.switchTo(m)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.destroy$.next(),this.overlayRef.dispose()}}let j=(()=>{class n{constructor(t,s,o,a){this.overlay=t,this.injector=s,this.nzConfigService=o,this.directionality=a}preview(t,s,o){return this.display(t,s,o)}display(t,s,o){const a={...new Z,...s??{}},g=this.createOverlay(a),d=this.attachPreviewComponent(g,a);d.setImages(t,o);const P=new oe(d,a,g);return d.previewRef=P,P}attachPreviewComponent(t,s){const o=e.zZn.create({parent:this.injector,providers:[{provide:O.yY,useValue:t},{provide:Z,useValue:s}]}),a=new $.A8(J,null,o);return t.attach(a).instance}createOverlay(t){const s=this.nzConfigService.getConfigForComponent(E)||{},o=new O.rR({scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:t.nzCloseOnNavigation??s.nzCloseOnNavigation??!0,direction:t.nzDirection||s.nzDirection||this.directionality.value});return this.overlay.create(o)}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(O.hJ),e.KVO(e.zZn),e.KVO(_.yx),e.KVO(k.dS,8))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}return n})(),q=(()=>{class n{constructor(){this.nzScaleStep=null,this.images=[]}addImage(t){this.images.push(t)}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[e.aNF],ngContentSelectors:c,decls:1,vars:0,template:function(s,o){1&s&&(e.NAR(),e.SdG(0))},encapsulation:2,changeDetection:0})}return n})(),ae=(()=>{class n{get previewable(){return!this.nzDisablePreview&&"error"!==this.status}constructor(t,s,o,a,g,d,P){this.document=t,this.nzConfigService=s,this.elementRef=o,this.nzImageService=a,this.cdr=g,this.parentGroup=d,this.directionality=P,this._nzModuleName="image",this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new w.B7,this.destroy$=new w.B7}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe((0,z.Q)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){const t=this.parentGroup.images.filter(d=>d.previewable),s=t.map(d=>({src:d.nzSrc,srcset:d.nzSrcset})),o=t.findIndex(d=>this===d),a=new Map;t.forEach(d=>{a.set(d.nzSrc??d.nzSrcset,d.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??.5)}),this.nzImageService.preview(s,{nzDirection:this.dir},a).switchTo(o)}else this.nzImageService.preview([{src:this.nzSrc,srcset:this.nzSrcset}],{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??.5})}getElement(){return this.elementRef}ngOnChanges(t){const{nzSrc:s}=t;s&&(this.getElement().nativeElement.src=s.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new w.B7,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),(0,v.R)(this.backLoadImage,"load").pipe((0,z.Q)(this.backLoadDestroy$),(0,z.Q)(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),(0,v.R)(this.backLoadImage,"error").pipe((0,z.Q)(this.backLoadDestroy$),(0,z.Q)(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(i.qQ),e.rXU(_.yx),e.rXU(e.aKT),e.rXU(j),e.rXU(e.gRc),e.rXU(q,8),e.rXU(k.dS,8))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["img","nz-image",""]],hostBindings:function(s,o){1&s&&e.bIt("click",function(){return o.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[e.OA$]})}return(0,f.Cg)([(0,D.H3)(),(0,_.H4)()],n.prototype,"nzDisablePreview",void 0),(0,f.Cg)([(0,_.H4)()],n.prototype,"nzFallback",void 0),(0,f.Cg)([(0,_.H4)()],n.prototype,"nzPlaceholder",void 0),(0,f.Cg)([(0,_.H4)()],n.prototype,"nzScaleStep",void 0),n})(),re=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({providers:[j],imports:[J]})}return n})()}}]);