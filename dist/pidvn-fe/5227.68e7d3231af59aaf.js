"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[5227],{75227:(H,C,s)=>{s.r(C),s.d(C,{AdministratorModule:()=>M});var F=s(60177),f=s(46661),t=s(54438);let T=(()=>{class n{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-administrator"]],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[f.n3]})}return n})();var r=s(89417),k=s(45794),b=s(45312),j=s(21626);let g=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl=b.c.baseUrl}getPermissions(){return this.httpClient.get(`${this.baseUrl}/Administrator/Permissions`)}createPermission(e){return this.httpClient.post(`${this.baseUrl}/Administrator/Permissions`,e)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(j.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u=s(31958),a=s(23359),z=s(97529),R=s(50513),V=s(16389),v=s(25930),d=s(43053),p=s(38927),_=s(21011);function y(n,m){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s()()),2&n){const e=m.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.label),t.R7$(2),t.JRh(e.description)}}function $(n,m){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"form",9),t.bIt("ngSubmit",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.submitCreateForm())}),t.j41(2,"nz-form-item")(3,"nz-form-label",10),t.EFF(4,"Name"),t.k0s(),t.j41(5,"nz-form-control",11),t.nrm(6,"input",12),t.k0s()(),t.j41(7,"nz-form-item")(8,"nz-form-label",10),t.EFF(9,"Label"),t.k0s(),t.j41(10,"nz-form-control",11),t.nrm(11,"input",13),t.k0s()(),t.j41(12,"nz-form-item")(13,"nz-form-label",10),t.EFF(14,"Description"),t.k0s(),t.j41(15,"nz-form-control",14),t.nrm(16,"input",15),t.k0s()()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("formGroup",e.createForm),t.R7$(2),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6)}}let G=(()=>{class n{constructor(e,o,i){this.fb=e,this.toastr=o,this.permissionSvc=i,this.isVisibleCreateForm=!1}ngOnInit(){this.getPermissions(),this.createForm=this.fb.group({name:[null,[r.k0.required]],label:[null,[r.k0.required]],description:[null]})}getPermissions(){this.permissionSvc.getPermissions().subscribe(e=>{this.permissions=e,console.log(this.permissions)})}createPermission(){this.submitCreateForm()}submitCreateForm(){for(const e in this.createForm.controls)this.createForm.controls.hasOwnProperty(e)&&(this.createForm.controls[e].markAsDirty(),this.createForm.controls[e].updateValueAndValidity());this.createForm.valid&&this.permissionSvc.createPermission(this.createForm.value).subscribe(e=>{this.toastr.success("Success !"),this.getPermissions(),this.isVisibleCreateForm=!1})}resetForm(){this.createForm.reset();for(const e in this.createForm.controls)this.createForm.controls.hasOwnProperty(e)&&(this.createForm.controls[e].markAsPristine(),this.createForm.controls[e].updateValueAndValidity());this.isVisibleCreateForm=!1}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(r.ze),t.rXU(k.tw),t.rXU(g))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-permission"]],decls:25,vars:4,consts:[["permissionTable",""],[2,"text-align","center"],["nz-row","","nzJustify","end","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["nz-button","","nzType","primary",3,"click"],["nzBordered","","nzSize","small",2,"margin-top","10px",3,"nzData"],[4,"ngFor","ngForOf"],["nzTitle","T\u1ea1o m\u1edbi Permission",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],[4,"nzModalContent"],["nz-form","",3,"ngSubmit","formGroup"],[3,"nzSpan"],["nzErrorTip","Gi\xe1 tr\u1ecb kh\xf4ng h\u1ee3p l\u1ec7"],["type","text","nz-input","","formControlName","name","placeholder","Name","pattern","[_a-z]{3,}"],["type","text","nz-input","","formControlName","label","placeholder","Label"],["nzErrorTip","B\u1eaft bu\u1ed9c nh\u1eadp"],["type","text","nz-input","","formControlName","description","placeholder","Description"]],template:function(o,i){if(1&o){const l=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Administrator "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Permissions "),t.k0s()(),t.j41(5,"h2",1),t.EFF(6,"Danh s\xe1ch c\xe1c quy\u1ec1n trong h\u1ec7 th\u1ed1ng"),t.k0s(),t.j41(7,"div",2)(8,"div",3)(9,"button",4),t.bIt("click",function(){return t.eBV(l),t.Njj(i.isVisibleCreateForm=!0)}),t.EFF(10," Th\xeam m\u1edbi "),t.k0s()()(),t.j41(11,"nz-table",5,0)(13,"thead")(14,"tr")(15,"th"),t.EFF(16,"Name"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Label"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Description"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,y,7,3,"tr",6),t.k0s()(),t.j41(23,"nz-modal",7),t.mxI("nzVisibleChange",function(c){return t.eBV(l),t.DH7(i.isVisibleCreateForm,c)||(i.isVisibleCreateForm=c),t.Njj(c)}),t.bIt("nzOnOk",function(){return t.eBV(l),t.Njj(i.createPermission())})("nzOnCancel",function(){return t.eBV(l),t.Njj(i.resetForm())}),t.DNE(24,$,17,4,"ng-container",8),t.k0s()}if(2&o){const l=t.sdS(12);t.R7$(7),t.Y8G("nzGutter",24),t.R7$(4),t.Y8G("nzData",i.permissions),t.R7$(11),t.Y8G("ngForOf",l.data),t.R7$(),t.R50("nzVisible",i.isVisibleCreateForm)}},dependencies:[F.Sq,r.qT,r.me,r.BC,r.cb,r.R_,r.j4,r.JD,u.hL,u.K7,a.CP,a.SO,a._4,a.IL,a.aj,a.kt,z.Uq,z.e,R.aO,V.c,v.p,d.F2,d.A9,p.CA,p.Ls,p.Mo,p.zS,_.Sy]})}return n})(),U=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl=b.c.baseUrl}getRoles(){return this.httpClient.get(`${this.baseUrl}/Administrator/Roles`)}createRole(e){return this.httpClient.post(`${this.baseUrl}/Administrator/Roles`,e)}updateRole(e){return this.httpClient.put(`${this.baseUrl}/Administrator/Roles`,e)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(j.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S=s(35154),E=s(1997);function D(n,m){if(1&n){const e=t.RV6();t.j41(0,"tr",12),t.bIt("click",function(){const i=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onRoleClick(i))}),t.j41(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",13),t.EFF(6),t.k0s(),t.j41(7,"td",14),t.EFF(8),t.k0s()()}if(2&n){const e=m.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.label),t.R7$(),t.Y8G("nzTooltipTitle",e.description),t.R7$(),t.SpI(" ",e.description," "),t.R7$(),t.Y8G("nzTooltipTitle",e.permission),t.R7$(),t.SpI(" ",e.permission," ")}}function N(n,m){if(1&n&&t.nrm(0,"nz-option",24),2&n){const e=m.$implicit;t.Y8G("nzLabel",e.label)("nzValue",e.name)}}function P(n,m){if(1&n&&(t.qex(0),t.j41(1,"form",15)(2,"nz-form-item")(3,"nz-form-label",16),t.EFF(4,"Name"),t.k0s(),t.j41(5,"nz-form-control",17),t.nrm(6,"input",18),t.k0s()(),t.j41(7,"nz-form-item")(8,"nz-form-label",16),t.EFF(9,"Label"),t.k0s(),t.j41(10,"nz-form-control",17),t.nrm(11,"input",19),t.k0s()(),t.j41(12,"nz-form-item")(13,"nz-form-label",16),t.EFF(14,"Description"),t.k0s(),t.j41(15,"nz-form-control",20),t.nrm(16,"input",21),t.k0s()(),t.j41(17,"nz-form-item")(18,"nz-form-label",16),t.EFF(19,"Permission"),t.k0s(),t.j41(20,"nz-form-control",20)(21,"nz-select",22),t.DNE(22,N,1,2,"nz-option",23),t.k0s()()()(),t.bVm()),2&n){const e=t.XpG();t.R7$(),t.Y8G("formGroup",e.createForm),t.R7$(2),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(4),t.Y8G("ngForOf",e.permissions)}}function O(n,m){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelCreateRole())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveCreateRole())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}function A(n,m){if(1&n&&t.nrm(0,"nz-option",24),2&n){const e=m.$implicit;t.Y8G("nzLabel",e.label)("nzValue",e.name)}}function B(n,m){if(1&n&&(t.qex(0),t.j41(1,"form",15)(2,"nz-form-item")(3,"nz-form-label",16),t.EFF(4,"Name"),t.k0s(),t.j41(5,"nz-form-control",17),t.nrm(6,"input",18),t.k0s()(),t.j41(7,"nz-form-item")(8,"nz-form-label",16),t.EFF(9,"Label"),t.k0s(),t.j41(10,"nz-form-control",17),t.nrm(11,"input",19),t.k0s()(),t.j41(12,"nz-form-item")(13,"nz-form-label",16),t.EFF(14,"Description"),t.k0s(),t.j41(15,"nz-form-control",20),t.nrm(16,"input",21),t.k0s()(),t.j41(17,"nz-form-item")(18,"nz-form-label",16),t.EFF(19,"Permission"),t.k0s(),t.j41(20,"nz-form-control",20)(21,"nz-select",26),t.DNE(22,A,1,2,"nz-option",23),t.k0s()()()(),t.bVm()),2&n){const e=t.XpG();t.R7$(),t.Y8G("formGroup",e.updateForm),t.R7$(2),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(5),t.Y8G("nzSpan",6),t.R7$(4),t.Y8G("ngForOf",e.permissions)}}function Y(n,m){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelUpdateRole())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveUpdateRole())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}let I=(()=>{class n{constructor(e,o,i,l){this.fb=e,this.roleSvc=o,this.permissionSvc=i,this.toastr=l,this.isVisibleCreateForm=!1,this.isVisibleUpdateForm=!1}ngOnInit(){this.getRoles(),this.getPermission(),this.createForm=this.fb.group({name:[null,[r.k0.required]],label:[null,[r.k0.required]],description:[null,[r.k0.required]],permission:[null]})}getRoles(){this.roleSvc.getRoles().subscribe(e=>{this.roles=e})}getPermission(){this.permissionSvc.getPermissions().subscribe(e=>{this.permissions=e})}cancelCreateRole(){this.createForm.reset();for(const e in this.createForm.controls)this.createForm.controls.hasOwnProperty(e)&&(this.createForm.controls[e].markAsPristine(),this.createForm.controls[e].updateValueAndValidity());this.isVisibleCreateForm=!1}saveCreateRole(){for(const o in this.createForm.controls)this.createForm.controls.hasOwnProperty(o)&&(this.createForm.controls[o].markAsDirty(),this.createForm.controls[o].updateValueAndValidity());if(!this.createForm.valid)return;let e={...this.createForm.value};e.permission=JSON.stringify(e.permission),console.log(e),this.roleSvc.createRole(e).subscribe(o=>{this.toastr.success("Success !"),this.isVisibleCreateForm=!1,this.getRoles()})}onRoleClick(e){this.roleSelected=e,this.updateForm=this.fb.group({id:[this.roleSelected.id],name:[this.roleSelected.name,[r.k0.required]],label:[this.roleSelected.label,[r.k0.required]],description:[this.roleSelected.description,[r.k0.required]],permission:[JSON.parse(this.roleSelected.permission)]}),this.isVisibleUpdateForm=!0}cancelUpdateRole(){this.updateForm.reset(),this.isVisibleUpdateForm=!1}saveUpdateRole(){if(!this.updateForm.valid)return;let e={...this.updateForm.value};e.permission=JSON.stringify(e.permission),console.log(e),this.roleSvc.updateRole(e).subscribe(o=>{this.toastr.success("Success !"),this.isVisibleUpdateForm=!1,this.getRoles()})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(r.ze),t.rXU(U),t.rXU(g),t.rXU(k.tw))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-role"]],decls:31,vars:5,consts:[["roleTable",""],[2,"text-align","center"],["nz-row","","nzJustify","end","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["nz-button","","nzType","primary",3,"click"],["nzBordered","","nzSize","small","nzTableLayout","fixed",2,"margin-top","10px",3,"nzData"],["nzEllipsis",""],[3,"click",4,"ngFor","ngForOf"],["nzTitle","T\u1ea1o m\u1edbi Role",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Update Role",3,"nzVisibleChange","nzVisible"],[3,"click"],["nzEllipsis","","nz-tooltip","","nzTooltipColor","cyan",3,"nzTooltipTitle"],["nzEllipsis","","nz-tooltip","","nzTooltipColor","green",3,"nzTooltipTitle"],["nz-form","",3,"formGroup"],[3,"nzSpan"],["nzErrorTip","Gi\xe1 tr\u1ecb kh\xf4ng h\u1ee3p l\u1ec7"],["type","text","nz-input","","formControlName","name","placeholder","Name","pattern","[_a-z]{3,}"],["type","text","nz-input","","formControlName","label","placeholder","Label"],["nzErrorTip","B\u1eaft bu\u1ed9c nh\u1eadp"],["type","text","nz-input","","formControlName","description","placeholder","Description"],["nzMode","tags","nzPlaceHolder","Permission","formControlName","permission"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","default",3,"click"],["nzMode","multiple","nzPlaceHolder","Permission","formControlName","permission"]],template:function(o,i){if(1&o){const l=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Administrator "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Roles "),t.k0s()(),t.j41(5,"h2",1),t.EFF(6,"Danh s\xe1ch Role"),t.k0s(),t.j41(7,"div",2)(8,"div",3)(9,"button",4),t.bIt("click",function(){return t.eBV(l),t.Njj(i.isVisibleCreateForm=!0)}),t.EFF(10," Th\xeam m\u1edbi "),t.k0s()()(),t.j41(11,"nz-table",5,0)(13,"thead")(14,"tr")(15,"th"),t.EFF(16,"Name"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Label"),t.k0s(),t.j41(19,"th",6),t.EFF(20,"Description"),t.k0s(),t.j41(21,"th",6),t.EFF(22,"Permission"),t.k0s()()(),t.j41(23,"tbody"),t.DNE(24,D,9,6,"tr",7),t.k0s()(),t.j41(25,"nz-modal",8),t.mxI("nzVisibleChange",function(c){return t.eBV(l),t.DH7(i.isVisibleCreateForm,c)||(i.isVisibleCreateForm=c),t.Njj(c)}),t.DNE(26,P,23,6,"ng-container",9)(27,O,5,0,"div",10),t.k0s(),t.j41(28,"nz-modal",11),t.mxI("nzVisibleChange",function(c){return t.eBV(l),t.DH7(i.isVisibleUpdateForm,c)||(i.isVisibleUpdateForm=c),t.Njj(c)}),t.DNE(29,B,23,6,"ng-container",9)(30,Y,5,0,"div",10),t.k0s()}if(2&o){const l=t.sdS(12);t.R7$(7),t.Y8G("nzGutter",24),t.R7$(4),t.Y8G("nzData",i.roles),t.R7$(13),t.Y8G("ngForOf",l.data),t.R7$(),t.R50("nzVisible",i.isVisibleCreateForm),t.R7$(3),t.R50("nzVisible",i.isVisibleUpdateForm)}},dependencies:[F.Sq,r.qT,r.me,r.BC,r.cb,r.R_,r.j4,r.JD,u.hL,u.K7,a.CP,a.SO,a._4,a.IL,a.aj,a.kt,a.$w,z.Uq,z.e,R.aO,V.c,v.p,d.F2,d.Oj,d.A9,p.CA,p.Ls,p.Mo,p.zS,_.Sy,S.LH,E.ld,E.WI]})}return n})(),L=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl=b.c.baseUrl}getUsers(e){return this.httpClient.post(`${this.baseUrl}/Administrator/Users`,e)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(j.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x(n,m){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.k0s()()),2&n){const e=m.$implicit;t.R7$(2),t.JRh(e.username),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(t.i5U(7,7,e.joinDate,"yyyy-MM-dd")),t.R7$(3),t.JRh(e.email),t.R7$(2),t.JRh(e.positionName),t.R7$(2),t.JRh(e.sectionName),t.R7$(2),t.JRh(e.subsectionName)}}const J=[{path:"",component:T,children:[{path:"users",component:(()=>{class n{constructor(e){this.userSvc=e}ngOnInit(){this.getUsers({})}getUsers(e){this.userSvc.getUsers(e).subscribe(o=>{this.users=o})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(L))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-user"]],decls:27,vars:2,consts:[["userTable",""],[2,"text-align","center"],["nzBordered","","nzSize","small",2,"margin-top","10px",3,"nzData"],[4,"ngFor","ngForOf"]],template:function(o,i){if(1&o&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Administrator "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Users "),t.k0s()(),t.j41(5,"h2",1),t.EFF(6,"Danh s\xe1ch nh\xe2n vi\xean"),t.k0s(),t.j41(7,"nz-table",2,0)(9,"thead")(10,"tr")(11,"th"),t.EFF(12,"Username"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Name"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Join Date"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Email"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Position"),t.k0s(),t.j41(21,"th"),t.EFF(22,"Section"),t.k0s(),t.j41(23,"th"),t.EFF(24,"SubSection"),t.k0s()()(),t.j41(25,"tbody"),t.DNE(26,x,16,10,"tr",3),t.k0s()()),2&o){const l=t.sdS(8);t.R7$(7),t.Y8G("nzData",i.users),t.R7$(19),t.Y8G("ngForOf",l.data)}},dependencies:[F.Sq,u.hL,u.K7,a.CP,a.SO,a._4,a.IL,a.aj,a.kt,F.vh]})}return n})()},{path:"roles",component:I},{path:"permissions",component:G}]}];let X=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[f.iI.forChild(J),f.iI]})}return n})(),M=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[F.MD,X,r.YN,r.X1,u.EJ,a.$G,z.f3,R.Zw,d.U6,p.PQ,_.j,S.Qt,E.DH]})}return n})()}}]);