"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[3971],{33971:(O,M,r)=>{r.r(M),r.d(M,{RelayInventoryModule:()=>zt});var E=r(60177),i=r(33514),d=r(12673),b=r(31958),_=r(23359),C=r(46661),t=r(54438),F=r(45794),j=r(45312),N=r(21626);let T=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl=j.c.baseUrl}getInventoryRequests(){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/Requests`)}getInventoryRequest(e){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/Request/${e}`)}scanMaterial(e){return this.httpClient.post(`${this.baseUrl}/Relay/Inventory/ScanMaterial`,e)}getRelayInventories(e){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/RelayInventories?reqNo=${e}`)}createInventoryRequest(e){return this.httpClient.post(`${this.baseUrl}/Relay/Inventory/Request`,e)}saveRelayInventory(e){return this.httpClient.post(`${this.baseUrl}/Relay/Inventory/RelayInventory`,e)}getBalances(e){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/Balances?reqId=${e}`)}static#t=this.\u0275fac=function(a){return new(a||n)(t.KVO(N.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=r(31837),x=r(23617),f=r(66646),D=r(9541);const m=()=>[10,25,50,100];function z(n,y){1&n&&(t.j41(0,"nz-spin",17),t.nrm(1,"nz-alert",18),t.k0s())}function g(n,y){if(1&n){const e=t.RV6();t.j41(0,"dx-data-grid",5),t.bIt("onExporting",function(o){t.eBV(e);const u=t.XpG();return t.Njj(u.onExportBalance(o))}),t.nrm(1,"dxo-export",6)(2,"dxo-paging",7)(3,"dxo-filter-row",8)(4,"dxi-column",19)(5,"dxi-column",10)(6,"dxi-column",20)(7,"dxi-column",21)(8,"dxi-column",22)(9,"dxi-column",12)(10,"dxi-column",23)(11,"dxo-pager",16),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("dataSource",e.balances)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(),t.Y8G("pageSize",15),t.R7$(),t.Y8G("visible",!0),t.R7$(8),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(12,m))}}let S=(()=>{class n{constructor(e,a,o){this.toastr=e,this.reIvtSvc=a,this.activatedRoute=o,this.isShowSpin=!0}ngOnInit(){this.getInventoryRequest(),this.getBalances()}getBalances(){let e=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.reIvtSvc.getBalances(e).subscribe(a=>{this.isShowSpin=!1,this.balances=a})}getInventoryRequest(){let e=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.reIvtSvc.getInventoryRequest(e).subscribe(a=>{this.ivtReq=a,this.getInventories()})}getInventories(){this.reIvtSvc.getRelayInventories(this.ivtReq.reqNo).subscribe(e=>{this.inventories=e})}onExportBalance(e){}onExportInventory(e){}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(F.tw),t.rXU(T),t.rXU(C.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-balance"]],decls:27,vars:27,consts:[[2,"margin-left","-20px"],["nzTitle","Ch\xeanh l\u1ec7ch L\xfd thuy\u1ebft v\xe0 Th\u1ef1c t\u1ebf"],["nzTip","H\u1ec7 th\u1ed1ng \u0111ang t\xednh to\xe1n ch\xeanh l\u1ec7ch...",4,"ngIf"],["keyExpr","id",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled","onExporting",4,"ngIf"],["nzTitle","D\u1eef li\u1ec7u ki\u1ec3m k\xea th\u1ef1c t\u1ebf"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],[3,"pageSize"],[3,"visible"],["dataField","partNo","caption","Part No",3,"groupIndex"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","Line"],["column","partNo","summaryType","count","displayFormat","{0} parts"],["column","qty","summaryType","sum",3,"showInGroupFooter","alignByColumn"],["summaryItem","count"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTip","H\u1ec7 th\u1ed1ng \u0111ang t\xednh to\xe1n ch\xeanh l\u1ec7ch..."],["nzType","info","nzMessage","T\xednh to\xe1n ch\xeanh l\u1ec7ch","nzDescription","H\u1ec7 th\u1ed1ng \u0111ang x\u1eed l\xfd t\xednh to\xe1n d\u1eef li\u1ec7u ch\xeanh l\u1ec7ch"],["dataField","partNo","caption","Part No"],["dataField","systemStock","caption","Stock (H\u1ec7 th\u1ed1ng)","dataType","number","format","#,##0"],["dataField","actualStock","caption","Stock (Th\u1ef1c t\u1ebf)","dataType","number","format","#,##0"],["dataField","balance","caption","Ch\xeanh l\u1ec7ch","dataType","number","format","#,##0"],["dataField","remark","caption","Ghi ch\xfa"]],template:function(a,o){1&a&&(t.j41(0,"ul",0)(1,"li"),t.EFF(2),t.k0s(),t.j41(3,"li"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"li"),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"nz-tabset")(10,"nz-tab",1),t.DNE(11,z,2,0,"nz-spin",2)(12,g,12,13,"dx-data-grid",3),t.k0s(),t.j41(13,"nz-tab",4)(14,"dx-data-grid",5),t.bIt("onExporting",function(I){return o.onExportInventory(I)}),t.nrm(15,"dxo-export",6)(16,"dxo-paging",7)(17,"dxo-filter-row",8)(18,"dxi-column",9)(19,"dxi-column",10)(20,"dxi-column",11)(21,"dxi-column",12),t.j41(22,"dxo-summary"),t.nrm(23,"dxi-group-item",13)(24,"dxi-group-item",14),t.k0s(),t.nrm(25,"dxi-sort-by-group-summary-info",15)(26,"dxo-pager",16),t.k0s()()()),2&a&&(t.R7$(2),t.SpI("Request No: ",null==o.ivtReq?null:o.ivtReq.reqNo,""),t.R7$(2),t.SpI("Cut Off: ",t.i5U(5,20,null==o.ivtReq?null:o.ivtReq.cutOff,"yyyy-MM-dd"),""),t.R7$(3),t.SpI("Inventory Date: ",t.i5U(8,23,null==o.ivtReq?null:o.ivtReq.inventoryDate,"yyyy-MM-dd"),""),t.R7$(4),t.Y8G("ngIf",o.isShowSpin),t.R7$(),t.Y8G("ngIf",!o.isShowSpin),t.R7$(2),t.Y8G("dataSource",o.inventories)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(),t.Y8G("pageSize",15),t.R7$(),t.Y8G("visible",!0),t.R7$(),t.Y8G("groupIndex",0),t.R7$(6),t.Y8G("showInGroupFooter",!1)("alignByColumn",!0),t.R7$(2),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(26,m)))},dependencies:[E.bT,d.s,h.nj_,h.ZJU,h.FTx,h.sVQ,h.PVd,h.x$q,h.XvM,h.ryC,x.Y,f.a,D.JZ,D.rE,E.vh]})}return n})();var k=r(89417),w=r(27380),B=r(97529),l=r(21011),v=r(43053),s=r(50513),c=r(16389),p=r(25930);const $=["infoIpt"],V=["qrCodeIpt"],P=()=>[""],L=n=>["/admin/relay/relay-inventory/balance",n],q=()=>[10,25,50,100];function U(n,y){if(1&n){const e=t.RV6();t.j41(0,"div",31),t.bIt("click",function(){const o=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.openDetailModal(o.data))}),t.j41(1,"a"),t.EFF(2,"S\u1eeda"),t.k0s()()}}function Y(n,y){if(1&n&&t.nrm(0,"nz-alert",36),2&n){const e=t.XpG(2);t.Y8G("nzMessage",e.lotErrMsg)}}function X(n,y){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td",31),t.bIt("click",function(){const o=t.eBV(e).$implicit,u=t.XpG(2);return t.Njj(u.openDetailModal(o))}),t.j41(11,"a"),t.EFF(12,"S\u1eeda"),t.k0s()()()}if(2&n){const e=y.$implicit;t.R7$(2),t.JRh(e.partNo),t.R7$(2),t.JRh(e.lotNo),t.R7$(2),t.JRh(t.i5U(7,4,e.qty,"1.0-3")),t.R7$(3),t.JRh(e.line)}}function W(n,y){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",5)(2,"input",32,2),t.bIt("keydown.enter",function(o){t.eBV(e);const u=t.XpG();return t.Njj(u.scanMaterial(o))})("click",function(){t.eBV(e);const o=t.sdS(3);return t.Njj(o.select())}),t.k0s(),t.DNE(4,Y,1,1,"nz-alert",33),t.j41(5,"nz-table",34,3)(7,"thead")(8,"tr")(9,"th"),t.EFF(10,"Part No"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Lot No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Qty"),t.k0s(),t.j41(15,"th"),t.EFF(16,"V\u1ecb tr\xed"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Action"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,X,13,7,"tr",35),t.k0s()()(),t.bVm()}if(2&n){const e=t.sdS(6),a=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.Y8G("ngIf",a.lotErrMsg),t.R7$(),t.Y8G("nzData",a.materialScanned),t.R7$(15),t.Y8G("ngForOf",e.data)}}function K(n,y){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",37),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeScanMaterialModal())}),t.EFF(2," OK "),t.k0s()()}}function H(n,y){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"nz-table",38,4)(3,"tbody")(4,"tr")(5,"td")(6,"label"),t.EFF(7,"Part No"),t.k0s()(),t.j41(8,"td"),t.EFF(9),t.k0s()(),t.j41(10,"tr")(11,"td")(12,"label"),t.EFF(13,"Lot No"),t.k0s()(),t.j41(14,"td"),t.EFF(15),t.k0s()(),t.j41(16,"tr")(17,"td")(18,"label"),t.EFF(19,"Qty"),t.k0s()(),t.j41(20,"td")(21,"input",39),t.mxI("ngModelChange",function(o){t.eBV(e);const u=t.XpG();return t.DH7(u.lotSelected.qty,o)||(u.lotSelected.qty=o),t.Njj(o)}),t.k0s()()(),t.j41(22,"tr")(23,"td")(24,"label"),t.EFF(25,"Line"),t.k0s()(),t.j41(26,"td"),t.EFF(27),t.k0s()()()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("nzData",t.lJ4(5,P)),t.R7$(8),t.JRh(e.lotSelected.partNo),t.R7$(6),t.JRh(e.lotSelected.lotNo),t.R7$(6),t.R50("ngModel",e.lotSelected.qty),t.R7$(6),t.JRh(e.lotSelected.line)}}function J(n,y){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",40),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelEdit())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",37),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveChange())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}let Q=(()=>{class n{constructor(e,a,o){this.toastr=e,this.reIvtSvc=a,this.route=o,this.infoScan={username:null,position:null},this.lotErrMsg=null,this.isOpenScanMaterialModal=!1,this.isOpenLotDetailModal=!1,this.materialScanned=new Array}ngOnInit(){this.getInventoryRequest()}ngAfterViewInit(){setTimeout(()=>{this.infoIpt.nativeElement.focus()},0)}scanInfo(e){let a=e.target.value;if(this.infoIpt.nativeElement.select(),a.includes("*")&&a.includes(";")&&a.includes("-")){if(!this.infoScan.username||!this.infoScan.position)return void this.toastr.warning("C\u1ea7n scan User v\xe0 V\u1ecb tr\xed ki\u1ec3m k\xea !","Warning");if(this.infoScan.username&&this.infoScan.position)return}/^\d+$/.test(a)?this.infoScan.username=a:this.infoScan.position=a,this.infoScan.username&&this.infoScan.position&&this.openScanQRCodeModal()}getInventoryRequest(){let e=Number(this.route.snapshot.paramMap.get("id"));this.reIvtSvc.getInventoryRequest(e).subscribe(a=>{this.reqNo=a.reqNo,this.getRelayInventories(this.reqNo)})}getRelayInventories(e){this.reIvtSvc.getRelayInventories(e).subscribe(a=>{this.relayInventories=a})}openScanQRCodeModal(){this.isOpenScanMaterialModal=!0,setTimeout(()=>{this.qrCodeIpt.nativeElement.select()},500)}scanMaterial(e){if(!e.target.value)return void this.toastr.warning("C\u1ea7n scan tem NVL","Warning");this.qrCodeIpt.nativeElement.select();let a=e.target.value.split(";"),o={reqNo:this.reqNo,date:new Date,recordType:"IVT",partNo:a[0],lotNo:a[3],qty:Number(a[2]),createdBy:this.infoScan.username,line:this.infoScan.position};this.reIvtSvc.scanMaterial(o).subscribe(u=>{"OK"==u.status?(this.lotErrMsg=null,this.materialScanned.push(u.data),this.materialScanned=[...this.materialScanned.reverse()]):"ERROR"==u.status&&(this.lotErrMsg=u.message)})}closeScanMaterialModal(){this.lotErrMsg=null,this.isOpenScanMaterialModal=!1,this.infoScan.username=null,this.infoScan.position=null,this.materialScanned=new Array,this.reIvtSvc.getRelayInventories(this.reqNo).subscribe(e=>{this.relayInventories=e})}openDetailModal(e){this.isOpenLotDetailModal=!0,this.lotSelected=e}saveChange(){console.log(this.lotSelected),this.reIvtSvc.saveRelayInventory(this.lotSelected).subscribe(e=>{this.isOpenLotDetailModal=!1})}cancelEdit(){this.isOpenLotDetailModal=!1}onExportClient(e){}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(F.tw),t.rXU(T),t.rXU(C.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-execute"]],viewQuery:function(a,o){if(1&a&&(t.GBs($,5),t.GBs(V,5)),2&a){let u;t.mGM(u=t.lsd())&&(o.infoIpt=u.first),t.mGM(u=t.lsd())&&(o.qrCodeIpt=u.first)}},decls:54,vars:27,consts:[["infoTbl",""],["infoIpt",""],["qrCodeIpt",""],["scannedTbl",""],["detailTbl",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["width","33%"],["colspan","3"],["id","infoIpt","nz-input","","placeholder","Scan ng\u01b0\u1eddi ki\u1ec3m k\xea v\xe0 v\u1ecb tr\xed ki\u1ec3m k\xea","autocomplete","off",2,"font-weight","bold",3,"keydown.enter","click"],["nz-row","","nzJustify","start","nzAlign","middle",2,"margin-top","-25px",3,"nzGutter"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],["location","before"],[1,"ivt-data"],[1,"balance",3,"routerLink"],["name","exportButton"],[3,"pageSize"],[3,"visible"],["dataField","partNo","caption","Part No"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","V\u1ecb tr\xed"],["caption","Action","cellTemplate","cellTemplate","alignment","center"],["style","text-align: center",3,"click",4,"dxTemplate","dxTemplateOf"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Scan ki\u1ec3m k\xea NVL","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Th\xf4ng tin NVL","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[2,"text-align","center",3,"click"],["nz-input","","placeholder","Scan m\xe3 QR nguy\xean v\u1eadt li\u1ec7u",2,"font-weight","bold",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["id","scannedTbl","nzBordered","","nzSize","small","nzFrontPagination","true",2,"margin-top","15px",3,"nzData"],[4,"ngFor","ngForOf"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],["nz-button","","nzType","primary",3,"click"],["id","detailTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["nz-input","","type","number",3,"ngModelChange","ngModel"],["nz-button","","nzType","default",3,"click"]],template:function(a,o){if(1&a){const u=t.RV6();t.j41(0,"div",5)(1,"div",6)(2,"nz-table",7,0)(4,"thead")(5,"tr")(6,"th",8)(7,"label"),t.EFF(8,"Request: "),t.k0s(),t.j41(9,"span"),t.EFF(10),t.k0s()(),t.j41(11,"th",8)(12,"label"),t.EFF(13,"User: "),t.k0s(),t.j41(14,"span"),t.EFF(15),t.k0s()(),t.j41(16,"th",8)(17,"label"),t.EFF(18,"V\u1ecb tr\xed: "),t.k0s(),t.j41(19,"span"),t.EFF(20),t.k0s()()()(),t.j41(21,"tbody")(22,"tr")(23,"td",9)(24,"input",10,1),t.bIt("keydown.enter",function(R){return t.eBV(u),t.Njj(o.scanInfo(R))})("click",function(){t.eBV(u);const R=t.sdS(25);return t.Njj(R.select())}),t.k0s()()()()()()(),t.j41(26,"div",11)(27,"div",6)(28,"dx-data-grid",12),t.bIt("onExporting",function(R){return t.eBV(u),t.Njj(o.onExportClient(R))}),t.nrm(29,"dxo-export",13),t.j41(30,"dxo-toolbar")(31,"dxi-item",14)(32,"span",15),t.EFF(33,"Danh s\xe1ch NVL th\u1ef1c t\u1ebf ki\u1ec3m k\xea"),t.k0s()(),t.j41(34,"dxi-item")(35,"span",16),t.EFF(36,"Xem ch\xeanh l\u1ec7ch "),t.k0s()(),t.nrm(37,"dxi-item",17),t.k0s(),t.nrm(38,"dxo-paging",18)(39,"dxo-filter-row",19)(40,"dxi-column",20)(41,"dxi-column",21)(42,"dxi-column",22)(43,"dxi-column",23)(44,"dxi-column",24),t.DNE(45,U,3,0,"div",25),t.nrm(46,"dxo-paging",18)(47,"dxo-pager",26),t.k0s()()(),t.j41(48,"nz-modal",27),t.mxI("nzVisibleChange",function(R){return t.eBV(u),t.DH7(o.isOpenScanMaterialModal,R)||(o.isOpenScanMaterialModal=R),t.Njj(R)}),t.DNE(49,W,21,4,"ng-container",28)(50,K,3,0,"div",29),t.k0s(),t.j41(51,"nz-modal",30),t.mxI("nzVisibleChange",function(R){return t.eBV(u),t.DH7(o.isOpenLotDetailModal,R)||(o.isOpenLotDetailModal=R),t.Njj(R)}),t.DNE(52,H,28,6,"ng-container",28)(53,J,5,0,"div",29),t.k0s()}2&a&&(t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("nzData",t.lJ4(23,P)),t.R7$(8),t.JRh(o.reqNo),t.R7$(5),t.JRh(o.infoScan.username),t.R7$(5),t.JRh(o.infoScan.position),t.R7$(6),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("dataSource",o.relayInventories)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(6),t.Y8G("routerLink",t.eq3(24,L,o.route.snapshot.paramMap.get("id"))),t.R7$(3),t.Y8G("pageSize",10),t.R7$(),t.Y8G("visible",!0),t.R7$(6),t.Y8G("dxTemplateOf","cellTemplate"),t.R7$(),t.Y8G("pageSize",10),t.R7$(),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(26,q)),t.R7$(),t.R50("nzVisible",o.isOpenScanMaterialModal),t.R7$(3),t.R50("nzVisible",o.isOpenLotDetailModal))},dependencies:[E.Sq,E.bT,k.me,k.Q0,k.BC,k.vS,C.Wk,w.eC,d.s,h.nj_,h.CVf,h.ZJU,h.FTx,h.sVQ,h.PVd,h.KOr,_.CP,_.SO,_._4,_.IL,_.aj,_.kt,B.Uq,B.e,l.Sy,v.F2,v.Oj,v.A9,x.Y,s.aO,c.c,p.p,E.QX],styles:["nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}nz-table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:green;font-weight:700}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}.ivt-data[_ngcontent-%COMP%]{font-style:italic;color:#00f}.balance[_ngcontent-%COMP%]{color:green;float:right;cursor:pointer}"]})}return n})();function Z(n,y){if(1&n&&(t.j41(0,"tr")(1,"td",3),t.EFF(2),t.k0s(),t.j41(3,"td",4)(4,"a"),t.EFF(5),t.k0s()()()),2&n){const e=y.$implicit,a=y.index;t.R7$(2),t.JRh(a+1),t.R7$(),t.Y8G("routerLink",e.route),t.R7$(2),t.JRh(e.name)}}let tt=(()=>{class n{constructor(){this.menu=[{name:"Phi\u1ebfu ki\u1ec3m k\xea",route:"/admin/relay/relay-inventory/requests"}]}ngOnInit(){}static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-main"]],decls:18,vars:2,consts:[["menuTable",""],["nzBordered","","nzFrontPagination","false",3,"nzData"],[4,"ngFor","ngForOf"],[2,"width","100px","text-align","center"],[3,"routerLink"]],template:function(a,o){if(1&a&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Kho trung chuy\u1ec3n "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Ki\u1ec3m k\xea menu "),t.k0s()(),t.nrm(7,"br"),t.j41(8,"nz-table",1,0)(10,"thead")(11,"tr")(12,"th"),t.EFF(13,"STT"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Action"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,Z,6,3,"tr",2),t.k0s()()),2&a){const u=t.sdS(9);t.R7$(8),t.Y8G("nzData",o.menu),t.R7$(9),t.Y8G("ngForOf",u.data)}},dependencies:[E.Sq,C.Wk,b.hL,b.K7,_.CP,_.SO,_._4,_.IL,_.aj,_.kt],styles:["nz-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-weight:700}"]})}return n})();var et=r(86372),nt=r(37736),A=r(35154),G=r(58960);const ot=()=>[10,25,50,100],at=n=>["/admin/relay/relay-inventory/execute",n],it=n=>["/admin/relay/relay-inventory/balance",n],st=()=>[""];function rt(n,y){1&n&&(t.j41(0,"div"),t.EFF(1," This content is not shown "),t.k0s())}function lt(n,y){if(1&n&&(t.j41(0,"a",19),t.EFF(1," Ki\u1ec3m k\xea "),t.k0s()),2&n){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(1,at,e.data.id))}}function ct(n,y){if(1&n&&(t.j41(0,"a",20),t.EFF(1," Balance "),t.k0s()),2&n){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(3,it,e.data.id))("nzTooltipTitle","Hi\u1ec3n th\u1ecb ch\xeanh l\u1ec7ch l\xfd thuy\u1ebft v\xe0 th\u1ef1c t\u1ebf")("nzTooltipColor","green")}}function ut(n,y){if(1&n&&(t.j41(0,"div",17),t.DNE(1,rt,2,0,"div",18)(2,lt,2,3,"ng-template",null,0,t.C5r)(4,ct,2,5,"ng-template",null,1,t.C5r),t.k0s()),2&n){const e=y.$implicit,a=t.sdS(3),o=t.sdS(5);t.R7$(),t.Y8G("ngIf",e.data.expired)("ngIfThen",a)("ngIfElse",o)}}function dt(n,y){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"nz-table",21)(2,"tbody")(3,"tr")(4,"td")(5,"label",22),t.EFF(6,"Cut Off"),t.k0s()(),t.j41(7,"td")(8,"nz-date-picker",23),t.mxI("ngModelChange",function(o){t.eBV(e);const u=t.XpG();return t.DH7(u.cutOffDate,o)||(u.cutOffDate=o),t.Njj(o)}),t.bIt("ngModelChange",function(o){t.eBV(e);const u=t.XpG();return t.Njj(u.onChange(o))}),t.k0s()()()()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("nzData",t.lJ4(3,st)),t.R7$(7),t.R50("ngModel",e.cutOffDate),t.Y8G("nzDisabledDate",e.disabledDate)}}function pt(n,y){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",24),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelRequest())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",25),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createRequest())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}const ht=[{path:"main",component:tt},{path:"requests",component:(()=>{class n{constructor(e,a,o){this.toastr=e,this.reIvtSvc=a,this.jwtHelperSvc=o,this.today=new Date,this.requests=[],this.cutOffDate=null,this.isOpenIvtCreateModal=!1,this.disabledDate=u=>(0,et.A)(u,this.today)>0}ngOnInit(){this.getInventoryRequests()}getInventoryRequests(){this.reIvtSvc.getInventoryRequests().subscribe(e=>{this.requests=e})}onChange(e){console.log("onChange: ",e)}cancelRequest(){this.cutOffDate=null,this.isOpenIvtCreateModal=!1}createRequest(){if(this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()),!this.cutOffDate)return void this.toastr.warning("C\u1ea7n ch\u1ecdn ng\xe0y Cut Off !","Warning");let a={cutOff:this.cutOffDate,createdBy:this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username};this.reIvtSvc.createInventoryRequest(a).subscribe(o=>{this.toastr.success("Success !","OK"),this.isOpenIvtCreateModal=!1,this.getInventoryRequests()})}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(F.tw),t.rXU(T),t.rXU(nt.X7))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-request"]],decls:23,vars:14,consts:[["inventory",""],["balance",""],["keyExpr","id",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["location","before"],["stylingMode","contained","type","success","icon","plus","text","T\u1ea1o phi\u1ebfu ki\u1ec3m k\xea",3,"onClick"],[3,"pageSize"],[3,"visible"],["dataField","reqNo","caption","Request No"],["dataField","cutOff","dataType","date","caption","Cut Off","format","yyyy-MM-dd"],["dataField","inventoryDate","dataType","date","caption","Ng\xe0y ki\u1ec3m k\xea","format","yyyy-MM-dd"],["dataField","createdBy","caption","Ng\u01b0\u1eddi t\u1ea1o"],["caption","Action","cellTemplate","cellTemplate","alignment","center"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","T\u1ea1o phi\u1ebfu ki\u1ec3m k\xea",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],[2,"text-align","center"],[4,"ngIf","ngIfThen","ngIfElse"],[2,"color","blue",3,"routerLink"],["nz-tooltip","",2,"color","green",3,"routerLink","nzTooltipTitle","nzTooltipColor"],["nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],[2,"font-weight","bold"],[2,"width","100%",3,"ngModelChange","ngModel","nzDisabledDate"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(a,o){1&a&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Ki\u1ec3m k\xea NVL "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Phi\u1ebfu ki\u1ec3m k\xea "),t.k0s()(),t.j41(7,"dx-data-grid",2)(8,"dxo-toolbar")(9,"dxi-item",3)(10,"dx-button",4),t.bIt("onClick",function(){return o.isOpenIvtCreateModal=!0}),t.k0s()()(),t.nrm(11,"dxo-paging",5)(12,"dxo-filter-row",6)(13,"dxi-column",7)(14,"dxi-column",8)(15,"dxi-column",9)(16,"dxi-column",10)(17,"dxi-column",11),t.DNE(18,ut,6,3,"div",12),t.nrm(19,"dxo-pager",13),t.k0s(),t.j41(20,"nz-modal",14),t.mxI("nzVisibleChange",function(I){return t.DH7(o.isOpenIvtCreateModal,I)||(o.isOpenIvtCreateModal=I),I}),t.DNE(21,dt,9,4,"ng-container",15)(22,pt,5,0,"div",16),t.k0s()),2&a&&(t.R7$(7),t.Y8G("dataSource",o.requests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(4),t.Y8G("pageSize",10),t.R7$(),t.Y8G("visible",!0),t.R7$(6),t.Y8G("dxTemplateOf","cellTemplate"),t.R7$(),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(13,ot)),t.R7$(),t.R50("nzVisible",o.isOpenIvtCreateModal))},dependencies:[E.bT,k.BC,k.vS,C.Wk,b.hL,b.K7,i.e,w.eC,d.s,h.nj_,h.CVf,h.FTx,h.sVQ,h.PVd,h.KOr,_.CP,_.SO,_.aj,_.kt,v.F2,v.Oj,v.A9,A.LH,s.aO,c.c,p.p,G.SN]})}return n})()},{path:"execute/:id",component:Q},{path:"balance/:id",component:S}];let mt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[C.iI.forChild(ht),C.iI]})}return n})();var gt=r(75699),_t=r(61912);let zt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[E.MD,k.YN,mt,b.EJ,i.L,d.N,_.$G,B.f3,l.j,gt.T,v.U6,x.$,A.Qt,s.Zw,G.LE,_t.i3,f.V,D.hM]})}return n})()},61912:(O,M,r)=>{r.d(M,{Bi:()=>w,i3:()=>B});var E=r(60177),i=r(54438),d=r(70317),b=r(15215);const C=["nzType","avatar"],j=["*"];function N(l,v){if(1&l&&(i.j41(0,"div",5),i.nrm(1,"nz-skeleton-element",6),i.k0s()),2&l){const s=i.XpG(2);i.R7$(),i.Y8G("nzSize",s.avatar.size||"default")("nzShape",s.avatar.shape||"circle")}}function T(l,v){if(1&l&&i.nrm(0,"h3",7),2&l){const s=i.XpG(2);i.xc7("width",s.toCSSUnit(s.title.width))}}function h(l,v){if(1&l&&i.nrm(0,"li"),2&l){const s=v.index,c=i.XpG(3);i.xc7("width",c.toCSSUnit(c.widthList[s]))}}function x(l,v){if(1&l&&(i.j41(0,"ul",8),i.DNE(1,h,1,2,"li",9),i.k0s()),2&l){const s=i.XpG(2);i.R7$(),i.Y8G("ngForOf",s.rowsList)}}function f(l,v){if(1&l&&(i.qex(0),i.DNE(1,N,2,2,"div",1),i.j41(2,"div",2),i.DNE(3,T,1,2,"h3",3)(4,x,2,1,"ul",4),i.k0s(),i.bVm()),2&l){const s=i.XpG();i.R7$(),i.Y8G("ngIf",!!s.nzAvatar),i.R7$(2),i.Y8G("ngIf",!!s.nzTitle),i.R7$(),i.Y8G("ngIf",!!s.nzParagraph)}}function D(l,v){1&l&&(i.qex(0),i.SdG(1),i.bVm())}let m=(()=>{class l{constructor(){this.nzActive=!1,this.nzBlock=!1}static#t=this.\u0275fac=function(c){return new(c||l)};static#e=this.\u0275dir=i.FsC({type:l,selectors:[["nz-skeleton-element"]],hostAttrs:[1,"ant-skeleton","ant-skeleton-element"],hostVars:4,hostBindings:function(c,p){2&c&&i.AVh("ant-skeleton-active",p.nzActive)("ant-skeleton-block",p.nzBlock)},inputs:{nzActive:"nzActive",nzType:"nzType",nzBlock:"nzBlock"},standalone:!0})}return(0,b.Cg)([(0,d.H3)()],l.prototype,"nzBlock",void 0),l})(),g=(()=>{class l{constructor(){this.nzShape="circle",this.nzSize="default",this.styleMap={}}ngOnChanges(s){if(s.nzSize&&"number"==typeof this.nzSize){const c=`${this.nzSize}px`;this.styleMap={width:c,height:c,"line-height":c}}else this.styleMap={}}static#t=this.\u0275fac=function(c){return new(c||l)};static#e=this.\u0275cmp=i.VBU({type:l,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},standalone:!0,features:[i.OA$,i.aNF],attrs:C,decls:1,vars:9,consts:[[1,"ant-skeleton-avatar",3,"ngStyle"]],template:function(c,p){1&c&&i.nrm(0,"span",0),2&c&&(i.AVh("ant-skeleton-avatar-square","square"===p.nzShape)("ant-skeleton-avatar-circle","circle"===p.nzShape)("ant-skeleton-avatar-lg","large"===p.nzSize)("ant-skeleton-avatar-sm","small"===p.nzSize),i.Y8G("ngStyle",p.styleMap))},dependencies:[E.B3],encapsulation:2,changeDetection:0})}return l})(),w=(()=>{class l{constructor(s){this.cdr=s,this.nzActive=!1,this.nzLoading=!0,this.nzRound=!1,this.nzTitle=!0,this.nzAvatar=!1,this.nzParagraph=!0,this.rowsList=[],this.widthList=[]}toCSSUnit(s=""){return(0,d.j3)(s)}getTitleProps(){const s=!!this.nzAvatar,c=!!this.nzParagraph;let p="";return!s&&c?p="38%":s&&c&&(p="50%"),{width:p,...this.getProps(this.nzTitle)}}getAvatarProps(){return{shape:this.nzTitle&&!this.nzParagraph?"square":"circle",size:"large",...this.getProps(this.nzAvatar)}}getParagraphProps(){const s=!!this.nzAvatar,c=!!this.nzTitle,p={};return(!s||!c)&&(p.width="61%"),p.rows=!s&&c?3:2,{...p,...this.getProps(this.nzParagraph)}}getProps(s){return s&&"object"==typeof s?s:{}}getWidthList(){const{width:s,rows:c}=this.paragraph;let p=[];return s&&Array.isArray(s)?p=s:s&&!Array.isArray(s)&&(p=[],p[c-1]=s),p}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(s){(s.nzTitle||s.nzAvatar||s.nzParagraph)&&this.updateProps()}static#t=this.\u0275fac=function(c){return new(c||l)(i.rXU(i.gRc))};static#e=this.\u0275cmp=i.VBU({type:l,selectors:[["nz-skeleton"]],hostAttrs:[1,"ant-skeleton"],hostVars:6,hostBindings:function(c,p){2&c&&i.AVh("ant-skeleton-with-avatar",!!p.nzAvatar)("ant-skeleton-active",p.nzActive)("ant-skeleton-round",!!p.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],standalone:!0,features:[i.OA$,i.aNF],ngContentSelectors:j,decls:2,vars:2,consts:[[4,"ngIf"],["class","ant-skeleton-header",4,"ngIf"],[1,"ant-skeleton-content"],["class","ant-skeleton-title",3,"width",4,"ngIf"],["class","ant-skeleton-paragraph",4,"ngIf"],[1,"ant-skeleton-header"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[1,"ant-skeleton-paragraph"],[3,"width",4,"ngFor","ngForOf"]],template:function(c,p){1&c&&(i.NAR(),i.DNE(0,f,5,3,"ng-container",0)(1,D,2,0,"ng-container",0)),2&c&&(i.Y8G("ngIf",p.nzLoading),i.R7$(),i.Y8G("ngIf",!p.nzLoading))},dependencies:[m,g,E.bT,E.Sq],encapsulation:2,changeDetection:0})}return l})(),B=(()=>{class l{static#t=this.\u0275fac=function(c){return new(c||l)};static#e=this.\u0275mod=i.$C({type:l});static#n=this.\u0275inj=i.G2t({})}return l})()},75699:(O,M,r)=>{r.d(M,{T:()=>x,s:()=>h});var E=r(15215),i=r(60177),d=r(54438),b=r(45286),_=r(7605),C=r(26006),t=r(70317),F=r(72544),j=r(28203);const N=["*"];function T(f,D){if(1&f){const m=d.RV6();d.j41(0,"span",1),d.bIt("click",function(g){d.eBV(m);const S=d.XpG();return d.Njj(S.closeTag(g))}),d.k0s()}}let h=(()=>{class f{constructor(m,z,g,S){this.cdr=m,this.renderer=z,this.elementRef=g,this.directionality=S,this.isPresetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzBordered=!0,this.nzOnClose=new d.bkB,this.nzCheckedChange=new d.bkB,this.dir="ltr",this.destroy$=new b.B7}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked))}closeTag(m){this.nzOnClose.emit(m),m.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}clearPresetColor(){const m=this.elementRef.nativeElement,z=new RegExp(`(ant-tag-(?:${[...C.un,...C.PA].join("|")}))`,"g"),g=m.classList.toString(),S=[];let k=z.exec(g);for(;null!==k;)S.push(k[1]),k=z.exec(g);m.classList.remove(...S)}setPresetColor(){const m=this.elementRef.nativeElement;this.clearPresetColor(),this.isPresetColor=!!this.nzColor&&((0,C.nP)(this.nzColor)||(0,C.uP)(this.nzColor)),this.isPresetColor&&m.classList.add(`ant-tag-${this.nzColor}`)}ngOnInit(){this.directionality.change?.pipe((0,_.Q)(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(m){const{nzColor:z}=m;z&&this.setPresetColor()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(z){return new(z||f)(d.rXU(d.gRc),d.rXU(d.sFG),d.rXU(d.aKT),d.rXU(j.dS,8))};static#e=this.\u0275cmp=d.VBU({type:f,selectors:[["nz-tag"]],hostAttrs:[1,"ant-tag"],hostVars:12,hostBindings:function(z,g){1&z&&d.bIt("click",function(){return g.updateCheckedStatus()}),2&z&&(d.xc7("background-color",g.isPresetColor?"":g.nzColor),d.AVh("ant-tag-has-color",g.nzColor&&!g.isPresetColor)("ant-tag-checkable","checkable"===g.nzMode)("ant-tag-checkable-checked",g.nzChecked)("ant-tag-rtl","rtl"===g.dir)("ant-tag-borderless",!g.nzBordered))},inputs:{nzMode:"nzMode",nzColor:"nzColor",nzChecked:"nzChecked",nzBordered:"nzBordered"},outputs:{nzOnClose:"nzOnClose",nzCheckedChange:"nzCheckedChange"},exportAs:["nzTag"],standalone:!0,features:[d.OA$,d.aNF],ngContentSelectors:N,decls:2,vars:1,consts:[["nz-icon","","nzType","close","class","ant-tag-close-icon","tabindex","-1",3,"click",4,"ngIf"],["nz-icon","","nzType","close","tabindex","-1",1,"ant-tag-close-icon",3,"click"]],template:function(z,g){1&z&&(d.NAR(),d.SdG(0),d.DNE(1,T,1,0,"span",0)),2&z&&(d.R7$(),d.Y8G("ngIf","closeable"===g.nzMode))},dependencies:[F.Y3,F.Dn,i.bT],encapsulation:2,changeDetection:0})}return(0,E.Cg)([(0,t.H3)()],f.prototype,"nzChecked",void 0),(0,E.Cg)([(0,t.H3)()],f.prototype,"nzBordered",void 0),f})(),x=(()=>{class f{static#t=this.\u0275fac=function(z){return new(z||f)};static#e=this.\u0275mod=d.$C({type:f});static#n=this.\u0275inj=d.G2t({imports:[h]})}return f})()}}]);