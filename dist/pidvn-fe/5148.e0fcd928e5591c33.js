"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[5148],{9043:(U,G,d)=>{d.r(G),d.d(G,{PihInventoryModule:()=>bt});var F=d(60177),C=d(89417),R=d(33514),_=d(12673),j=d(85724),E=d(9637),V=d(87018),S=d(50513),N=d(58960),P=d(97529),B=d(72544),w=d(21011),k=d(43053),T=d(72874),M=d(33190),D=d(1997),q=d(97685),b=d(23359),n=d(9541),o=d(82358),l=d(46661),e=d(54438);let u=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-pih-inv-menu"]],decls:8,vars:1,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","6"],["routerLink","/admin/pih/pih-inventory/request",1,"item","wip-ivt"],["src","./../../../../../../assets/images/warehouse.png","alt",""]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.j41(4,"h6"),e.EFF(5,"Ki\u1ec3m k\xea"),e.k0s(),e.j41(6,"h4"),e.EFF(7,"Inventory"),e.k0s()()()()),2&i&&e.Y8G("nzGutter",8)},dependencies:[l.Wk,P.Uq,P.e],styles:[".item[_ngcontent-%COMP%]{text-align:center;border:1px solid #ccc;padding:15px 10px}.item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;color:#fff}.item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:15px;font-size:18px;color:#fff;font-weight:700}.wip-ivt[_ngcontent-%COMP%]{background:#9f756f}"]})}return s})();var g=d(86372),p=d(45794),v=d(37736),y=d(45312),I=d(21626);let x=(()=>{class s{constructor(t){this.httpClient=t,this.baseUrl=y.c.baseUrl}getInventoryArea(){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/InventoryArea`)}getInventoryRequests(){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/Requests`)}getInventoryRequestById(t){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/Request/${t}`)}createInventoryRequest(t){return this.httpClient.post(`${this.baseUrl}/PIH/Inventory/Request`,t)}saveListInventoryData(t,i,a,r){return this.httpClient.post(`${this.baseUrl}/PIH/Inventory/SaveListInventoryData?requestId=${i}&inventoryArea=${a}&goodsType=${r}`,t)}saveInventoryData(t){return this.httpClient.post(`${this.baseUrl}/PIH/Inventory/InventoryData`,t)}getInventoryData(t){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/InventoryData?requestId=${t}`)}scanLabel(t){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/ScanLabel?lotNo=${t}`)}balance(t,i){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/Balance?requestId=${t}&inventoryArea=${i}`)}getRawMaterialInventoryData(t){return this.httpClient.get(`${this.baseUrl}/PIH/Inventory/RawMaterialInventoryData?requestId=${t}`)}downloadTemplateUploadRawMaterialInventory(){return this.httpClient.post(`${this.baseUrl}/PIH/Inventory/DownloadTemplateUploadRawMaterialInventory`,{},{responseType:"blob"})}static#e=this.\u0275fac=function(i){return new(i||s)(e.KVO(I.Qq))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var $=d(27380),f=d(31837),O=d(16389),J=d(25930);const X=()=>[10,25,50,100],Y=()=>[""];function Q(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",23)(1,"a",24),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.redirectDetail(a))}),e.EFF(2,"Chi ti\u1ebft"),e.k0s()()}}function W(s,m){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",25,1)(3,"tbody")(4,"tr")(5,"td")(6,"label"),e.EFF(7,"Phi\u1ebfu ki\u1ec3m k\xea"),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s()(),e.j41(10,"tr")(11,"td")(12,"label"),e.EFF(13,"Ng\u01b0\u1eddi t\u1ea1o"),e.k0s()(),e.j41(14,"td"),e.EFF(15),e.k0s()(),e.j41(16,"tr")(17,"td")(18,"label"),e.EFF(19,"Lo\u1ea1i ki\u1ec3m k\xea"),e.k0s(),e.j41(20,"span",26),e.EFF(21,"*"),e.k0s()(),e.j41(22,"td")(23,"nz-radio-group",27),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.inventoryType,a)||(r.inventoryType=a),e.Njj(a)}),e.j41(24,"label",28),e.EFF(25,"Tu\u1ea7n"),e.k0s(),e.j41(26,"label",29),e.EFF(27,"Th\xe1ng"),e.k0s()()()(),e.j41(28,"tr")(29,"td")(30,"label"),e.EFF(31,"Ng\xe0y ch\u1ed1t ki\u1ec3m k\xea"),e.k0s(),e.j41(32,"span",26),e.EFF(33,"*"),e.k0s()(),e.j41(34,"td")(35,"nz-date-picker",30),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.inventoryCloseDate,a)||(r.inventoryCloseDate=a),e.Njj(a)}),e.k0s()()(),e.j41(36,"tr")(37,"td")(38,"label"),e.EFF(39,"Ng\xe0y t\xednh data l\xfd thuy\u1ebft"),e.k0s()(),e.j41(40,"td")(41,"nz-date-picker",31),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.calculateTheoryDataDate,a)||(r.calculateTheoryDataDate=a),e.Njj(a)}),e.k0s()()(),e.j41(42,"tr")(43,"td")(44,"label"),e.EFF(45,"Ghi ch\xfa"),e.k0s()(),e.j41(46,"td")(47,"textarea",32),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.remark,a)||(r.remark=a),e.Njj(a)}),e.k0s()()()()(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(10,Y))("nzSize","small"),e.R7$(8),e.JRh(t.ivtReq),e.R7$(6),e.Lme("",t.jwt.FullName," - ",t.jwt.Username,""),e.R7$(8),e.R50("ngModel",t.inventoryType),e.R7$(12),e.Y8G("nzDisabledDate",t.disabledDate),e.R50("ngModel",t.inventoryCloseDate),e.R7$(6),e.R50("ngModel",t.calculateTheoryDataDate),e.R7$(6),e.R50("ngModel",t.remark)}}function K(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",33),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.closeCreateRequestInventoryModal())}),e.EFF(2," H\u1ee7y "),e.k0s(),e.j41(3,"button",34),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.createInventoryRequest())}),e.EFF(4," T\u1ea1o "),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("nzLoading",t.isLoading)}}let Z=(()=>{class s{constructor(t,i,a,r){this.toastr=t,this.jwtHelperSvc=i,this.pihInventorySvc=a,this.router=r,this.userLogin={username:"",fullName:""},this.isOpenCreateRequestInventoryModal=!1,this.isLoading=!1,this.today=new Date,this.disabledDate=h=>(0,g.A)(h,this.today)<0}ngOnInit(){this.jwt=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()),this.getInventoryRequests()}openCreateRequestInventoryModal(){console.log(this.jwt.Username);let t=(new Date).toJSON().slice(0,10).replace(/-/g,"");this.ivtReq=`IVT-${t}`,this.isOpenCreateRequestInventoryModal=!0}closeCreateRequestInventoryModal(){this.isOpenCreateRequestInventoryModal=!1,this.remark=null}createInventoryRequest(){let t={reqNo:this.ivtReq,createdBy:this.jwt.Username,remark:this.remark,calculateTheoryDataDate:this.calculateTheoryDataDate,inventoryCloseDate:this.inventoryCloseDate,inventoryType:this.inventoryType},i=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).FullName.split(" ").reverse()[0];t.inventoryType&&t.inventoryCloseDate?(this.isLoading=!0,this.pihInventorySvc.createInventoryRequest(t).subscribe(a=>{this.isOpenCreateRequestInventoryModal=!1,this.isLoading=!1,this.getInventoryRequests()},a=>{this.isLoading=!1})):this.toastr.warning("C\u1ea7n nh\u1eadp c\xe1c tr\u01b0\u1eddng b\u1eaft bu\u1ed9c nh\xe9",`B\u1ea1n ${i} \u01a1i!`)}getInventoryRequests(){this.pihInventorySvc.getInventoryRequests().subscribe(t=>{this.inventoryRequests=t})}redirectDetail(t){console.log(t.data),this.router.navigate(["admin/pih/pih-inventory/request",`${t.data.id}`],{queryParams:{reqNo:t.data.reqNo}})}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(p.tw),e.rXU(v.X7),e.rXU(x),e.rXU(l.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-pih-inv-request"]],decls:24,vars:23,consts:[["columnChooser",""],["ivtCreateTable",""],["keyExpr","id",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled","mode","title"],["location","before"],["icon","plus","type","default","text","T\u1ea1o phi\u1ebfu ki\u1ec3m k\xea",3,"onClick"],["name","columnChooserButton","location","after"],[3,"pageSize"],[3,"visible"],["dataField","reqNo","caption","Request No"],["dataField","date","dataType","date","caption","Ng\xe0y ki\u1ec3m k\xea","format","yyyy-MM-dd"],["dataField","calculateTheoryDataDate","dataType","date","format","yyyy-MM-dd HH:mm:ss","caption","Ng\xe0y t\xednh data l\xfd thuy\u1ebft",3,"visible"],["dataField","inventoryCloseDate","dataType","date","format","yyyy-MM-dd","caption","Ng\xe0y ch\u1ed1t ki\u1ec3m k\xea",3,"visible"],["dataField","inventoryType","caption","Type"],["dataField","createdBy","caption","Ng\u01b0\u1eddi t\u1ea1o (ID)",3,"visible"],["dataField","createdByName","caption","Ng\u01b0\u1eddi t\u1ea1o",3,"visible"],["dataField","remark","caption","Ghi ch\xfa"],["caption","Action","cellTemplate","actionTemplate","alignment","center","fixedPosition","left",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","T\u1ea1o phi\u1ebfu ki\u1ec3m k\xea",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],[2,"text-align","center"],[2,"color","blue",3,"click"],["id","ivtCreateTable","nzBordered","","nzFrontPagination","false",3,"nzData","nzSize"],[2,"color","red"],[3,"ngModelChange","ngModel"],["nz-radio","","nzValue","week"],["nz-radio","","nzValue","month"],[2,"width","100%",3,"ngModelChange","nzDisabledDate","ngModel"],["nzShowTime","","nzFormat","yyyy-MM-dd HH:mm:ss",2,"width","100%",3,"ngModelChange","ngModel"],["rows","2","nz-input","",3,"ngModelChange","ngModel"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"]],template:function(i,a){if(1&i){const r=e.RV6();e.j41(0,"dx-data-grid",2),e.nrm(1,"dxo-column-chooser",3,0),e.j41(3,"dxo-toolbar")(4,"dxi-item",4)(5,"dx-button",5),e.bIt("onClick",function(){return e.eBV(r),e.Njj(a.openCreateRequestInventoryModal())}),e.k0s()(),e.nrm(6,"dxi-item",6),e.k0s(),e.nrm(7,"dxo-paging",7)(8,"dxo-filter-row",8)(9,"dxi-column",9)(10,"dxi-column",10)(11,"dxi-column",11)(12,"dxi-column",12)(13,"dxi-column",13)(14,"dxi-column",14)(15,"dxi-column",15)(16,"dxi-column",16),e.j41(17,"dxi-column",17),e.DNE(18,Q,3,0,"div",18),e.k0s(),e.nrm(19,"dxo-paging",7)(20,"dxo-pager",19),e.k0s(),e.j41(21,"nz-modal",20),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(a.isOpenCreateRequestInventoryModal,c)||(a.isOpenCreateRequestInventoryModal=c),e.Njj(c)}),e.DNE(22,W,48,11,"ng-container",21)(23,K,5,1,"div",22),e.k0s()}2&i&&(e.Y8G("dataSource",a.inventoryRequests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(6),e.Y8G("pageSize",10),e.R7$(),e.Y8G("visible",!0),e.R7$(3),e.Y8G("visible",!1),e.R7$(),e.Y8G("visible",!1),e.R7$(2),e.Y8G("visible",!1),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(22,X)),e.R7$(),e.R50("nzVisible",a.isOpenCreateRequestInventoryModal))},dependencies:[R.e,$.eC,_.s,f.i2Q,f.nj_,f.CVf,f.FTx,f.sVQ,f.PVd,f.KOr,S.aO,O.c,J.p,k.F2,k.Oj,k.A9,b.CP,b.SO,b.aj,b.kt,w.Sy,C.me,C.BC,C.vS,N.SN,M.lx,M.i3],styles:["#ivtCreateTable[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}"]})}return s})();var ee=d(71451),te=d(92887),ne=d(2578);const ae=["labelIpt"],oe=["labelTable"],ie=["importQtyIpt"],L=()=>[""],H=()=>[10,25,50,100],re=()=>({id:"CX",name:"H\xe0ng ch\u1edd xu\u1ea5t"}),le=()=>({id:"CXN",name:"H\xe0ng ch\u1edd x\xe1c nh\u1eadn"}),se=()=>({id:"CST",name:"H\xe0ng ch\u1edd sorting"}),de=()=>({id:"CST",name:"H\xe0ng WH tr\u1ea3 v\u1ec1"}),ce=()=>({id:"NG",name:"H\xe0ng NG"}),ue=()=>({id:"RM",name:"NVL th\xf4"}),he=()=>({id:"TC",name:"NVL th\xf4 - t\xe1i ch\u1ebf"}),pe=()=>({id:"PIH_WH",name:"NVL OK"}),me=()=>({id:"PIH_WH_SP",name:"NVL ch\u1edd x\u1eed l\xfd"}),fe=(s,m,t,i,a,r,h,c,z)=>[s,m,t,i,a,r,h,c,z],ve=()=>({id:"01",name:"01"}),ge=()=>({id:"02",name:"02"}),ye=()=>({id:"03",name:"03"}),_e=()=>({id:"04",name:"04"}),be=()=>({id:"05",name:"05"}),Ie=()=>({id:"06",name:"06"}),Ce=()=>({id:"07",name:"07"}),Re=()=>({id:"08",name:"08"}),Ee=()=>({id:"09",name:"09"}),xe=()=>({id:"10",name:"10"}),ke=()=>({id:"11",name:"11"}),ze=()=>({id:"12",name:"12"}),De=()=>({id:"13",name:"13"}),Fe=()=>({id:"14",name:"14"}),we=()=>({id:"15",name:"15"}),Te=()=>({id:"16",name:"16"}),Me=()=>({id:"17",name:"17"}),je=()=>({id:"18",name:"18"}),Se=()=>({id:"19",name:"19"}),Ne=()=>({id:"20",name:"20"}),Pe=()=>({id:"21",name:"21"}),qe=()=>({id:"22",name:"22"}),Le=()=>({id:"23",name:"23"}),Ge=()=>({id:"24",name:"24"}),Ve=()=>({id:"25",name:"25"}),Be=()=>({id:"26",name:"26"}),Ae=()=>({id:"27",name:"27"}),$e=()=>({id:"28",name:"28"}),Oe=()=>({id:"29",name:"29"}),Je=()=>({id:"30",name:"30"}),He=()=>({id:"31",name:"31"}),Ue=()=>({id:"32",name:"32"}),Xe=()=>({id:"33",name:"33"}),Ye=()=>({id:"34",name:"34"}),Qe=()=>({id:"35",name:"35"}),We=()=>({id:"36",name:"36"}),Ke=()=>({id:"37",name:"37"}),Ze=()=>({id:"38",name:"38"}),et=()=>({id:"39",name:"39"}),tt=()=>({id:"40",name:"40"}),nt=(s,m,t,i,a,r,h,c,z,A,It,Ct,Rt,Et,xt,kt,zt,Dt,Ft,wt,Tt,Mt,jt,St,Nt,Pt,qt,Lt,Gt,Vt,Bt,At,$t,Ot,Jt,Ht,Ut,Xt,Yt,Qt)=>[s,m,t,i,a,r,h,c,z,A,It,Ct,Rt,Et,xt,kt,zt,Dt,Ft,wt,Tt,Mt,jt,St,Nt,Pt,qt,Lt,Gt,Vt,Bt,At,$t,Ot,Jt,Ht,Ut,Xt,Yt,Qt],at=()=>({y:"240px"}),ot=()=>({authorization:"authorization-text"}),it=()=>({showPreviewIcon:!1,showRemoveIcon:!1,showDownloadIcon:!1});function rt(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",46)(1,"a",47),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.openEditQtyModal(a))}),e.EFF(2,"S\u1eeda"),e.k0s()()}}function lt(s,m){if(1&s&&(e.j41(0,"tbody")(1,"tr")(2,"td",63)(3,"div",64)(4,"span"),e.EFF(5),e.k0s()()()()()),2&s){const t=e.XpG(2);e.R7$(5),e.JRh(t.errMsg)}}function st(s,m){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"label"),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"label"),e.EFF(6),e.k0s()(),e.j41(7,"td",65)(8,"div",66),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.startEdit(a))}),e.EFF(9),e.nI1(10,"number"),e.k0s(),e.j41(11,"input",67,3),e.mxI("ngModelChange",function(a){const r=e.eBV(t).$implicit;return e.DH7(r.qty,a)||(r.qty=a),e.Njj(a)}),e.bIt("blur",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.stopEdit())}),e.k0s()(),e.j41(13,"td",68),e.bIt("nzOnConfirm",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.deleteLabelScanned(a))}),e.j41(14,"a",69),e.EFF(15,"X\xf3a"),e.k0s()()()}if(2&s){const t=m.$implicit,i=e.XpG(2);e.R7$(3),e.JRh(t.partNo),e.R7$(3),e.JRh(t.lotNo),e.R7$(2),e.Y8G("hidden",i.lotNoEdit===t.lotNo),e.R7$(),e.SpI(" ",e.i5U(10,6,t.qty,"1.0-3")," "),e.R7$(2),e.Y8G("hidden",i.lotNoEdit!==t.lotNo),e.R50("ngModel",t.qty)}}function dt(s,m){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",48)(2,"thead")(3,"tr")(4,"th")(5,"dx-select-box",49),e.mxI("valueChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.inventoryArea,a)||(r.inventoryArea=a),e.Njj(a)}),e.bIt("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.onChangeArea(a))}),e.k0s()(),e.j41(6,"th")(7,"dx-select-box",50),e.mxI("valueChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.goodsType,a)||(r.goodsType=a),e.Njj(a)}),e.bIt("onValueChanged",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.onChangeGoodsType(a))}),e.k0s()(),e.j41(8,"th")(9,"dx-select-box",51),e.mxI("valueChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.materialTruck,a)||(r.materialTruck=a),e.Njj(a)}),e.bIt("onValueChanged",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.onChangeMaterialTruck(a))}),e.k0s()(),e.j41(10,"th")(11,"input",52,1),e.bIt("keydown.enter",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.scanLabel(a))})("click",function(){e.eBV(t);const a=e.sdS(12);return e.Njj(a.select())}),e.k0s()()()(),e.DNE(13,lt,6,1,"tbody",53),e.k0s(),e.j41(14,"div",54)(15,"div",55)(16,"label",56),e.EFF(17,"S\u1ed1 box \u0111\xe3 scan: "),e.j41(18,"span",57),e.EFF(19),e.k0s(),e.EFF(20," (boxes)"),e.k0s(),e.j41(21,"label",58),e.EFF(22,"Qty : "),e.j41(23,"span",57),e.EFF(24),e.nI1(25,"number"),e.k0s()()()(),e.j41(26,"nz-table",59,2)(28,"thead")(29,"tr")(30,"th",60),e.EFF(31,"Part No"),e.k0s(),e.j41(32,"th"),e.EFF(33,"LotNo / Outer Lot"),e.k0s(),e.j41(34,"th",60),e.EFF(35,"Qty (T\u1ed3n)"),e.k0s(),e.j41(36,"th",61),e.EFF(37,"Action"),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,st,16,9,"tr",62),e.k0s()(),e.bVm()}if(2&s){const t=e.sdS(27),i=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(22,L)),e.R7$(4),e.Y8G("searchEnabled",!0)("labelMode","static")("dataSource",i.inventoryAreaList),e.R50("value",i.inventoryArea),e.R7$(2),e.Y8G("searchEnabled",!0)("labelMode","static")("dataSource",e.zJS(32,fe,[e.lJ4(23,re),e.lJ4(24,le),e.lJ4(25,se),e.lJ4(26,de),e.lJ4(27,ce),e.lJ4(28,ue),e.lJ4(29,he),e.lJ4(30,pe),e.lJ4(31,me)])),e.R50("value",i.goodsType),e.R7$(2),e.Y8G("searchEnabled",!0)("labelMode","static")("dataSource",e.zJS(82,nt,[e.lJ4(42,ve),e.lJ4(43,ge),e.lJ4(44,ye),e.lJ4(45,_e),e.lJ4(46,be),e.lJ4(47,Ie),e.lJ4(48,Ce),e.lJ4(49,Re),e.lJ4(50,Ee),e.lJ4(51,xe),e.lJ4(52,ke),e.lJ4(53,ze),e.lJ4(54,De),e.lJ4(55,Fe),e.lJ4(56,we),e.lJ4(57,Te),e.lJ4(58,Me),e.lJ4(59,je),e.lJ4(60,Se),e.lJ4(61,Ne),e.lJ4(62,Pe),e.lJ4(63,qe),e.lJ4(64,Le),e.lJ4(65,Ge),e.lJ4(66,Ve),e.lJ4(67,Be),e.lJ4(68,Ae),e.lJ4(69,$e),e.lJ4(70,Oe),e.lJ4(71,Je),e.lJ4(72,He),e.lJ4(73,Ue),e.lJ4(74,Xe),e.lJ4(75,Ye),e.lJ4(76,Qe),e.lJ4(77,We),e.lJ4(78,Ke),e.lJ4(79,Ze),e.lJ4(80,et),e.lJ4(81,tt)])),e.R50("value",i.materialTruck),e.R7$(4),e.Y8G("ngIf",i.errMsg),e.R7$(6),e.JRh(i.listLotsScanned.length),e.R7$(5),e.JRh(e.i5U(25,19,i.totalQtyScanned,"1.0-3")),e.R7$(2),e.Y8G("nzData",i.listLotsScanned)("nzScroll",e.lJ4(123,at)),e.R7$(13),e.Y8G("ngForOf",t.data)}}function ct(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",70),e.bIt("nzOnConfirm",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.closeScanInventoryModal())}),e.EFF(2," \u0110\xf3ng "),e.k0s(),e.j41(3,"button",71),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.saveListInventoryData())}),e.EFF(4," L\u01b0u d\u1eef li\u1ec7u "),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(3),e.Y8G("nzLoading",t.isLoadingSaveInventoryData)}}function ut(s,m){if(1&s&&(e.j41(0,"li")(1,"span",74),e.EFF(2),e.k0s()()),2&s){const t=m.$implicit;e.R7$(2),e.JRh(t.lotNo)}}function ht(s,m){if(1&s&&(e.j41(0,"li")(1,"span",75),e.EFF(2),e.k0s()()),2&s){const t=m.$implicit;e.R7$(2),e.JRh(t.lotNo)}}function pt(s,m){if(1&s&&(e.qex(0),e.j41(1,"nz-table",72)(2,"thead")(3,"tr")(4,"th",73),e.EFF(5,"C\xe1c box l\u01b0u th\xe0nh c\xf4ng"),e.k0s(),e.j41(6,"th",73),e.EFF(7,"C\xe1c box duplicate"),e.k0s()()(),e.j41(8,"tbody")(9,"tr")(10,"td")(11,"ul"),e.DNE(12,ut,3,1,"li",62),e.k0s()(),e.j41(13,"td")(14,"ul"),e.DNE(15,ht,3,1,"li",62),e.k0s()()()()(),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("nzSize","small")("nzData",e.lJ4(4,L)),e.R7$(11),e.Y8G("ngForOf",null==t.resultSaveInventoryData?null:t.resultSaveInventoryData.resultOK),e.R7$(3),e.Y8G("ngForOf",null==t.resultSaveInventoryData?null:t.resultSaveInventoryData.resultNG)}}function mt(s,m){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",48)(2,"tbody")(3,"tr")(4,"td"),e.EFF(5,"Part No"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s()(),e.j41(8,"tr")(9,"td"),e.EFF(10,"Lot No"),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s()(),e.j41(13,"tr")(14,"td"),e.EFF(15,"Qty"),e.k0s(),e.j41(16,"td")(17,"input",76),e.mxI("ngModelChange",function(a){e.eBV(t);const r=e.XpG();return e.DH7(r.lotSelected.qty,a)||(r.lotSelected.qty=a),e.Njj(a)}),e.k0s()()()()(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(4,L)),e.R7$(6),e.JRh(t.lotSelected.partNo),e.R7$(5),e.JRh(t.lotSelected.lotNo),e.R7$(5),e.R50("ngModel",t.lotSelected.qty)}}function ft(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",77),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.isOpenEditQtyModal=!1)}),e.EFF(2," \u0110\xf3ng "),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.saveEditQty())}),e.EFF(4,"L\u01b0u"),e.k0s()()}}function vt(s,m){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",78,0)(3,"thead")(4,"tr")(5,"th")(6,"nz-upload",79)(7,"button",80),e.nrm(8,"span",81),e.EFF(9," Upload d\u1eef li\u1ec7u ki\u1ec3m k\xea NVL th\xf4 "),e.k0s()()(),e.j41(10,"th")(11,"button",8),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.downloadTemplateUploadRawMaterialInventory())}),e.EFF(12," Download Template "),e.k0s()()()()(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(4,L)),e.R7$(5),e.Y8G("nzAction",t.apiUploadExcelRawMaterialInventory)("nzHeaders",e.lJ4(5,ot))("nzShowUploadList",e.lJ4(6,it))}}function gt(s,m){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"button",77),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.isOpenRawMaterialInventoryModal=!1)}),e.EFF(2," \u0110\xf3ng "),e.k0s()()}}const yt=[{path:"menu",component:u},{path:"request",component:Z},{path:"request/:id",component:(()=>{class s{constructor(t,i,a,r){this.toastr=t,this.activatedRoute=i,this.pihInventorySvc=a,this.jwtHelperSvc=r,this.baseUrl=y.c.baseUrl,this.isOpenScanInventoryModal=!1,this.isOpenResultSaveInventoryModal=!1,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.totalQtyScanned=0,this.lotNoEdit=null,this.isLoadingSaveInventoryData=!1,this.isOpenRawMaterialInventoryModal=!1,this.isLoadingGetRawMaterialInventory=!1,this.isOpenEditQtyModal=!1,this.inventoryAreaBalanceSrch=[]}ngOnInit(){this.userLoginName=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).FullName.split(" ").reverse()[0],this.requestId=Number(this.activatedRoute.snapshot.params.id),this.requestNo=this.activatedRoute.snapshot.queryParamMap.get("reqNo"),this.getInventoryData(this.requestId),this.getInventoryArea(),this.getInventoryRequestById(this.requestId),this.apiUploadExcelRawMaterialInventory=`${this.baseUrl}/PIH/Inventory/UploadRawMaterialInventoryData?requestId=${this.requestId}`}ngAfterViewInit(){}getInventoryRequestById(t){this.pihInventorySvc.getInventoryRequestById(t).subscribe(i=>{this.inventoryRequestInfo=i,console.log("inventoryRequestInfo: ",this.inventoryRequestInfo)})}getInventoryArea(){this.pihInventorySvc.getInventoryArea().subscribe(t=>{this.inventoryAreaList=t})}getInventoryData(t){this.pihInventorySvc.getInventoryData(t).subscribe(i=>{this.inventoryData=i,this.inventoryDataPivot={fields:[{caption:"Classified",dataField:"classified",area:"row",expanded:!0},{caption:"Part Number",dataField:"partNo",area:"row",width:150,expanded:!0},{caption:"Lot No",dataField:"lotNo",area:"row",width:250,expanded:!0},{caption:"Qty",dataField:"qty",dataType:"number",area:"data",summaryType:"sum",format:{type:"fixedPoint",precision:2}}],store:i}})}onExportClient(t,i){const a=new te.Workbook,r=a.addWorksheet("Main sheet");(0,ee.V)({component:t.component,worksheet:r}).then(function(){a.xlsx.writeBuffer().then(function(h){ne(new Blob([h],{type:"application/octet-stream"}),`${i}.xlsx`)})})}openScanInventoryModal(){new Date(this.inventoryRequestInfo.inventoryCloseDate).getDay(),(new Date).getDay(),this.inventoryArea=null,this.isOpenScanInventoryModal=!0,setTimeout(()=>{this.labelIpt.nativeElement.focus()},500)}saveListInventoryData(){this.listLotsScanned.length<=0?this.toastr.warning("C\u1ea7n scan tem QR code","Warning"):(console.log("this.listLotsScanned: ",this.listLotsScanned),this.isLoadingSaveInventoryData=!0,this.pihInventorySvc.saveListInventoryData(this.listLotsScanned,this.requestId,this.inventoryArea,this.goodsType).subscribe(t=>{this.toastr.success("\u0110\xe3 l\u01b0u","Response"),this.resultSaveInventoryData=t,this.isOpenScanInventoryModal=!1,this.isLoadingSaveInventoryData=!1,this.isOpenResultSaveInventoryModal=!0,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.inventoryArea=null,this.goodsType=null,this.materialTruck=null,this.getInventoryData(this.requestId)}))}onChangeArea(t){this.labelIpt.nativeElement.select()}onChangeGoodsType(t){console.log("onChangeGoodsType: ",t),this.labelIpt.nativeElement.select()}onChangeMaterialTruck(t){console.log("onChangeMaterialTruck: ",t),this.labelIpt.nativeElement.select()}scanLabel(t){if(!this.inventoryArea)return this.toastr.warning("C\u1ea7n ch\u1ecdn khu v\u1ef1c ki\u1ec3m k\xea ",`${this.userLoginName} \u01a1i !`),void this.labelIpt.nativeElement.select();if(!this.goodsType)return this.toastr.warning("C\u1ea7n ch\u1ecdn lo\u1ea1i h\xe0ng ",`${this.userLoginName} \u01a1i !`),void this.labelIpt.nativeElement.select();this.labelIpt.nativeElement.select();let i=t.target.value.split(";"),a="",r=0,h="";if(t.target.value.includes(";")){if("B"===i[0]){console.log("data[0]: ",i[0]),a=i[1],r=i[3],h=i[4];let c={lotNo:h.toUpperCase(),partNo:a.toUpperCase(),qty:r,date:new Date,requestId:this.requestId,inventoryArea:this.inventoryArea,outerLotNo:h.toUpperCase(),goodsType:this.goodsType,materialTruck:this.materialTruck};return this.mapLotsScanned.set(h,c),this.listLotsScanned=Array.from(this.mapLotsScanned.values()),void(this.totalQtyScanned=this.sumQtyScanned(this.listLotsScanned))}if("B"!==i[0]){console.log("data[0]: ",i[0]),a=i[0],r=i[2],h=i[3];let c={lotNo:h.toUpperCase(),partNo:a.toUpperCase(),qty:r,date:new Date,requestId:this.requestId,inventoryArea:this.inventoryArea,goodsType:this.goodsType,materialTruck:this.materialTruck};return void this.pihInventorySvc.scanLabel(c.lotNo).subscribe(z=>{this.mapLotsScanned.set(h,c),this.listLotsScanned=Array.from(this.mapLotsScanned.values()),this.totalQtyScanned=this.sumQtyScanned(this.listLotsScanned),this.errMsg=null,setTimeout(()=>{this.scrollToBottom()},0)},z=>{this.errMsg=z})}}else h=t.target.value.substring(1),this.pihInventorySvc.scanLabel(h).subscribe(c=>{let z=Object.assign(c);this.mapLotsScanned.set(h,{lotNo:h,partNo:z.model,qty:z.qty,date:new Date,requestId:this.requestId,inventoryArea:this.inventoryArea,goodsType:this.goodsType,materialTruck:this.materialTruck}),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse(),this.totalQtyScanned=this.sumQtyScanned(this.listLotsScanned)})}sumQtyScanned(t){return t.reduce((i,a)=>i+Number(a.qty),0)}resetScanLabel(){this.listLotsScanned=new Array,this.mapLotsScanned=new Map,this.totalQtyScanned=0,this.errMsg=null,this.materialTruck=null,this.goodsType=null,this.inventoryArea=null}scrollToBottom(){try{const t=this.labelTable.nativeElement.querySelector(".ant-table-body");t.scrollTop=t.scrollHeight}catch(t){console.error("Error scrolling to bottom of table",t)}}startEdit(t){this.lotNoEdit=t.lotNo,setTimeout(()=>{const i=this.importQtyIpts.find((a,r)=>this.listLotsScanned[r].lotNo===t.lotNo);i&&(i.nativeElement.focus(),i.nativeElement.select())},0)}stopEdit(){this.lotNoEdit=null,this.totalQtyScanned=this.sumQtyScanned(this.listLotsScanned)}deleteLabelScanned(t){this.mapLotsScanned.delete(t.lotNo),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}closeScanInventoryModal(){this.isOpenScanInventoryModal=!1,this.resetScanLabel()}openEditQtyModal(t){this.lotSelected=t.data,this.isOpenEditQtyModal=!0}saveEditQty(){this.isOpenEditQtyModal=!1,this.pihInventorySvc.saveInventoryData(this.lotSelected).subscribe(t=>{this.getInventoryData(this.requestId)})}getBalance(){console.log("inventoryAreaBanlanceSrch: ",this.inventoryAreaBalanceSrch);let a=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).FullName.split(" ").reverse()[0];this.balanceGrid?.instance.beginCustomLoading(`B\u1ea1n ${a} \u01a1i \u0111\u1ee3i t\xfd nh\xe9!`),this.pihInventorySvc.balance(this.requestId,this.inventoryAreaBalanceSrch).subscribe(r=>{this.balanceData=r})}onRowPrepared(t){"data"===t.rowType&&0!==t.data.balance&&(t.rowElement.style.backgroundColor="red",t.rowElement.classList.add("my-class"),t.rowElement.className=t.rowElement.className.replace("dx-row-alt",""))}openRawMaterialInventoryModal(){this.isOpenRawMaterialInventoryModal=!0}downloadTemplateUploadRawMaterialInventory(){this.pihInventorySvc.downloadTemplateUploadRawMaterialInventory().subscribe(t=>{console.log(t);const i=new Blob([t],{}),a=window.URL.createObjectURL(i),r=document.createElement("a");r.href=a,r.download="TemplateRawMaterialInventoryData.xlsx",r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(a),r.remove()},100)})}getRawMaterialInventoryData(){this.isLoadingGetRawMaterialInventory=!0,this.pihInventorySvc.getRawMaterialInventoryData(this.requestId).subscribe(t=>{this.rawMaterialInventory=t,this.isLoadingGetRawMaterialInventory=!1},t=>{this.isLoadingGetRawMaterialInventory=!1})}onCellInventoryData(t){"header"===t.rowType&&(t.cellElement.style.backgroundColor="#000080",t.cellElement.style.color="#ffffff",t.cellElement.style.fontWeight="bold")}static#e=this.\u0275fac=function(i){return new(i||s)(e.rXU(p.tw),e.rXU(l.nX),e.rXU(x),e.rXU(v.X7))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-pih-inv-req-detail"]],viewQuery:function(i,a){if(1&i&&(e.GBs(ae,5),e.GBs(_.s,5),e.GBs(oe,5,e.aKT),e.GBs(ie,5)),2&i){let r;e.mGM(r=e.lsd())&&(a.labelIpt=r.first),e.mGM(r=e.lsd())&&(a.balanceGrid=r.first),e.mGM(r=e.lsd())&&(a.labelTable=r.first),e.mGM(r=e.lsd())&&(a.importQtyIpts=r)}},decls:65,vars:49,consts:[["basicTable",""],["labelIpt",""],["labelTable",""],["importQtyIpt",""],["nzFrontPagination","false","nzBordered","","nzSize","small",3,"nzData"],[2,"font-weight","bold"],[2,"font-weight","bold","color","green"],[2,"text-align","right"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","qrcode"],[2,"margin-top","-25px",3,"nzSelectedIndex"],["nzTitle","D\u1eef li\u1ec7u ki\u1ec3m k\xea"],["keyExpr","id",3,"onExporting","onCellPrepared","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"visible"],[3,"enabled"],["location","before"],["name","exportButton"],["dataField","partNo","caption","Part No"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty","format","#,##0.0"],["dataField","classified","caption","Classified"],["dataField","goodsType","caption","Lo\u1ea1i h\xe0ng"],["dataField","inventoryArea","caption","Khu v\u1ef1c ki\u1ec3m k\xea"],["dataField","materialTruck","caption","Xe h\xe0ng"],["dataField","createdAt","caption","Date","dataType","date","format","yyyy-MM-dd HH:mm:ss"],["column","qty","summaryType","sum","valueFormat","#,##0"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Classified"],[3,"allowSortingBySummary","allowSorting","allowFiltering","allowExpandAll","showBorders","dataSource"],[3,"allowSearch"],["nzTitle","Summary"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["dataField","partNo","caption","Part No",3,"groupIndex"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0"],["caption","Action","cellTemplate","actionTemplate","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","partNo","summaryType","count","displayFormat","{0} boxes"],["column","qty","summaryType","sum","displayFormat","Total: {0}","valueFormat","#,##0",3,"showInGroupFooter","alignByColumn"],["summaryItem","count"],["nzTitle","D\u1eef li\u1ec7u scan ki\u1ec3m k\xea","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","K\u1ebft qu\u1ea3 l\u01b0u ki\u1ec3m k\xea","nzWidth","750px",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["nzTitle","Th\xf4ng tin Lot","nzWidth","550px",3,"nzVisibleChange","nzVisible"],["nzTitle","Upload d\u1eef ki\u1ec7u ki\u1ec3m k\xea NVL th\xf4","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[2,"text-align","center"],[2,"color","blue",3,"click"],["nzFrontPagination","false","nzBordered","","nzSize","small",2,"margin-top","-15px",3,"nzData"],["label","Ch\u1ecdn khu v\u1ef1c","labelLocation","left","showColonAfterLabel","true","displayExpr","name","valueExpr","id",3,"valueChange","ngModelChange","searchEnabled","labelMode","dataSource","value"],["label","Lo\u1ea1i h\xe0ng","labelLocation","left","showColonAfterLabel","true","displayExpr","name","valueExpr","id",3,"valueChange","onValueChanged","searchEnabled","labelMode","dataSource","value"],["label","Xe h\xe0ng","labelLocation","left","showColonAfterLabel","true","displayExpr","name","valueExpr","id",3,"valueChange","onValueChanged","searchEnabled","labelMode","dataSource","value"],["id","labelIpt","nz-input","","placeholder","Scan tem NVL","autocomplete","off","autofocus","true",2,"margin-bottom","-20px",3,"keydown.enter","click"],[4,"ngIf"],[2,"margin-top","-20px"],[2,"clear","both"],[2,"float","left"],[2,"font-weight","bold","color","darkslategrey"],[2,"float","right"],["nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData","nzScroll"],["nzWidth","150px"],["nzWidth","100px"],[4,"ngFor","ngForOf"],["colspan","4"],["id","error-msg"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","N\u1ebfu \u0111\xf3ng s\u1ebd x\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u \u0111\xe3 scan","nzType","default",3,"nzOnConfirm"],["nz-button","","nzType","primary",3,"click","nzLoading"],["id","result-save-inventory","nzFrontPagination","false","nzBordered","",3,"nzSize","nzData"],["width","50%"],[2,"font-weight","bold","background","#e8f2db","color","green"],[2,"font-weight","bold","background","#fce1e1","color","red"],["nz-input","","type","number",3,"ngModelChange","ngModel"],["nz-button","","nzType","default",3,"click"],["nzFrontPagination","false","nzBordered","",3,"nzData"],[3,"nzAction","nzHeaders","nzShowUploadList"],["nz-button",""],["nz-icon","","nzType","upload"]],template:function(i,a){if(1&i){const r=e.RV6();e.j41(0,"nz-table",4,0)(2,"thead")(3,"tr")(4,"th")(5,"label",5),e.EFF(6,"M\xe3 ki\u1ec3m k\xea:"),e.k0s(),e.j41(7,"label",6),e.EFF(8),e.k0s()(),e.j41(9,"th",7)(10,"button",8),e.bIt("click",function(){return e.eBV(r),e.Njj(a.openScanInventoryModal())}),e.nrm(11,"span",9),e.EFF(12," Scan ki\u1ec3m k\xea "),e.k0s()()()()(),e.j41(13,"nz-tabset",10)(14,"nz-tab",11)(15,"dx-data-grid",12),e.bIt("onExporting",function(c){return e.eBV(r),e.Njj(a.onExportClient(c,"Data"))})("onCellPrepared",function(c){return e.eBV(r),e.Njj(a.onCellInventoryData(c))}),e.nrm(16,"dxo-header-filter",13)(17,"dxo-filter-row",13)(18,"dxo-export",14),e.j41(19,"dxo-toolbar"),e.nrm(20,"dxi-item",15)(21,"dxi-item",16),e.k0s(),e.nrm(22,"dxi-column",17)(23,"dxi-column",18)(24,"dxi-column",19)(25,"dxi-column",20)(26,"dxi-column",21)(27,"dxi-column",22)(28,"dxi-column",23)(29,"dxi-column",24),e.j41(30,"dxo-summary"),e.nrm(31,"dxi-total-item",25),e.k0s(),e.nrm(32,"dxo-paging",26)(33,"dxo-pager",27),e.k0s()(),e.j41(34,"nz-tab",28)(35,"dx-pivot-grid",29),e.nrm(36,"dxo-field-chooser",30)(37,"dxo-export",14),e.k0s()(),e.j41(38,"nz-tab",31)(39,"dx-data-grid",32),e.bIt("onExporting",function(c){return e.eBV(r),e.Njj(a.onExportClient(c,"Summary"))}),e.nrm(40,"dxo-export",14)(41,"dxo-paging",26)(42,"dxo-filter-row",13)(43,"dxi-column",33)(44,"dxi-column",18)(45,"dxi-column",34),e.j41(46,"dxi-column",35),e.DNE(47,rt,3,0,"div",36),e.k0s(),e.j41(48,"dxo-summary"),e.nrm(49,"dxi-group-item",37)(50,"dxi-group-item",38),e.k0s(),e.nrm(51,"dxi-sort-by-group-summary-info",39)(52,"dxo-paging",26)(53,"dxo-pager",27),e.k0s()()(),e.j41(54,"nz-modal",40),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(a.isOpenScanInventoryModal,c)||(a.isOpenScanInventoryModal=c),e.Njj(c)}),e.DNE(55,dt,40,124,"ng-container",41)(56,ct,5,1,"div",42),e.k0s(),e.j41(57,"nz-modal",43),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(a.isOpenResultSaveInventoryModal,c)||(a.isOpenResultSaveInventoryModal=c),e.Njj(c)}),e.bIt("nzOnCancel",function(){return e.eBV(r),e.Njj(a.isOpenResultSaveInventoryModal=!1)})("nzOnOk",function(){return e.eBV(r),e.Njj(a.isOpenResultSaveInventoryModal=!1)}),e.DNE(58,pt,16,5,"ng-container",41),e.k0s(),e.j41(59,"nz-modal",44),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(a.isOpenEditQtyModal,c)||(a.isOpenEditQtyModal=c),e.Njj(c)}),e.DNE(60,mt,18,5,"ng-container",41)(61,ft,5,0,"div",42),e.k0s(),e.j41(62,"nz-modal",45),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(a.isOpenRawMaterialInventoryModal,c)||(a.isOpenRawMaterialInventoryModal=c),e.Njj(c)}),e.DNE(63,vt,13,7,"ng-container",41)(64,gt,3,0,"div",42),e.k0s()}2&i&&(e.Y8G("nzData",e.lJ4(46,L)),e.R7$(8),e.SpI(" ",a.requestNo," "),e.R7$(5),e.Y8G("nzSelectedIndex",0),e.R7$(2),e.Y8G("dataSource",a.inventoryData)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(14),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(47,H)),e.R7$(2),e.Y8G("allowSortingBySummary",!0)("allowSorting",!0)("allowFiltering",!0)("allowExpandAll",!1)("showBorders",!0)("dataSource",a.inventoryDataPivot),e.R7$(),e.Y8G("allowSearch",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(2),e.Y8G("dataSource",a.inventoryDataPivot)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("pageSize",15),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("groupIndex",0),e.R7$(3),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(3),e.Y8G("showInGroupFooter",!1)("alignByColumn",!0),e.R7$(2),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(48,H)),e.R7$(),e.R50("nzVisible",a.isOpenScanInventoryModal),e.R7$(3),e.R50("nzVisible",a.isOpenResultSaveInventoryModal),e.R7$(2),e.R50("nzVisible",a.isOpenEditQtyModal),e.R7$(3),e.R50("nzVisible",a.isOpenRawMaterialInventoryModal))},dependencies:[F.Sq,F.bT,$.eC,_.s,f.nj_,f.gtJ,f.CVf,f.ZJU,f.FTx,f.sVQ,f.PVd,f.x$q,f.XvM,f.ryC,f.CWS,f.KOr,S.aO,O.c,J.p,B.Dn,k.F2,k.Oj,k.A9,b.CP,b.SO,b._4,b.IL,b.aj,b.kt,w.Sy,C.me,C.Q0,C.BC,C.vS,n.JZ,n.rE,T.PV,j.M,f.GD2,o.$W,V.l,F.QX],styles:[".dx-datagrid-rowsview[_ngcontent-%COMP%]   .dx-selection.dx-row[_ngcontent-%COMP%]:not(.dx-row-focused):not(.dx-row-removed) > td[_ngcontent-%COMP%]{background-color:red;color:unset}#result-save-inventory[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}#error-msg[_ngcontent-%COMP%]{border:3px solid rgb(255,0,0);font-weight:700;width:100%;color:red;padding:5px}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}"]})}return s})()}];let _t=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#n=this.\u0275inj=e.G2t({imports:[l.iI.forChild(yt),l.iI]})}return s})(),bt=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.$C({type:s});static#n=this.\u0275inj=e.G2t({imports:[F.MD,_t,P.f3,R.L,_.N,S.Zw,B.Y3,k.U6,b.$G,w.j,C.YN,n.hM,T.g9,j.t,j.t,E.X,D.DH,N.LE,M.Sw,o.SE,q.pc,V.S]})}return s})()},34090:(U,G,d)=>{d.d(G,{A:()=>b});var F={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},C=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(n){return[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*\.*\d+)\)$/,process:function(n){return[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4])]}},{re:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/,process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/,process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Number((parseInt(n[4],16)/255).toFixed(2))]}},{re:/^#([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})$/,process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16),Number((parseInt(n[4]+n[4],16)/255).toFixed(2))]}},{re:/^#([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})$/,process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/^hsv\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(n){var o=parseInt(n[1],10),l=parseInt(n[2],10),e=parseInt(n[3],10),u=N(o,l,e);return[u[0],u[1],u[2],1,[o,l,e]]}},{re:/^hsl\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(n){var o=parseInt(n[1],10),l=parseInt(n[2],10),e=parseInt(n[3],10),u=M(o,l,e);return[u[0],u[1],u[2],1,null,[o,l,e]]}}],R=Math.round;function _(n){var o;this.baseColor=n,n&&(o=String(n).toLowerCase().replace(/ /g,""),o=function j(n){if("transparent"===n)return[0,0,0,0];for(var e,o=0,l=C.length;o<l;++o)if(e=C[o].re.exec(n))return C[o].process(e);return null}(o=F[o]?"#"+F[o]:o)),o||(this.colorIsInvalid=!0),this.r=E((o=o||{})[0]),this.g=E(o[1]),this.b=E(o[2]),this.a=E(o[3],1,1),this.hsv=o[4]?{h:o[4][0],s:o[4][1],v:o[4][2]}:function S(n,o,l){var p,v,e=Math.max(n,o,l),u=Math.min(n,o,l),g=e-u,y=e;if(v=0===e?0:1-u/e,e===u)p=0;else switch(e){case n:p=(o-l)/g*60,o<l&&(p+=360);break;case o:p=(l-n)/g*60+120;break;case l:p=(n-o)/g*60+240}return v*=100,y*=100/255,{h:Math.round(p),s:Math.round(v),v:Math.round(y)}}(this.r,this.g,this.b),this.hsl=o[5]?{h:o[5][0],s:o[5][1],l:o[5][2]}:function B(n,o,l){n=D(n,255),o=D(o,255),l=D(l,255);var p,v,e=Math.max(n,o,l),u=Math.min(n,o,l),g=e+u,y=g/2;if(e===u)p=v=0;else{var I=e-u;v=y>.5?I/(2-g):I/g,p=function P(n,o,l,e){switch(Math.max(n,o,l)){case n:return(o-l)/e+(o<l?6:0);case o:return(l-n)/e+2;case l:return(n-o)/e+4}}(n,o,l,I),p/=6}return{h:R(360*p),s:R(100*v),l:R(100*y)}}(this.r,this.g,this.b)}function E(n,o,l){return o=o||0,l=l||255,n<0||isNaN(n)?o:n>l?l:n}function N(n,o,l){var y,I,x,u=(100-o)*l/100,g=n%60/60*(l-u),p=u+g,v=l-g;switch(Math.floor(n%360/60)){case 0:y=l,I=p,x=u;break;case 1:y=v,I=l,x=u;break;case 2:y=u,I=l,x=p;break;case 3:y=u,I=v,x=l;break;case 4:y=p,I=u,x=l;break;case 5:y=l,I=u,x=v}return[Math.round(2.55*y),Math.round(2.55*I),Math.round(2.55*x)]}function w(n,o){var l=o;return"r"===n&&(l=o+1/3),"b"===n&&(l=o-1/3),l}function T(n,o,l){return l=function k(n){return n<0&&(n+=1),n>1&&(n-=1),n}(l),l<1/6?n+6*(o-n)*l:l<.5?o:l<2/3?n+(o-n)*(2/3-l)*6:n}function M(n,o,l){var e,u,g;if(n=D(n,360),o=D(o,100),l=D(l,100),0===o)e=u=g=l;else{var p=l<.5?l*(1+o):l+o-l*o,v=2*l-p;e=T(v,p,w("r",n)),u=T(v,p,w("g",n)),g=T(v,p,w("b",n))}return[R(255*e),R(255*u),R(255*g)]}function D(n,o){return n=Math.min(o,Math.max(0,parseFloat(n))),Math.abs(n-o)<1e-6?1:n%o/parseFloat(o)}function q(n,o,l){return o=o||0,l=l||255,!(n%1!=0||n<o||n>l||"number"!=typeof n||isNaN(n))}_.prototype={constructor:_,highlight:function(n){return this.alter(n=n||10).toHex()},darken:function(n){return this.alter(-(n=n||10)).toHex()},alter:function(n){var o=new _;return o.r=E(this.r+n),o.g=E(this.g+n),o.b=E(this.b+n),o},blend:function(n,o){var l=n instanceof _?n:new _(n),e=new _;return e.r=E(R(this.r*(1-o)+l.r*o)),e.g=E(R(this.g*(1-o)+l.g*o)),e.b=E(R(this.b*(1-o)+l.b*o)),e},toHex:function(){return function V(n,o,l){return"#"+(16777216|n<<16|o<<8|l).toString(16).slice(1)}(this.r,this.g,this.b)},getPureColor:function(){return new _("rgb("+N(this.hsv.h,100,100).join(",")+")")},isValidHex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},isValidRGB:function(n,o,l){return!(!q(n)||!q(o)||!q(l))},isValidAlpha:function(n){return!(isNaN(n)||n<0||n>1||"number"!=typeof n)},colorIsInvalid:!1,fromHSL:function(n){var o=new _,l=M(n.h,n.s,n.l);return o.r=l[0],o.g=l[1],o.b=l[2],o}};const b=_}}]);