"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[6339],{86339:(tt,x,p)=>{p.r(x),p.d(x,{RelayMaterialManagementModule:()=>le});var g=p(60177),l=p(89417),N=p(38296),w=p(23617),s=p(31958),P=p(50513),L=p(25703),O=p(74696),E=p(58960),I=p(19448),f=p(97529),v=p(72544),M=p(21011),b=p(43053),D=p(72874),B=p(33190),S=p(1997),h=p(23359),$=p(75699),V=p(46661),U=p(75458),q=p(92887),W=p(2578),X=p(47848),t=p(54438),C=p(45312),Q=p(21626);let z=(()=>{class i{constructor(n){this.httpClient=n,this.baseUrl=C.c.baseUrl}getLines(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialManagement/Lines?productId=${n}`)}materialTraceability(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/Traceability`,n)}exportMaterials(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/MaterialsExport`,n)}getQaCards(){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/QaCards`)}exportData(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/MaterialsExport`,n,{responseType:"blob"})}editQtyImportedToLine(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/EditQtyImportedToLine`,n)}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(Q.Qq))};static#n=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var u=p(31837),R=p(27380),k=p(16389),A=p(25930);const H=()=>[10,25,50,100];function nt(i,d){if(1&i&&t.nrm(0,"nz-option",40),2&i){const n=d.$implicit;t.Y8G("nzValue",n.name)("nzLabel",n.name)}}function Z(i,d){if(1&i&&t.nrm(0,"nz-option",40),2&i){const n=d.$implicit;t.Y8G("nzValue",n.qaCard)("nzLabel",n.qaCard)}}function et(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",41)(1,"a",42),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.editQty(e.data))}),t.EFF(2,"S\u1eeda"),t.k0s()()}}let m=(()=>{class i{constructor(n){this.reMatAdmSvc=n,this.searchVo={},this.date=[new Date,new Date]}ngOnInit(){this.searchVo.recordType="RDC",this.getLines(5),this.getQaCards()}getQaCards(){this.reMatAdmSvc.getQaCards().subscribe(n=>{this.qaCards=n})}getLines(n){this.reMatAdmSvc.getLines(n).subscribe(o=>{this.lines=o,console.log("Lines: ",this.lines)})}onSearch(){this.employee="RDC"==this.searchVo.recordType||"RNP"==this.searchVo.recordType?"username":"sender",this.dataGrid.instance.beginCustomLoading("Loading..."),this.reMatAdmSvc.materialTraceability(this.searchVo).subscribe(n=>{this.records=n,console.log("DATAS: ",this.records),this.dataGrid.instance.endCustomLoading()})}onExport(){this.reMatAdmSvc.exportData(this.searchVo).subscribe(n=>{const o=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=window.URL.createObjectURL(o),r=document.createElement("a");r.href=e,r.download="Data.xlsx",r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(e),r.remove()},100)})}onExportClient(n){const o=new q.Workbook,e=o.addWorksheet("Main sheet");(0,X.V)({component:n.component,worksheet:e}).then(function(){o.xlsx.writeBuffer().then(function(r){W(new Blob([r],{type:"application/octet-stream"}),"Data.xlsx")})})}onChangeTime(n){this.searchVo.fromDate=n[0],this.searchVo.toDate=n[1]}editQty(n){this.recordSelected={...n},console.log("EDIT: ",n)}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(z))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-relay-material-traceability"]],viewQuery:function(o,e){if(1&o&&t.GBs(N.s,5),2&o){let r;t.mGM(r=t.lsd())&&(e.dataGrid=r.first)}},decls:77,vars:29,consts:[["dataGrid",""],["nzHeader","T\xecm ki\u1ebfm",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","5"],["nzXs","24","nzSm","24","nzLg","24"],["nzPlaceHolder","Lo\u1ea1i","nzAllowClear","",3,"ngModelChange","ngModel","nzDropdownMatchSelectWidth"],["nzValue","RNP","nzLabel","NVL nh\u1eadn t\u1eeb kho"],["nzValue","RDC","nzLabel","NVL nh\u1eadp v\xe0o QA Card"],["nzValue","CDL","nzLabel","NVL nh\u1eadp v\xe0o LINE"],["nzValue","CTR","nzLabel","NVL tr\u1ea3 kho trung chuy\u1ec3n RE-WH"],["nzValue","MRTW","nzLabel","NVL tr\u1ea3 kho PUR-WH"],["nz-col","","nzXs","12","nzSm","12","nzLg","3"],["nzPlaceHolder","Line","nzAllowClear","",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFormat","yyyy-MM-dd","nzMode","date",3,"ngModelChange","ngModel"],["nzPlaceHolder","QA cards","nzShowSearch","","nzAllowClear","",3,"ngModelChange","ngModel","nzDropdownMatchSelectWidth"],["nz-col","","nzXs","12","nzSm","12","nzLg","4"],["nz-button","",3,"click"],["nz-button","","nzType","primary",2,"margin-left","5px",3,"click"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],[3,"visible"],["dataField","reqNo","caption","Request No"],["dataField","model","caption","Model"],["dataField","partNo","caption","Part No"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","Line"],["dataField","shift","caption","Shift"],["dataField","date","dataType","date","caption","Date","format","yyyy-MM-dd"],["dataField","qaCard","coption","QA Card"],["caption","User",3,"dataField"],["dataField","createdAt","dataType","date","caption","Created At","format","yyyy-MM-dd HH:mm"],["dataField","updatedAt","dataType","date","caption","Updated At","format","yyyy-MM-dd HH:mm"],["caption","Action","cellTemplate","cellTemplate","alignment","center","alignment","center","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","lotNo","summaryType","count"],["column","qty","summaryType","sum","valueFormat","#,##0"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],[3,"nzValue","nzLabel"],[2,"text-align","center"],[2,"color","blue",3,"click"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Qu\u1ea3n l\xfd NVL "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Truy v\u1ebft "),t.k0s()(),t.j41(7,"nz-collapse")(8,"nz-collapse-panel",1)(9,"div",2)(10,"div",3)(11,"label",4),t.EFF(12,"Type"),t.k0s(),t.j41(13,"span"),t.EFF(14,"(Lo\u1ea1i)"),t.k0s(),t.j41(15,"div",4)(16,"nz-select",5),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.searchVo.recordType,a)||(e.searchVo.recordType=a),t.Njj(a)}),t.nrm(17,"nz-option",6)(18,"nz-option",7)(19,"nz-option",8)(20,"nz-option",9)(21,"nz-option",10),t.k0s()()(),t.j41(22,"div",11)(23,"label",4),t.EFF(24,"Line"),t.k0s(),t.j41(25,"span"),t.EFF(26,"(D\xe2y truy\u1ec1n)"),t.k0s(),t.j41(27,"div",4)(28,"nz-select",12),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.searchVo.line,a)||(e.searchVo.line=a),t.Njj(a)}),t.DNE(29,nt,1,2,"nz-option",13),t.k0s()()(),t.j41(30,"div",3)(31,"label",4),t.EFF(32,"Date"),t.k0s(),t.j41(33,"span"),t.EFF(34,"(QA card)"),t.k0s(),t.j41(35,"div",4)(36,"nz-range-picker",14),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.date,a)||(e.date=a),t.Njj(a)}),t.bIt("ngModelChange",function(a){return t.eBV(r),t.Njj(e.onChangeTime(a))}),t.k0s()()(),t.j41(37,"div",3)(38,"label",4),t.EFF(39,"QA Card"),t.k0s(),t.j41(40,"div",4)(41,"nz-select",15),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.searchVo.qaCard,a)||(e.searchVo.qaCard=a),t.Njj(a)}),t.DNE(42,Z,1,2,"nz-option",13),t.k0s()()(),t.j41(43,"div",16)(44,"label",4),t.EFF(45,"\xa0"),t.k0s(),t.j41(46,"div",4)(47,"button",17),t.bIt("click",function(){return t.eBV(r),t.Njj(e.onExport())}),t.EFF(48,"Export"),t.k0s(),t.j41(49,"button",18),t.bIt("click",function(){return t.eBV(r),t.Njj(e.onSearch())}),t.EFF(50," Search "),t.k0s()()()()()(),t.nrm(51,"br"),t.j41(52,"dx-data-grid",19,0),t.bIt("onExporting",function(a){return t.eBV(r),t.Njj(e.onExportClient(a))}),t.nrm(54,"dxo-load-panel",20)(55,"dxo-export",20)(56,"dxo-filter-row",21)(57,"dxo-column-fixing",20)(58,"dxi-column",22)(59,"dxi-column",23)(60,"dxi-column",24)(61,"dxi-column",25)(62,"dxi-column",26)(63,"dxi-column",27)(64,"dxi-column",28)(65,"dxi-column",29)(66,"dxi-column",30)(67,"dxi-column",31)(68,"dxi-column",32)(69,"dxi-column",33)(70,"dxi-column",34),t.DNE(71,et,3,0,"div",35),t.j41(72,"dxo-summary"),t.nrm(73,"dxi-total-item",36)(74,"dxi-total-item",37),t.k0s(),t.nrm(75,"dxo-paging",38)(76,"dxo-pager",39),t.k0s()}2&o&&(t.R7$(8),t.Y8G("nzActive",!0)("nzShowArrow",!0),t.R7$(),t.Y8G("nzGutter",24),t.R7$(7),t.R50("ngModel",e.searchVo.recordType),t.Y8G("nzDropdownMatchSelectWidth",!1),t.R7$(12),t.R50("ngModel",e.searchVo.line),t.R7$(),t.Y8G("ngForOf",e.lines),t.R7$(7),t.R50("ngModel",e.date),t.R7$(5),t.R50("ngModel",e.searchVo.qaCard),t.Y8G("nzDropdownMatchSelectWidth",!1),t.R7$(),t.Y8G("ngForOf",e.qaCards),t.R7$(10),t.Y8G("dataSource",e.records)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(2),t.Y8G("enabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(),t.Y8G("visible",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(10),t.Y8G("dataField",e.employee),t.R7$(3),t.Y8G("fixed",!0),t.R7$(),t.Y8G("dxTemplateOf","cellTemplate"),t.R7$(4),t.Y8G("pageSize",10),t.R7$(),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(28,H)))},dependencies:[g.Sq,l.BC,l.vS,N.s,u.Omo,u.nj_,u.ZJU,u.FTx,u.xzc,u.sVQ,u.PVd,u.XvM,u.CWS,R.eC,f.Uq,f.e,s.hL,s.K7,S.ld,S.WI,P.aO,k.c,A.p,O.Vz,O.pc,E.SN,E.vw],styles:["nz-collapse[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}nz-collapse[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}nz-select[_ngcontent-%COMP%], nz-range-picker[_ngcontent-%COMP%]{width:100%}"]})}return i})();var j=p(45794);let _=(()=>{class i{constructor(n){this.httpClient=n,this.baseUrl=C.c.baseUrl}getUsers(n){return this.httpClient.post(`${this.baseUrl}/Commons/Users`,n)}getPurWhRecords(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialManagement/PurWhRecords`,n)}scanMaterial(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialManagement/ScanMaterial`,n)}savePurWhRecords(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialManagement/SavePurWhRecords`,n)}deletePurWhRecords(n){return this.httpClient.delete(`${this.baseUrl}/Relay/MaterialManagement/PurWhRecords/${n}`)}saveInspectQACard(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialManagement/InspectQACard`,n)}getInspectQACards(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialManagement/InspectQACards/${n}`)}deleteInspectQaCard(n){return this.httpClient.delete(`${this.baseUrl}/Relay/MaterialManagement/InspectQACards/${n}`)}getPartsByModel(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/Parts?model=${n}`)}getProcesses(){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/Processes`)}mappingQaCard(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/MappingQaCard`,n)}getChildQaCards(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/ChildQaCards?parentQaCard=${n}`)}deleteChildQaCard(n){return this.httpClient.delete(`${this.baseUrl}/Relay/MaterialControl/ChildQaCards/${n}`)}getMaterials(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/Materials`,n)}scanMaterialV3(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/ScanMaterial`,n)}saveMaterials(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/SaveMaterials`,n)}deleteMaterial(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/DeleteMaterial`,n)}editMaterialControl(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/EditMaterialControl`,n)}changeQaCard(n,o){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/ChangeQaCard?oldQaCard=${n}&newQaCard=${o}`,{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(Q.Qq))};static#n=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const y=["oldQaCardIpt"],F=["newQaCardIpt"];let G=(()=>{class i{constructor(n,o){this.toastr=n,this.rePrSvc=o,this.isLoading=!1}ngOnInit(){}ngAfterViewInit(){this.oldQaCardIpt.nativeElement.focus()}changeQACard(){this.oldQaCard&&this.newQaCard&&this.oldQaCard!=this.newQaCard?(this.isLoading=!0,this.rePrSvc.changeQaCard(this.oldQaCard,this.newQaCard).subscribe(n=>{this.toastr.success("Chuy\u1ec3n QA Card th\xe0nh c\xf4ng !","Success"),console.log("DATA CHANGE QA CARD",n),this.oldQaCard="",this.newQaCard="",this.isLoading=!1})):this.toastr.warning("M\xe3 QA Card kh\xf4ng h\u1ee3p l\u1ec7","Warning")}scanOldQaCard(n){this.newQaCardIpt.nativeElement.focus()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(j.tw),t.rXU(_))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-lwh-change-qacard"]],viewQuery:function(o,e){if(1&o&&(t.GBs(y,5),t.GBs(F,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.oldQaCardIpt=r.first),t.mGM(r=t.lsd())&&(e.newQaCardIpt=r.first)}},decls:30,vars:8,consts:[["oldQaCardIpt",""],["newQaCardIpt",""],[3,"nzColor"],[2,"margin-top","10px"],["nzHeader","QA Card",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","12"],["nzXs","24","nzSm","24","nzLg","24"],["nz-input","","placeholder","QA Card c\u0169",3,"ngModelChange","keydown.enter","click","ngModel"],["nz-input","","placeholder","QA Card m\u1edbi",3,"ngModelChange","click","ngModel"],["nz-col","","nzXs","12","nzSm","12","nzLg","4"],["nz-button","","nzType","primary",3,"click","nzLoading"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Ph\xf2ng S\u1ea1ch "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," \u0110\u1ed5i QA Card "),t.k0s()(),t.nrm(7,"br"),t.j41(8,"nz-tag",2),t.EFF(9,"H\u1ec7 th\u1ed1ng s\u1ebd chuy\u1ec3n NVL c\xf2n trong xe NVL (LINE-WH) sang QA Card m\u1edbi"),t.k0s(),t.j41(10,"nz-collapse",3)(11,"nz-collapse-panel",4)(12,"div",5)(13,"div",6)(14,"label",7),t.EFF(15,"QA Card c\u0169:"),t.k0s(),t.j41(16,"div",7)(17,"input",8,0),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.oldQaCard,a)||(e.oldQaCard=a),t.Njj(a)}),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanOldQaCard(a))})("click",function(){t.eBV(r);const a=t.sdS(18);return t.Njj(a.select())}),t.k0s()()(),t.j41(19,"div",6)(20,"label",7),t.EFF(21,"QA Card m\u1edbi:"),t.k0s(),t.j41(22,"div",7)(23,"input",9,1),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.newQaCard,a)||(e.newQaCard=a),t.Njj(a)}),t.bIt("click",function(){t.eBV(r);const a=t.sdS(24);return t.Njj(a.select())}),t.k0s()()()(),t.nrm(25,"br"),t.j41(26,"div",5)(27,"div",10)(28,"button",11),t.bIt("click",function(){return t.eBV(r),t.Njj(e.changeQACard())}),t.EFF(29," Chuy\u1ec3n QA Card "),t.k0s()()()()()}2&o&&(t.R7$(8),t.Y8G("nzColor","blue"),t.R7$(3),t.Y8G("nzActive",!0)("nzShowArrow",!0),t.R7$(),t.Y8G("nzGutter",24),t.R7$(5),t.R50("ngModel",e.oldQaCard),t.R7$(6),t.R50("ngModel",e.newQaCard),t.R7$(3),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("nzLoading",e.isLoading))},dependencies:[l.me,l.BC,l.vS,f.Uq,f.e,s.hL,s.K7,$.s,P.aO,k.c,A.p,M.Sy,O.Vz,O.pc],styles:["label[_ngcontent-%COMP%]{font-weight:700}"]})}return i})();var Y=p(90696);function K(i,d){if(1&i){const n=t.RV6();t.j41(0,"li")(1,"span"),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"span",3),t.EFF(5),t.nI1(6,"number"),t.k0s(),t.j41(7,"span"),t.EFF(8),t.k0s(),t.j41(9,"i",4),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteHistory(e))}),t.k0s()()}if(2&i){const n=d.$implicit;t.R7$(2),t.JRh(t.i5U(3,3,n.createdAt,"yyyy-MM-dd HH:mm")),t.R7$(3),t.SpI(" Input: ",t.i5U(6,6,n.qty,"1.0-3")," "),t.R7$(3),t.SpI(" (",n.wip,")")}}function at(i,d){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"ul")(5,"li"),t.EFF(6),t.k0s(),t.j41(7,"span",3),t.EFF(8),t.nI1(9,"number"),t.k0s()()(),t.j41(10,"td")(11,"ul"),t.DNE(12,K,10,9,"li",2),t.k0s()()()),2&i){const n=d.$implicit;t.R7$(2),t.JRh(n.model),t.R7$(4),t.JRh(n.lotNo),t.R7$(2),t.SpI("(Qty: ",t.i5U(9,4,n.qty,"1.0-3"),")"),t.R7$(4),t.Y8G("ngForOf",n.lineInputRecords)}}let st=(()=>{class i{constructor(n,o){this.toastr=n,this.rePrSvc=o,this.qaCard="ACTBPDR4*TB1*2022-04-27*N*001"}ngOnInit(){this.prepareDataV2()}prepareDataV2(){let n=this.rePrSvc.getPurWhRecords({qaCard:this.qaCard,recordType:"RDC"}),o=this.rePrSvc.getPurWhRecords({qaCard:this.qaCard,recordType:"CDL"});(0,Y.p)([n,o]).subscribe(e=>{console.log("lineWhRecords",e[0]),console.log("lineRecords",e[1]),this.buildData(e[0],e[1])})}buildData(n,o){let e=new Array;for(const r of n)e.push({model:r.model,lotNo:r.lotNo,qty:r.qty,qaCard:r.qaCard,lineInputRecords:new Array});for(const r of e)for(const c of o)r.lotNo===c.lotNo&&r.lineInputRecords.push(c);e.sort((r,c)=>r.model===c.model?c.lotNo-r.lotNo:r.model>c.model?1:-1),this.lots=e}deleteHistory(n){console.log("DATA",n)}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(j.tw),t.rXU(_))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-lwh-receive-line"]],decls:19,vars:2,consts:[["lotTbl",""],["nzBordered","","nzSize","small",3,"nzData"],[4,"ngFor","ngForOf"],[2,"color","green","font-weight","bold"],["nz-icon","","nzType","minus-circle","nzTheme","outline","nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 mu\u1ed1n x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","left",2,"margin-left","5px","color","red","font-weight","bold",3,"nzOnConfirm"]],template:function(o,e){if(1&o&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Ph\xf2ng S\u1ea1ch "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Tr\u1ea3 NVL v\u1ec1 LINE-WH "),t.k0s()(),t.j41(7,"nz-table",1,0)(9,"thead")(10,"tr")(11,"th"),t.EFF(12,"Part No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Lot"),t.k0s(),t.j41(15,"th"),t.EFF(16,"LINE Input"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,at,13,7,"tr",2),t.k0s()()),2&o){const r=t.sdS(8);t.R7$(7),t.Y8G("nzData",e.lots),t.R7$(11),t.Y8G("ngForOf",r.data)}},dependencies:[g.Sq,s.hL,s.K7,v.Dn,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,k.c,D.PV,g.QX,g.vh],styles:["td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}"]})}return i})();var ot=p(9541);const lt=["qrCodeIpt"],ct=["infoIpt"],dt=["importQtyIpt"],rt=()=>[""];function pt(i,d){if(1&i){const n=t.RV6();t.j41(0,"li")(1,"span",26),t.EFF(2),t.k0s(),t.j41(3,"span",25),t.EFF(4),t.nI1(5,"number"),t.k0s(),t.j41(6,"span",27),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.openEditMaterialModal(e))}),t.EFF(7,"S\u1eeda"),t.k0s(),t.j41(8,"span",28),t.EFF(9,"|"),t.k0s(),t.j41(10,"span",29),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteMaterial(e))}),t.EFF(11," X\xf3a"),t.k0s()()}if(2&i){const n=d.$implicit;t.R7$(2),t.JRh(n.lotNo),t.R7$(2),t.SpI("(Qty: ",t.i5U(5,2,n.qty,"1.0-3"),")")}}function ht(i,d){if(1&i&&(t.j41(0,"tr")(1,"td")(2,"span",24),t.EFF(3),t.k0s(),t.j41(4,"span",25),t.EFF(5),t.nI1(6,"number"),t.k0s()(),t.j41(7,"td")(8,"ul"),t.DNE(9,pt,12,5,"li",18),t.k0s()()()),2&i){const n=d.$implicit;t.R7$(3),t.JRh(n.partNo),t.R7$(2),t.SpI("(Qty: ",t.i5U(6,3,n.qty,"1.0-3"),")"),t.R7$(4),t.Y8G("ngForOf",n.lots)}}function _t(i,d){if(1&i&&(t.j41(0,"p",33),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.remark," ")}}function ut(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td",26),t.EFF(2),t.k0s(),t.j41(3,"td",26),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",26),t.EFF(7),t.k0s(),t.DNE(8,_t,2,1,"p",30),t.k0s(),t.j41(9,"td",31),t.EFF(10),t.nI1(11,"number"),t.k0s(),t.j41(12,"td",32)(13,"span",27),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.openEditMaterialModal(e))}),t.EFF(14,"S\u1eeda"),t.k0s(),t.j41(15,"span",28),t.EFF(16,"|"),t.k0s(),t.j41(17,"span",29),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.deleteMaterial(e))}),t.EFF(18," X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit;t.R7$(2),t.JRh(n.ordinal),t.R7$(2),t.JRh(n.partNo),t.R7$(3),t.JRh(n.lotNo),t.R7$(),t.Y8G("ngIf",n.remark),t.R7$(2),t.SpI(" ",t.i5U(11,5,n.qty,"1.0-3")," ")}}function mt(i,d){if(1&i&&t.nrm(0,"nz-alert",39),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotErrMsg)}}function gt(i,d){if(1&i&&t.nrm(0,"nz-alert",40),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotWarningMsg)}}function Ct(i,d){if(1&i&&t.nrm(0,"nz-alert",41),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotInfoMsg)}}function zt(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td")(2,"label"),t.EFF(3),t.k0s()(),t.j41(4,"td")(5,"label"),t.EFF(6),t.k0s(),t.j41(7,"span",42),t.EFF(8),t.nI1(9,"number"),t.k0s()(),t.j41(10,"td",43)(11,"div",44),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.startEdit(e))}),t.EFF(12),t.nI1(13,"number"),t.k0s(),t.j41(14,"input",45,6),t.mxI("ngModelChange",function(e){const r=t.eBV(n).$implicit;return t.DH7(r.qty,e)||(r.qty=e),t.Njj(e)}),t.bIt("blur",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.stopEdit(e))}),t.k0s()(),t.j41(16,"td",46),t.EFF(17),t.k0s(),t.j41(18,"td",47),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteQRCodeScanned(e))}),t.j41(19,"a",48),t.EFF(20,"X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit,o=t.XpG(2);t.R7$(3),t.JRh(n.partNo),t.R7$(3),t.JRh(n.lotNo),t.R7$(2),t.SpI(" (Qty: ",t.i5U(9,8,n.originQty,"1.0-3"),") "),t.R7$(3),t.Y8G("hidden",o.lotNoEdit===n.lotNo),t.R7$(),t.SpI(" ",t.i5U(13,11,n.qty,"1.0-3")," "),t.R7$(2),t.Y8G("hidden",o.lotNoEdit!==n.lotNo),t.R50("ngModel",n.qty),t.R7$(3),t.JRh(n.remainingQty)}}function ft(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div",7)(2,"input",34,4),t.bIt("keydown.enter",function(e){t.eBV(n);const r=t.XpG();return t.Njj(r.scanQRCode(e))})("click",function(){t.eBV(n);const e=t.sdS(3);return t.Njj(e.select())}),t.k0s(),t.DNE(4,mt,1,1,"nz-alert",35)(5,gt,1,1,"nz-alert",36)(6,Ct,1,1,"nz-alert",37),t.j41(7,"nz-table",38,5)(9,"thead")(10,"tr")(11,"th"),t.EFF(12,"Part No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Lot No"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Qty"),t.k0s(),t.j41(17,"th"),t.EFF(18,"T\u1ed3n"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Action"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,zt,21,14,"tr",18),t.k0s()()(),t.bVm()}if(2&i){const n=t.sdS(8),o=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.Y8G("ngIf",o.lotErrMsg),t.R7$(),t.Y8G("ngIf",o.lotWarningMsg),t.R7$(),t.Y8G("ngIf",o.lotInfoMsg),t.R7$(),t.Y8G("nzData",o.listLotsScanned)("nzFrontPagination",!0)("nzPageSize",5),t.R7$(15),t.Y8G("ngForOf",n.data)}}function Rt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenScanQRCodeModal=!1)}),t.EFF(1," H\u1ee7y "),t.k0s(),t.j41(2,"button",50),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.sendToLine())}),t.EFF(3," L\u01b0u "),t.k0s()}if(2&i){const n=t.XpG();t.R7$(2),t.Y8G("nzLoading",n.isLoadingSaveBtn)}}function Et(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"nz-table",51)(2,"tbody")(3,"tr")(4,"td"),t.EFF(5,"Part No"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s()(),t.j41(8,"tr")(9,"td"),t.EFF(10,"Lot No"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s()(),t.j41(13,"tr")(14,"td"),t.EFF(15,"Qty"),t.k0s(),t.j41(16,"td")(17,"input",52),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG();return t.DH7(r.materialEdit.qty,e)||(r.materialEdit.qty=e),t.Njj(e)}),t.k0s()()(),t.j41(18,"tr")(19,"td"),t.EFF(20,"Th\u1eddi gian"),t.k0s(),t.j41(21,"td")(22,"nz-date-picker",53),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG();return t.DH7(r.materialEdit.insertTime,e)||(r.materialEdit.insertTime=e),t.Njj(e)}),t.k0s()()()()(),t.bVm()}if(2&i){const n=t.XpG();t.R7$(),t.Y8G("nzData",t.lJ4(5,rt)),t.R7$(6),t.JRh(n.materialEdit.partNo),t.R7$(5),t.JRh(n.materialEdit.lotNo),t.R7$(5),t.R50("ngModel",n.materialEdit.qty),t.R7$(5),t.R50("ngModel",n.materialEdit.insertTime)}}function Mt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenEditMaterialModal=!1)}),t.EFF(1," H\u1ee7y "),t.k0s(),t.j41(2,"button",50),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.editMaterial())}),t.EFF(3," L\u01b0u "),t.k0s()}if(2&i){const n=t.XpG();t.R7$(2),t.Y8G("nzLoading",n.isLoadingSaveBtn)}}let bt=(()=>{class i{constructor(n,o){this.toastr=n,this.rePrSvc=o,this.processes=new Array,this.isOpenScanQRCodeModal=!1,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.lotNoEdit=null,this.lotErrMsg=null,this.lotWarningMsg=null,this.lotInfoMsg=null,this.isLoadingSaveBtn=!1,this.isOpenEditMaterialModal=!1,this.infoScan={qaCard:"",model:"",line:"",date:"",shift:"",user:"",processId:"",processName:""},this.scanOrdinal=0}ngOnInit(){this.getProcesses()}ngAfterViewInit(){setTimeout(()=>{this.infoIpt.nativeElement.focus()},0)}getProcesses(){this.rePrSvc.getProcesses().subscribe(n=>{for(const o of n)/^WIP-/.test(o.name)&&this.processes.push(o)})}deleteHistory(n){this.rePrSvc.deleteMaterial(n).subscribe(o=>{this.toastr.success("X\xf3a th\xe0nh c\xf4ng !","Success")})}getPartsByModel(n){this.rePrSvc.getPartsByModel(n).subscribe(o=>{let e=new Array;for(const r of o)e.push(r.pncomp);this.partsOfModel=e,console.log("Parts of Model: ",this.partsOfModel)})}openScanQRCodeModal(){this.nzTitleScanQRCodeModal=`Nh\u1eadp NVL v\xe0o LINE: ${this.infoScan.line}; Process: ${this.infoScan.processName}`,this.isOpenScanQRCodeModal=!0,setTimeout(()=>{this.qrCodeIpt.nativeElement.focus()},500)}scanQRCode(n){this.scanOrdinal=this.scanOrdinal+1,this.qrCodeIpt.nativeElement.select();let o=n.target.value.split(";"),e=this.infoScan.qaCard.split("*"),r={partNo:o[0],lotNo:o[3],recordType:"CDL",qty:o[2],originQty:o[2],model:e[0],line:e[1],date:new Date(e[2]),shift:e[3],qaCard:this.infoScan.qaCard,processId:this.infoScan.processId,sender:this.infoScan.user,qrCode:n.target.value,ordinal:this.scanOrdinal};if(!this.partsOfModel.includes(r.partNo))return this.lotErrMsg=`Lot ${r.lotNo} kh\xf4ng d\xf9ng cho model ${r.model}`,this.lotWarningMsg=null,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500});this.rePrSvc.scanMaterialV3(r).subscribe(c=>"ERROR"==c.status?(this.lotWarningMsg=null,this.lotInfoMsg=null,this.lotErrMsg=c.message,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500})):"OK"==c.status?(c.warning?(this.lotInfoMsg=null,this.lotWarningMsg=c.warning):c.information?(this.lotInfoMsg=c.information,this.lotWarningMsg=null):(this.lotInfoMsg=null,this.lotWarningMsg=null),this.lotErrMsg=null,this.mapLotsScanned.set(n.target.value,c.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0)}startEdit(n){setTimeout(()=>{this.importQtyIpt.nativeElement.select()},300),this.lotNoEdit=n.lotNo}stopEdit(n){n.qty>n.remainingQty?n.qty=n.remainingQty:n.qty<0&&(n.qty=0),this.lotNoEdit=null}deleteQRCodeScanned(n){this.mapLotsScanned.delete(n.qrCode),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}sendToLine(){this.isLoadingSaveBtn=!0,console.log(this.listLotsScanned),this.listLotsScanned.length&&(this.scanOrdinal=0,this.rePrSvc.saveMaterials(this.listLotsScanned).subscribe(n=>{this.getMaterials(),this.isOpenScanQRCodeModal=!1,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.isLoadingSaveBtn=!1,this.infoScan.model="",this.infoScan.line="",this.infoScan.date="",this.infoScan.shift="",this.infoScan.user="",this.infoScan.processId="",this.infoScan.processName="",this.lotErrMsg=null,this.lotWarningMsg=null},n=>{this.isOpenScanQRCodeModal=!1,this.isLoadingSaveBtn=!1,this.lotErrMsg=null,this.lotWarningMsg=null}))}scanInfo(n){let o=n.target.value,e=o.split("*");if(5===e.length){if(o.includes(";"))return this.toastr.warning("C\u1ea7n scan ID, QA card, WIP","Warning"),void this.infoIpt.nativeElement.select();this.infoScan.qaCard=o,this.infoScan.model=e[0],this.infoScan.line=e[1],this.infoScan.date=e[2],this.infoScan.shift=e[3],this.getPartsByModel(this.infoScan.model),this.getMaterials()}if(7===o.length&&(this.infoScan.user=o),/^WIP-/.test(o)){console.log("SCAN Process"),console.log("Processes: ",this.processes),this.infoScan.processName=o;for(const c of this.processes)if(this.infoScan.processName==c.name){this.infoScan.processId=c.id;break}}Object.values(this.infoScan).some(c=>null==c||""===c||"string"==typeof c&&""===c.trim()||Array.isArray(c)&&0===c.length||"object"==typeof c&&!Array.isArray(c)&&0===Object.keys(c).length)||this.openScanQRCodeModal(),this.infoIpt.nativeElement.select()}getMaterials(){this.rePrSvc.getMaterials({qaCard:this.infoScan.qaCard,recordTypes:["CDL"]}).subscribe(n=>{this.materialOrder=n,this.materials=this.buildData(n),console.log("materialOrder",this.materialOrder),console.log("materials",this.materials)})}buildData(n){let o=new Set;for(const c of n)o.add(c.partNo);let e=Array.from(o),r=new Array;for(const c of e){let a={partNo:c,qty:0,lots:new Array};r.push(a)}for(const c of r)for(const a of n)c.partNo===a.partNo&&c.lots.push(a);for(const c of r){let a=0;for(const T of c.lots)a+=T.qty;c.qty=a}return r}openEditMaterialModal(n){console.log("DATA Edit: ",n),this.materialEdit={...n},this.isOpenEditMaterialModal=!0}editMaterial(){console.log("DATA EDIT: ",this.materialEdit),this.rePrSvc.editMaterialControl(this.materialEdit).subscribe(n=>{this.getMaterials(),this.toastr.success("\u0110\xe3 s\u1eeda !","Success"),this.isOpenEditMaterialModal=!1,this.infoIpt.nativeElement.select()})}deleteMaterial(n){this.rePrSvc.deleteMaterial(n).subscribe(o=>{this.getMaterials(),this.toastr.success("\u0110\xe3 x\xf3a !","Success")})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(j.tw),t.rXU(_))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-lwh-send-line"]],viewQuery:function(o,e){if(1&o&&(t.GBs(lt,5),t.GBs(ct,5),t.GBs(dt,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.qrCodeIpt=r.first),t.mGM(r=t.lsd())&&(e.infoIpt=r.first),t.mGM(r=t.lsd())&&(e.importQtyIpt=r.first)}},decls:80,vars:16,consts:[["infoTbl",""],["infoIpt",""],["lotTbl",""],["lotTblOrder",""],["qrCodeIpt",""],["qrTbl",""],["importQtyIpt",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","18","nzLg","18"],[1,"attention"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["colspan","3"],["id","infoIpt","nz-input","","placeholder","Scan theo th\u1ee9 t\u1ef1 User ID, QA card, Process","autocomplete","off",3,"keydown.enter","click"],["width","33%"],[2,"margin-top","-25px"],["nzTitle","Danh s\xe1ch t\u1ed5ng h\u1ee3p theo Model"],["nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],[4,"ngFor","ngForOf"],["nzTitle","Danh s\xe1ch theo th\u1ee9 t\u1ef1"],["id","importMaterialModal","nzWidth","100%",3,"nzVisibleChange","nzVisible","nzTitle"],[4,"nzModalContent"],[3,"nzModalFooter"],["id","importMaterialModal","nzTitle","S\u1eeda s\u1ed1 l\u01b0\u1ee3ng NVL nh\u1eadp v\xe0o LINE",3,"nzVisibleChange","nzVisible"],[2,"color","#0039b8","font-weight","bold"],[2,"margin-left","3px","color","green"],[2,"font-weight","bold"],[2,"margin-left","8px","color","blue",3,"click"],[2,"margin-left","8px","color","black"],["nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 mu\u1ed1n x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top",2,"margin-left","8px","color","red",3,"nzOnConfirm"],["style","color: green; font-size: 10px; list-style: none",4,"ngIf"],[2,"font-weight","bold","color","green","text-align","right"],[2,"text-align","center"],[2,"color","green","font-size","10px","list-style","none"],["nz-input","","placeholder","Scan m\xe3 QR nguy\xean v\u1eadt li\u1ec7u","autocomplete","off",2,"font-weight","bold",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["id","warning-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","warning",3,"nzMessage",4,"ngIf"],["id","info-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","info",3,"nzMessage",4,"ngIf"],["nzBordered","","nzSize","small",2,"margin-top","15px",3,"nzData","nzFrontPagination","nzPageSize"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],["id","warning-msg","nzBanner","","nzShowIcon","","nzType","warning",2,"margin-top","10px",3,"nzMessage"],["id","info-msg","nzBanner","","nzShowIcon","","nzType","info",2,"margin-top","10px",3,"nzMessage"],[2,"color","green","margin-left","5px"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],[2,"text-align","right"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],["id","materialEditTbl","nzBordered","","nzFrontPagination","false","nzSize","small",3,"nzData"],["nz-input","",3,"ngModelChange","ngModel"],["nzShowTime","","nzFormat","yyyy-MM-dd HH:mm:ss","ngModel","",2,"width","100%",3,"ngModelChange","ngModel"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"span",9),t.EFF(3,"* L\u01b0u \xfd: Scan theo th\u1ee9 t\u1ef1 User ID, QA card, Process"),t.k0s()(),t.j41(4,"div",10)(5,"nz-table",11,0)(7,"thead")(8,"tr")(9,"th",12)(10,"input",13,1),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanInfo(a))})("click",function(){t.eBV(r);const a=t.sdS(11);return t.Njj(a.select())}),t.k0s()()()(),t.j41(12,"tbody")(13,"tr")(14,"td",14)(15,"label"),t.EFF(16,"Model: "),t.k0s(),t.j41(17,"span"),t.EFF(18),t.k0s()(),t.j41(19,"td",14)(20,"label"),t.EFF(21,"Line: "),t.k0s(),t.j41(22,"span"),t.EFF(23),t.k0s()(),t.j41(24,"td",14)(25,"label"),t.EFF(26,"Date: "),t.k0s(),t.j41(27,"span"),t.EFF(28),t.k0s()()(),t.j41(29,"tr")(30,"td")(31,"label"),t.EFF(32,"User: "),t.k0s(),t.j41(33,"span"),t.EFF(34),t.k0s()(),t.j41(35,"td")(36,"label"),t.EFF(37,"Shift: "),t.k0s(),t.j41(38,"span"),t.EFF(39),t.k0s()(),t.j41(40,"td")(41,"label"),t.EFF(42,"Process: "),t.k0s(),t.j41(43,"span"),t.EFF(44),t.k0s()()()()()()(),t.j41(45,"nz-tabset",15)(46,"nz-tab",16)(47,"nz-table",17,2)(49,"thead")(50,"tr")(51,"th"),t.EFF(52,"Part No"),t.k0s(),t.j41(53,"th"),t.EFF(54,"Lot No (\u0110\xe3 nh\u1eadp v\xe0o LINE)"),t.k0s()()(),t.j41(55,"tbody"),t.DNE(56,ht,10,6,"tr",18),t.k0s()()(),t.j41(57,"nz-tab",19)(58,"nz-table",17,3)(60,"thead")(61,"tr")(62,"th"),t.EFF(63,"STT"),t.k0s(),t.j41(64,"th"),t.EFF(65,"Part No"),t.k0s(),t.j41(66,"th"),t.EFF(67,"Lot No (\u0110\xe3 nh\u1eadp v\xe0o LINE)"),t.k0s(),t.j41(68,"th"),t.EFF(69,"Qty"),t.k0s(),t.j41(70,"th"),t.EFF(71,"Action"),t.k0s()()(),t.j41(72,"tbody"),t.DNE(73,ut,19,8,"tr",18),t.k0s()()()(),t.j41(74,"nz-modal",20),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenScanQRCodeModal,a)||(e.isOpenScanQRCodeModal=a),t.Njj(a)}),t.DNE(75,ft,23,8,"ng-container",21)(76,Rt,4,1,"ng-template",22),t.k0s(),t.j41(77,"nz-modal",23),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenEditMaterialModal,a)||(e.isOpenEditMaterialModal=a),t.Njj(a)}),t.DNE(78,Et,23,6,"ng-container",21)(79,Mt,4,1,"ng-template",22),t.k0s()}if(2&o){const r=t.sdS(48),c=t.sdS(59);t.Y8G("nzGutter",24),t.R7$(5),t.Y8G("nzData",t.lJ4(15,rt)),t.R7$(13),t.JRh(e.infoScan.model),t.R7$(5),t.JRh(e.infoScan.line),t.R7$(5),t.JRh(e.infoScan.date),t.R7$(6),t.JRh(e.infoScan.user),t.R7$(5),t.JRh(e.infoScan.shift),t.R7$(5),t.JRh(e.infoScan.processName),t.R7$(3),t.Y8G("nzData",e.materials),t.R7$(9),t.Y8G("ngForOf",r.data),t.R7$(2),t.Y8G("nzData",e.materialOrder),t.R7$(15),t.Y8G("ngForOf",c.data),t.R7$(),t.R50("nzVisible",e.isOpenScanQRCodeModal),t.Y8G("nzTitle",e.nzTitleScanQRCodeModal),t.R7$(3),t.R50("nzVisible",e.isOpenEditMaterialModal)}},dependencies:[g.Sq,g.bT,l.me,l.Q0,l.BC,l.vS,f.Uq,f.e,b.F2,b.Oj,b.A9,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,h.OL,P.aO,k.c,A.p,M.Sy,D.PV,w.Y,E.SN,ot.JZ,ot.rE,g.QX],styles:["span.attention[_ngcontent-%COMP%]{font-style:italic;color:red}nz-select[_ngcontent-%COMP%]{width:100%}nz-radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#00f}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}#warning-msg[_ngcontent-%COMP%]{border:1px solid orange;font-weight:700;width:100%}#warning-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:orange}#info-msg[_ngcontent-%COMP%]{border:1px solid rgb(3,205,255);font-weight:700;width:100%}#info-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#03cdff}#infoIpt[_ngcontent-%COMP%]{font-weight:700}#infoTbl[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#000;font-weight:700}#infoTbl[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#00f}#materialEditTbl[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}"]})}return i})(),yt=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-re-pr-menu"]],decls:35,vars:1,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","6"],["routerLink","/admin/relay/material-management/lwh-send-line",1,"item","import"],["src","./../../../../../../assets/images/import.png","alt",""],["routerLink","/admin/relay/material-management/rwh-receive-lwh",1,"item","return"],["src","./../../../../../../assets/images/return.png","alt",""],["routerLink","/admin/relay/relay-defect-record/menu",1,"item","wip-ivt"],["src","./../../../../../../assets/images/warehouse.png","alt",""],["routerLink","/admin/relay/relay-datecode",1,"item","date-code"],["src","./../../../../../../assets/images/add-calendar.png","alt",""]],template:function(o,e){1&o&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Ph\xf2ng S\u1ea1ch "),t.k0s()(),t.nrm(5,"br"),t.j41(6,"div",0)(7,"div",1)(8,"div",2),t.nrm(9,"img",3),t.j41(10,"h6"),t.EFF(11,"Nh\u1eadp NVL v\xe0o LINE"),t.k0s(),t.j41(12,"h4"),t.EFF(13,"Import to LINE"),t.k0s()()(),t.j41(14,"div",1)(15,"div",4),t.nrm(16,"img",5),t.j41(17,"h6"),t.EFF(18,"Tr\u1ea3 kho trung chuy\u1ec3n"),t.k0s(),t.j41(19,"h4"),t.EFF(20,"Return RE-WH"),t.k0s()()(),t.j41(21,"div",1)(22,"div",6),t.nrm(23,"img",7),t.j41(24,"h6"),t.EFF(25,"Nh\u1eadp l\u1ed7i c\xf4ng \u0111o\u1ea1n"),t.k0s(),t.j41(26,"h4"),t.EFF(27,"Defect Record"),t.k0s()()(),t.j41(28,"div",1)(29,"div",8),t.nrm(30,"img",9),t.j41(31,"h6"),t.EFF(32,"Nh\u1eadp Date Code"),t.k0s(),t.j41(33,"h4"),t.EFF(34,"Insert Date Code"),t.k0s()()()()),2&o&&(t.R7$(6),t.Y8G("nzGutter",8))},dependencies:[V.Wk,f.Uq,f.e,s.hL,s.K7],styles:[".item[_ngcontent-%COMP%]{text-align:center;border:1px solid #ccc;padding:15px 10px}.item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;color:#fff}.item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:15px;font-size:18px;color:#fff;font-weight:700}.import[_ngcontent-%COMP%]{background:#e07e37}.return[_ngcontent-%COMP%]{background:#63d171}.inventory[_ngcontent-%COMP%]{background:#959595c7}.date-code[_ngcontent-%COMP%]{background:#086aa3c7}.qa-card[_ngcontent-%COMP%]{background:#95aebe}.qa-card-check[_ngcontent-%COMP%]{background:#63d171}.wip-ivt[_ngcontent-%COMP%]{background:#9f756f}"]})}return i})();const Ft=["parentQaCardIpt"],wt=["childQaCardIpt"],vt=["qtyIpt"];function St(i,d){if(1&i&&(t.j41(0,"table")(1,"tbody")(2,"tr")(3,"td",22),t.EFF(4,"Model"),t.k0s(),t.j41(5,"td",23),t.EFF(6),t.k0s(),t.j41(7,"td",22),t.EFF(8,"Line"),t.k0s(),t.j41(9,"td",23),t.EFF(10),t.k0s()(),t.j41(11,"tr")(12,"td",22),t.EFF(13,"Date"),t.k0s(),t.j41(14,"td",23),t.EFF(15),t.k0s(),t.j41(16,"td",22),t.EFF(17,"Shift"),t.k0s(),t.j41(18,"td",23),t.EFF(19),t.k0s()()()()),2&i){const n=t.XpG();t.R7$(6),t.JRh(n.parentQaCard.split("*")[0]),t.R7$(4),t.JRh(n.parentQaCard.split("*")[1]),t.R7$(5),t.JRh(n.parentQaCard.split("*")[2]),t.R7$(4),t.JRh(n.parentQaCard.split("*")[3])}}function kt(i,d){if(1&i&&(t.j41(0,"table")(1,"tbody")(2,"tr")(3,"td",22),t.EFF(4,"Model"),t.k0s(),t.j41(5,"td",23),t.EFF(6),t.k0s(),t.j41(7,"td",22),t.EFF(8,"Line"),t.k0s(),t.j41(9,"td",23),t.EFF(10),t.k0s()(),t.j41(11,"tr")(12,"td",22),t.EFF(13,"Date"),t.k0s(),t.j41(14,"td",23),t.EFF(15),t.k0s(),t.j41(16,"td",22),t.EFF(17,"Shift"),t.k0s(),t.j41(18,"td",23),t.EFF(19),t.k0s()()()()),2&i){const n=t.XpG();t.R7$(6),t.JRh(n.childQaCard.split("*")[0]),t.R7$(4),t.JRh(n.childQaCard.split("*")[1]),t.R7$(5),t.JRh(n.childQaCard.split("*")[2]),t.R7$(4),t.JRh(n.childQaCard.split("*")[3])}}function jt(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td",24),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",25),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"td",24),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"td",26),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.deleteQACard(e))}),t.j41(12,"a",27),t.EFF(13,"X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit,o=d.index;t.R7$(2),t.JRh(o+1),t.R7$(2),t.JRh(n.clotno),t.R7$(2),t.JRh(t.i5U(7,4,n.qty,"1.0-3")),t.R7$(3),t.SpI(" ",t.i5U(10,7,n.createdAt,"yyyy-MM-dd HH:mm")," ")}}function Tt(i,d){if(1&i&&t.nrm(0,"nz-option",32),2&i){const n=d.$implicit;t.Y8G("nzValue",n.id)("nzLabel",n.name)}}function Pt(i,d){if(1&i){const n=t.RV6();t.j41(0,"table")(1,"tbody")(2,"tr")(3,"td",22),t.EFF(4,"Model"),t.k0s(),t.j41(5,"td",23),t.EFF(6),t.k0s(),t.j41(7,"td",22),t.EFF(8,"Line"),t.k0s(),t.j41(9,"td",23),t.EFF(10),t.k0s()(),t.j41(11,"tr")(12,"td",22),t.EFF(13,"Date"),t.k0s(),t.j41(14,"td",23),t.EFF(15),t.k0s(),t.j41(16,"td",22),t.EFF(17,"Shift"),t.k0s(),t.j41(18,"td",23),t.EFF(19),t.k0s()(),t.j41(20,"tr")(21,"td",22),t.EFF(22,"Process"),t.k0s(),t.j41(23,"td",28)(24,"nz-select",29,3),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG(2);return t.DH7(r.processId,e)||(r.processId=e),t.Njj(e)}),t.bIt("keydown.enter",function(e){t.eBV(n);const r=t.XpG(2);return t.Njj(r.scanProcess(e))}),t.DNE(26,Tt,1,2,"nz-option",30),t.k0s()()(),t.j41(27,"tr")(28,"td",22),t.EFF(29,"Qty"),t.k0s(),t.j41(30,"td",28)(31,"input",31,4),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG(2);return t.DH7(r.qty,e)||(r.qty=e),t.Njj(e)}),t.k0s()()()()()}if(2&i){const n=t.XpG(2);t.R7$(6),t.JRh(n.childQaCard.split("*")[0]),t.R7$(4),t.JRh(n.childQaCard.split("*")[1]),t.R7$(5),t.JRh(n.childQaCard.split("*")[2]),t.R7$(4),t.JRh(n.childQaCard.split("*")[3]),t.R7$(5),t.Y8G("nzAutoFocus",!0),t.R50("ngModel",n.processId),t.R7$(2),t.Y8G("ngForOf",n.processes),t.R7$(5),t.R50("ngModel",n.qty)}}function Lt(i,d){if(1&i&&(t.qex(0),t.DNE(1,Pt,33,8,"table",11),t.bVm()),2&i){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.childQaCard)}}function Ot(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",33),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.handleCancel())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",34),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.handleSave())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}let Nt=(()=>{class i{constructor(n,o){this.rePrSvc=n,this.toastr=o,this.processes=new Array,this.qaCards=new Array,this.isVisibleModal=!1}getProcesses(){this.rePrSvc.getProcesses().subscribe(n=>{for(const o of n)/^WIP-/.test(o.name)&&this.processes.push(o)})}ngOnInit(){this.getProcesses(),setTimeout(()=>{this.parentQaCardIpt.nativeElement.focus()},0)}scanInspectQACard(n){console.log(n.target.value),n.target.value?(this.parentQaCard=n.target.value,this.rePrSvc.getChildQaCards(this.parentQaCard).subscribe(o=>{this.qaCards=o,this.childQaCardIpt.nativeElement.select()})):this.toastr.warning("C\u1ea7n scan Parent QA Card","Warning")}scanChildQACard(n){n.target.value?(this.childQaCard=n.target.value,this.isOkModelQACard(this.parentQaCard,this.childQaCard)?this.isVisibleModal=!0:this.childQaCardIpt.nativeElement.select()):this.toastr.warning("C\u1ea7n scan Child QA Card","Warning")}scanProcess(n){}isOkModelQACard(n,o){return n.split("*")[0]===o.split("*")[0]||(this.toastr.warning("Sai m\xe3 Model","Warning"),!1)}deleteQACard(n){console.log("Delete: ",n),this.rePrSvc.deleteChildQaCard(n.id).subscribe(o=>{this.toastr.success(n.qaCard,"\u0110\xe3 x\xf3a"),this.rePrSvc.getChildQaCards(this.parentQaCard).subscribe(e=>{this.qaCards=e,this.childQaCardIpt.nativeElement.select()})})}handleSave(){this.parentQaCard!=this.childQaCard?this.rePrSvc.mappingQaCard({plotno:this.parentQaCard,clotno:this.childQaCard,qty:this.qty,processId:this.processId}).subscribe(o=>{this.toastr.success("L\u01b0u th\xe0nh c\xf4ng","Success"),this.isVisibleModal=!1,this.qty=null,this.parentQaCardIpt.nativeElement.select(),this.childQaCard="",this.processId=null,this.getChildQaCards()}):this.toastr.warning("QA Card b\u1ecb tr\xf9ng","Warning")}getChildQaCards(){this.rePrSvc.getChildQaCards(this.parentQaCard).subscribe(n=>{this.qaCards=n})}handleCancel(){this.isVisibleModal=!1,this.qty=null,this.processId=null,this.childQaCardIpt.nativeElement.select()}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(_),t.rXU(j.tw))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-relay-mapping-qacard"]],viewQuery:function(o,e){if(1&o&&(t.GBs(Ft,5),t.GBs(wt,5),t.GBs(vt,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.parentQaCardIpt=r.first),t.mGM(r=t.lsd())&&(e.childQaCardIpt=r.first),t.mGM(r=t.lsd())&&(e.qtyIpt=r.first)}},decls:52,vars:8,consts:[["parentQaCardIpt",""],["childQaCardIpt",""],["childQACard",""],["processIpt",""],["qtyIpt",""],["nzHeader","Mapping QA Card",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","12"],["nzXs","24","nzSm","24","nzLg","24"],["nz-input","","placeholder","QA Card Parent",2,"font-weight","bold",3,"keydown.enter","click"],["nz-input","","placeholder","QA Card Child",2,"font-weight","bold",3,"keydown.enter","click"],[4,"ngIf"],["id","childQACardTbl","nzBordered","","nzSize","small",3,"nzData"],[2,"width","5%"],[2,"width","45%"],[2,"width","15%"],[2,"width","25%"],[2,"width","10%"],[4,"ngFor","ngForOf"],["nzTitle","Mapping QA Card",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],[1,"label"],[1,"info"],[2,"text-align","center"],[2,"text-align","right"],["nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this QA Card?","nzPopconfirmPlacement","left",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red"],["colspan","3"],["nzShowSearch","","nzAllowClear","","ngModel","lucy","nzPlaceHolder","Process",3,"ngModelChange","keydown.enter","nzAutoFocus","ngModel"],["class","option",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","type","number","placeholder","Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng",3,"ngModelChange","ngModel"],[1,"option",3,"nzValue","nzLabel"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Ph\xf2ng S\u1ea1ch "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Mapping QA Card "),t.k0s()(),t.j41(7,"nz-collapse")(8,"nz-collapse-panel",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"label"),t.EFF(13,"QA Card Parent "),t.k0s(),t.j41(14,"span"),t.EFF(15,"(Hi\xean t\u1ea1i \u0111ang ch\u1ea1y)"),t.k0s()(),t.j41(16,"div",8)(17,"input",9,0),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanInspectQACard(a))})("click",function(){t.eBV(r);const a=t.sdS(18);return t.Njj(a.select())}),t.k0s()()(),t.j41(19,"div",7)(20,"div",8)(21,"label"),t.EFF(22,"QA Card Child "),t.k0s(),t.j41(23,"span"),t.EFF(24,"(QA Card \u0111\u01b0\u1ee3c th\xeam v\xe0o)"),t.k0s()(),t.j41(25,"div",8)(26,"input",10,1),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanChildQACard(a))})("click",function(){t.eBV(r);const a=t.sdS(27);return t.Njj(a.select())}),t.k0s()()(),t.nrm(28,"div"),t.j41(29,"div",7),t.DNE(30,St,20,4,"table",11),t.k0s(),t.j41(31,"div",7),t.DNE(32,kt,20,4,"table",11),t.k0s()()()(),t.j41(33,"nz-table",12,2)(35,"thead")(36,"tr")(37,"th",13),t.EFF(38,"STT"),t.k0s(),t.j41(39,"th",14),t.EFF(40,"QA Card child"),t.k0s(),t.j41(41,"th",15),t.EFF(42,"Qty"),t.k0s(),t.j41(43,"th",16),t.EFF(44,"Date"),t.k0s(),t.j41(45,"th",17),t.EFF(46,"Action"),t.k0s()()(),t.j41(47,"tbody"),t.DNE(48,jt,14,10,"tr",18),t.k0s()(),t.j41(49,"nz-modal",19),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isVisibleModal,a)||(e.isVisibleModal=a),t.Njj(a)}),t.DNE(50,Lt,2,1,"ng-container",20)(51,Ot,5,0,"div",21),t.k0s()}if(2&o){const r=t.sdS(34);t.R7$(8),t.Y8G("nzActive",!0)("nzShowArrow",!0),t.R7$(),t.Y8G("nzGutter",24),t.R7$(21),t.Y8G("ngIf",e.parentQaCard),t.R7$(2),t.Y8G("ngIf",e.childQaCard),t.R7$(),t.Y8G("nzData",e.qaCards),t.R7$(15),t.Y8G("ngForOf",r.data),t.R7$(),t.R50("nzVisible",e.isVisibleModal)}},dependencies:[g.Sq,g.bT,l.me,l.Q0,l.BC,l.vS,f.Uq,f.e,s.hL,s.K7,b.F2,b.Oj,b.A9,S.ld,S.WI,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,P.aO,k.c,A.p,M.Sy,D.PV,O.Vz,O.pc,g.QX,g.vh],styles:["nz-select[_ngcontent-%COMP%]{width:100%}label[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]{margin-top:5px;width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-collapse:collapse;padding-left:5px}table[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#00f}#childQACardTbl[_ngcontent-%COMP%]{margin-top:10px}"]})}return i})();function It(i,d){if(1&i&&(t.j41(0,"tr")(1,"td",3),t.EFF(2),t.k0s(),t.j41(3,"td",4)(4,"a"),t.EFF(5),t.k0s()()()),2&i){const n=d.$implicit,o=d.index;t.R7$(2),t.JRh(o+1),t.R7$(),t.Y8G("routerLink",n.route),t.R7$(2),t.JRh(n.name)}}let Dt=(()=>{class i{constructor(){this.menu=[{name:"Nh\u1eadn NVL t\u1eeb kho PUR-WH",route:"/admin/relay/relay-process-recording/requests"},{name:"Chuy\u1ec3n NVL v\xe0o xe NVL (LINE-WH)",route:"/admin/relay/material-management/rwh-send-lwh"},{name:"Kho trung chuy\u1ec3n (RE-WH) nh\u1eadn NVL t\u1eeb LINE tr\u1ea3",route:"/admin/relay/material-management/rwh-receive-lwh"},{name:"Th\u1ed1ng k\xea NVL",route:"/admin/relay/material-management/relay-material-traceability"}]}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-re-wh-menu"]],decls:16,vars:2,consts:[["menuTable",""],["nzBordered","","nzFrontPagination","false",3,"nzData"],[4,"ngFor","ngForOf"],[2,"width","100px","text-align","center"],[3,"routerLink"]],template:function(o,e){if(1&o&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2,"Relay"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4,"Kho trung chuy\u1ec3n"),t.k0s()(),t.nrm(5,"br"),t.j41(6,"nz-table",1,0)(8,"thead")(9,"tr")(10,"th"),t.EFF(11,"STT"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Action"),t.k0s()()(),t.j41(14,"tbody"),t.DNE(15,It,6,3,"tr",2),t.k0s()()),2&o){const r=t.sdS(7);t.R7$(6),t.Y8G("nzData",e.menu),t.R7$(9),t.Y8G("ngForOf",r.data)}},dependencies:[g.Sq,V.Wk,s.hL,s.K7,h.CP,h.SO,h._4,h.IL,h.aj,h.kt],styles:["nz-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-weight:700}"]})}return i})(),J=(()=>{class i{constructor(n){this.httpClient=n,this.baseUrl=C.c.baseUrl}getUsers(n){return this.httpClient.post(`${this.baseUrl}/Commons/Users`,n)}getPurWhRecords(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialManagement/PurWhRecords`,n)}deletePurWhRecords(n){return this.httpClient.delete(`${this.baseUrl}/Relay/MaterialManagement/PurWhRecords/${n}`)}getLines(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/Lines?productId=${n}`)}getSlips(){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/Slips`)}getMaterialsBySlipNo(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/Slips/${n}`)}scanMaterialV3(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/ScanMaterial`,n)}saveMaterials(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/SaveMaterials`,n)}getPartsByModel(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/Parts?model=${n}`)}savePurWhRecord(n){return this.httpClient.post(`${this.baseUrl}/Relay/MaterialControl/SavePurWhRecord`,n)}generateSlipNo(n,o){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/GenerateSlipNo?recordType=${n}&username=${o}`)}getSlipsRelayReturnWarehouse(){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/SlipsRelayReturnWarehouse`)}getSlipsRelayReturnWarehouseDetail(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/SlipsRelayReturnWarehouse/${n}`)}deletePurWhRecordById(n){return this.httpClient.delete(`${this.baseUrl}/Relay/MaterialControl/DeletePurWhRecord/${n}`)}getLotRequestAndLotReceive(n){return this.httpClient.get(`${this.baseUrl}/Relay/MaterialControl/GetLotRequestAndLotReceive?requestNo=${n}`)}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(Q.Qq))};static#n=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const At=()=>[10,15,25,50,100];function Gt(i,d){if(1&i&&(t.j41(0,"div",10)(1,"span"),t.EFF(2),t.k0s()()),2&i){const n=d.$implicit;t.Y8G("ngClass",n.data.receive==n.data.amount?"ok":"not-yet"),t.R7$(2),t.Lme(" ",n.data.receive?n.data.receive:0," / ",n.data.amount," ")}}function Vt(i,d){if(1&i&&(t.j41(0,"div",10)(1,"span"),t.EFF(2),t.k0s()()),2&i){const n=d.$implicit;t.Y8G("ngClass",n.data.receive==n.data.amount?"ok":"not-yet"),t.R7$(2),t.JRh(n.data.receive==n.data.amount?"\u0110\xe3 nh\u1eadn \u0111\u1ee7":"Not yet")}}let Qt=(()=>{class i{constructor(n,o){this.router=n,this.reWhSvc=o}ngOnInit(){}ngAfterViewInit(){this.getListPXK()}getListPXK(){this.requestGrid?.instance.beginCustomLoading("\u0110ang load d\u1eef li\u1ec7u ..."),this.reWhSvc.getSlips().subscribe(n=>{this.slips=n,this.requestGrid.instance.endCustomLoading()})}onRowClick(n){this.router.navigate([`admin/relay/relay-process-recording/request?requestNo=${n.data.slipNo}`])}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(V.Ix),t.rXU(J))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-re-wh-requests"]],viewQuery:function(o,e){if(1&o&&t.GBs(N.s,5),2&o){let r;t.mGM(r=t.lsd())&&(e.requestGrid=r.first)}},decls:19,vars:11,consts:[["requestGrid",""],["id","gridMaster",2,"margin-top","10px",3,"onRowClick","dataSource","showColumnLines","showRowLines","showBorders"],[3,"visible"],["caption","S\u1ed1 phi\u1ebfu","dataField","slipNo"],["caption","Ng\xe0y t\u1ea1o","dataField","date","dataType","date","format","yyyy-MM-dd"],["caption","S\u1ed1 lot \u0111\xe3 nh\u1eadn","cellTemplate","amountTemplate"],[3,"ngClass",4,"dxTemplate","dxTemplateOf"],["caption","Tr\u1ea1ng th\xe1i","cellTemplate","statusTemplate"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],[3,"ngClass"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2,"Relay"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4,"Kho trung chuy\u1ec3n"),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6,"Phi\u1ebfu xu\u1ea5t kho"),t.k0s()(),t.nrm(7,"br"),t.j41(8,"dx-data-grid",1,0),t.bIt("onRowClick",function(a){return t.eBV(r),t.Njj(e.onRowClick(a))}),t.nrm(10,"dxo-filter-row",2)(11,"dxi-column",3)(12,"dxi-column",4)(13,"dxi-column",5),t.DNE(14,Gt,3,3,"div",6),t.nrm(15,"dxi-column",7),t.DNE(16,Vt,3,2,"div",6),t.nrm(17,"dxo-paging",8)(18,"dxo-pager",9),t.k0s()}2&o&&(t.R7$(8),t.Y8G("dataSource",e.slips)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0),t.R7$(2),t.Y8G("visible",!0),t.R7$(4),t.Y8G("dxTemplateOf","amountTemplate"),t.R7$(2),t.Y8G("dxTemplateOf","statusTemplate"),t.R7$(),t.Y8G("pageSize",15),t.R7$(),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(10,At)))},dependencies:[g.YU,N.s,u.nj_,u.FTx,u.sVQ,u.PVd,R.eC,s.hL,s.K7],styles:[".ok[_ngcontent-%COMP%]{color:#00f;text-align:center;font-weight:700}.not-yet[_ngcontent-%COMP%]{color:red;text-align:center;font-weight:700}"]})}return i})();const Bt=["userIpt"],xt=["qrCodeIpt"],$t=["importQtyIpt"];function Ut(i,d){if(1&i&&t.nrm(0,"nz-option",15),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username)}}function qt(i,d){if(1&i&&t.nrm(0,"nz-option",15),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username)}}function Wt(i,d){if(1&i&&t.nrm(0,"nz-option",16),2&i){const n=d.$implicit;t.Y8G("nzValue",n.name)("nzLabel",n.name)}}function Xt(i,d){if(1&i&&t.nrm(0,"nz-alert",21),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotErrMsg)}}function Yt(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",22)(6,"div",23),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.startEdit(e))}),t.EFF(7),t.nI1(8,"number"),t.k0s(),t.j41(9,"input",24,3),t.mxI("ngModelChange",function(e){const r=t.eBV(n).$implicit;return t.DH7(r.qty,e)||(r.qty=e),t.Njj(e)}),t.bIt("blur",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.stopEdit())}),t.k0s()(),t.j41(11,"td",25),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteQRCodeScanned(e))}),t.j41(12,"a",26),t.EFF(13,"X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(n.partNo),t.R7$(2),t.JRh(n.lotNo),t.R7$(2),t.Y8G("hidden",o.lotNoEdit===n.lotNo),t.R7$(),t.SpI(" ",t.i5U(8,6,n.qty,"1.0-3")," "),t.R7$(2),t.Y8G("hidden",o.lotNoEdit!==n.lotNo),t.R50("ngModel",n.qty)}}function Ht(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div",4)(2,"input",17,1),t.bIt("keydown.enter",function(e){t.eBV(n);const r=t.XpG();return t.Njj(r.scanQRCode(e))})("click",function(){t.eBV(n);const e=t.sdS(3);return t.Njj(e.select())}),t.k0s(),t.DNE(4,Xt,1,1,"nz-alert",18),t.j41(5,"nz-table",19,2)(7,"thead")(8,"tr")(9,"th"),t.EFF(10,"Part No"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Lot No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Qty"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Action"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,Yt,14,9,"tr",20),t.k0s()()(),t.bVm()}if(2&i){const n=t.sdS(6),o=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.Y8G("ngIf",o.lotErrMsg),t.R7$(),t.Y8G("nzData",o.listLotsScanned)("nzFrontPagination",!1),t.R7$(13),t.Y8G("ngForOf",n.data)}}function Kt(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",27),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenScanQRCodeModal=!1)}),t.EFF(2," H\u1ee7y "),t.k0s(),t.j41(3,"button",28),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.receiveLotsFromLineWh())}),t.EFF(4," L\u01b0u "),t.k0s()()}}let Jt=(()=>{class i{constructor(n,o){this.reWhSvc=n,this.toastr=o,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.isOpenScanQRCodeModal=!1,this.lotNoEdit=null,this.lotErrMsg=null}ngOnInit(){this.getUsers(),this.getLines()}getUsers(){this.reWhSvc.getUsers({}).subscribe(n=>{this.users=n})}getLines(){this.reWhSvc.getLines(5).subscribe(n=>{this.lines=n})}scanUser(n){if(!this.username)return this.toastr.warning("M\xe3 nh\xe2n vi\xean kh\xf4ng h\u1ee3p l\u1ec7 !"),void this.userIpt.clearInput()}showModal(){this.sender&&this.receiver&&this.line?(this.isOpenScanQRCodeModal=!0,setTimeout(()=>{this.qrCodeIpt.nativeElement.focus()},500)):this.toastr.warning("C\u1ea7n nh\u1eadp th\xf4ng tin ng\u01b0\u1eddi giao nh\u1eadn, Line s\u1ea3n xu\u1ea5t")}scanQRCode(n){this.qrCodeIpt.nativeElement.select();let o=n.target.value.toLocaleUpperCase().split(";"),e={lotNo:o[3],recordType:"CTR",qty:o[2],partNo:o[0],sender:this.sender,receiver:this.receiver,whUserCode:this.sender,line:this.line,date:new Date,flag:"5",qrCode:n.target.value.toLocaleUpperCase()};this.reWhSvc.scanMaterialV3(e).subscribe(r=>"ERROR"==r.status?(this.lotErrMsg=r.message,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500})):"OK"==r.status?(this.lotErrMsg=null,this.mapLotsScanned.set(n.target.value,r.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0)}receiveLotsFromLineWh(){this.listLotsScanned.length?(console.log("SAVE DATA: ",this.listLotsScanned),this.reWhSvc.saveMaterials(this.listLotsScanned).subscribe(n=>{this.isOpenScanQRCodeModal=!1,this.mapLotsScanned=new Map,this.listLotsScanned=new Array})):this.toastr.warning("Kh\xf4ng c\xf3 Lot n\xe0o \u0111\u01b0\u1ee3c l\u01b0u !")}deleteQRCodeScanned(n){this.mapLotsScanned.delete(n.qrCode),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}startEdit(n){console.log("AAAA"),setTimeout(()=>{this.importQtyIpt.nativeElement.focus()},500),this.lotNoEdit=n.lotNo}stopEdit(){this.lotNoEdit=null}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(J),t.rXU(j.tw))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-rwh-receive-lwh"]],viewQuery:function(o,e){if(1&o&&(t.GBs(Bt,5),t.GBs(xt,5),t.GBs($t,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.userIpt=r.first),t.mGM(r=t.lsd())&&(e.qrCodeIpt=r.first),t.mGM(r=t.lsd())&&(e.importQtyIpt=r.first)}},decls:24,vars:10,consts:[["userIpt",""],["qrCodeIpt",""],["qrTbl",""],["importQtyIpt",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","6","nzLg","6"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi giao",3,"ngModelChange","keydown.enter","nzAutoFocus","ngModel"],["class","option",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi nh\u1eadn",3,"ngModelChange","keydown.enter","nzAutoFocus","ngModel"],["nzPlaceHolder","Line","nzAllowClear","",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",2,"margin-right","5px",3,"click"],["nzTitle","Nh\u1eadn nguy\xean v\u1eadt li\u1ec7u LINE tr\u1ea3","nzWidth","850px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],[1,"option",3,"nzValue","nzLabel"],[3,"nzValue","nzLabel"],["id","qrCodeIpt","nz-input","","placeholder","Scan QR Code","autocomplete","off",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["nzBordered","","nzSize","small",2,"margin-top","15px",3,"nzData","nzFrontPagination"],[4,"ngFor","ngForOf"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2,"Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4,"NVL tr\u1ea3 v\u1ec1 kho trung chuy\u1ec3n (RE-WH)"),t.k0s()(),t.nrm(5,"br"),t.j41(6,"div",4)(7,"div",5)(8,"nz-select",6,0),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.sender,a)||(e.sender=a),t.Njj(a)}),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanUser(a))}),t.DNE(10,Ut,1,2,"nz-option",7),t.k0s()(),t.j41(11,"div",5)(12,"nz-select",8,0),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.receiver,a)||(e.receiver=a),t.Njj(a)}),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanUser(a))}),t.DNE(14,qt,1,2,"nz-option",7),t.k0s()(),t.j41(15,"div",5)(16,"nz-select",9),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.line,a)||(e.line=a),t.Njj(a)}),t.DNE(17,Wt,1,2,"nz-option",10),t.k0s()(),t.j41(18,"div",5)(19,"button",11),t.bIt("click",function(){return t.eBV(r),t.Njj(e.showModal())}),t.EFF(20," Nh\u1eadn NVL t\u1eeb LINE tr\u1ea3 "),t.k0s()()(),t.j41(21,"nz-modal",12),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenScanQRCodeModal,a)||(e.isOpenScanQRCodeModal=a),t.Njj(a)}),t.DNE(22,Ht,19,5,"ng-container",13)(23,Kt,5,0,"div",14),t.k0s()}2&o&&(t.R7$(6),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("nzAutoFocus",!0),t.R50("ngModel",e.sender),t.R7$(2),t.Y8G("ngForOf",e.users),t.R7$(2),t.Y8G("nzAutoFocus",!0),t.R50("ngModel",e.receiver),t.R7$(2),t.Y8G("ngForOf",e.users),t.R7$(2),t.R50("ngModel",e.line),t.R7$(),t.Y8G("ngForOf",e.lines),t.R7$(4),t.R50("nzVisible",e.isOpenScanQRCodeModal))},dependencies:[g.Sq,g.bT,l.me,l.Q0,l.BC,l.vS,f.Uq,f.e,s.hL,s.K7,b.F2,b.Oj,b.A9,S.ld,S.WI,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,h.OL,P.aO,k.c,A.p,M.Sy,D.PV,w.Y,g.QX],styles:["nz-select[_ngcontent-%COMP%]{width:100%}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{color:green}nz-table[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:red}nz-table[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]:hover{cursor:pointer}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}#qrCodeIpt[_ngcontent-%COMP%]{font-weight:700;color:#00f}"]})}return i})();var it=p(97685);const Zt=["qrCodeIpt"],tn=["qaCardIpt"],nn=["importQtyIpt"];function en(i,d){if(1&i&&t.nrm(0,"nz-option",24),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username+" - "+n.subsectionCode)}}function on(i,d){if(1&i){const n=t.RV6();t.j41(0,"nz-select",22),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG();return t.DH7(r.sender,e)||(r.sender=e),t.Njj(e)}),t.DNE(1,en,1,2,"nz-option",23),t.k0s()}if(2&i){const n=t.XpG();t.R50("ngModel",n.sender),t.R7$(),t.Y8G("ngForOf",n.users)}}function rn(i,d){if(1&i&&t.nrm(0,"nz-option",24),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username+" - "+n.subsectionCode)}}function an(i,d){if(1&i){const n=t.RV6();t.j41(0,"nz-select",25),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG();return t.DH7(r.receiver,e)||(r.receiver=e),t.Njj(e)}),t.DNE(1,rn,1,2,"nz-option",23),t.k0s()}if(2&i){const n=t.XpG();t.R50("ngModel",n.receiver),t.R7$(),t.Y8G("ngForOf",n.users)}}function sn(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.showModal())}),t.EFF(1," Nh\u1eadn NVL "),t.k0s()}}function ln(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",27),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.openQACardModal())}),t.EFF(1," Chuy\u1ec3n NVL v\xe0o WH-LINE "),t.k0s()}}function cn(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",28),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenErrorModal=!0)}),t.nrm(1,"i",29),t.k0s()}}function dn(i,d){if(1&i&&(t.j41(0,"li"),t.EFF(1),t.j41(2,"span",31),t.EFF(3),t.nI1(4,"number"),t.k0s()()),2&i){const n=d.$implicit;t.R7$(),t.SpI(" ",n.lotGroup," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(4,2,n.qty,"1.0-3"),")")}}function pn(i,d){1&i&&(t.j41(0,"span",34),t.EFF(1," \u0110\xe3 nh\u1eadn "),t.k0s())}function hn(i,d){if(1&i){const n=t.RV6();t.j41(0,"span",35),t.bIt("nzOnConfirm",function(){t.eBV(n);const e=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.deleteLot(e))}),t.EFF(1," X\xf3a "),t.k0s()}if(2&i){const n=t.XpG().$implicit;t.Y8G("nzPopconfirmTitle","X\xf3a: "+n.lotNo)}}function _n(i,d){if(1&i&&(t.j41(0,"li")(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"span",31),t.EFF(4),t.nI1(5,"number"),t.k0s(),t.DNE(6,pn,2,0,"span",32)(7,hn,2,1,"span",33),t.k0s()),2&i){const n=d.$implicit;t.R7$(),t.Aen(n.receiver?"background: #c5e1a5":""),t.R7$(),t.SpI(" ",n.lotNo," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(5,6,n.qty,"1.0-3"),")"),t.R7$(2),t.Y8G("ngIf",n.receiver),t.R7$(),t.Y8G("ngIf",n.receiver)}}function un(i,d){if(1&i&&(t.j41(0,"tr")(1,"td",30),t.EFF(2),t.j41(3,"span",31),t.EFF(4),t.nI1(5,"number"),t.k0s()(),t.j41(6,"td",30)(7,"ul"),t.DNE(8,dn,5,5,"li",16),t.k0s()(),t.j41(9,"td",30)(10,"ul"),t.DNE(11,_n,8,9,"li",16),t.k0s()()()),2&i){const n=d.$implicit;t.R7$(2),t.SpI(" ",n.partNo," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(5,4,n.qty,"1.0-3"),")"),t.R7$(4),t.Y8G("ngForOf",n.lotGroups),t.R7$(3),t.Y8G("ngForOf",n.lots)}}function mn(i,d){if(1&i&&t.nrm(0,"nz-alert",39),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotErrMsg)}}function gn(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",40)(6,"div",41),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.startEdit(e))}),t.EFF(7),t.nI1(8,"number"),t.k0s(),t.j41(9,"input",42,3),t.mxI("ngModelChange",function(e){const r=t.eBV(n).$implicit;return t.DH7(r.qty,e)||(r.qty=e),t.Njj(e)}),t.bIt("blur",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.stopEdit())}),t.k0s()(),t.j41(11,"td",43),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteQRCodeScanned(e))}),t.j41(12,"a",44),t.EFF(13,"X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(n.partNo),t.R7$(2),t.JRh(n.lotNo),t.R7$(2),t.Y8G("hidden",o.lotNoEdit===n.lotNo),t.R7$(),t.SpI(" ",t.i5U(8,6,n.qty,"1.0-3")," "),t.R7$(2),t.Y8G("hidden",o.lotNoEdit!==n.lotNo),t.R50("ngModel",n.qty)}}function Cn(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div",7)(2,"input",36,1),t.bIt("keydown.enter",function(e){t.eBV(n);const r=t.XpG();return t.Njj(r.scanQRCode(e))})("click",function(){t.eBV(n);const e=t.sdS(3);return t.Njj(e.select())}),t.k0s(),t.DNE(4,mn,1,1,"nz-alert",37),t.j41(5,"nz-table",38,2)(7,"thead")(8,"tr")(9,"th"),t.EFF(10,"Part No"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Lot No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Qty"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Action"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,gn,14,9,"tr",16),t.k0s()()(),t.bVm()}if(2&i){const n=t.sdS(6),o=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.Y8G("ngIf",o.lotErrMsg),t.R7$(),t.Y8G("nzData",o.listLotsScanned)("nzFrontPagination",!0)("nzPageSize",12),t.R7$(13),t.Y8G("ngForOf",n.data)}}function zn(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",45),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenScanQRCodeModal=!1)}),t.EFF(2," H\u1ee7y "),t.k0s(),t.j41(3,"button",46),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.receiveLotsFromPWH())}),t.EFF(4," L\u01b0u "),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(3),t.Y8G("nzLoading",n.isLoading)}}function fn(i,d){if(1&i&&(t.j41(0,"tr")(1,"td")(2,"span"),t.EFF(3),t.k0s()()()),2&i){const n=d.$implicit;t.R7$(3),t.JRh(n)}}function Rn(i,d){if(1&i&&(t.qex(0),t.j41(1,"nz-table",47,4)(3,"thead")(4,"tr")(5,"th"),t.EFF(6,"Th\xf4ng tin l\u1ed7i"),t.k0s()()(),t.j41(7,"tbody"),t.DNE(8,fn,4,1,"tr",16),t.k0s()(),t.bVm()),2&i){const n=t.sdS(2),o=t.XpG();t.R7$(),t.Y8G("nzData",o.errorScanList)("nzFrontPagination",!1),t.R7$(7),t.Y8G("ngForOf",n.data)}}function En(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",45),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.clearErrorScan())}),t.EFF(2,"X\xf3a"),t.k0s(),t.j41(3,"button",26),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenErrorModal=!1)}),t.EFF(4," Close "),t.k0s()()}}function Mn(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div",7)(2,"label"),t.EFF(3,"QA CARD"),t.k0s(),t.j41(4,"input",48,5),t.mxI("ngModelChange",function(e){t.eBV(n);const r=t.XpG();return t.DH7(r.qaCard,e)||(r.qaCard=e),t.Njj(e)}),t.k0s()(),t.bVm()}if(2&i){const n=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.R50("ngModel",n.qaCard)}}function bn(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",45),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.cancelMoveMaterialToLineWh())}),t.EFF(2," H\u1ee7y "),t.k0s(),t.j41(3,"button",46),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.moveMaterialToLineWh())}),t.EFF(4," Chuy\u1ec3n "),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(3),t.Y8G("nzLoading",n.isLoading)}}const Fn=["qaCardIpt"],wn=["userIpt"],vn=["qrCodeIpt"],Sn=["importQtyIpt"];function kn(i,d){if(1&i&&t.nrm(0,"nz-option",22),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username)}}function jn(i,d){if(1&i){const n=t.RV6();t.j41(0,"i",24),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.qaCard="")}),t.k0s()}}function Tn(i,d){if(1&i&&t.DNE(0,jn,1,0,"i",23),2&i){const n=t.XpG();t.Y8G("ngIf",n.qaCard)}}function Pn(i,d){if(1&i&&(t.j41(0,"li"),t.EFF(1),t.j41(2,"span",26),t.EFF(3),t.nI1(4,"number"),t.k0s()()),2&i){const n=d.$implicit;t.R7$(),t.SpI(" ",n.lotGroup," - "),t.R7$(2),t.SpI("(Qty: ",t.i5U(4,2,n.qty,"1.0-3"),")")}}function Ln(i,d){if(1&i){const n=t.RV6();t.j41(0,"li")(1,"span"),t.EFF(2),t.k0s(),t.EFF(3," - "),t.j41(4,"span",26),t.EFF(5),t.nI1(6,"number"),t.k0s(),t.j41(7,"i",27),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteRecord(e))}),t.k0s()()}if(2&i){const n=d.$implicit;t.R7$(2),t.JRh(n.lotNo),t.R7$(3),t.SpI("(Qty: ",t.i5U(6,2,n.qty,"1.0-3"),")")}}function On(i,d){if(1&i&&(t.j41(0,"tr")(1,"td",25),t.EFF(2),t.j41(3,"span",26),t.EFF(4),t.nI1(5,"number"),t.k0s()(),t.j41(6,"td",25)(7,"ul"),t.DNE(8,Pn,5,5,"li",18),t.k0s()(),t.j41(9,"td",25)(10,"ul"),t.DNE(11,Ln,8,5,"li",18),t.k0s()()()),2&i){const n=d.$implicit;t.R7$(2),t.SpI(" ",n.model," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(5,4,n.qty,"1.0-3"),")"),t.R7$(4),t.Y8G("ngForOf",n.lotGroups),t.R7$(3),t.Y8G("ngForOf",n.lots)}}function Nn(i,d){if(1&i&&t.nrm(0,"nz-alert",31),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotErrMsg)}}function In(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td")(2,"span",32),t.EFF(3),t.k0s()(),t.j41(4,"td")(5,"span",32),t.EFF(6),t.k0s(),t.j41(7,"span",33),t.EFF(8),t.nI1(9,"number"),t.k0s()(),t.j41(10,"td",34)(11,"div",35),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.startEdit(e))}),t.EFF(12),t.nI1(13,"number"),t.k0s(),t.j41(14,"input",36,6),t.mxI("ngModelChange",function(e){const r=t.eBV(n).$implicit;return t.DH7(r.qty,e)||(r.qty=e),t.Njj(e)}),t.bIt("blur",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.stopEdit())}),t.k0s()(),t.j41(16,"td",37)(17,"a",38),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteQRCodeScanned(e))}),t.EFF(18,"X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit,o=t.XpG(2);t.R7$(3),t.JRh(n.partNo),t.R7$(3),t.JRh(n.lotNo),t.R7$(2),t.SpI("(Qty: ",t.i5U(9,7,n.originQty,"1.0-3"),")"),t.R7$(3),t.Y8G("hidden",o.lotNoEdit===n.lotNo),t.R7$(),t.SpI(" ",t.i5U(13,10,n.qty,"1.0-3")," "),t.R7$(2),t.Y8G("hidden",o.lotNoEdit!==n.lotNo),t.R50("ngModel",n.qty)}}function Dn(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div",7)(2,"input",28,4),t.bIt("keydown.enter",function(e){t.eBV(n);const r=t.XpG();return t.Njj(r.scanQRCode(e))})("click",function(){t.eBV(n);const e=t.sdS(3);return t.Njj(e.select())}),t.k0s(),t.DNE(4,Nn,1,1,"nz-alert",29),t.j41(5,"nz-table",30,5)(7,"thead")(8,"tr")(9,"th"),t.EFF(10,"Part No"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Lot No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Qty c\xf2n l\u1ea1i"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Action"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,In,19,13,"tr",18),t.k0s()()(),t.bVm()}if(2&i){const n=t.sdS(6),o=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.Y8G("ngIf",o.lotErrMsg),t.R7$(),t.Y8G("nzData",o.listLotsScanned)("nzFrontPagination",!0)("nzPageSize",10),t.R7$(13),t.Y8G("ngForOf",n.data)}}function An(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",39),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.isOpenScanQRCodeModal=!1)}),t.EFF(2," H\u1ee7y "),t.k0s(),t.j41(3,"button",15),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.sendMaterialToLineWh())}),t.EFF(4," L\u01b0u "),t.k0s()()}}const Vn=["qrCodeIpt"],Qn=["importQtyIpt"],Bn=()=>[""];function xn(i,d){if(1&i&&t.nrm(0,"nz-option",23),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username)}}function $n(i,d){if(1&i&&t.nrm(0,"nz-option",23),2&i){const n=d.$implicit;t.Y8G("nzValue",n.username)("nzLabel",n.name+" - "+n.username)}}function Un(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",24),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.onRowClick(e))}),t.j41(1,"span"),t.EFF(2),t.k0s()()}if(2&i){const n=d.$implicit;t.R7$(2),t.JRh(n.data.slipNo)}}function qn(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"span",25),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG();return t.Njj(r.onExportExcel(e))}),t.EFF(2,"Xu\u1ea5t Excel"),t.k0s()()}}function Wn(i,d){if(1&i&&(t.j41(0,"label"),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2);t.R7$(),t.SpI("S\u1ed1 phi\u1ebfu: ",n.slipNoSelected,"")}}function Xn(i,d){if(1&i&&t.nrm(0,"nz-alert",33),2&i){const n=t.XpG(2);t.Y8G("nzMessage",n.lotErrMsg)}}function Yn(i,d){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",34)(6,"div",35),t.bIt("click",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.startEdit(e))}),t.EFF(7),t.nI1(8,"number"),t.k0s(),t.j41(9,"input",36,3),t.mxI("ngModelChange",function(e){const r=t.eBV(n).$implicit;return t.DH7(r.qty,e)||(r.qty=e),t.Njj(e)}),t.bIt("blur",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.stopEdit(e))}),t.k0s()(),t.j41(11,"td",37),t.EFF(12),t.k0s(),t.j41(13,"td",38),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(2);return t.Njj(r.deleteQRCodeScanned(e))}),t.j41(14,"a",39),t.EFF(15,"X\xf3a"),t.k0s()()()}if(2&i){const n=d.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(n.partNo),t.R7$(2),t.JRh(n.lotNo),t.R7$(2),t.Y8G("hidden",o.lotNoEdit===n.lotNo),t.R7$(),t.SpI(" ",t.i5U(8,7,n.qty,"1.0-3")," "),t.R7$(2),t.Y8G("hidden",o.lotNoEdit!==n.lotNo),t.R50("ngModel",n.qty),t.R7$(3),t.JRh(n.remainingQty)}}function Hn(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div",5)(2,"div",26),t.DNE(3,Wn,2,1,"label",27),t.j41(4,"nz-table",28)(5,"thead")(6,"tr")(7,"th")(8,"input",29,1),t.bIt("keydown.enter",function(e){t.eBV(n);const r=t.XpG();return t.Njj(r.scanQRCode(e))})("click",function(){t.eBV(n);const e=t.sdS(9);return t.Njj(e.select())}),t.k0s()()()()(),t.DNE(10,Xn,1,1,"nz-alert",30),t.j41(11,"nz-table",31,2)(13,"thead")(14,"tr")(15,"th"),t.EFF(16,"Part No"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Lot No"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Qty"),t.k0s(),t.j41(21,"th"),t.EFF(22,"T\u1ed3n"),t.k0s(),t.j41(23,"th"),t.EFF(24,"Action"),t.k0s()()(),t.j41(25,"tbody"),t.DNE(26,Yn,16,10,"tr",32),t.k0s()()()(),t.bVm()}if(2&i){const n=t.sdS(12),o=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("ngIf",o.slipNoSelected),t.R7$(),t.Y8G("nzData",t.lJ4(7,Bn)),t.R7$(6),t.Y8G("ngIf",o.lotErrMsg),t.R7$(),t.Y8G("nzData",o.listLotsScanned)("nzFrontPagination",!1),t.R7$(15),t.Y8G("ngForOf",n.data)}}function Kn(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",40),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.cancelSendLotToPWH())}),t.EFF(2," H\u1ee7y "),t.k0s(),t.j41(3,"button",41),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.sendLotToPWH())}),t.EFF(4," L\u01b0u "),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(3),t.Y8G("nzLoading",n.isLoading)}}function Jn(i,d){if(1&i&&(t.j41(0,"li"),t.EFF(1),t.j41(2,"span",46),t.EFF(3),t.nI1(4,"number"),t.k0s()()),2&i){const n=d.$implicit;t.R7$(),t.SpI(" ",n.lotGroup," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(4,2,n.qty,"1.0-3"),")")}}function Zn(i,d){if(1&i){const n=t.RV6();t.j41(0,"li"),t.EFF(1),t.j41(2,"span",46),t.EFF(3),t.nI1(4,"number"),t.k0s(),t.EFF(5," - "),t.j41(6,"span",47),t.bIt("nzOnConfirm",function(){const e=t.eBV(n).$implicit,r=t.XpG(3);return t.Njj(r.deleteLot(e))}),t.EFF(7," X\xf3a "),t.k0s()()}if(2&i){const n=d.$implicit;t.R7$(),t.SpI(" ",n.lotNo," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(4,3,n.qty,"1.0-3"),")"),t.R7$(3),t.Y8G("nzPopconfirmTitle","X\xf3a: "+n.lotNo)}}function te(i,d){if(1&i&&(t.j41(0,"tr")(1,"td",45),t.EFF(2),t.j41(3,"span",46),t.EFF(4),t.nI1(5,"number"),t.k0s()(),t.j41(6,"td",45)(7,"ul"),t.DNE(8,Jn,5,5,"li",32),t.k0s()(),t.j41(9,"td",45)(10,"ul"),t.DNE(11,Zn,8,6,"li",32),t.k0s()()()),2&i){const n=d.$implicit;t.R7$(2),t.SpI(" ",n.partNo," "),t.R7$(2),t.SpI("(Qty: ",t.i5U(5,4,n.qty,"1.0-3"),")"),t.R7$(4),t.Y8G("ngForOf",n.lotGroups),t.R7$(3),t.Y8G("ngForOf",n.lots)}}function ne(i,d){if(1&i){const n=t.RV6();t.qex(0),t.j41(1,"div")(2,"div",5)(3,"div",42)(4,"label"),t.EFF(5,"S\u1ed1 phi\u1ebfu: "),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",42)(9,"button",43),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.openScanQRCodeModal())}),t.EFF(10," Th\xeam NVL tr\u1ea3 kho "),t.k0s()()()(),t.j41(11,"nz-table",44,4)(13,"thead")(14,"tr")(15,"th"),t.EFF(16,"Part No"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Lot Group"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Lot No"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,te,12,7,"tr",32),t.k0s()(),t.bVm()}if(2&i){const n=t.sdS(12),o=t.XpG();t.R7$(2),t.Y8G("nzGutter",24),t.R7$(5),t.JRh(o.slipNoSelected),t.R7$(4),t.Y8G("nzData",o.lots),t.R7$(11),t.Y8G("ngForOf",n.data)}}function ee(i,d){if(1&i){const n=t.RV6();t.j41(0,"div")(1,"button",40),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.closeDetailModal())}),t.EFF(2,"H\u1ee7y"),t.k0s()()}}const ie=[{path:"re-wh-menu",component:Dt,canActivate:[U.K],data:{roles:["super_admin","MA Relay Level 1"]}},{path:"re-wh-requests",component:Qt},{path:"re-wh-requests/:slipNo",component:(()=>{class i{constructor(n,o,e,r){this.activatedRoute=n,this.reWhSvc=o,this.toastr=e,this.modalService=r,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.arrLots=[],this.isOpenScanQRCodeModal=!1,this.isOpenErrorModal=!1,this.errorScanList=new Array,this.lotErrMsg=null,this.isOpenQACardModal=!1,this.isLoading=!1,this.lotNoEdit=null,this.isLocked=!1}ngOnInit(){this.slipNo=this.activatedRoute.snapshot.paramMap.get("slipNo"),this.getMaterialsBySlipNo(),this.getUsers()}ngAfterViewInit(){}getUsers(){this.reWhSvc.getUsers({}).subscribe(n=>{this.users=n})}getMaterialsBySlipNo(){this.reWhSvc.getMaterialsBySlipNo(this.slipNo).subscribe(n=>{this.lots=n.lots;for(const o of this.lots)this.arrLots.push(o.lotNo);this.prepareData(n)})}prepareData(n){let o=n.parts,e=n.lotGroups,r=n.lots;console.log("parts: ",o);let c=new Array;for(const a of o){let T={partNo:a.partNo,qty:a.qty,lotGroups:new Array,lots:new Array};c.push(T)}for(const a of c){for(const T of e)a.partNo==T.partNo&&a.lotGroups.push(T);for(const T of r)a.partNo==T.partNo&&a.lots.push(T)}this.lots=c,console.log("LOTS: ",this.lots)}showModal(){this.isLocked?this.toastr.warning("Phi\u1ebfu \u0111\xe3 kh\xf3a do \u0111\xe3 nh\u1eadn \u0111\u1ee7 NVL","Warning"):this.sender&&this.receiver?(this.isOpenScanQRCodeModal=!0,setTimeout(()=>{this.qrCodeIpt.nativeElement.focus()},500)):this.toastr.warning("C\u1ea7n nh\u1eadp th\xf4ng tin ng\u01b0\u1eddi giao nh\u1eadn","Warning")}scanQRCode(n){this.qrCodeIpt.nativeElement.select();let o=n.target.value.toUpperCase().split(";"),e={lotNo:o[3],recordType:"RNP",qty:o[2],partNo:o[0],date:new Date,sender:this.sender,receiver:this.receiver,whUserCode:this.sender,reqNo:this.slipNo,flag:"5",qrCode:n.target.value};if(!this.arrLots.includes(e.lotNo)){let r=`Lot ${e.lotNo} kh\xf4ng thu\u1ed9c phi\u1ebfu xu\u1ea5t kho ${this.slipNo}`;return this.lotErrMsg=r,this.errorScanList.push(r),void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500})}this.reWhSvc.scanMaterialV3(e).subscribe(r=>"ERROR"==r.status?(this.lotErrMsg=r.message,this.errorScanList.push(r.message),void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500})):"OK"==r.status?(console.log("DATA: ",r),this.lotErrMsg=null,this.mapLotsScanned.set(n.target.value,r.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0)}receiveLotsFromPWH(){this.listLotsScanned.length?(this.isLoading=!0,this.reWhSvc.saveMaterials(this.listLotsScanned).subscribe(n=>{this.isLoading=!1,this.lotsReceived=n.data,this.getMaterialsBySlipNo(),this.isOpenScanQRCodeModal=!1,this.mapLotsScanned=new Map,this.listLotsScanned=new Array})):this.toastr.warning("Kh\xf4ng c\xf3 Lot n\xe0o \u0111\u01b0\u1ee3c l\u01b0u !")}deleteQRCodeScanned(n){this.mapLotsScanned.delete(n.qrCode),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}clearErrorScan(){this.errorScanList=new Array}openQACardModal(){this.isOpenQACardModal=!0,setTimeout(()=>{this.qaCardIpt.nativeElement.focus()},500)}startEdit(n){setTimeout(()=>{this.importQtyIpt.nativeElement.select()},300),this.lotNoEdit=n.lotNo}stopEdit(){this.lotNoEdit=null,this.importQtyIpt.nativeElement.select()}moveMaterialToLineWh(){if(this.isLoading=!0,!this.qaCard)return this.toastr.warning("C\u1ea7n scan QA Card","Warning"),void this.qaCardIpt.nativeElement.focus();if(!this.lotsReceived)return void this.toastr.warning("Kh\xf4ng c\xf3 Lots n\xe0o \u0111\u01b0\u1ee3c l\u01b0u <br /> C\u1ea7n scan t\u1eebng Lot \u0111\u1ec3 l\u01b0u !","Warning");let n=new Array,o=this.qaCard.toUpperCase().split("*");for(const e of this.lotsReceived){let r={lotNo:e.lotNo,recordType:"RDC",qty:e.qty,date:new Date(o[2]),line:o[1],shift:o[3],whUserCode:"3012982",partNo:e.model,model:o[0],qaCard:this.qaCard,sender:this.receiver};n.push(r)}this.reWhSvc.saveMaterials(n).subscribe(e=>{this.isLoading=!1,this.toastr.success("Chuy\u1ec3n NVL th\xe0nh c\xf4ng","Success"),this.qaCard="",this.isOpenQACardModal=!1,this.lotsReceived=null})}cancelMoveMaterialToLineWh(){this.qaCard="",this.isOpenQACardModal=!1}deleteLot(n){this.reWhSvc.deletePurWhRecordById(n.id).subscribe(o=>{this.getMaterialsBySlipNo(),this.toastr.success("\u0110\xe3 x\xf3a","Success")})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(V.nX),t.rXU(J),t.rXU(j.tw),t.rXU(b.N_))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-rwh-receive-pwh"]],viewQuery:function(o,e){if(1&o&&(t.GBs(Zt,5),t.GBs(tn,5),t.GBs(nn,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.qrCodeIpt=r.first),t.mGM(r=t.lsd())&&(e.qaCardIpt=r.first),t.mGM(r=t.lsd())&&(e.importQtyIpt=r.first)}},decls:43,vars:8,consts:[["basicTable",""],["qrCodeIpt",""],["qrTbl",""],["importQtyIpt",""],["errorScanTbl",""],["qaCardIpt",""],[3,"nzHeader","nzActive"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","12"],["nzAlign","baseline"],["nzShowSearch","","nzAllowClear","","ngModel","lucy","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi giao",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi nh\u1eadn",3,"ngModel","ngModelChange",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary","style","background: #28a745; margin-right: 5px; border: #28a745",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","default","nzDanger","",3,"click",4,"nzSpaceItem"],["nzBordered","","nzSize","small","nzFrontPagination","false",2,"margin-top","15px",3,"nzData"],[4,"ngFor","ngForOf"],["nzTitle","Nh\u1eadn nguy\xean v\u1eadt li\u1ec7u","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Danh s\xe1ch l\u1ed7i","nzWidth","950px",3,"nzVisibleChange","nzVisible"],["nzTitle","Chuy\u1ec3n NVL \u0111\xe3 nh\u1eadn v\xe0o LINE-WH","nzWidth","750px",3,"nzVisibleChange","nzVisible"],["nzShowSearch","","nzAllowClear","","ngModel","lucy","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi giao",3,"ngModelChange","ngModel"],["class","option",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"option",3,"nzValue","nzLabel"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi nh\u1eadn",3,"ngModelChange","ngModel"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary",2,"background","#28a745","margin-right","5px","border","#28a745",3,"click"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nz-icon","","nzType","warning","nzTheme","outline"],[2,"font-weight","bold"],[1,"qty"],["style","color: #1890ff; margin-left: 10px",4,"ngIf"],["style","color: red; margin-left: 5px","nz-popconfirm","",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],[2,"color","#1890ff","margin-left","10px"],["nz-popconfirm","",2,"color","red","margin-left","5px",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-input","","placeholder","Scan QR Code","autocomplete","off",2,"font-weight","bold",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["nzBordered","","nzSize","small",2,"margin-top","15px",3,"nzData","nzFrontPagination","nzPageSize"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nzBordered","","nzSize","small",3,"nzData","nzFrontPagination"],["nz-input","","placeholder","Scan QR Card",3,"ngModelChange","ngModel"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2,"Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4,"Kho trung chuy\u1ec3n"),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6,"Nh\u1eadn NVL t\u1eeb Warehouse"),t.k0s(),t.j41(7,"nz-breadcrumb-item"),t.EFF(8,"Chi ti\u1ebft"),t.k0s()(),t.nrm(9,"br"),t.j41(10,"nz-collapse")(11,"nz-collapse-panel",6)(12,"div",7)(13,"div",8)(14,"nz-space",9),t.DNE(15,on,2,2,"nz-select",10)(16,an,2,2,"nz-select",11),t.k0s()(),t.j41(17,"div",8)(18,"nz-space"),t.DNE(19,sn,2,0,"button",12)(20,ln,2,0,"button",13)(21,cn,2,0,"button",14),t.k0s()()()()(),t.j41(22,"nz-table",15,0)(24,"thead")(25,"tr")(26,"th"),t.EFF(27,"Part No"),t.k0s(),t.j41(28,"th"),t.EFF(29,"Lot Group"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Lot No"),t.k0s()()(),t.j41(32,"tbody"),t.DNE(33,un,12,7,"tr",16),t.k0s()(),t.j41(34,"nz-modal",17),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenScanQRCodeModal,a)||(e.isOpenScanQRCodeModal=a),t.Njj(a)}),t.DNE(35,Cn,19,6,"ng-container",18)(36,zn,5,1,"div",19),t.k0s(),t.j41(37,"nz-modal",20),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenErrorModal,a)||(e.isOpenErrorModal=a),t.Njj(a)}),t.DNE(38,Rn,9,3,"ng-container",18)(39,En,5,0,"div",19),t.k0s(),t.j41(40,"nz-modal",21),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenQACardModal,a)||(e.isOpenQACardModal=a),t.Njj(a)}),t.DNE(41,Mn,6,2,"ng-container",18)(42,bn,5,1,"div",19),t.k0s()}if(2&o){const r=t.sdS(23);t.R7$(11),t.Y8G("nzHeader","Phi\u1ebfu xu\u1ea5t kho: "+e.slipNo)("nzActive",!0),t.R7$(),t.Y8G("nzGutter",24),t.R7$(10),t.Y8G("nzData",e.lots),t.R7$(11),t.Y8G("ngForOf",r.data),t.R7$(),t.R50("nzVisible",e.isOpenScanQRCodeModal),t.R7$(3),t.R50("nzVisible",e.isOpenErrorModal),t.R7$(3),t.R50("nzVisible",e.isOpenQACardModal)}},dependencies:[g.Sq,g.bT,l.me,l.Q0,l.BC,l.vS,f.Uq,f.e,s.hL,s.K7,v.Dn,b.F2,b.Oj,b.A9,S.ld,S.WI,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,h.OL,P.aO,k.c,A.p,M.Sy,D.PV,w.Y,O.Vz,O.pc,it.U5,it.Dq,g.QX],styles:["label[_ngcontent-%COMP%]{font-weight:700}nz-select[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{color:green}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}"]})}return i})()},{path:"re-pr-menu",component:yt},{path:"rwh-send-lwh",component:(()=>{class i{constructor(n,o){this.reWhSvc=n,this.toastr=o,this.isOpenScanQRCodeModal=!1,this.lotErrMsg=null,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.lotNoEdit=null}ngOnInit(){this.getUsers()}ngAfterViewInit(){setTimeout(()=>{this.userIpt.focus()},0)}getUsers(){this.reWhSvc.getUsers({}).subscribe(n=>{this.users=n})}scanUser(n){if(!this.username)return this.toastr.warning("M\xe3 nh\xe2n vi\xean kh\xf4ng h\u1ee3p l\u1ec7 !"),void this.userIpt.clearInput();this.qaCardIpt.nativeElement.focus()}scanQACard(n){if(!this.qaCard||this.qaCard.split("*").length<4||this.qaCard.includes(";"))return this.qaCardIpt.nativeElement.select(),void this.toastr.warning("QA Card kh\xf4ng h\u1ee3p l\u1ec7 !");this.getPartsByModel(this.qaCard.split("*")[0]),this.getPurWhRecords({qaCard:this.qaCard,recordType:"RDC"})}getPartsByModel(n){this.reWhSvc.getPartsByModel(n).subscribe(o=>{let e=new Array;for(const r of o)e.push(r.pncomp);this.partsOfModel=e,console.log("Parts of Model: ",this.partsOfModel)})}getPurWhRecords(n){this.reWhSvc.getPurWhRecords(n).subscribe(o=>{console.log("AAA : ",o),this.prepareData(o)})}checkQACardAndUser(){return this.username?!(!this.qaCard||this.qaCard.split("*").length<4)||(this.toastr.warning("QA Card kh\xf4ng h\u1ee3p l\u1ec7 !"),this.qaCardIpt.nativeElement.select(),!1):(this.toastr.warning("M\xe3 nh\xe2n vi\xean kh\xf4ng h\u1ee3p l\u1ec7 !"),this.userIpt.clearInput(),this.userIpt.focus(),!1)}openScanQRCodeModal(){this.checkQACardAndUser()&&(this.isOpenScanQRCodeModal=!0,setTimeout(()=>{this.qrCodeIpt.nativeElement.focus()},500))}scanQRCode(n){console.log("B\u1eaeT \u0110\u1ea6U SCAN"),this.qrCodeIpt.nativeElement.select();let o=n.target.value.split(";"),e=this.qaCard.split("*"),r={lotNo:o[3],recordType:"RDC",qty:o[2],partNo:o[0],model:e[0],qaCard:this.qaCard,date:new Date(e[2]),line:e[1],shift:e[3],sender:this.username,receiver:this.username,qrCode:n.target.value,whUserCode:this.username,flag:"5"};if(!this.partsOfModel.includes(r.partNo))return this.lotErrMsg=`Lot ${r.lotNo} kh\xf4ng d\xf9ng cho model ${r.model}`,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500});this.reWhSvc.scanMaterialV3(r).subscribe(c=>"ERROR"==c.status?(this.lotErrMsg=c.message,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500})):"OK"==c.status?(this.lotErrMsg=null,this.mapLotsScanned.set(n.target.value,c.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0)}sendMaterialToLineWh(){this.listLotsScanned.length?this.reWhSvc.saveMaterials(this.listLotsScanned).subscribe(n=>{this.getPurWhRecords({qaCard:this.qaCard,recordType:"RDC"}),this.isOpenScanQRCodeModal=!1,this.mapLotsScanned=new Map,this.listLotsScanned=new Array}):this.toastr.warning("Kh\xf4ng c\xf3 Lot n\xe0o \u0111\u01b0\u1ee3c l\u01b0u !")}deleteQRCodeScanned(n){this.mapLotsScanned.delete(n.qrCode),this.listLotsScanned=Array.from(this.mapLotsScanned.values())}startEdit(n){setTimeout(()=>{this.importQtyIpt.nativeElement.select()},300),this.lotNoEdit=n.lotNo}stopEdit(){this.lotNoEdit=null,this.importQtyIpt.nativeElement.select()}deleteRecord(n){console.log("Data Delete: ",n),this.reWhSvc.deletePurWhRecords(n.id).subscribe(o=>{this.toastr.success("X\xf3a th\xe0nh c\xf4ng !","Success"),this.getPurWhRecords({qaCard:this.qaCard,recordType:"RDC"})})}prepareData(n){let o=[];n.reduce((c,a)=>(c[a.model]||(c[a.model]={model:a.model,qty:0},o.push(c[a.model])),c[a.model].qty+=a.qty,c),{});let e=[];n.reduce((c,a)=>(c[a.lotGroup]||(c[a.lotGroup]={model:a.model,lotGroup:a.lotGroup,qty:0},e.push(c[a.lotGroup])),c[a.lotGroup].qty+=a.qty,c),{});let r=new Array;for(const c of o){let a={model:c.model,qty:c.qty,lotGroups:new Array,lots:new Array};r.push(a)}for(const c of r){for(const a of e)c.model==a.model&&c.lotGroups.push(a);for(const a of n)c.model==a.model&&c.lots.push(a)}console.log("Result: ",r),this.purWhRecords=r}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(J),t.rXU(j.tw))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-rwh-send-lwh"]],viewQuery:function(o,e){if(1&o&&(t.GBs(Fn,5),t.GBs(wn,5),t.GBs(vn,5),t.GBs(Sn,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.qaCardIpt=r.first),t.mGM(r=t.lsd())&&(e.userIpt=r.first),t.mGM(r=t.lsd())&&(e.qrCodeIpt=r.first),t.mGM(r=t.lsd())&&(e.importQtyIpt=r.first)}},decls:38,vars:9,consts:[["userIpt",""],["qaCardIpt",""],["qaCardIptTpl",""],["lineWhRecordTbl",""],["qrCodeIpt",""],["qrTbl",""],["importQtyIpt",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","7","nzLg","6"],["nzShowSearch","","nzAllowClear","","ngModel","lucy","nzPlaceHolder","Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",3,"ngModelChange","keydown.enter","nzAutoFocus","ngModel"],["class","option",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-col","","nzXs","12","nzSm","10","nzLg","6"],[3,"nzSuffix"],["nz-input","","placeholder","QA Card",3,"ngModelChange","keydown.enter","click","ngModel"],["nz-col","","nzXs","12","nzSm","3","nzLg","4"],["nz-button","","nzType","primary",3,"click"],["nzText","Danh s\xe1ch NVL \u0111\xe3 chuy\u1ec3n v\xe0o LINE-WH","nzOrientation","left"],["nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],[4,"ngFor","ngForOf"],["nzTitle","Chuy\u1ec3n NVL l\xean xe (LINE-WH)","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],[1,"option",3,"nzValue","nzLabel"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[2,"font-weight","bold"],[1,"qty"],["nz-icon","","nzType","minus-circle","nzTheme","outline","nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a ?",2,"color","red","margin-left","5px",3,"nzOnConfirm"],["nz-input","","placeholder","Scan QR Code",2,"font-weight","bold",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["nzBordered","","nzSize","small",2,"width","100%","margin-top","15px",3,"nzData","nzFrontPagination","nzPageSize"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],[2,"color","black","font-weight","bold"],[2,"color","green","margin-left","3px"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],[2,"text-align","center"],[2,"color","red",3,"click"],["nz-button","","nzType","default",3,"click"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2,"Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4,"Kho trung chuy\u1ec3n"),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6,"Chuy\u1ec3n NVL v\xe0o LINE-WH"),t.k0s()(),t.nrm(7,"br"),t.j41(8,"div",7)(9,"div",8)(10,"nz-select",9,0),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.username,a)||(e.username=a),t.Njj(a)}),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanUser(a))}),t.DNE(12,kn,1,2,"nz-option",10),t.k0s()(),t.j41(13,"div",11)(14,"nz-input-group",12)(15,"input",13,1),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.qaCard,a)||(e.qaCard=a),t.Njj(a)}),t.bIt("keydown.enter",function(a){return t.eBV(r),t.Njj(e.scanQACard(a))})("click",function(){t.eBV(r);const a=t.sdS(16);return t.Njj(a.select())}),t.k0s(),t.DNE(17,Tn,1,1,"ng-template",null,2,t.C5r),t.k0s()(),t.j41(19,"div",14)(20,"button",15),t.bIt("click",function(){return t.eBV(r),t.Njj(e.openScanQRCodeModal())}),t.EFF(21," Chuy\u1ec3n NVL v\xe0o LINE-WH "),t.k0s()()(),t.nrm(22,"nz-divider",16),t.j41(23,"nz-table",17,3)(25,"thead")(26,"tr")(27,"th"),t.EFF(28,"Part No"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Lot Group"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Lot No"),t.k0s()()(),t.j41(33,"tbody"),t.DNE(34,On,12,7,"tr",18),t.k0s()(),t.j41(35,"nz-modal",19),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenScanQRCodeModal,a)||(e.isOpenScanQRCodeModal=a),t.Njj(a)}),t.DNE(36,Dn,19,6,"ng-container",20)(37,An,5,0,"div",21),t.k0s()}if(2&o){const r=t.sdS(18),c=t.sdS(24);t.R7$(8),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("nzAutoFocus",!0),t.R50("ngModel",e.username),t.R7$(2),t.Y8G("ngForOf",e.users),t.R7$(2),t.Y8G("nzSuffix",r),t.R7$(),t.R50("ngModel",e.qaCard),t.R7$(8),t.Y8G("nzData",e.purWhRecords),t.R7$(11),t.Y8G("ngForOf",c.data),t.R7$(),t.R50("nzVisible",e.isOpenScanQRCodeModal)}},dependencies:[g.Sq,g.bT,l.me,l.Q0,l.BC,l.vS,f.Uq,f.e,s.hL,s.K7,v.Dn,b.F2,b.Oj,b.A9,I.j,S.ld,S.WI,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,P.aO,k.c,A.p,M.Sy,M.tg,M.vN,D.PV,w.Y,g.QX],styles:["nz-select[_ngcontent-%COMP%]{width:100%}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{color:green}"]})}return i})()},{path:"rwh-receive-lwh",component:Jt},{path:"rwh-send-pwh",component:(()=>{class i{constructor(n,o,e){this.router=n,this.reWhSvc=o,this.toastr=e,this.baseUrl=C.c.baseUrl,this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.isOpenScanQRCodeModal=!1,this.isOpenDetailModal=!1,this.lotNoEdit=null,this.lotErrMsg=null,this.isLoading=!1}ngOnInit(){this.getUsers(),this.getSlipsRelayReturnWarehouse()}getUsers(){this.reWhSvc.getUsers({}).subscribe(n=>{this.users=n})}getSlipsRelayReturnWarehouse(){this.reWhSvc.getSlipsRelayReturnWarehouse().subscribe(n=>{this.slips=n,console.log("Slips: ",this.slips)})}openScanQRCodeModal(){this.receiver&&this.sender?(this.isOpenScanQRCodeModal=!0,this.isOpenDetailModal=!1,setTimeout(()=>{this.qrCodeIpt.nativeElement.focus()},500)):this.toastr.warning("C\u1ea7n ch\u1ecdn ng\u01b0\u1eddi giao nh\u1eadn","Warning")}scanQRCode(n){this.qrCodeIpt.nativeElement.select();let o=n.target.value.toUpperCase().split(";");this.reWhSvc.scanMaterialV3({lotNo:o[3],recordType:"MRTW",qty:o[2],partNo:o[0],date:new Date,sender:this.sender,receiver:this.receiver,qrCode:n.target.value,whUserCode:this.receiver,flag:"1"}).subscribe(r=>"ERROR"==r.status?(this.lotErrMsg=r.message,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:1500})):"OK"==r.status?(this.lotErrMsg=null,this.mapLotsScanned.set(n.target.value,r.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0)}deleteQRCodeScanned(n){this.mapLotsScanned.delete(n.qrCode),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}startEdit(n){setTimeout(()=>{this.importQtyIpt.nativeElement.focus()},500),this.lotNoEdit=n.lotNo}stopEdit(n){console.log("stopEdit: ",n),n.qty>n.remainingQty?n.qty=n.remainingQty:n.qty<0&&(n.qty=0),this.lotNoEdit=null}sendLotToPWH(){if(this.listLotsScanned.length)if(this.isLoading=!0,this.slipNoSelected){let n=[...this.listLotsScanned];for(const o of n)o.slipNo=this.slipNoSelected;this.reWhSvc.saveMaterials(n).subscribe(o=>{this.getSlipsRelayReturnWarehouse(),this.isOpenScanQRCodeModal=!1,this.toastr.success("Tr\u1ea3 th\xe0nh c\xf4ng","Success"),this.listLotsScanned=new Array,this.mapLotsScanned=new Map,this.isLoading=!1})}else this.reWhSvc.generateSlipNo("MRTW",this.sender).subscribe(n=>{let o=[...this.listLotsScanned];for(const e of o)e.slipNo=n.slipNo;this.reWhSvc.saveMaterials(o).subscribe(e=>{this.getSlipsRelayReturnWarehouse(),this.isOpenScanQRCodeModal=!1,this.toastr.success("Tr\u1ea3 th\xe0nh c\xf4ng","Success"),this.listLotsScanned=new Array,this.mapLotsScanned=new Map,this.isLoading=!1})});else this.toastr.warning("Kh\xf4ng c\xf3 Lot \u0111\u01b0\u1ee3c tr\u1ea3","Info")}cancelSendLotToPWH(){this.isOpenScanQRCodeModal=!1,this.slipNoSelected=null}onRowClick(n){console.log(n.data.slipNo),this.receiver&&this.sender?(this.slipNoSelected=n.data.slipNo,this.reWhSvc.getSlipsRelayReturnWarehouseDetail(n.data.slipNo).subscribe(o=>{this.buildData(o),this.isOpenDetailModal=!0})):this.toastr.warning("C\u1ea7n ch\u1ecdn ng\u01b0\u1eddi giao nh\u1eadn","Warning")}buildData(n){let o=n.parts,e=n.lotGroups,r=n.lots;console.log("parts: ",o);let c=new Array;for(const a of o){let T={partNo:a.partNo,qty:a.qty,lotGroups:new Array,lots:new Array};c.push(T)}for(const a of c){for(const T of e)a.partNo==T.partNo&&a.lotGroups.push(T);for(const T of r)a.partNo==T.partNo&&a.lots.push(T)}this.lots=c,console.log("LOTS: ",this.lots)}closeDetailModal(){this.isOpenDetailModal=!1,this.slipNoSelected=null}onExportExcel(n){let e=`https://10.92.176.57:8080/pur_wh_records.summary?date=${n.data.slipNo.replace("MRTW","").slice(0,-2)}&model=&slip_no=${n.data.slipNo}&product_type_id=&record_type=MRTW&area_id=`;window.open(e,"_blank")}deleteLot(n){console.log("LOT: ",n),this.reWhSvc.deletePurWhRecordById(n.id).subscribe(o=>{this.reWhSvc.getSlipsRelayReturnWarehouseDetail(this.slipNoSelected).subscribe(e=>{this.buildData(e)}),this.toastr.success("OK","Success")})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(V.Ix),t.rXU(J),t.rXU(j.tw))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["app-rwh-send-pwh"]],viewQuery:function(o,e){if(1&o&&(t.GBs(Vn,5),t.GBs(Qn,5)),2&o){let r;t.mGM(r=t.lsd())&&(e.qrCodeIpt=r.first),t.mGM(r=t.lsd())&&(e.importQtyIpt=r.first)}},decls:34,vars:16,consts:[["userIpt",""],["qrCodeIpt",""],["qrTbl",""],["importQtyIpt",""],["basicTable",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","8","nzLg","5"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi giao",3,"ngModelChange","nzAutoFocus","ngModel"],["class","option",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn ng\u01b0\u1eddi nh\u1eadn",3,"ngModelChange","nzAutoFocus","ngModel"],["nz-col","","nzXs","12","nzSm","8","nzLg","6"],["nz-button","","nzType","primary",2,"margin-right","5px",3,"click"],["id","gridMaster",2,"margin-top","10px",3,"dataSource","showColumnLines","showRowLines","showBorders"],[3,"visible"],["caption","S\u1ed1 phi\u1ebfu","dataField","slipNo","cellTemplate","slipNoTemplate"],[3,"click",4,"dxTemplate","dxTemplateOf"],["caption","Ng\xe0y t\u1ea1o","dataField","date","dataType","date","format","yyyy-MM-dd"],["caption","Action","cellTemplate","actionTemplate"],[4,"dxTemplate","dxTemplateOf"],["nzTitle","Tr\u1ea3 NVL v\u1ec1 Kho","nzWidth","100%",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Danh s\xe1ch NVL tr\u1ea3 kho","nzWidth","1100px",3,"nzVisibleChange","nzVisible"],[1,"option",3,"nzValue","nzLabel"],[3,"click"],[1,"excel",3,"click"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],[4,"ngIf"],["nzBordered","","nzFrontPagination","false",3,"nzData"],["id","qrCodeIpt","nz-input","","placeholder","Scan QR Code",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["nzBordered","","nzSize","small",2,"margin-top","15px",3,"nzData","nzFrontPagination"],[4,"ngFor","ngForOf"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],[2,"text-align","right"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-col","","nzXs","12","nzSm","6","nzLg","12"],["nz-button","","nzType","primary",2,"float","right",3,"click"],["nzBordered","","nzSize","small","nzFrontPagination","false",2,"margin-top","15px",3,"nzData"],[2,"font-weight","bold"],[1,"qty"],["nz-popconfirm","",2,"color","red",3,"nzOnConfirm","nzPopconfirmTitle"]],template:function(o,e){if(1&o){const r=t.RV6();t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2,"Relay Factory"),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4,"Kho trung chuy\u1ec3n"),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6,"Tr\u1ea3 h\xe0ng v\u1ec1 kho"),t.k0s()(),t.nrm(7,"br"),t.j41(8,"div",5)(9,"div",6)(10,"nz-select",7,0),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.sender,a)||(e.sender=a),t.Njj(a)}),t.DNE(12,xn,1,2,"nz-option",8),t.k0s()(),t.j41(13,"div",6)(14,"nz-select",9,0),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(e.receiver,a)||(e.receiver=a),t.Njj(a)}),t.DNE(16,$n,1,2,"nz-option",8),t.k0s()(),t.j41(17,"div",10)(18,"button",11),t.bIt("click",function(){return t.eBV(r),t.Njj(e.openScanQRCodeModal())}),t.EFF(19," Tr\u1ea3 NVL v\u1ec1 kho "),t.k0s()()(),t.nrm(20,"br"),t.j41(21,"dx-data-grid",12),t.nrm(22,"dxo-filter-row",13)(23,"dxi-column",14),t.DNE(24,Un,3,1,"div",15),t.nrm(25,"dxi-column",16)(26,"dxi-column",17),t.DNE(27,qn,3,0,"div",18),t.k0s(),t.j41(28,"nz-modal",19),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenScanQRCodeModal,a)||(e.isOpenScanQRCodeModal=a),t.Njj(a)}),t.DNE(29,Hn,27,8,"ng-container",20)(30,Kn,5,1,"div",21),t.k0s(),t.j41(31,"nz-modal",22),t.mxI("nzVisibleChange",function(a){return t.eBV(r),t.DH7(e.isOpenDetailModal,a)||(e.isOpenDetailModal=a),t.Njj(a)}),t.DNE(32,ne,23,4,"ng-container",20)(33,ee,3,0,"div",21),t.k0s()}2&o&&(t.R7$(8),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("nzAutoFocus",!0),t.R50("ngModel",e.sender),t.R7$(2),t.Y8G("ngForOf",e.users),t.R7$(2),t.Y8G("nzAutoFocus",!0),t.R50("ngModel",e.receiver),t.R7$(2),t.Y8G("ngForOf",e.users),t.R7$(5),t.Y8G("dataSource",e.slips)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0),t.R7$(),t.Y8G("visible",!0),t.R7$(2),t.Y8G("dxTemplateOf","slipNoTemplate"),t.R7$(3),t.Y8G("dxTemplateOf","actionTemplate"),t.R7$(),t.R50("nzVisible",e.isOpenScanQRCodeModal),t.R7$(3),t.R50("nzVisible",e.isOpenDetailModal))},dependencies:[g.Sq,g.bT,l.me,l.Q0,l.BC,l.vS,N.s,u.nj_,u.FTx,R.eC,f.Uq,f.e,s.hL,s.K7,b.F2,b.Oj,b.A9,S.ld,S.WI,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,h.OL,P.aO,k.c,A.p,M.Sy,D.PV,w.Y,g.QX],styles:["nz-select[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{color:green}nz-table[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:red}nz-table[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]:hover{cursor:pointer}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}.excel[_ngcontent-%COMP%]{color:green}.excel[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]})}return i})()},{path:"lwh-send-line",component:bt},{path:"lwh-receive-line",component:st},{path:"lwh-change-qacard",component:G},{path:"relay-mapping-qacard",component:Nt},{path:"relay-material-traceability",component:m}];let re=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[V.iI.forChild(ie),V.iI]})}return i})();var ae=p(35154),se=p(19692);let le=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[g.MD,l.YN,l.X1,re,N.N,L.Ti,f.f3,s.EJ,v.Y3,b.U6,$.T,I.g,S.DH,h.$G,P.Zw,M.j,D.g9,w.$,B.Sw,O.GB,E.LE,ae.Qt,ot.hM,se.y,it.pc]})}return i})()},74696:(tt,x,p)=>{p.d(x,{GB:()=>t,Vz:()=>X,pc:()=>q});var g=p(15215),l=p(54438),N=p(73586),w=p(7605),s=p(58728),P=p(40713),L=p(16042),O=p(57806),E=p(21025),I=p(70317),f=p(72544),v=p(28203),M=p(26841);const b=["*"],D=["collapseHeader"];function B(C,Q){if(1&C&&(l.qex(0),l.nrm(1,"span",7),l.bVm()),2&C){const z=Q.$implicit,u=l.XpG(2);l.R7$(),l.Y8G("nzType",z||"right")("nzRotate",u.nzActive?90:0)}}function S(C,Q){if(1&C&&(l.j41(0,"div"),l.DNE(1,B,2,2,"ng-container",3),l.k0s()),2&C){const z=l.XpG();l.R7$(),l.Y8G("nzStringTemplateOutlet",z.nzExpandedIcon)}}function h(C,Q){if(1&C&&(l.qex(0),l.EFF(1),l.bVm()),2&C){const z=l.XpG();l.R7$(),l.JRh(z.nzHeader)}}function $(C,Q){if(1&C&&(l.qex(0),l.EFF(1),l.bVm()),2&C){const z=l.XpG(2);l.R7$(),l.JRh(z.nzExtra)}}function V(C,Q){if(1&C&&(l.j41(0,"div",4),l.DNE(1,$,2,1,"ng-container",3),l.k0s()),2&C){const z=l.XpG();l.R7$(),l.Y8G("nzStringTemplateOutlet",z.nzExtra)}}const U="collapse";let q=(()=>{class C{constructor(z,u,R,k){this.nzConfigService=z,this.cdr=u,this.directionality=R,this.destroy$=k,this._nzModuleName=U,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(U).pipe((0,w.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,w.Q)(this.destroy$)).subscribe(z=>{this.dir=z,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(z){this.listOfNzCollapsePanelComponent.push(z)}removePanel(z){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(z),1)}click(z){this.nzAccordion&&!z.nzActive&&this.listOfNzCollapsePanelComponent.filter(u=>u!==z).forEach(u=>{u.nzActive&&(u.nzActive=!1,u.nzActiveChange.emit(u.nzActive),u.markForCheck())}),z.nzActive=!z.nzActive,z.nzActiveChange.emit(z.nzActive)}static#t=this.\u0275fac=function(u){return new(u||C)(l.rXU(L.yx),l.rXU(l.gRc),l.rXU(v.dS,8),l.rXU(E.y4))};static#n=this.\u0275cmp=l.VBU({type:C,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(u,R){2&u&&l.AVh("ant-collapse-icon-position-start","left"===R.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===R.nzExpandIconPosition)("ant-collapse-ghost",R.nzGhost)("ant-collapse-borderless",!R.nzBordered)("ant-collapse-rtl","rtl"===R.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[l.Jv_([E.y4]),l.aNF],ngContentSelectors:b,decls:1,vars:0,template:function(u,R){1&u&&(l.NAR(),l.SdG(0))},encapsulation:2,changeDetection:0})}return(0,g.Cg)([(0,L.H4)(),(0,I.H3)()],C.prototype,"nzAccordion",void 0),(0,g.Cg)([(0,L.H4)(),(0,I.H3)()],C.prototype,"nzBordered",void 0),(0,g.Cg)([(0,L.H4)(),(0,I.H3)()],C.prototype,"nzGhost",void 0),C})();const W="collapsePanel";let X=(()=>{class C{markForCheck(){this.cdr.markForCheck()}constructor(z,u,R,k,A,H){this.nzConfigService=z,this.ngZone=u,this.cdr=R,this.destroy$=k,this.nzCollapseComponent=A,this.noAnimation=H,this._nzModuleName=W,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new l.bkB,this.nzConfigService.getConfigChangeEventForComponent(W).pipe((0,w.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,N.R)(this.collapseHeader.nativeElement,"click").pipe((0,s.p)(()=>!this.nzDisabled),(0,w.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#t=this.\u0275fac=function(u){return new(u||C)(l.rXU(L.yx),l.rXU(l.SKi),l.rXU(l.gRc),l.rXU(E.y4),l.rXU(q,1),l.rXU(M.z,8))};static#n=this.\u0275cmp=l.VBU({type:C,selectors:[["nz-collapse-panel"]],viewQuery:function(u,R){if(1&u&&l.GBs(D,7),2&u){let k;l.mGM(k=l.lsd())&&(R.collapseHeader=k.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(u,R){2&u&&l.AVh("ant-collapse-no-arrow",!R.nzShowArrow)("ant-collapse-item-active",R.nzActive)("ant-collapse-item-disabled",R.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[l.Jv_([E.y4]),l.aNF],ngContentSelectors:b,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(u,R){1&u&&(l.NAR(),l.j41(0,"div",1,0),l.DNE(2,S,2,1,"div"),l.j41(3,"span",2),l.DNE(4,h,2,1,"ng-container",3),l.k0s(),l.DNE(5,V,2,1,"div",4),l.k0s(),l.j41(6,"div",5)(7,"div",6),l.SdG(8),l.k0s()()),2&u&&(l.BMQ("aria-expanded",R.nzActive),l.R7$(2),l.vxM(2,R.nzShowArrow?2:-1),l.R7$(2),l.Y8G("nzStringTemplateOutlet",R.nzHeader),l.R7$(),l.vxM(5,R.nzExtra?5:-1),l.R7$(),l.AVh("ant-collapse-content-active",R.nzActive),l.Y8G("@.disabled",!(null==R.noAnimation||!R.noAnimation.nzNoAnimation))("@collapseMotion",R.nzActive?"expanded":"hidden"))},dependencies:[O.C,O.m,f.Y3,f.Dn],encapsulation:2,data:{animation:[P.GE]},changeDetection:0})}return(0,g.Cg)([(0,I.H3)()],C.prototype,"nzActive",void 0),(0,g.Cg)([(0,I.H3)()],C.prototype,"nzDisabled",void 0),(0,g.Cg)([(0,L.H4)(),(0,I.H3)()],C.prototype,"nzShowArrow",void 0),C})(),t=(()=>{class C{static#t=this.\u0275fac=function(u){return new(u||C)};static#n=this.\u0275mod=l.$C({type:C});static#e=this.\u0275inj=l.G2t({imports:[X]})}return C})()},19448:(tt,x,p)=>{p.d(x,{g:()=>O,j:()=>L});var g=p(15215),l=p(54438),N=p(57806),w=p(70317);function s(E,I){if(1&E&&(l.qex(0),l.EFF(1),l.bVm()),2&E){const f=l.XpG(2);l.R7$(),l.JRh(f.nzText)}}function P(E,I){if(1&E&&(l.j41(0,"span",0),l.DNE(1,s,2,1,"ng-container",1),l.k0s()),2&E){const f=l.XpG();l.R7$(),l.Y8G("nzStringTemplateOutlet",f.nzText)}}let L=(()=>{class E{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}static#t=this.\u0275fac=function(v){return new(v||E)};static#n=this.\u0275cmp=l.VBU({type:E,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(v,M){2&v&&l.AVh("ant-divider-horizontal","horizontal"===M.nzType)("ant-divider-vertical","vertical"===M.nzType)("ant-divider-with-text",M.nzText)("ant-divider-plain",M.nzPlain)("ant-divider-with-text-left",M.nzText&&"left"===M.nzOrientation)("ant-divider-with-text-right",M.nzText&&"right"===M.nzOrientation)("ant-divider-with-text-center",M.nzText&&"center"===M.nzOrientation)("ant-divider-dashed",M.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:"nzDashed",nzPlain:"nzPlain"},exportAs:["nzDivider"],standalone:!0,features:[l.aNF],decls:1,vars:1,consts:[[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(v,M){1&v&&l.DNE(0,P,2,1,"span",0),2&v&&l.vxM(0,M.nzText?0:-1)},dependencies:[N.C,N.m],encapsulation:2,changeDetection:0})}return(0,g.Cg)([(0,w.H3)()],E.prototype,"nzDashed",void 0),(0,g.Cg)([(0,w.H3)()],E.prototype,"nzPlain",void 0),E})(),O=(()=>{class E{static#t=this.\u0275fac=function(v){return new(v||E)};static#n=this.\u0275mod=l.$C({type:E});static#e=this.\u0275inj=l.G2t({imports:[L]})}return E})()},72874:(tt,x,p)=>{p.d(x,{PV:()=>nt,g9:()=>et});var g=p(15215),l=p(10851),N=p(32753),w=p(60177),s=p(54438),P=p(45286),L=p(7605),O=p(84046),E=p(77312),I=p(50513),f=p(40713),v=p(16042),M=p(26841),b=p(57806),D=p(65463),B=p(70317),S=p(89450),h=p(72544),$=p(35154),V=p(28203),U=p(16389),q=p(25930);const W=["okBtn"],X=["cancelBtn"];function t(m,j){1&m&&(s.j41(0,"div",6),s.nrm(1,"span",14),s.k0s())}function C(m,j){if(1&m&&(s.qex(0),s.j41(1,"span",16),s.nrm(2,"span",17),s.k0s(),s.bVm()),2&m){const _=j.$implicit;s.R7$(2),s.Y8G("nzType",_||"exclamation-circle")}}function Q(m,j){if(1&m&&(s.qex(0),s.DNE(1,C,3,1,"ng-container",10),s.j41(2,"div",15),s.EFF(3),s.k0s(),s.bVm()),2&m){const _=s.XpG(2);s.R7$(),s.Y8G("nzStringTemplateOutlet",_.nzIcon),s.R7$(2),s.JRh(_.nzTitle)}}function z(m,j){if(1&m&&s.EFF(0),2&m){const _=s.XpG(2);s.SpI(" ",_.nzCancelText," ")}}function u(m,j){1&m&&(s.EFF(0),s.nI1(1,"nzI18n")),2&m&&s.SpI(" ",s.bMT(1,1,"Modal.cancelText")," ")}function R(m,j){if(1&m&&s.EFF(0),2&m){const _=s.XpG(2);s.SpI(" ",_.nzOkText," ")}}function k(m,j){1&m&&(s.EFF(0),s.nI1(1,"nzI18n")),2&m&&s.SpI(" ",s.bMT(1,1,"Modal.okText")," ")}function A(m,j){if(1&m){const _=s.RV6();s.j41(0,"div",4)(1,"div",5),s.DNE(2,t,2,0,"div",6),s.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),s.DNE(7,Q,4,2,"ng-container",10),s.k0s(),s.j41(8,"div",11)(9,"button",12,1),s.bIt("click",function(){s.eBV(_);const F=s.XpG();return s.Njj(F.onCancel())}),s.DNE(11,z,1,1)(12,u,2,3),s.k0s(),s.j41(13,"button",13,2),s.bIt("click",function(){s.eBV(_);const F=s.XpG();return s.Njj(F.onConfirm())}),s.DNE(15,R,1,1)(16,k,2,3),s.k0s()()()()()()()}if(2&m){const _=s.XpG();s.AVh("ant-popover-rtl","rtl"===_.dir),s.Y8G("cdkTrapFocusAutoCapture",null!==_.nzAutoFocus)("ngClass",_._classMap)("ngStyle",_.nzOverlayStyle)("@.disabled",!(null==_.noAnimation||!_.noAnimation.nzNoAnimation))("nzNoAnimation",null==_.noAnimation?null:_.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),s.R7$(2),s.vxM(2,_.nzPopconfirmShowArrow?2:-1),s.R7$(5),s.Y8G("nzStringTemplateOutlet",_.nzTitle),s.R7$(2),s.Y8G("nzSize","small"),s.BMQ("cdkFocusInitial","cancel"===_.nzAutoFocus||null),s.R7$(2),s.vxM(11,_.nzCancelText?11:12),s.R7$(2),s.Y8G("nzSize","small")("nzType","danger"!==_.nzOkType?_.nzOkType:"primary")("nzDanger",_.nzOkDanger||"danger"===_.nzOkType)("nzLoading",_.confirmLoading)("disabled",_.nzOkDisabled),s.BMQ("cdkFocusInitial","ok"===_.nzAutoFocus||null),s.R7$(2),s.vxM(15,_.nzOkText?15:16)}}let nt=(()=>{class m extends $.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(Z),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new s.bkB,this.nzOnCancel=new s.bkB,this.nzOnConfirm=new s.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,L.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,L.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#t=this.\u0275fac=function(y){return new(y||m)};static#n=this.\u0275dir=s.FsC({type:m,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(y,F){2&y&&s.AVh("ant-popover-open",F.visible)},inputs:{arrowPointAtCenter:[s.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[s.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[s.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[s.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[s.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[s.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[s.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[s.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[s.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[s.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[s.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[s.Vt3]})}return(0,g.Cg)([(0,B.H3)()],m.prototype,"arrowPointAtCenter",void 0),(0,g.Cg)([(0,B.H3)()],m.prototype,"nzOkDisabled",void 0),(0,g.Cg)([(0,B.H3)()],m.prototype,"nzOkDanger",void 0),(0,g.Cg)([(0,B.H3)()],m.prototype,"nzCondition",void 0),(0,g.Cg)([(0,B.H3)()],m.prototype,"nzPopconfirmShowArrow",void 0),(0,g.Cg)([(0,v.H4)()],m.prototype,"nzPopconfirmBackdrop",void 0),(0,g.Cg)([(0,v.H4)()],m.prototype,"nzAutofocus",void 0),m})(),Z=(()=>{class m extends $.VJ{constructor(_,y,F,G,Y){super(_,F,Y),this.elementRef=y,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new P.B7,this.nzOnConfirm=new P.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=G}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const _=(0,B.cG)(this.nzBeforeConfirm()).pipe((0,O.$)());this.confirmLoading=!0,_.pipe((0,E.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,L.Q)(this.nzVisibleChange),(0,L.Q)(this.destroy$)).subscribe(y=>{y&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const _=this.elementFocusedBeforeModalWasOpened;if(_&&"function"==typeof _.focus){const y=this.document.activeElement,F=this.elementRef.nativeElement;(!y||y===this.document.body||y===F||F.contains(y))&&_.focus()}}static#t=this.\u0275fac=function(y){return new(y||m)(s.rXU(s.gRc),s.rXU(s.aKT),s.rXU(V.dS,8),s.rXU(w.qQ,8),s.rXU(M.z,9))};static#n=this.\u0275cmp=s.VBU({type:m,selectors:[["nz-popconfirm"]],viewQuery:function(y,F){if(1&y&&(s.GBs(W,5,s.aKT),s.GBs(X,5,s.aKT)),2&y){let G;s.mGM(G=s.lsd())&&(F.okBtn=G),s.mGM(G=s.lsd())&&(F.cancelBtn=G)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[s.Vt3,s.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(y,F){if(1&y){const G=s.RV6();s.DNE(0,A,17,20,"ng-template",3,0,s.C5r),s.bIt("overlayOutsideClick",function(K){return s.eBV(G),s.Njj(F.onClickOutside(K))})("detach",function(){return s.eBV(G),s.Njj(F.hide())})("positionChange",function(K){return s.eBV(G),s.Njj(F.onPositionChange(K))})}2&y&&s.Y8G("cdkConnectedOverlayHasBackdrop",F.nzBackdrop)("cdkConnectedOverlayOrigin",F.origin)("cdkConnectedOverlayPositions",F._positions)("cdkConnectedOverlayOpen",F._visible)("cdkConnectedOverlayPush",F.cdkConnectedOverlayPush)("nzArrowPointAtCenter",F.nzArrowPointAtCenter)},dependencies:[N.z_,N.WB,D.$_,D.vT,l.Pd,l.kB,w.YU,w.B3,M.z,b.C,b.m,h.Y3,h.Dn,I.Zw,I.aO,U.c,q.p,S.bP,S.Vc],encapsulation:2,data:{animation:[f.uX]},changeDetection:0})}return m})(),et=(()=>{class m{static#t=this.\u0275fac=function(y){return new(y||m)};static#n=this.\u0275mod=s.$C({type:m});static#e=this.\u0275inj=s.G2t({imports:[Z]})}return m})()}}]);