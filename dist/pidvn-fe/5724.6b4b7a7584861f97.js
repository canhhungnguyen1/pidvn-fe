"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[5724],{85724:($a,aa,N)=>{N.d(aa,{M:()=>pr,t:()=>fr});var je=N(54438),H=N(24292),Ze=N(14435),ee=N(91269),Ye=N(64905),Dt=N(60181),te=N(70370),Ae=N(5042),Pe=N(12101),Oe=N(72463),Be=N(87951),ut=N(18060),Re=N(20736),_t=N(98041),ct=N(49104),Ct=N(46280),Ee=N(80186),Rt=N(12897),oe=N(458),et=N(12984),Ie=N(69050),xt=N(34423),yt=N(56221),$t=N(22154),At=N(71564);const Xt=N(95355).A;var Gt=N(50071),Tt=Math,St=function(e,t,a){e[t]||(e[t]=function(){var r=this._dataSource;return r?r[t].apply(r,arguments):a})};const ra={DataController:yt.A.inherit(function(){function e(s,u,y){return"#N/A"===s?y:(0,Ie.Fl)(s,u)}var t=function(){function y(m,C,P){var E=(m[C]=m[C]||[])[P]={};if(m[C+1]){E.children=m[C+1];for(var V=C+1;V<m.length;V+=1)m[V]=void 0;m.length=C+1}return E}return function(m,C,P,G,E){var Se,V=[],he=(Se=0,(0,Ie.Fo)(m,xe=>{Se=Tt.max(Se,xe.length)}),Se||1),q=new et.cY;return function(m,C,P,G,E){var Se,xe,me,se,ge,Y,V=P.length,he=(Se=m,se=(xe=C)&&xe.length||0,ge=[],Y=new et.cY,(0,et.z7)((0,Ie.vs)(Se,(we,ae)=>{var j=we[0],ue=(0,Ie.AO)(we);(me=y(ge,ue.length,ae)).type="D",me.value=j.value,me.path=ue,me.text=j.text,me.index=j.index,me.displayText=j.displayText,me.key=j.key,me.isEmpty=j.isEmpty,ue.length<se&&(!j.children||0!==j.children.length)&&(me.expanded=!!j.children)})).done(()=>{Y.resolve(y(ge,0,0).children||[])}),Y),{dataFields:q}=E,_e=new et.cY;return(0,et.z7)(he).done(Se=>{E.notifyProgress(.5),E.showGrandTotals&&Se[E.showTotalsPrior?"unshift":"push"]({type:"GT",isEmpty:E.isEmptyGrandTotal});var xe=!1===E.showTotals||q.length>0&&q.length===E.hiddenTotals.length,se=q.length>0&&E.hiddenValues.length===q.length;se&&xe&&(G=1),(!xe||"tree"===E.layout)&&function(ge,Y,me,we){me=me||we,(0,Ie.Fo)(ge,(ae,j)=>{var ue=ae[0];"D"===ue.type&&ue.expanded&&(!1!==Y[ae.length-1].showTotals||we)&&(-1!==j&&((ae[1]?ae[1].children:ge)||[]).splice(me?j:j+1,0,(0,Be.X)({},ue,{children:null,type:"T",expanded:!!me||null,isAdditionalTotal:!0})),me&&(ue.expanded=null))})}(Se,C,E.showTotalsPrior,"tree"===E.layout),(0,et.z7)((0,Ie.vs)(Se,ge=>{var Y=ge[0];(!Y.children||0===Y.children.length)&&(Y.depthSize=G-ge.length+1)})).done(()=>{V>1&&function(ge,Y,me){(0,Ie.Fo)(ge,we=>{var j,ae=we[0];if(!ae.children||0===ae.children.length)for(ae.children=[],j=0;j<Y.length;j+=1){var De="T"===ae.type,Me="D"===ae.type;!1===Y[j].visible||"GT"===ae.type&&me.hiddenGrandTotals.includes(j)||De&&me.hiddenTotals.includes(j)||Me&&me.hiddenValues.includes(j)||ae.children.push({caption:Y[j].caption,path:ae.path,type:ae.type,value:j,index:ae.index,dataIndex:j,isMetric:!0,isEmpty:ae.isEmpty&&ae.isEmpty[j]})}})}(Se,P,E),!E.showEmpty&&function(ge){(0,Ie.Fo)([{children:ge}],(Y,me)=>{var we=Y[0],ae=(Y[1]?Y[1].children:ge)||[],{isEmpty:j}=we;j&&j.length&&(j=we.isEmpty.filter(ue=>ue).length===j.length),we&&!we.children&&j&&(ae.splice(me,1),function ue(De,Me){var ot=De[Me+1];!De[Me].children.length&&ot&&ot.children&&(ot.children.splice(ot.children.indexOf(De[Me]),1),ue(De,Me+1))}(Y,1))})}(Se),E.notifyProgress(.75),(0,et.z7)((0,Ie.vs)(Se,ge=>{var Y=ge[0],{isMetric:me}=Y,we=C[ge.length-1]||{};if("D"===Y.type&&!me&&(Y.width=we.width),se&&"D"===Y.type){var ae=(ge[1]?ge[1].children:Se)||[];ae.splice(ae.indexOf(Y),1)}else Y.wordWrapEnabled=me?P[Y.dataIndex].wordWrapEnabled:we.wordWrapEnabled,Y.isLast=!Y.children||!Y.children.length,Y.isLast&&(0,Pe.__)(E.sortBySummaryPaths,(j,ue)=>{if((0,Oe.O9)(Y.dataIndex)||(ue=ue.slice(0)).pop(),ft=(De=ge)[0],Wt=(0,Oe.Kg)((Me=ue)[0]),mt=ft.dataIndex>=0?De[1]:ft,ot=Wt&&-1!==Me[0].indexOf("&[")&&mt.key||!mt.key?(0,Ie.AO)(De):(0,Pe.Tj)(De,Ft=>Ft.dataIndex>=0?Ft.value:Ft.text).reverse(),"GT"===ft.type&&(ot=ot.slice(1)),ot.join("/")===Me.join("/"))return Y.sorted=!0,!1;var De,Me,ot,ft,Wt,mt}),Y.text=function(j,ue,De){var{text:Me}=j;return(0,Oe.O9)(j.displayText)?Me=j.displayText:(0,Oe.O9)(j.caption)?Me=j.caption:"GT"===j.type&&(Me=De.texts.grandTotal),j.isAdditionalTotal&&(Me=(0,te.GP)(De.texts.total||"",Me)),Me}(Y,0,E)})).done(()=>{Se.length||Se.push({}),E.notifyProgress(1),_e.resolve(Se)})})}),_e}(m,C,P,he,E).done(_e=>{(function(Se,xe,se,ge,Y){var ae,me=0,j=[0];(0,Ie.Fo)(xe,ue=>{var De=ue[0];for(ae=De.isMetric?se:ue.length-1;j.length-1<ae;)j.push(j[j.length-1]);me=function(m,C){var E,V,he,q,_e;return function(E,V,he,q,_e){for(var Se=_e?q:he;!E[Se];)E.push([]);_e?E[Se].push(V):E[Se].unshift(V)}(m,(V=C.lastIndex-C.index||1,he=C.isHorizontal,q=C.isTree,_e={type:(E=C.headerItem).type,text:E.text},E.path&&(_e.path=E.path),E.width&&(_e.width=E.width),(0,Oe.O9)(E.wordWrapEnabled)&&(_e.wordWrapEnabled=E.wordWrapEnabled),E.isLast&&(_e.isLast=!0),E.sorted&&(_e.sorted=!0),E.isMetric&&(_e.dataIndex=E.dataIndex),(0,Oe.O9)(E.expanded)&&(_e.expanded=E.expanded),V>1&&(_e[he?"colspan":"rowspan"]=V),E.depthSize&&E.depthSize>1&&(_e[he?"rowspan":"colspan"]=E.depthSize),E.index>=0&&(_e.dataSourceIndex=E.index),q&&E.children&&E.children.length&&!E.children[0].isMetric&&(_e.width=null,_e.isWhiteSpace=!0),_e),C.index,C.depth,C.isHorizontal),C.headerItem.children&&0!==C.headerItem.children.length?C.lastIndex:C.lastIndex+1}(Se,{headerItem:De,index:j[ae]||0,lastIndex:me,depth:ae,isHorizontal:ge,isTree:Y}),j.length=ae,j.push(me)})})(V,_e,he,G,"tree"===E.layout),E.notifyProgress(1),q.resolve(V)}),q}}();function a(s,u){var y=[];return(0,Pe.__)(s,(m,C)=>{var P=(0,Ie.UI)(u,C.sortBySummaryField);P>=0&&y.push((C.sortBySummaryPath||[]).concat([P]))}),y}function r(s,u){for(var y=0,m=[],C=0;C<s.length;C+=1)for(var P=0;P<s[C].length;P+=1){var E=C+((s[C][P].rowspan||1)-1);if(m[C]&&(y-=m[C],m[C]=0),!1===u(s[C][P],E,C,P,y))break;m[C+(s[C][P].rowspan||1)]=(m[C+(s[C][P].rowspan||1)]||0)+1,y+=1}}function o(s,u){var y=0,m=[];return(0,Ie.Fo)(s,C=>{var P=C[0],G=(0,Ie.AO)(C);if(!P.children||!1!==u.showTotals){var E=(0,Be.X)(!0,{},P,{visibleIndex:y+=1,path:G});(0,Oe.O9)(E.index)?m[E.index]=E:m.push(E)}}),m}function g(s,u,y){return new $t.Ay.VirtualScrollController(u,(0,Be.X)({hasKnownLastPage:()=>!0,pageCount(){return Tt.ceil(this.totalItemsCount()/this.pageSize())},updateLoading(){},itemsCount(){return this.pageIndex()<this.pageCount()-1?this.pageSize():this.totalItemsCount()%this.pageSize()},items:()=>[],viewportItems:()=>[],onChanged(){},isLoading:()=>s.isLoading(),changingDuration:()=>s._dataSource.paginate()?300:s._changingDuration||0},y))}var w={ctor(s){var u=this,y=u._fireChanged.bind(u);s=u._options=s||{},u.dataSourceChanged=(0,xt.A)(),u._dataSource=u._createDataSource(s),s.component&&"virtual"===s.component.option("scrolling.mode")&&(u._rowsScrollController=g(u,s.component,{totalItemsCount:()=>u.totalRowCount(),pageIndex:m=>u.rowPageIndex(m),pageSize:()=>u.rowPageSize(),load(){return u._rowsScrollController.pageIndex()>=this.pageCount()&&u._rowsScrollController.pageIndex(this.pageCount()-1),u._rowsScrollController.handleDataChanged(function(){u._dataSource.paginate()?u._dataSource.load():y.apply(this,arguments)})}}),u._columnsScrollController=g(u,s.component,{totalItemsCount:()=>u.totalColumnCount(),pageIndex:m=>u.columnPageIndex(m),pageSize:()=>u.columnPageSize(),load(){return u._columnsScrollController.pageIndex()>=this.pageCount()&&u._columnsScrollController.pageIndex(this.pageCount()-1),u._columnsScrollController.handleDataChanged(function(){u._dataSource.paginate()?u._dataSource.load():y.apply(this,arguments)})}})),u._stateStoringController=new Xt.StateStoringController(s.component).init(),u._columnsInfo=[],u._rowsInfo=[],u._cellsInfo=[],u.expandValueChanging=(0,xt.A)(),u.loadingChanged=(0,xt.A)(),u.progressChanged=(0,xt.A)(),u.scrollChanged=(0,xt.A)(),u.load(),u._update(),u.changed=(0,xt.A)()},_fireChanged(){var s=new Date;this.changed&&!this._lockChanged&&this.changed.fire(),this._changingDuration=new Date-s},_correctSkipsTakes(s,u,y,m,C,P){var G=y?s+y-1:s;C[m.length]=C[m.length]||0,P[m.length]=P[m.length]||0,G<u?C[m.length]+=1:P[m.length]+=1},_calculatePagingForRowExpandedPaths(s,u,y,m,C){var q,_e,Se,P=this._rowsInfo,G=Math.min(s.rowSkip+s.rowTake,P.length),{rowExpandedPaths:E}=s,V=[],he={};for(E.forEach((ge,Y)=>{he[ge]=Y}),q=0;q<G;q+=1){for(y.length=u.length=V.length+1,_e=0;_e<P[q].length;_e+=1){var xe=P[q][_e];if("D"===xe.type){this._correctSkipsTakes(q,s.rowSkip,xe.rowspan,V,u,y);var se=(Se=xe.path||Se)&&Se.length>1?he[Se.slice(0,-1)]:-1;se>=0&&(m[se]=u[V.length]||0,C[se]=y[V.length]||0),xe.rowspan&&V.push(xe.rowspan)}}V=V.map(ge=>ge-1).filter(ge=>ge>0)}},_calculatePagingForColumnExpandedPaths(s,u,y,m,C){var P={},G={};(0,At.z)(this._columnsInfo,(E,V)=>{if("D"===E.type&&E.path&&void 0===E.dataIndex){var he=E.colspan||1,q=E.path.slice(0,-1).toString();P[q]=P[q]||0,G[q]=G[q]||0,V+he<=s.columnSkip?P[q]+=1:V<s.columnSkip+s.columnTake&&(G[q]+=1)}}),u[0]=P[""],y[0]=G[""],s.columnExpandedPaths.forEach((E,V)=>{var he=P[E],q=G[E];void 0!==he&&(m[V]=he),void 0!==q&&(C[V]=q)})},_processPagingForExpandedPaths(s,u,y,m){var C=s["".concat(u,"ExpandedPaths")],P=C.map(()=>0),G=C.map(()=>m?s.pageSize:0),E=[],V=[];m||("row"===u?this._calculatePagingForRowExpandedPaths(s,E,V,P,G):this._calculatePagingForColumnExpandedPaths(s,E,V,P,G)),this._savePagingForExpandedPaths(s,u,y,E[0],V[0],P,G)},_savePagingForExpandedPaths(s,u,y,m,C,P,G){var E=s["".concat(u,"ExpandedPaths")];s["".concat(u,"ExpandedPaths")]=[],s["".concat(u,"Skip")]=void 0!==m?m:s["".concat(u,"Skip")],s["".concat(u,"Take")]=void 0!==C?C:s["".concat(u,"Take")];for(var V=0;V<E.length;V+=1)if(G[V]){var he=s.area&&s.area!==u;y.push((0,Be.X)({area:u,headerName:"".concat(u,"s")},s,{["".concat(u,"Skip")]:P[V],["".concat(u,"Take")]:G[V],[he?"oppositePath":"path"]:E[V]}))}},_handleCustomizeStoreLoadOptions(s,u){var y=s[0],m=this._rowsScrollController;if(this._dataSource.paginate()&&m){var C=m.pageSize();"rows"===y.headerName?(y.rowSkip=0,y.rowTake=C,y.rowExpandedPaths=[]):(y.rowSkip=m.beginPageIndex()*C,y.rowTake=(m.endPageIndex()-m.beginPageIndex()+1)*C,this._processPagingForExpandedPaths(y,"row",s,u))}var P=this._columnsScrollController;if(this._dataSource.paginate()&&P){var G=P.pageSize();s.forEach(E=>{"columns"===E.headerName?(E.columnSkip=0,E.columnTake=G,E.columnExpandedPaths=[]):(E.columnSkip=P.beginPageIndex()*G,E.columnTake=(P.endPageIndex()-P.beginPageIndex()+1)*G,this._processPagingForExpandedPaths(E,"column",s,u))})}},load(){var s=this,u=this._stateStoringController;u.isEnabled()&&!u.isLoaded()?u.load().always(y=>{y?s._dataSource.state(y):s._dataSource.load()}):s._dataSource.load()},calculateVirtualContentParams(s){var u=this._rowsScrollController,y=this._columnsScrollController;if(u&&y)return u.viewportItemSize(s.virtualRowHeight),u.viewportSize(s.viewportHeight/u.viewportItemSize()),u.setContentItemSizes(s.itemHeights),y.viewportItemSize(s.virtualColumnWidth),y.viewportSize(s.viewportWidth/y.viewportItemSize()),y.setContentItemSizes(s.itemWidths),(0,Ae.OX)(()=>{y.loadIfNeed(),u.loadIfNeed()}),this.scrollChanged.fire({left:y.getViewportPosition(),top:u.getViewportPosition()}),{contentTop:u.getContentOffset(),contentLeft:y.getContentOffset(),width:y.getVirtualContentSize(),height:u.getVirtualContentSize()}},setViewportPosition(s,u){this._rowsScrollController.setViewportPosition(u||0),this._columnsScrollController.setViewportPosition(s||0)},subscribeToWindowScrollEvents(s){var u;null===(u=this._rowsScrollController)||void 0===u||u.subscribeToWindowScrollEvents(s)},updateWindowScrollPosition(s){var u;null===(u=this._rowsScrollController)||void 0===u||u.scrollTo(s)},updateViewOptions(s){(0,Be.X)(this._options,s),this._update()},_handleExpandValueChanging(s){this.expandValueChanging.fire(s)},_handleLoadingChanged(s){this.loadingChanged.fire(s)},_handleProgressChanged(s){this.progressChanged.fire(s)},_handleFieldsPrepared(s){this._options.onFieldsPrepared&&this._options.onFieldsPrepared(s)},_createDataSource(s){var m,u=this,y=s.dataSource;return u._isSharedDataSource=y instanceof Gt.C,m=u._isSharedDataSource?y:new Gt.C(y),u._expandValueChangingHandler=u._handleExpandValueChanging.bind(u),u._loadingChangedHandler=u._handleLoadingChanged.bind(u),u._fieldsPreparedHandler=u._handleFieldsPrepared.bind(u),u._customizeStoreLoadOptionsHandler=u._handleCustomizeStoreLoadOptions.bind(u),u._changedHandler=function(){u._update(),u.dataSourceChanged.fire()},u._progressChangedHandler=function(C){u._handleProgressChanged(.8*C)},m.on("changed",u._changedHandler),m.on("expandValueChanging",u._expandValueChangingHandler),m.on("loadingChanged",u._loadingChangedHandler),m.on("progressChanged",u._progressChangedHandler),m.on("fieldsPrepared",u._fieldsPreparedHandler),m.on("customizeStoreLoadOptions",u._customizeStoreLoadOptionsHandler),m},getDataSource(){return this._dataSource},isLoading(){return this._dataSource.isLoading()},beginLoading(){this._dataSource.beginLoading()},endLoading(){this._dataSource.endLoading()},_update(){var me,s=this,u=s._dataSource,y=s._options,m=u.getAreaFields("column"),C=u.getAreaFields("row"),P=u.getAreaFields("data"),G="row"===y.dataFieldArea?P:[],E="row"!==y.dataFieldArea?P:[],V=u.getData(),he=(me=[],(0,Pe.__)(P,(we,ae)=>{!1===ae.showTotals&&me.push(we)}),me),q=function(Y){var me=[];return Y.forEach((we,ae)=>{(void 0===we.showValues&&!1===we.showTotals||!1===we.showValues)&&me.push(ae)}),me}(P),_e=function(Y,me){var we=[];return(0,Pe.__)(Y,(ae,j)=>{!1===j.showGrandTotals&&we.push(ae)}),0===me.length&&we.length===Y.length&&(we=[]),we}(P,m),Se=!(P.length>0)||_e.length!==P.length,xe={isEmptyGrandTotal:V.isEmptyGrandTotalRow,texts:y.texts||{},hiddenTotals:he,hiddenValues:q,hiddenGrandTotals:[],showTotals:y.showRowTotals,showGrandTotals:!1!==y.showRowGrandTotals&&Se,sortBySummaryPaths:a(m,P),showTotalsPrior:"rows"===y.showTotalsPrior||"both"===y.showTotalsPrior,showEmpty:!y.hideEmptySummaryCells,layout:y.rowHeaderLayout,fields:C,dataFields:P,progress:0},se={isEmptyGrandTotal:V.isEmptyGrandTotalColumn,texts:y.texts||{},hiddenTotals:he,hiddenValues:q,hiddenGrandTotals:_e,showTotals:y.showColumnTotals,showTotalsPrior:"columns"===y.showTotalsPrior||"both"===y.showTotalsPrior,showGrandTotals:!1!==y.showColumnGrandTotals&&Se,sortBySummaryPaths:a(C,P),showEmpty:!y.hideEmptySummaryCells,fields:m,dataFields:P,progress:0},ge=function(Y){this.progress=Y,s._handleProgressChanged(.8+.1*xe.progress+.1*se.progress)};xe.notifyProgress=ge,se.notifyProgress=ge,(0,Oe.O9)(V.grandTotalRowIndex)||(V.grandTotalRowIndex=o(V.rows,xe).length),(0,Oe.O9)(V.grandTotalColumnIndex)||(V.grandTotalColumnIndex=o(V.columns,se).length),u._changeLoadingCount(1),(0,et.z7)(t(V.columns,m,E,!0,se),t(V.rows,C,G,!1,xe)).always(()=>{u._changeLoadingCount(-1)}).done((Y,me)=>{s._columnsInfo=Y,s._rowsInfo=me,s._rowsScrollController&&s._columnsScrollController&&s.changed&&!s._dataSource.paginate()&&(s._rowsScrollController.reset(!0),s._columnsScrollController.reset(!0),s._lockChanged=!0,s._rowsScrollController.load(),s._columnsScrollController.load(),s._lockChanged=!1)}).done(()=>{s._fireChanged(),s._stateStoringController.isEnabled()&&!s._dataSource.isLoading()&&(s._stateStoringController.state(s._dataSource.state()),s._stateStoringController.save())})},getRowsInfo(s){var m,u=this._rowsInfo,y=this._rowsScrollController;if(y&&!s){var C=y.beginPageIndex()*this.rowPageSize(),P=y.endPageIndex()*this.rowPageSize()+this.rowPageSize(),G=[],E=1;return r(u,(V,he,q,_e,Se)=>{var se=q<C?0:q-C,ge=V;if(!(he>=C&&q<P))return!1;G[se]=G[se]||[],C+se+(m=q<C?V.rowspan-(C-q)||1:V.rowspan)>P&&(m=P-(se+C)||1),m!==V.rowspan&&(ge=(0,Be.X)({},ge,{rowspan:m})),G[se].push(ge),E=Tt.max(E,Se+1)}),r(G,(V,he,q,_e,Se)=>{Se+(V.colspan||1)>E&&(G[q][_e]=(0,Be.X)({},V,{colspan:E-Se||1}))}),G}return u},getColumnsInfo(s){var u=this._columnsInfo,y=this._columnsScrollController;if(y&&!s){var m=y.beginPageIndex()*this.columnPageSize(),C=y.endPageIndex()*this.columnPageSize()+this.columnPageSize();u=(0,At.i)(u,m,C)}return u},totalRowCount(){return this._rowsInfo.length},rowPageIndex(s){return void 0!==s&&(this._rowPageIndex=s),this._rowPageIndex||0},totalColumnCount(){var s=0;if(this._columnsInfo&&this._columnsInfo.length)for(var u=0;u<this._columnsInfo[0].length;u+=1)s+=this._columnsInfo[0][u].colspan||1;return s},rowPageSize(s){return void 0!==s&&(this._rowPageSize=s),this._rowPageSize||20},columnPageSize(s){return void 0!==s&&(this._columnPageSize=s),this._columnPageSize||20},columnPageIndex(s){return void 0!==s&&(this._columnPageIndex=s),this._columnPageIndex||0},getCellsInfo(s){var P,G,E,V,q,_e,Se,xe,u=this.getRowsInfo(s),y=this.getColumnsInfo(s),m=this._dataSource.getData(),C=this._options.texts||{};return P=u,G=y,E=m,V=this._dataSource.getAreaFields("data"),q=C.dataNotAvailable,_e=[],Se="row"===this._options.dataFieldArea,(xe=E.values).length&&r(P,(se,ge)=>{var Y=_e[ge]=[],me=xe[se.dataSourceIndex>=0?se.dataSourceIndex:E.grandTotalRowIndex]||[];se.isLast&&(0,At.z)(G,(we,ae)=>{var j=(Se?se.dataIndex:we.dataIndex)||0,ue=V[j];if(we.isLast&&ue&&!1!==ue.visible){var De=me[we.dataSourceIndex>=0?we.dataSourceIndex:E.grandTotalColumnIndex];Array.isArray(De)||(De=[De]);var Me=De[j];Y[ae]={text:e(Me,ue,q),value:Me,format:ue.format,dataType:ue.dataType,columnType:we.type,rowType:se.type,rowPath:se.path||[],columnPath:we.path||[],dataIndex:j},ue.width&&(Y[ae].width=ue.width)}})}),_e},dispose(){this._isSharedDataSource?(this._dataSource.off("changed",this._changedHandler),this._dataSource.off("expandValueChanging",this._expandValueChangingHandler),this._dataSource.off("loadingChanged",this._loadingChangedHandler),this._dataSource.off("progressChanged",this._progressChangedHandler),this._dataSource.off("fieldsPrepared",this._fieldsPreparedHandler),this._dataSource.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler)):this._dataSource.dispose(),this._columnsScrollController&&this._columnsScrollController.dispose(),this._rowsScrollController&&this._rowsScrollController.dispose(),this._stateStoringController.dispose(),this.expandValueChanging.empty(),this.changed.empty(),this.loadingChanged.empty(),this.progressChanged.empty(),this.scrollChanged.empty(),this.dataSourceChanged.empty()}};return St(w,"applyPartialDataSource"),St(w,"collapseHeaderItem"),St(w,"expandHeaderItem"),St(w,"getData"),St(w,"isEmpty"),w}()),DataController__internals:{NO_DATA_AVAILABLE_TEXT:"#N/A"}};var M=N(19900),Q=N(58168),re=N(50448),Z=N(5918),be=N(17669),Ke=function(e){var t=0,{offsetWidth:a}=e;if(e.getBoundingClientRect){var r=(0,re.N)(e);(t=r.width)||(t=r.right-r.left),t<=a-1&&(t=a)}return t>0?t:a};function $e(e,t,a,r){var o=0,g=0,w=a/2;return e+r-(t+a)>1?(e>=t+a+w&&(g=parseInt((e-(t+a))/w,10)),o=t+a+w*g):e<t?(e<=t-w&&(g=parseInt((e-(t-w))/w,10)),o=t-(a-w*g)):o=t,o}var rt=yt.A.inherit({ctor(e){this.component=e},option(){return this.component.option.apply(this.component,arguments)},_getRowElement(e){return this._tableElement&&this._tableElement.length>0?this._tableElement[0].rows[e]:null},_createGroupElement:()=>(0,H.A)("<div>"),_createTableElement:()=>(0,H.A)("<table>"),_getCellText(e,t){var a=e.isWhiteSpace?"&nbsp":e.text||"&nbsp";return t&&(-1!==a.indexOf("<")||-1!==a.indexOf(">"))&&(a=(0,H.A)("<div>").text(a).html()),a},_getRowClassNames(){},_applyCustomStyles(e){e.cell.width&&e.cssArray.push("min-width:".concat(e.cell.width,"px")),e.cell.sorted&&e.classArray.push("dx-pivotgrid-sorted")},_getMainElementMarkup:()=>be.A.createElement("tbody"),_getCloseMainElementMarkup:()=>"</tbody>",_renderTableContent(e,t){var r,o,g,w,s,m,a=t.length,u=this.option("rtlEnabled"),y=this.option("encodeHtml");e.data("area",this._getAreaName()),e.data("data",t),e.css("width","");var C=this._getMainElementMarkup();for(g=0;g<a;g+=1){r=t[g],m=[];var P=be.A.createElement("tr");for(w=0;w<r.length;w+=1){this._getRowClassNames(g,o=r[w],m);var G=be.A.createElement("td");if(o){o.rowspan&&G.setAttribute("rowspan",o.rowspan||1),o.colspan&&G.setAttribute("colspan",o.colspan||1);var E={cellElement:void 0,cell:o,cellsCount:r.length,cellIndex:w,rowElement:void 0,rowIndex:g,rowsCount:a,rtlEnabled:u,classArray:[],cssArray:[]};if(this._applyCustomStyles(E),E.cssArray.length&&(0,Z.eC)(G,E.cssArray.join(";")),E.classArray.length&&G.setAttribute("class",E.classArray.join(" ")),(0,Oe.O9)(o.expanded)){var V=be.A.createElement("div");V.classList.add("dx-expand-icon-container");var he=be.A.createElement("span");he.classList.add("dx-expand"),V.appendChild(he),G.appendChild(V)}s=this._getCellText(o,y)}else s="";var q=be.A.createElement("span");if((0,Oe.O9)(o.wordWrapEnabled)&&(q.style.whiteSpace=o.wordWrapEnabled?"normal":"nowrap"),q.innerHTML=s,G.appendChild(q),o.sorted){var _e=be.A.createElement("span");_e.classList.add("dx-icon-sorted"),G.appendChild(_e)}P.appendChild(G)}m.length&&P.setAttribute("class",m.join(" ")),C.appendChild(P)}e.append(C),this._triggerOnCellPrepared(e,t)},_triggerOnCellPrepared(e,t){var w,s,u,m,C,P,G,a=e.find("tr"),r=this._getAreaName(),o=this.option("onCellPrepared"),g=this.component._eventsStrategy.hasEvent("cellPrepared"),y=this.component._defaultActionArgs();if(o||g)for(P=0;P<t.length;P+=1)for(m=t[P],w=a.eq(P),G=0;G<m.length;G+=1)C=m[G],s=w.children().eq(G),u={area:r,rowIndex:P,columnIndex:G,cellElement:(0,Dt.c)(s),cell:C},g?this.component._trigger("onCellPrepared",u):o((0,Be.X)(u,y))},_getRowHeight(e){var t=this._getRowElement(e),a=0,{offsetHeight:r}=t;return t&&t.lastChild?(t.getBoundingClientRect&&(a=(0,re.N)(t).height)<=r-1&&(a=r),a>0?a:r):0},_setRowHeight(e,t){var a=this._getRowElement(e);a&&(a.style.height="".concat(t,"px"))},getRowsLength(){return this._tableElement&&this._tableElement.length>0?this._tableElement[0].rows.length:0},getRowsHeight(){for(var e=[],t=this.getRowsLength(),a=0;a<t;a+=1)e.push(this._getRowHeight(a));return e},setRowsHeight(e){for(var t=0,a=e.length,r=0;r<a;r+=1)t+=e[r],this._setRowHeight(r,e[r]);this._tableHeight=t,this._tableElement[0].style.height="".concat(t,"px")},getColumnsWidth(){var t,a,r,o,e=this.getRowsLength(),g=[],w=[],s=function(u,y,m,C,P){var G,E;for(G=0;G<C;G+=1)for(E=0;E<P;E+=1)u[y+G]=u[y+G]||[],u[y+G][m+E]=!0};if(e)for(t=0;t<e;t+=1)for(g[t]=g[t]||[],a=this._getRowElement(t),r=0;r<a.cells.length;r+=1){for(o=0;g[t][o];o+=1);s(g,t,o,a.cells[r].rowSpan,a.cells[r].colSpan),1===a.cells[r].colSpan&&(w[o]=w[o]||Ke(a.cells[r]))}return w},setColumnsWidth(e){var t,a=this._tableElement[0];this._colgroupElement.html("");var r=this.getColumnsCount(),o=[];for(t=0;t<r;t+=1)o.push(e[t]||0);for(t=r;t<e.length&&e;t+=1)o[r-1]+=e[t];for(t=0;t<r;t+=1){var g=be.A.createElement("col");g.style.width="".concat(o[t],"px"),this._colgroupElement.append(g)}this._tableWidth=o.reduce((w,s)=>w+s,0),a.style.width="".concat(this._tableWidth,"px"),a.style.tableLayout="fixed"},resetColumnsWidth(){(0,Ee.zj)(this._colgroupElement.find("col"),"auto"),this._tableElement.css({width:"",tableLayout:""})},setGroupWidth(e){this._getScrollable().option("width",e)},setGroupHeight(e){this._getScrollable().option("height",e)},getGroupHeight(){return this._getGroupElementSize("height")},getGroupWidth(){return this._getGroupElementSize("width")},_getGroupElementSize(e){var t=this.groupElement()[0].style[e];return t.indexOf("px")>0?parseFloat(t):null},groupElement(){return this._groupElement},tableElement(){return this._tableElement},element(){return this._rootElement},headElement(){return this._tableElement.find("thead")},_setTableCss(e){this.option("rtlEnabled")&&(e.right=e.left,delete e.left),this.tableElement().css(e)},setVirtualContentParams(e){this._virtualContent.css({width:e.width,height:e.height});var t=this._getScrollable();t?.isRenovated()?this._getScrollable().option("classes","dx-virtual-mode"):this.groupElement().addClass("dx-virtual-mode")},disableVirtualMode(){var e=this._getScrollable();e?.isRenovated()?this._getScrollable().option("classes",""):this.groupElement().removeClass("dx-virtual-mode")},_renderVirtualContent(){!this._virtualContent&&"virtual"===this.option("scrolling.mode")&&(this._virtualContent=(0,H.A)("<div>").addClass("dx-virtual-content").insertBefore(this._tableElement))},reset(){var e=this._tableElement[0];if(this._fakeTable&&this._fakeTable.detach(),this._fakeTable=null,this.disableVirtualMode(),this.setGroupWidth("100%"),this.setGroupHeight("auto"),this.resetColumnsWidth(),e){for(var t=0;t<e.rows.length;t+=1)e.rows[t].style.height="";e.style.height="",e.style.width="100%"}},_updateFakeTableVisibility(){var e=this.tableElement()[0],t=this.option("rtlEnabled")?"right":"left",a=this._fakeTable[0];e.style.top===a.style.top&&a.style[t]===e.style[t]?this._fakeTable.addClass("dx-hidden"):this._fakeTable.removeClass("dx-hidden")},_moveFakeTableHorizontally(e){var a=this.option("rtlEnabled")?"right":"left",o=$e(e,parseFloat(this.tableElement()[0].style[a]),this._tableWidth,this.getGroupWidth());parseFloat(this._fakeTable[0].style[a])!==o&&(this._fakeTable[0].style[a]="".concat(o,"px"))},_moveFakeTableTop(e){var a=$e(e,parseFloat(this.tableElement()[0].style.top),this._tableHeight,this.getGroupHeight());parseFloat(this._fakeTable[0].style.top)!==a&&(this._fakeTable[0].style.top="".concat(a,"px"))},_moveFakeTable(){this._updateFakeTableVisibility()},_createFakeTable(){this._fakeTable||(this._fakeTable=this.tableElement().clone().addClass("dx-pivot-grid-fake-table").appendTo(this._virtualContent))},render(e,t){if(this._tableElement){try{this._tableElement[0].innerHTML=""}catch{this._tableElement.empty()}this._tableElement.attr("style","")}else this._groupElement=this._createGroupElement(),this._tableElement=this._createTableElement(),this._tableElement.appendTo(this._groupElement),this._groupElement.appendTo(e),this._rootElement=e;this._colgroupElement=(0,H.A)("<colgroup>").appendTo(this._tableElement),this._renderTableContent(this._tableElement,t),this._renderVirtualContent()},_getScrollable(){return this.groupElement().data("dxScrollable")},_getMemoizeScrollTo(){var e;return this._memoizeScrollTo=null!==(e=this._memoizeScrollTo)&&void 0!==e?e:function Ne(e){var t=e(),a={};return function(r){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g={top:void 0!==r.top?Math.ceil(r.top):void 0,left:void 0!==r.left?Math.ceil(r.left):void 0};!o&&g.top===a.top&&g.left===a.left||(a=g,t.scrollTo(r))}}(()=>this._getScrollable()),this._memoizeScrollTo},_getMaxLeftOffset(e){var t=(0,H.A)(e.container()).get(0);return t.scrollWidth-t.clientWidth},on(e,t){var a=this,r=a._getScrollable();return r&&r.on(e,o=>{a.option("rtlEnabled")&&(0,Oe.O9)(o.scrollOffset.left)&&(o.scrollOffset.left=a._getMaxLeftOffset(r)-o.scrollOffset.left),t(o)}),this},off(e){var t=this._getScrollable();return t&&t.off(e),this},scrollTo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this._getScrollable();if(a){var r=this.option("rtlEnabled"),o=this._getAreaName(),g=(0,Q.A)((0,Q.A)({},e),{left:!r||"column"!==o&&"data"!==o?e.left:this._getMaxLeftOffset(a)-e.left});this._getMemoizeScrollTo()(g,t),this._virtualContent&&(this._createFakeTable(),this._moveFakeTable(e))}},updateScrollable(){var e=this._getScrollable();if(e)return e.update()},getColumnsCount(){var a,e=0,t=this._getRowElement(0);if(t)for(var r=0,o=(a=t.cells).length;r<o;++r)e+=a[r].colSpan;return e},getData(){var e=this._tableElement;return e?e.data("data"):[]}});const Kt={DataArea:rt.inherit({_getAreaName:()=>"data",_createGroupElement:()=>(0,H.A)("<div>").addClass("dx-pivotgrid-area").addClass("dx-pivotgrid-area-data").css("borderTopWidth",0),_applyCustomStyles(e){var{cell:t}=e,{classArray:a}=e;("T"===t.rowType||"T"===t.columnType)&&a.push("dx-total"),("GT"===t.rowType||"GT"===t.columnType)&&a.push("dx-grandtotal"),("T"===t.rowType||"GT"===t.rowType)&&a.push("dx-row-total"),e.rowIndex===e.rowsCount-1&&e.cssArray.push("border-bottom: 0px"),this.callBase(e)},_moveFakeTable(e){this._moveFakeTableHorizontally(e.x),this._moveFakeTableTop(e.y),this.callBase()},renderScrollable(){this._groupElement.dxScrollable({useNative:this.getUseNativeValue(),useSimulatedScrollbar:!1,rtlEnabled:this.component.option("rtlEnabled"),bounceEnabled:!1,updateManually:!0})},getUseNativeValue(){var{useNative:e}=this.component.option("scrolling");return"auto"===e?!!M.nativeScrolling:!!e},getScrollbarWidth(){return this.getUseNativeValue()?(0,Ie.FY)():0},updateScrollableOptions(e){var{direction:t,rtlEnabled:a}=e,r=this._getScrollable();r.option("useNative",this.getUseNativeValue()),r.option({direction:t,rtlEnabled:a})},getScrollableDirection:(e,t)=>e&&!t?"horizontal":!e&&t?"vertical":"both",reset(){this.callBase(),this._virtualContent&&this._virtualContent.parent().css("height","auto")},setVirtualContentParams(e){this.callBase(e),this._virtualContent.parent().css("height",e.height),this._setTableCss({top:e.top,left:e.left})}})};var ba=N(49057),_a="dx-expand-border",oa=!!ba.A.IS_RENOVATED_WIDGET;function Ca(e,t){if(t){var{data:a}=e.data(),{rowIndex:r}=t.parentNode,{cellIndex:o}=t;return a[r]&&a[r][o]&&a[r][o].path}}var xa=rt.inherit({ctor(e){this.callBase(e),this._scrollBarWidth=0},_getAreaName:()=>"column",_getAreaClassName:()=>"dx-pivotgrid-horizontal-headers",_createGroupElement(){return(0,H.A)("<div>").addClass(this._getAreaClassName()).addClass("dx-pivotgrid-area")},_applyCustomStyles(e){var{cssArray:t}=e,{cell:a}=e,{rowsCount:r}=e,{classArray:o}=e;e.cellIndex===e.cellsCount-1&&t.push("".concat(e.rtlEnabled?"border-left:":"border-right:","0px")),(a.rowspan===r-e.rowIndex||e.rowIndex+1===r)&&t.push("border-bottom-width:0px"),("T"===a.type||"GT"===a.type)&&o.push("dx-row-total"),"T"===e.cell.type&&o.push("dx-total"),"GT"===e.cell.type&&o.push("dx-grandtotal"),(0,Oe.O9)(a.expanded)&&o.push(a.expanded?"dx-pivotgrid-expanded":"dx-pivotgrid-collapsed"),this.callBase(e)},_getMainElementMarkup(){var e=be.A.createElement("thead");return e.setAttribute("class",this._getAreaClassName()),e},_getCloseMainElementMarkup:()=>"</thead>",setVirtualContentParams(e){this.callBase(e),this._setTableCss({left:e.left,top:0}),this._virtualContentWidth=e.width},hasScroll(){var e=this._virtualContent?this._virtualContentWidth:this._tableWidth,t=this.getGroupWidth();return!(!t||!e)&&e-t>=1},renderScrollable(){this._groupElement.dxScrollable({useNative:!1,useSimulatedScrollbar:!1,showScrollbar:"never",bounceEnabled:!1,direction:"horizontal",rtlEnabled:!!oa&&this.component.option("rtlEnabled"),updateManually:!0})},updateScrollableOptions(e){var{rtlEnabled:t}=e,a=this._getScrollable();oa&&a.option({rtlEnabled:t})},processScrollBarSpacing(e){var t=this.option("rtlEnabled")?"right":"left",a=this.getGroupWidth();a&&this.setGroupWidth(a-e),this._scrollBarWidth&&this._groupElement.next().remove(),this._groupElement.toggleClass("dx-vertical-scroll",e>0),(0,Ee.zj)(this._groupElement.css("float",t),this.getGroupHeight()),this._scrollBarWidth=e},getScrollPath(e){var a,t=this.tableElement();return e-=parseInt(t[0].style.left,10)||0,(0,Pe.__)(t.find("td"),(r,o)=>{if(1===o.colSpan&&o.offsetLeft<=e&&o.offsetWidth+o.offsetLeft>e)return a=o,!1}),Ca(t,a)},_moveFakeTable(e){this._moveFakeTableHorizontally(e),this.callBase()}}),ia=xa.inherit({_getAreaClassName:()=>"dx-pivotgrid-vertical-headers",_applyCustomStyles(e){this.callBase(e),e.cellIndex===e.cellsCount-1&&e.classArray.push("dx-last-cell"),e.rowIndex===e.rowsCount-1&&e.cssArray.push("border-bottom: 0px"),e.cell.isWhiteSpace&&e.classArray.push("dx-white-space-column")},_getAreaName:()=>"row",setVirtualContentParams(e){this.callBase(e),this._setTableCss({top:e.top,left:0}),this._virtualContentHeight=e.height},hasScroll(){var e=this._virtualContent?this._virtualContentHeight:this._tableHeight,t=this.getGroupHeight();return!(!t||!e)&&e-t>=1},renderScrollable(){this._groupElement.dxScrollable({useNative:!1,useSimulatedScrollbar:!1,showScrollbar:"never",bounceEnabled:!1,direction:"vertical",updateManually:!0})},processScrollBarSpacing(e){var t=this.getGroupHeight();if(t&&this.setGroupHeight(t-e),this._scrollBarWidth&&this._groupElement.next().remove(),e){var a=(0,H.A)("<div>");(0,Ee.zj)(a,"100%"),(0,Ee.k$)(a,e-1),this._groupElement.after(a)}this._scrollBarWidth=e},getScrollPath(e){var a,t=this.tableElement();return e-=parseInt(t[0].style.top,10)||0,(0,Pe.__)(t.find("tr"),(r,o)=>{var g=o.childNodes[o.childNodes.length-1];if(g&&1===g.rowSpan&&g.offsetTop<=e&&g.offsetHeight+g.offsetTop>e)return a=g,!1}),Ca(t,a)},_moveFakeTable(e){this._moveFakeTableTop(e),this.callBase()},_getRowClassNames(e,t,a){0!==e&t.expanded&&!a.includes(_a)&&a.push(_a)},_getMainElementMarkup(){var e=be.A.createElement("tbody");return e.classList.add(this._getAreaClassName()),e},_getCloseMainElementMarkup:()=>"</tbody>",updateColspans(e){var{rows:t}=this.tableElement()[0],a=0,r=[];if(!(this.getColumnsCount()-e>0))for(var o=0;o<t.length;o+=1)for(var g=0;g<t[o].cells.length;g+=1){var w=t[o].cells[g],{rowSpan:s}=w;r[o]&&(a-=r[o],r[o]=0);var u=e-(a+w.colSpan);g===t[o].cells.length-1&&u>0&&(w.colSpan+=u),r[o+s]=(r[o+s]||0)+w.colSpan,a+=w.colSpan}}});const Qt={HorizontalHeadersArea:xa,VerticalHeadersArea:ia};var Nt=N(2839),bt=N(2097),Jt=N(94711),wa=N(59319),Ia=N(63956),Zt={treeViewItem:"tree-view-item",allowScrolling:"allow-scrolling",itemGroup:"item-group"},ce={area:{self:"dx-area",box:"dx-area-box",caption:"dx-area-caption",icon:"dx-area-icon",field:"dx-area-field",fieldContainer:"dx-area-field-container",fieldContent:"dx-area-field-content",fieldList:"dx-area-fields",fieldListHeader:"dx-area-fields-header"},pivotGrid:{dragAction:"dx-pivotgrid-drag-action",fieldsContainer:"dx-pivotgrid-fields-container"},fieldChooser:{self:"dx-pivotgridfieldchooser",container:"dx-pivotgridfieldchooser-container",contextMenu:"dx-pivotgridfieldchooser-context-menu"},layout:{zero:"dx-layout-0",second:"dx-layout-2"},treeView:{self:"dx-treeview",borderVisible:"dx-treeview-border-visible"},scrollable:{self:"dx-scrollable"},allFields:"dx-all-fields",col:"dx-col",headerFilter:"dx-header-filter",row:"dx-row",widget:"dx-widget"},qt={targets:{drag:"drag"}},Sa=N(66426),pt=N(99393),da=N(69049),{getSwatchContainer:ua}=da.A,kt="dxSortable",ya="dx-sortable-old";function h(e,t,a){return!(0,Oe.O9)(t.posHorizontal)||(a?e>t.posHorizontal:e<t.posHorizontal)}var $=Sa.A.inherit({_getDefaultOptions(){return(0,Be.X)(this.callBase(),{onChanged:null,onDragging:null,itemRender:null,groupSelector:null,itemSelector:".dx-sort-item",itemContainerSelector:".dx-sortable-old",sourceClass:"dx-drag-source",dragClass:"dx-drag",targetClass:"dx-drag-target",direction:"vertical",allowDragging:!0,groupFilter:null,useIndicator:!1})},_renderItem(e,t){var r,a=this.option("itemRender");return a?r=a(e,t):(r=e.clone()).css({width:(0,Ee.RG)(e),height:(0,Ee.Oq)(e)}),r},_renderIndicator(e,t,a,r){var o=(0,Ee.P$)(e,!0),g=(0,Ee.Ot)(e,!0),w=e.offset().top-a.offset().top,s=e.offset().left-a.offset().left;this._indicator.css({position:"absolute",top:r&&t?w+o:w,left:r&&!t?s+g:s}).toggleClass("dx-position-indicator-horizontal",!t).toggleClass("dx-position-indicator-vertical",!!t).toggleClass("dx-position-indicator-last",!!r).appendTo(a),(0,Ee.k$)(this._indicator,""),(0,Ee.zj)(this._indicator,""),t?(0,Ee.zj)(this._indicator,g):(0,Ee.k$)(this._indicator,o)},_renderDraggable(e){this._$draggable&&this._$draggable.remove(),this._$draggable=this._renderItem(e,"drag").addClass(this.option("dragClass")).appendTo(ua(e)).css({zIndex:1e6,position:"absolute"})},_detachEventHandlers(){var e=[pt.Cy,pt.ni,pt._N,pt.Ve,pt.qG,pt.gv].join(" ");ee.A.off(this._getEventListener(),(0,ct.b4)(e,kt),void 0)},_getItemOffset(e,t,a){for(var r=0;r<t.length;r+=1){var o=void 0,g=a.pageY<t[r].posVertical;if(e?o=g:g&&!(o=h(a.pageX,t[r],this.option("rtlEnabled")))&&t[r+1]&&t[r+1].posVertical>t[r].posVertical&&(o=!0),o)return t[r]}},_getEventListener(){var e=this.option("groupSelector"),t=this.$element();return e?t.find(e):t},_attachEventHandlers(){var u,y,m,C,P,G,V,e=this,t=e.option("itemSelector"),a=e.option("itemContainerSelector"),r=e.option("groupSelector"),o=e.option("sourceClass"),g=e.option("targetClass"),w=e.option("onDragging"),s=e.option("groupFilter"),E=e.$element(),he=null,q=-1,_e=function(){he?.dispose(),he=null};if(e._detachEventHandlers(),e.option("allowDragging")){var Se=e._getEventListener();ee.A.on(Se,(0,ct.b4)(pt.ni,kt),t,xe=>{var ge,se=(u=(0,H.A)(xe.currentTarget)).closest(r);G=se.attr("group"),y=function v(e,t){var a=-1,r=t.get(0);return(0,Pe.__)(e,(o,g)=>{var w=(0,H.A)(g);if(w.attr("item-group")&&w.attr("item-group")===e.eq(o-1).attr("item-group")||(a+=1),g===r)return!1}),a===e.length?-1:a}((r?se:E).find(t),u),u.attr("item-group")&&(u=se.find("[item-group='".concat(u.attr("item-group"),"']"))),e._renderDraggable(u),m=e._renderItem(u,"target").addClass(g),u.addClass(o),P=[],(0,Pe.__)(u,(ge,Y)=>{P.push((0,H.A)(Y).offset())}),ge=be.A.getRootNode(e.$element().get(0)),V=r?s?(0,H.A)(ge).find(r).filter(s):E.find(r):E,e._indicator=(0,H.A)("<div>").addClass("dx-position-indicator")}),ee.A.on(Se,(0,ct.b4)(pt.Cy,kt),xe=>{var se,ge,Y,mt;if(u){if(q=-1,e._indicator.detach(),(0,Pe.__)(e._$draggable,(mt,Ft)=>{(0,H.A)(Ft).css({top:P[mt].top+xe.offset.y,left:P[mt].left+xe.offset.x})}),C&&C.removeClass(g),(C=function f(e,t){var a;return(0,Pe.__)(t,function(){(function n(e,t,a){var r=(0,H.A)(e),o=r.offset();if(t>=o.left&&t<=o.left+(0,Ee.Ot)(r,!0)&&a>=o.top&&a<=o.top+(0,Ee.P$)(r,!0))return!0})(this,e.pageX,e.pageY)&&(a=(0,H.A)(this))}),a}(xe,V))&&(mt={sourceGroup:G,sourceIndex:y,sourceElement:u,targetGroup:C.attr("group"),targetIndex:C.find(t).index(m)},w&&w(mt),mt.cancel&&(C=void 0)),C&&he&&C.get(0)!==he.element().get(0)&&_e(),he&&he.moveIfNeed(xe),!C)return void m.detach();!he&&C.attr("allow-scrolling")&&(he=function D(e){var t,a=e.scrollTop(),r=e.$element(),{top:o}=r.offset(),g=(0,Ee.Oq)(r),w=0;function s(m){a=m.scrollOffset.top}function u(){y(),e.scrollTo(a+=w),t=setTimeout(u,10)}function y(){clearTimeout(t)}return e.on("scroll",s),{moveIfNeed:function(m){if(m.pageY<=o+20)w=-2;else{if(!(m.pageY>=o+g-20))return w=0,void y();w=2}u()},element:()=>r,dispose(){y(),e.off("scroll",s)}}}(C.dxScrollable("instance"))),C.addClass(g);var me=C.find(a),we=me.find(t),ae=C.closest(".".concat(ya)).data("dxSortableOld"),j=ae.option("useIndicator"),ue="vertical"===(ae||e).option("direction"),De=function A(e,t,a){for(var r=[],o=[],g=0;g<e.length;g+=o.length)if((o=e.eq(g)).attr("item-group")&&(o=a.find("[item-group='".concat(o.attr("item-group"),"']"))),o.is(":visible")){var w={item:o,index:r.length,posVertical:t?(o.last().offset().top+o.offset().top+(0,Ee.P$)(o.last(),!0))/2:(0,Ee.P$)(o.last(),!0)+o.last().offset().top,posHorizontal:t?void 0:((0,Ee.Ot)(o.last(),!0)+o.last().offset().left+o.offset().left)/2};r.push(w)}return r}(we,ue,me),Me=e._getItemOffset(ue,De,xe);if(Me){if(Y=De[Me.index-1]&&De[Me.index-1].item,(se=Me.item).hasClass(o)||Y&&Y.hasClass(o)&&Y.is(":visible"))return void m.detach();if(q=Me.index,!j)return void m.insertBefore(se);var ot=C.attr("group")!==G,ft=q===y,Wt=q===y+1;if(ot)return void e._renderIndicator(se,ue,C,e.option("rtlEnabled")&&!ue);!ft&&!Wt&&e._renderIndicator(se,ue,C,e.option("rtlEnabled")&&!ue)}else{if((ge=we.last()).is(":visible")&&ge.hasClass(o))return;me.length&&(q=De.length?De[De.length-1].index+1:0),j?we.length&&e._renderIndicator(ge,ue,C,!e.option("rtlEnabled")||ue):m.appendTo(me)}}}),ee.A.on(Se,(0,ct.b4)(pt._N,kt),()=>{if(_e(),u){var xe=e.option("onChanged"),se={sourceIndex:y,sourceElement:u,sourceGroup:G,targetIndex:q,removeSourceElement:!0,removeTargetElement:!1,removeSourceClass:!0};C&&(C.removeClass(g),se.targetGroup=C.attr("group"),(G!==se.targetGroup||q>-1)&&(xe&&xe(se),se.removeSourceElement&&u.remove())),e._indicator.detach(),se.removeSourceClass&&u.removeClass(o),u=null,e._$draggable.remove(),e._$draggable=null,se.removeTargetElement&&m.remove(),m.removeClass(g),m=null}})}},_init(){this.callBase(),this._attachEventHandlers()},_render(){this.callBase(),this.$element().addClass(ya)},_dispose(){this.callBase.apply(this,arguments),this._$draggable&&this._$draggable.detach(),this._indicator&&this._indicator.detach()},_optionChanged(e){switch(e.name){case"onDragging":case"onChanged":case"itemRender":case"groupSelector":case"itemSelector":case"itemContainerSelector":case"sourceClass":case"targetClass":case"dragClass":case"allowDragging":case"groupFilter":case"useIndicator":this._attachEventHandlers();break;case"direction":break;default:this.callBase(e)}},_useTemplates:()=>!1});function Ge(e,t){var a=function de(e,t){var a=e.hasClass(ce.area.box),r=e.attr(Zt.treeViewItem);return a?function ve(e,t){var a=e.clone();return t===qt.targets.drag&&e.each((r,o)=>{var g=parseFloat((0,Ee.Ot)(o));return a.eq(r).css("width",g),!0}),a}(e,t):r?function le(e){return e.clone().addClass(ce.area.box).css("width",parseFloat((0,Ee.Ot)(e)))}(e):function J(e){return(0,H.A)("<div>").addClass(ce.area.field).addClass(ce.area.box).text(e.text())}(e)}(e,t);return t===qt.targets.drag?function pe(e){var t=(0,H.A)("<div>");return e.each((a,r)=>{var o=(0,H.A)("<div>").addClass(ce.pivotGrid.fieldsContainer).addClass(ce.widget).append((0,H.A)(r));return t.append(o),!0}),t.children()}(a):a}$.prototype.__SCROLL_STEP=2,(0,Ye.A)("dxSortableOld",$);var We=Jt.$k.inherit({_getSearchExpr(e,t){return e.useDefaultSearchExpr=!0,this.callBase(e,t)}});function qe(e,t){var a=t;return(0,Oe.O9)(t.groupIndex)&&(a=e.getAreaFields(t.area,!0)[t.areaIndex]),a}function Je(e){return e=e||{},JSON.stringify([e.fields,e.columnExpandedPaths,e.rowExpandedPaths])}var _=_t.A.inherit(wa.A).inherit(Ia.A).inherit(Jt.v2).inherit({_getDefaultOptions(){return(0,Be.X)(this.callBase(),{allowFieldDragging:!0,applyChangesMode:"instantly",state:null,headerFilter:{width:252,height:325,allowSelectAll:!0,showRelevantValues:!1,search:{enabled:!1,timeout:500,editorOptions:{},mode:"contains"},texts:{emptyValue:Re.A.format("dxDataGrid-headerFilterEmptyValue"),ok:Re.A.format("dxDataGrid-headerFilterOK"),cancel:Re.A.format("dxDataGrid-headerFilterCancel")}},remoteSort:!1})},_init(){this.callBase(),this._headerFilterView=new We(this),this._refreshDataSource(),this.subscribeToEvents(),Ct.A.logHeaderFilterDeprecatedWarningIfNeed(this)},_refreshDataSource(){var e=this.option("dataSource");e&&e.fields&&e.load&&(this._dataSource=e)},_optionChanged(e){switch(e.name){case"dataSource":this._refreshDataSource();break;case"applyChangesMode":case"remoteSort":break;case"state":if(this._skipStateChange||!this._dataSource)break;"instantly"===this.option("applyChangesMode")&&Je(this._dataSource.state())!==Je(e.value)?this._dataSource.state(e.value):(this._clean(!0),this._renderComponent());break;case"headerFilter":case"allowFieldDragging":this._invalidate();break;default:this.callBase(e)}},renderField(e,t){var a=(0,H.A)("<div>").addClass(ce.area.fieldContent).text(e.caption||e.dataField),r=(0,H.A)("<div>").addClass(ce.area.field).addClass(ce.area.box).data("field",e).append(a),o=qe(this._dataSource,e);return"data"!==e.area&&(e.allowSorting&&this._applyColumnState({name:"sort",rootElement:r,column:{alignment:this.option("rtlEnabled")?"right":"left",sortOrder:"desc"===e.sortOrder?"desc":"asc",allowSorting:e.allowSorting},showColumnLines:t}),this._applyColumnState({name:"headerFilter",rootElement:r,column:{alignment:this.option("rtlEnabled")?"right":"left",filterValues:o.filterValues,allowFiltering:o.allowFiltering&&!e.groupIndex,allowSorting:e.allowSorting},showColumnLines:t})),e.groupName&&r.attr(Zt.itemGroup,e.groupName),r},_clean(){},_render(){this.callBase(),this._headerFilterView.render(this.$element())},renderSortable(){var e=this;e._createComponent(e.$element(),$,(0,Be.X)({allowDragging:e.option("allowFieldDragging"),itemSelector:".".concat(ce.area.field),itemContainerSelector:".".concat(ce.area.fieldContainer),groupSelector:".".concat(ce.area.fieldList),groupFilter(){var t=e._dataSource,a=(0,H.A)(this).closest(".dx-sortable-old"),r=a.data("dxPivotGrid"),o=a.data("dxPivotGridFieldChooser");return r?r.getDataSource()===t:!!o&&o.option("dataSource")===t},itemRender:Ge,onDragging(t){var a=t.sourceElement.data("field"),{targetGroup:r}=t;t.cancel=!1,!0===a.isMeasure?("column"===r||"row"===r||"filter"===r)&&(t.cancel=!0):!1===a.isMeasure&&"data"===r&&(t.cancel=!0)},useIndicator:!0,onChanged(t){var a=t.sourceElement.data("field");if(t.removeSourceElement=!!t.sourceGroup,e._adjustSortableOnChangedArgs(t),a){var o,{targetIndex:r}=t,g=0;e._processDemandState(w=>{var s=w.getAreaFields(a.area,!0);o=qe(w,a);var y=s.filter(m=>!1!==m.visible)[r-1];y&&(g=s.filter(m=>!1===m.visible&&m.areaIndex<=y.areaIndex).length)}),e._applyChanges([o],{area:t.targetGroup,areaIndex:r+g})}}},e._getSortableOptions()))},_processDemandState(e){var t="instantly"===this.option("applyChangesMode"),a=this._dataSource;if(t)e(a,t);else{var r=a.state(),o=this.option("state");o&&a.state(o,!0),e(a,t),a.state(r,!0)}},_applyChanges(e,t){var a=this;a._processDemandState((r,o)=>{e.forEach(g=>{var{index:w}=g;r.field(w,t)}),o?r.load():a._changedHandler()})},_applyLocalSortChanges(e,t){this._processDemandState(a=>{a.field(e,{sortOrder:t}),a.sortLocal()})},_adjustSortableOnChangedArgs(e){e.removeSourceElement=!1,e.removeTargetElement=!0,e.removeSourceClass=!1},_getSortableOptions:()=>({direction:"auto"}),subscribeToEvents(e){var t=this;ee.A.on(e||t.$element(),ut.U,".".concat(ce.area.field,".").concat(ce.area.box),function(r){var o=(0,H.A)(r.currentTarget).data("field"),g=(0,Be.X)(!0,{},qe(t._dataSource,o)),w=(0,H.A)(r.target).hasClass(ce.headerFilter),s=t._dataSource,u=g.groupName?"tree":"list",y=s.paginate()&&"list"===u;if(w)t._headerFilterView.showHeaderFilterMenu((0,H.A)(r.currentTarget),(0,Be.X)(g,{type:u,encodeHtml:t.option("encodeHtml"),dataSource:{useDefaultSearch:!y,load(P){var{userData:G}=P;if(G.store)return G.store.load(P);var E=new et.cY;return s.getFieldValues(g.index,t.option("headerFilter.showRelevantValues"),y?P:void 0).done(V=>{var he=t.option("headerFilter.texts.emptyValue");V.forEach(q=>{q.text||(q.text=he)}),y?E.resolve(V):(G.store=new bt.A(V),G.store.load(P).done(E.resolve).fail(E.reject))}).fail(E.reject),E},postProcess:P=>(function(e,t){var a=[],r=!!t.groupName,o="exclude"===t.filterType;t.filterValues&&(0,Pe.__)(t.filterValues,(g,w)=>{a.push(Array.isArray(w)?w.join("/"):w&&w.valueOf())}),(0,Ie.Fo)(e,g=>{var w=g[0],s=(0,Ie.AO)(g),u=r?(0,Pe.Tj)(g,m=>m.text).reverse().join("/"):w.text;w.value=r?s.slice(0):w.key||w.value;var y=r?s.join("/"):w.value&&w.value.valueOf();w.children&&(w.items=w.children,w.children=null),(0,Jt.NX)(w,w.key&&a.includes(u)||a.includes(y),o)})}(P,g),P)},apply(){t._applyChanges([g],{filterValues:this.filterValues,filterType:this.filterType})}}));else if(o.allowSorting&&"data"!==o.area){var m=t.option("remoteSort"),C=(e=>"desc"===e?"asc":"desc")(o.sortOrder);m?t._applyChanges([o],{sortOrder:C}):t._applyLocalSortChanges(o.index,C)}})},_initTemplates:Ae.lQ,addWidgetPrefix:e=>"dx-pivotgrid-".concat(e)});(0,Ye.A)("dxPivotGridFieldChooserBase",_);var d="<div>",S=rt.inherit({ctor(e,t){this.callBase(e),this._area=t},_getAreaName:()=>"fields",_createGroupElement(){return(0,H.A)(d).addClass("dx-pivotgrid-fields-area").addClass("dx-area-fields").addClass("dx-pivotgrid-drag-action").attr("group",this._area)},isVisible(){return!!this.option("fieldPanel.visible")&&this.option("fieldPanel.show".concat((0,Ie.Zr)(this._area),"Fields"))},_renderButton(e){var t=this,a=(0,H.A)("<td>").appendTo((0,H.A)("<tr>").appendTo(e));t.component._createComponent((0,H.A)(d).appendTo(a),Nt.A,{text:"Fields",icon:"menu",width:"auto",onClick(){var o=t.tableElement().find(".dx-fields-area-popup").dxPopup("instance");o.option("visible")||o.show()}}).$element().addClass("dx-pivotgrid-fields-area-hamburger")},_getPopupOptions:(e,t)=>({contentTemplate:()=>(0,H.A)("<table>").addClass("dx-area-field-container").append((0,H.A)("<thead>").addClass("dx-pivotgrid-fields-area-head").append(e)),height:"auto",width:"auto",position:{at:"left",my:"left",of:t},dragEnabled:!1,animation:{show:{type:"pop",duration:200}},shading:!1,showTitle:!1,hideOnOutsideClick:!0,container:t.parent()}),_renderPopup(e,t){var a=e.find(".dx-button"),r=this._getPopupOptions(t,a),o=this.component.$element().dxPivotGridFieldChooserBase("instance");this._rowPopup&&this._rowPopup.$element().remove(),this._rowPopup=this.component._createComponent((0,H.A)(d).appendTo(e),Rt.A,r),this._rowPopup.$element().addClass("dx-fields-area-popup"),this._rowPopup.content().addClass("dx-pivotgrid-fields-container"),this._rowPopup.content().parent().attr("group","row"),o.subscribeToEvents(this._rowPopup.content()),o.renderSortable(this._rowPopup.content())},_shouldCreateButton:()=>!1,_renderTableContent(e,t){var a=this,r=this.groupElement(),o=this.isVisible(),g=a.component.$element().dxPivotGridFieldChooserBase("instance"),w=(0,H.A)("<thead>").addClass("dx-pivotgrid-fields-area-head").appendTo(e),s=a._area,u=(0,H.A)("<tr>");r.toggleClass("dx-hidden",!o),e.addClass("dx-area-field-container"),o&&((0,Pe.__)(t,(y,m)=>{if(m.area===s&&!1!==m.visible){var C=(0,H.A)("<td>").append(g.renderField(m,"row"===m.area)),P=C.find(".dx-column-indicators");P.length&&a._shouldCreateButton()&&P.insertAfter(P.next()),C.appendTo(u),function p(e,t,a,r){a&&a.groupName&&a.groupName===e.groupName&&(0,H.A)(d).addClass("dx-group-connector").addClass("dx-group-connector-prev").appendTo(r),t&&t.groupName&&t.groupName===e.groupName&&(0,H.A)(d).addClass("dx-group-connector").addClass("dx-group-connector-next").appendTo(r)}(m,t[y+1],t[y-1],C)}}),u.children().length||(0,H.A)("<td>").append((0,H.A)(d).addClass("dx-empty-area-text").text(this.option("fieldPanel.texts.".concat(s,"FieldArea")))).appendTo(u),a._shouldCreateButton()?(a._renderButton(w),a._renderPopup(e,u)):w.append(u))},setGroupWidth(e){(0,Z.zj)(this.groupElement(),e)},setGroupHeight(e){(0,Z.k$)(this.groupElement(),e)},reset(){this.callBase(),this.groupElement().css("marginTop",0)},_renderVirtualContent:Ae.lQ}),O=N(86018),L=N(58321),F="<div>",z=(0,Ze.Vd)();function I(e,t){var a=[];if(e.items)for(var r=0;r<e.items.length;r+=1)a.push.apply(a,I(e.items[r],t));else(0,Oe.O9)(e.index)&&a.push(t[e.index]);return a}function c(e,t){if(e.items)for(var a=0;a<e.items.length;a+=1){var r=c(e.items[a],t);if(r)return r}if(t(e))return e}var T=[function(e,t){return+!!t.isMeasure-!!e.isMeasure},function(e,t){return+!(!t.items||!t.items.length)-!(!e.items||!e.items.length)},function(e,t){return+!!(!1===e.isMeasure&&e.field&&e.field.levels&&e.field.levels.length)-!!(!1===t.isMeasure&&t.field&&t.field.levels&&t.field.levels.length)},(0,Ie.gK)(e=>e.text)];function b(e,t){for(var a=0,r=0;!a&&T[r];)a=T[r++](e,t);return a}function R(e){return e.find(".".concat(ce.scrollable.self)).dxScrollable("instance")}var B=_.inherit({_getDefaultOptions(){return(0,Be.X)(this.callBase(),{height:400,layout:0,dataSource:null,encodeHtml:!0,onContextMenuPreparing:null,allowSearch:!1,searchTimeout:500,texts:{columnFields:Re.A.format("dxPivotGrid-columnFields"),rowFields:Re.A.format("dxPivotGrid-rowFields"),dataFields:Re.A.format("dxPivotGrid-dataFields"),filterFields:Re.A.format("dxPivotGrid-filterFields"),allFields:Re.A.format("dxPivotGrid-allFields")}})},_refreshDataSource(){var e=this;e._expandedPaths=[],e._changedHandler=e._changedHandler||function(){(0,Pe.__)(e._dataChangedHandlers,(t,a)=>{a()}),e._fireContentReadyAction(),e._skipStateChange=!0,e.option("state",e._dataSource.state()),e._skipStateChange=!1},e._disposeDataSource(),e.callBase(),e._dataSource&&e._dataSource.on("changed",e._changedHandler)},_disposeDataSource(){var e=this._dataSource;e&&(e.off("changed",this._changedHandler),this._dataSource=void 0)},_dispose(){this._disposeDataSource(),this.callBase.apply(this,arguments)},_init(){this.callBase(),this._refreshDataSource(),this._dataChangedHandlers=[],this._initActions()},_initActions(){this._actions={onContextMenuPreparing:this._createActionByOption("onContextMenuPreparing")}},_trigger(e,t){this._actions[e](t)},_setOptionsByReference(){this.callBase(),(0,Be.X)(this._optionsByReference,{dataSource:!0})},_optionChanged(e){switch(e.name){case"dataSource":this._refreshDataSource(),this._invalidate();break;case"layout":case"texts":case"allowSearch":case"searchTimeout":case"encodeHtml":this._invalidate();break;case"onContextMenuPreparing":this._actions[e.name]=this._createActionByOption(e.name);break;default:this.callBase(e)}},_clean(e){!e&&this._dataSource&&this.option("state",this._dataSource.state()),this.$element().children(".".concat(ce.fieldChooser.container)).remove()},_renderLayout0(e){e.addClass(ce.layout.zero);var t=(0,H.A)(F).addClass(ce.row).appendTo(e),a=(0,H.A)(F).addClass(ce.row).appendTo(e),r=(0,H.A)(F).addClass(ce.col).appendTo(t),o=(0,H.A)(F).addClass(ce.col).appendTo(t),g=(0,H.A)(F).addClass(ce.col).appendTo(a),w=(0,H.A)(F).addClass(ce.col).appendTo(a);this._renderArea(r,"all"),this._renderArea(o,"row"),this._renderArea(o,"column"),this._renderArea(g,"filter"),this._renderArea(w,"data")},_renderLayout1(e){var t=(0,H.A)(F).addClass(ce.col).appendTo(e),a=(0,H.A)(F).addClass(ce.col).appendTo(e);this._renderArea(t,"all"),this._renderArea(a,"filter"),this._renderArea(a,"row"),this._renderArea(a,"column"),this._renderArea(a,"data")},_renderLayout2(e){e.addClass(ce.layout.second);var t=(0,H.A)(F).addClass(ce.row).appendTo(e);this._renderArea(t,"all");var a=(0,H.A)(F).addClass(ce.row).appendTo(e),r=(0,H.A)(F).addClass(ce.col).appendTo(a),o=(0,H.A)(F).addClass(ce.col).appendTo(a);this._renderArea(r,"filter"),this._renderArea(r,"row"),this._renderArea(o,"column"),this._renderArea(o,"data")},_initMarkup(){var e=this.$element(),t=(0,H.A)(F).addClass(ce.fieldChooser.container).appendTo(e),a=this.option("layout");this.callBase(),e.addClass(ce.fieldChooser.self).addClass(ce.pivotGrid.fieldsContainer),this._dataChangedHandlers=[];var r=this._dataSource,o="instantly"!==this.option("applyChangesMode")&&r&&r.state();o&&this.option("state")&&r.state(this.option("state"),!0),0===a?this._renderLayout0(t):1===a?this._renderLayout1(t):this._renderLayout2(t),o&&r.state(o,!0)},_renderContentImpl(){this.callBase(),this.renderSortable(),this._renderContextMenu(),this.updateDimensions()},_fireContentReadyAction(){(!this._dataSource||!this._dataSource.isLoading())&&this.callBase()},_getContextMenuArgs(e){var r,o,t=(0,H.A)(e.target).closest(".".concat(ce.area.field)),a=(0,H.A)(e.target).closest(".".concat(ce.area.fieldList));if(t.length){var g=t.data("field");g&&(r=this.getDataSource().field(g.index)||g)}return a.length&&(o=a.attr("group")),{event:e,field:r,area:o,items:[]}},_renderContextMenu(){var e=this,t=e.$element();e._contextMenu&&e._contextMenu.$element().remove(),e._contextMenu=e._createComponent((0,H.A)(F).appendTo(t),oe.A,{onPositioning(a){var{event:r}=a;if(r){var o=e._getContextMenuArgs(r);e._trigger("onContextMenuPreparing",o),o.items&&o.items.length?a.component.option("items",o.items):a.cancel=!0}},target:t,onItemClick(a){a.itemData.onItemClick&&a.itemData.onItemClick(a)},cssClass:ce.fieldChooser.contextMenu})},_createTreeItems(e,t,a){var o,r=this,g=[],w=[],s=t[0],u={};return s?((0,Pe.__)(e,(y,m)=>{var C=m[s]||"";u[C]=u[C]||[],u[C].push(m),void 0===o&&(o=!0),o=o&&!0===m.isMeasure}),(0,Pe.__)(u,(y,m)=>{var C=a?"".concat(a,".").concat(y):y,P=r._createTreeItems(m,t.slice(1),C);y?w.push({key:y,text:y,path:C,isMeasure:P.isMeasure,expanded:r._expandedPaths.includes(C),items:P}):g=P}),(g=w.concat(g)).isMeasure=o):(0,Pe.__)(e,(y,m)=>{var C;!0===m.isMeasure&&(C="measure"),!1===m.isMeasure&&(C=m.groupName?"hierarchy":"dimension"),g.push({index:m.index,field:m,key:m.dataField,selected:(0,Oe.O9)(m.area),text:m.caption||m.dataField,icon:C,isMeasure:m.isMeasure,isDefault:m.isDefault})}),g},_createFieldsDataSource(e){var t=e&&e.fields()||[];t=t.filter(r=>!1!==r.visible&&!(0,Oe.O9)(r.groupIndex));var a=this._createTreeItems(t,["dimension","displayFolder"]);return(0,Ie.po)(a,r=>{r.sort(b)},0,"items"),a},_renderFieldsTreeView(e){var t=this,a=t._dataSource,r=t._createComponent(e,L.A,{dataSource:t._createFieldsDataSource(a),showCheckBoxesMode:"normal",expandNodesRecursive:!1,searchEnabled:t.option("allowSearch"),searchTimeout:t.option("searchTimeout"),useNativeScrolling:!1,itemTemplate(o,g,w){var s,u=(0,H.A)("<div>").toggleClass(ce.area.field,!o.items).attr(Zt.treeViewItem,!0).data("field",o.field).appendTo(w);o.icon&&(null===(s=(0,O.N)(o.icon))||void 0===s||s.appendTo(u)),(0,H.A)("<span>").text(o.text).appendTo(u)},onItemCollapsed(o){var g=t._expandedPaths.indexOf(o.itemData.path);g>=0&&t._expandedPaths.splice(g,1)},onItemExpanded(o){t._expandedPaths.indexOf(o.itemData.path)<0&&t._expandedPaths.push(o.itemData.path)},onItemSelectionChanged(o){var w,s,y,g=o.itemData,u=!0;if(g.items){if(g.selected)return void r.unselectItem(g);if(t._processDemandState(()=>{s=I(g,a.fields());for(var C=0;C<s.length;C+=1)if(s[C].area){u=!1;break}}),u){var m=c(g,C=>C.isDefault)||c(g,C=>(0,Oe.O9)(C.index));return void(m&&r.selectItem(m))}}else w=a.fields()[g.index],g.selected&&(y=w.isMeasure?"data":"column"),w&&(s=[w]);t._applyChanges(s,{area:y,areaIndex:void 0})}});t._dataChangedHandlers.push(function(){var o=R(e),g=o?o.scrollTop():0;r.option({dataSource:t._createFieldsDataSource(a)}),(o=R(e))&&(o.scrollTo({y:g}),o.update())})},_renderAreaFields(e,t){var a=this,r=a._dataSource,o=r?(0,Be.X)(!0,[],r.getAreaFields(t,!0)):[];e.empty(),(0,Pe.__)(o,(g,w)=>{!1!==w.visible&&a.renderField(w,!0).appendTo(e)})},_renderArea(e,t){var w,s,a=this,r=(0,H.A)(F).addClass(ce.area.self).appendTo(e),o=(0,H.A)(F).addClass(ce.area.fieldListHeader).appendTo(r),g=a.option("texts.".concat(t,"Fields"));(0,H.A)("<span>").addClass(ce.area.icon).addClass("dx-area-icon-".concat(t)).appendTo(o),(0,H.A)("<span>").html("&nbsp;").appendTo(o),(0,H.A)("<span>").addClass(ce.area.caption).text(g).appendTo(o);var u=(0,H.A)(F).addClass(ce.area.fieldList).addClass(ce.pivotGrid.dragAction).appendTo(r);"all"!==t?(u.attr("group",t).attr(Zt.allowScrolling,!0),w=(0,H.A)(F).addClass(ce.area.fieldContainer).appendTo(u),s=function(){a._renderAreaFields(w,t)},a._dataChangedHandlers.push(s),s(),u.dxScrollable({useNative:!1})):(r.addClass(ce.allFields),u.addClass(ce.treeView.borderVisible),a._renderFieldsTreeView(u))},_getSortableOptions:()=>({}),_adjustSortableOnChangedArgs(){},resetTreeView(){var e=this.$element().find(".".concat(ce.treeView.self)).dxTreeView("instance");e&&(e.option("searchValue",""),e.collapseAll())},applyChanges(){var e=this.option("state");(0,Oe.O9)(e)&&this._dataSource.state(e)},cancelChanges(){var e=this._dataSource;return!e.isLoading()&&(this.option("state",e.state()),!0)},getDataSource(){return this._dataSource},updateDimensions(){this.$element().find(".".concat(ce.area.self," .").concat(ce.scrollable.self)).dxScrollable("update")},_visibilityChanged(e){e&&z&&this.updateDimensions()}});(0,Ye.A)("dxPivotGridFieldChooser",B);var ie=N(45),W=N(15655),U=N(96580),X={exportTo(){var e=this._createActionByOption("onExporting"),t={rtlEnabled:this.option("rtlEnabled"),fileName:"PivotGrid",cancel:!1};(0,Oe.Tn)(e)&&e(t)},_getLength(e){var t,a=e[0].length,r=0;for(t=0;t<a;t+=1)r+=e[0][t].colspan||1;return r},_correctCellsInfoItemLengths(e,t){for(var a=0;a<e.length;a+=1)for(;e[a].length<t;)e[a].push({});return e},_calculateCellInfoItemLength(e){for(var t=0,a=0;a<e.length;a+=1)t+=(0,Oe.O9)(e[a].colspan)?e[a].colspan:1;return t},_getEmptyCell:()=>({text:"",value:void 0,colspan:1,rowspan:1}),_getAllItems(e,t,a){var r,o,g=a,w=this._getLength(t),s=e.length;if(e.length>0&&e[0].length>0&&a.length>0&&0===a[0].length){var u=this._calculateCellInfoItemLength(e[0]);u>0&&(g=this._correctCellsInfoItemLengths(a,u))}if(0===g.length)for(var y=t.length,m=e.map(E=>E.filter(V=>!V.expanded).length).reduce((E,V)=>E+V,0),C=0;C<y;C+=1){g[C]=[];for(var P=0;P<m;P+=1)g[C][P]=this._getEmptyCell()}var G=e.concat(g);for(o=0;o<t.length;o+=1)for(r=t[o].length-1;r>=0;r-=1)(0,Oe.O9)(G[o+s])||(G[o+s]=[]),G[o+s].splice(0,0,(0,Be.X)({},t[o][r]));return G[0].splice(0,0,(0,Be.X)({},this._getEmptyCell(),{alignment:(0,re.n)(this._options.rtlEnabled),colspan:w,rowspan:s})),(0,U.Q)(G,this._getEmptyCell())},getDataProvider(){return new Te(this)}},Te=yt.A.inherit({ctor(e){this._exportController=e},ready(){this._initOptions();var e=this._options;return(0,et.z7)(e.items).done(t=>{var r=t[t[0][0].rowspan-1];(0,Pe.__)(r,(o,g)=>{g.width=100}),e.columns=r,e.items=t})},_initOptions(){var e=this._exportController,t=e._dataController,a=new et.cY;t.beginLoading(),setTimeout(()=>{var r=(0,Be.X)(!0,[],t.getColumnsInfo(!0)),o=(0,Be.X)(!0,[],t.getRowsInfo(!0)),g=t.getCellsInfo(!0);a.resolve(e._getAllItems(r,o,g)),t.endLoading()}),this._options={items:a,rtlEnabled:e.option("rtlEnabled"),dataFields:e.getDataSource().getAreaFields("data"),rowsArea:e._rowsArea,columnsArea:e._columnsArea}},getColumns(){return this._options.columns},getColumnsWidths(){var e=this._options.columnsArea,{rowsArea:t}=this._options,{columns:a}=this._options;return!(0,Ze.Vd)()||"virtual"===e.option("scrolling.mode")||e.element().is(":hidden")?a.map(()=>100):t.getColumnsWidth().concat(e.getColumnsWidth())},getRowsCount(){return this._options.items.length},getGroupLevel:()=>0,getCellMerging(e,t){var{items:a}=this._options,r=a[e]&&a[e][t];return r?{colspan:r.colspan-1,rowspan:r.rowspan-1}:{colspan:0,rowspan:0}},getFrozenArea(){return{x:this.getRowAreaColCount(),y:this.getColumnAreaRowCount()}},getCellType(e,t){var a=this.getStyles()[this.getStyleId(e,t)];return a&&a.dataType||"string"},getCellData(e,t,a){var r={},{items:o}=this._options,g=o[e]&&o[e][t]||{};if(a){r.cellSourceData=g;var w=this._tryGetAreaName(g,e,t);w&&(r.cellSourceData.area=w),r.cellSourceData.rowIndex=e,r.cellSourceData.columnIndex=t}return r.value="string"===this.getCellType(e,t)?g.text:g.value,r.cellSourceData&&r.cellSourceData.isWhiteSpace&&(r.value=""),r},_tryGetAreaName(e,t,a){return this.isColumnAreaCell(t,a)?"column":this.isRowAreaCell(t,a)?"row":(0,Oe.O9)(e.dataIndex)?"data":void 0},isRowAreaCell(e,t){return e>=this.getColumnAreaRowCount()&&t<this.getRowAreaColCount()},isColumnAreaCell(e,t){return t>=this.getRowAreaColCount()&&e<this.getColumnAreaRowCount()},getColumnAreaRowCount(){return this._options.items[0][0].rowspan},getRowAreaColCount(){return this._options.items[0][0].colspan},getHeaderStyles(){return[{alignment:"center",dataType:"string"},{alignment:(0,re.n)(this._options.rtlEnabled),dataType:"string"}]},getDataFieldStyles(){var{dataFields:e}=this._options,t={alignment:this._options.rtlEnabled?"left":"right"},a=[];return e.length?(e.forEach(r=>{a.push((0,Q.A)((0,Q.A)({},t),{format:r.format,dataType:this.getCellDataType(r)}))}),a):[t]},getStyles(){return this._styles||(this._styles=[...this.getHeaderStyles(),...this.getDataFieldStyles()]),this._styles},getCellDataType(e){if(e&&e.customizeText)return"string";if(e.dataType)return e.dataType;if(e.format){if(1===W.A.parse(ie.A.format(1,e.format)))return"number";if(ie.A.format(new Date,e.format))return"date"}return"string"},getStyleId(e,t){var{items:a}=this._options,r=a[e]&&a[e][t]||{};return 0===t&&0===e||this.isColumnAreaCell(e,t)?0:this.isRowAreaCell(e,t)?1:this.getHeaderStyles().length+(r.dataIndex||0)}}),ye={number:"numeric",date:"datetime"},Le="dxPivotGridUnbinding";function ke(e,t){var a=[],r=t.length-1;return(0,Pe.__)(e,(o,g)=>{a.push(g.text||(0,Ie.Fl)(g.value,t[r-o]))}),a.reverse()}function He(e){var t=0;return(0,Ie.Fo)(e,a=>{t=Math.max(t,a.length-1)}),t}function ze(e,t){var a=e.getAreaFields("data");if("args"!==t.putDataFieldsInto&&"singleAxis"!==t.dataFieldsDisplayMode||1===a.length){var r=[];return(0,Pe.__)(a,(o,g)=>{var w={name:g.caption,title:g.caption,valueType:ye[g.dataType]||g.dataType,label:{format:g.format}};g.customizeText&&(w.label.customizeText=function(s){return g.customizeText.call(g,s)}),"splitPanes"===t.dataFieldsDisplayMode&&(w.pane=g.caption),r.push(w)}),r}return[{}]}function st(e,t){var a=[],r=e.getAreaFields("data");return r.length>1&&"splitPanes"===t.dataFieldsDisplayMode&&"args"!==t.putDataFieldsInto&&(0,Pe.__)(r,(o,g)=>{a.push({name:g.caption})}),a.length||a.push({}),a}var va={bindChart(e,t){t=(0,Be.X)({},t);var a=this,r=function(){t.grandTotalText=a.option("texts.grandTotal");var g=function dt(e,t){var{customizeSeries:a}=t,{customizeChart:r}=t,o={valueAxis:ze(e,t),panes:st(e,t)},g={};return r&&(o=(0,Be.X)(!0,{},o,r(o))),o.dataSource=function lt(e,t,a){var P,G,E,V,he,q,_e,Se,xe,se,r=e.getData(),o=[],g=e.getAreaFields("data"),w=e.getAreaFields("row"),s=e.getAreaFields("column"),u=[{index:r.grandTotalColumnIndex,children:r.columns}],y=[{index:r.grandTotalRowIndex,children:r.rows}],m=He(y),C=He(u);function ge(){var j,we=(r.values[E]||[])[_e]||[],ae=we[P],ue={rowPath:q,maxRowLevel:m,rowPathFormatted:he,rowFields:w,columnPathFormatted:se,maxColumnLevel:C,columnPath:xe,columnFields:s,dataFields:g,dataIndex:P,dataValues:we,visible:Se&&V},De=(t.inverted?se:he).join(" - "),Me=(t.inverted?he:se).join("/");g.length>1&&(("args"===t.putDataFieldsInto||"both"===t.putDataFieldsInto)&&(Me+=" | ".concat(G.caption)),"args"!==t.putDataFieldsInto&&(De+=" | ".concat(G.caption),"singleAxis"!==t.dataFieldsDisplayMode&&(j=G.caption))),ue.chartDataItem={val:void 0===ae?null:ae,series:De,arg:Me},ue=function Ue(e,t){var{chartDataItem:a}=e,r=t&&t(e);return r?(a=(0,Be.X)({},a,r.chartDataItem),r=(0,Be.X)({},e,r,{chartDataItem:a})):e}(ue,t.processCell),ue.visible&&(a[ue.chartDataItem.series]=a[ue.chartDataItem.series]||j,o.push(ue.chartDataItem))}function Y(we){(0,Ie.Fo)(y,ae=>{E=ae[0].index,ae=ae.slice(0,ae.length-1),V=m===ae.length,q=(0,Ie.AO)(ae),he=ke(ae,w),0===q.length&&(he=[t.grandTotalText]),(0,Ie.Fo)(u,j=>{_e=j[0].index,j=j.slice(0,j.length-1),Se=C===j.length,xe=(0,Ie.AO)(j),se=ke(j,s),0===xe.length&&(se=[t.grandTotalText]),we()})})}function me(we){(0,Pe.__)(g,(ae,j)=>{G=j,P=ae,we()})}return!1===t.alternateDataFields?me(()=>{Y(ge)}):Y(()=>{me(ge)}),o}(e,t,g),o.seriesTemplate={nameField:"series",customizeSeries(w){var s={};return"splitPanes"===t.dataFieldsDisplayMode?s.pane=g[w]:"singleAxis"!==t.dataFieldsDisplayMode&&(s.axis=g[w]),a&&(s=(0,Be.X)(s,a(w,s))),s}},o}(a.getDataSource(),t);e.option(g)};if(e=function ea(e){if(!e)return!1;if(e.NAME)return"dxChart"===e.NAME&&e;var t=(0,H.A)(e);return t.data("dxChart")&&t.dxChart("instance")}(e),!e)return null;(function Aa(e){var t=e.$element().data(Le);t&&t()})(e),a.on("changed",r),r();var o=function(){e.$element().removeData(Le),a.off("changed",r)};return e.on("disposing",o),this.on("disposing",o),e.$element().data(Le,o),o}},Xa=(0,Ze.zk)(),ja="dx-area-data-cell",La="dx-area-row-cell",Ya="dx-area-column-cell",Ra="dx-area-description-cell",Ka="dx-pivotgrid-border",Qa="dx-pivotgrid",Ea="dx-bottom-border",Ja="dx-area-fields",Za="dx-incompressible-fields",Ga="dx-overflow-hidden",Pa="<tr>",ta="<td>",zt="<div>",er=["allowSorting","allowSortingBySummary","allowFiltering","allowExpandAll"];function Ha(e){var t=0;return(0,Pe.__)(e,(a,r)=>{t+=r||0}),t}function Ma(e,t){for(var a=t/e.length,r=0;r<e.length;r+=1)e[r]-=a}function tr(e){e.off("scroll").off("stop")}function ar(e,t){var a="width"===t?["borderLeftWidth","borderRightWidth"]:["borderTopWidth","borderBottomWidth"],r=0;return(0,Pe.__)(e,(o,g)=>{var w=Xa.getComputedStyle(g.get(0));a.forEach(s=>{r+=parseFloat(w[s])||0})}),r}var Na=_t.A.inherit({_getDefaultOptions(){return(0,Be.X)(this.callBase(),{scrolling:{timeout:300,renderingThreshold:150,minTimeout:10,mode:"standard",useNative:"auto",removeInvisiblePages:!0,virtualRowHeight:50,virtualColumnWidth:100,loadTwoPagesOnStart:!0},encodeHtml:!0,dataSource:null,activeStateEnabled:!1,fieldChooser:{minWidth:250,minHeight:250,enabled:!0,allowSearch:!1,searchTimeout:500,layout:0,title:Re.A.format("dxPivotGrid-fieldChooserTitle"),width:600,height:600,applyChangesMode:"instantly"},onContextMenuPreparing:null,allowSorting:!1,allowSortingBySummary:!1,allowFiltering:!1,allowExpandAll:!1,wordWrapEnabled:!0,fieldPanel:{showColumnFields:!0,showFilterFields:!0,showDataFields:!0,showRowFields:!0,allowFieldDragging:!0,visible:!1,texts:{columnFieldArea:Re.A.format("dxPivotGrid-columnFieldArea"),rowFieldArea:Re.A.format("dxPivotGrid-rowFieldArea"),filterFieldArea:Re.A.format("dxPivotGrid-filterFieldArea"),dataFieldArea:Re.A.format("dxPivotGrid-dataFieldArea")}},dataFieldArea:"column",export:{enabled:!1,fileName:"PivotGrid"},showRowTotals:!0,showRowGrandTotals:!0,showColumnTotals:!0,showColumnGrandTotals:!0,hideEmptySummaryCells:!0,showTotalsPrior:"none",rowHeaderLayout:"standard",loadPanel:{enabled:!0,text:Re.A.format("Loading"),width:200,height:70,showIndicator:!0,indicatorSrc:"",showPane:!0},texts:{grandTotal:Re.A.format("dxPivotGrid-grandTotal"),total:Re.A.getFormatter("dxPivotGrid-total"),noData:Re.A.format("dxDataGrid-noDataText"),showFieldChooser:Re.A.format("dxPivotGrid-showFieldChooser"),expandAll:Re.A.format("dxPivotGrid-expandAll"),collapseAll:Re.A.format("dxPivotGrid-collapseAll"),sortColumnBySummary:Re.A.getFormatter("dxPivotGrid-sortColumnBySummary"),sortRowBySummary:Re.A.getFormatter("dxPivotGrid-sortRowBySummary"),removeAllSorting:Re.A.format("dxPivotGrid-removeAllSorting"),exportToExcel:Re.A.format("dxDataGrid-exportToExcel"),dataNotAvailable:Re.A.format("dxPivotGrid-dataNotAvailable")},onCellClick:null,onCellPrepared:null,showBorders:!1,stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3},onExpandValueChanging:null,renderCellCountLimit:2e4,onExporting:null,headerFilter:{width:252,height:325,allowSelectAll:!0,showRelevantValues:!1,search:{enabled:!1,timeout:500,editorOptions:{},mode:"contains"},texts:{emptyValue:Re.A.format("dxDataGrid-headerFilterEmptyValue"),ok:Re.A.format("dxDataGrid-headerFilterOK"),cancel:Re.A.format("dxDataGrid-headerFilterCancel")}}})},_updateCalculatedOptions(e){var t=this;(0,Pe.__)(e,(a,r)=>{(0,Pe.__)(er,(o,g)=>{(void 0===r[g]||r._initProperties&&g in r._initProperties&&void 0===r._initProperties[g])&&(0,Ie.CE)(r,g,t.option(g))})})},_getDataControllerOptions(){var e=this;return{component:e,dataSource:e.option("dataSource"),texts:e.option("texts"),showRowTotals:e.option("showRowTotals"),showRowGrandTotals:e.option("showRowGrandTotals"),showColumnTotals:e.option("showColumnTotals"),showTotalsPrior:e.option("showTotalsPrior"),showColumnGrandTotals:e.option("showColumnGrandTotals"),dataFieldArea:e.option("dataFieldArea"),rowHeaderLayout:e.option("rowHeaderLayout"),hideEmptySummaryCells:e.option("hideEmptySummaryCells"),onFieldsPrepared(t){e._updateCalculatedOptions(t)}}},_initDataController(){var e=this;e._dataController&&e._dataController.dispose(),e._dataController=new ra.DataController(e._getDataControllerOptions()),(0,Ze.Vd)()&&e._dataController.changed.add(()=>{e._render()}),e._dataController.scrollChanged.add(a=>{e._scrollLeft=a.left,e._scrollTop=a.top}),e._dataController.loadingChanged.add(()=>{e._updateLoading()}),e._dataController.progressChanged.add(e._updateLoading.bind(e)),e._dataController.dataSourceChanged.add(()=>{e._trigger("onChanged")});var t=e.option("onExpandValueChanging");t&&e._dataController.expandValueChanging.add(a=>{t(a)})},_init(){this.callBase(),this._initDataController(),Ct.A.logHeaderFilterDeprecatedWarningIfNeed(this),this._scrollLeft=this._scrollTop=null,this._initActions()},_initActions(){this._actions={onChanged:this._createActionByOption("onChanged"),onContextMenuPreparing:this._createActionByOption("onContextMenuPreparing"),onCellClick:this._createActionByOption("onCellClick"),onExporting:this._createActionByOption("onExporting"),onCellPrepared:this._createActionByOption("onCellPrepared")}},_trigger(e,t){this._actions[e](t)},_optionChanged(e){if(er.includes(e.name)){var t=this.getDataSource().fields();this._updateCalculatedOptions(t)}switch(e.name){case"dataSource":case"allowSorting":case"allowFiltering":case"allowExpandAll":case"allowSortingBySummary":case"scrolling":case"stateStoring":this._initDataController(),this._fieldChooserPopup.hide(),this._renderFieldChooser(),this._invalidate();break;case"texts":case"showTotalsPrior":case"showRowTotals":case"showRowGrandTotals":case"showColumnTotals":case"showColumnGrandTotals":case"hideEmptySummaryCells":case"dataFieldArea":this._dataController.updateViewOptions(this._getDataControllerOptions());break;case"useNativeScrolling":case"encodeHtml":case"renderCellCountLimit":case"onExpandValueChanging":break;case"rtlEnabled":this.callBase(e),this._renderFieldChooser(),this._renderContextMenu(),(0,Ze.Vd)()&&this._renderLoadPanel(this._dataArea.groupElement(),this.$element()),this._invalidate();break;case"export":this._renderDescriptionArea();break;case"onCellClick":case"onContextMenuPreparing":case"onExporting":case"onExported":case"onFileSaving":case"onCellPrepared":this._actions[e.name]=this._createActionByOption(e.name);break;case"fieldChooser":this._renderFieldChooser(),this._renderDescriptionArea();break;case"loadPanel":(0,Ze.Vd)()&&("loadPanel.enabled"===e.fullName?(clearTimeout(this._hideLoadingTimeoutID),this._renderLoadPanel(this._dataArea.groupElement(),this.$element())):(this._renderLoadPanel(this._dataArea.groupElement(),this.$element()),this._invalidate()));break;case"fieldPanel":this._renderDescriptionArea(),this._invalidate();break;case"headerFilter":this._renderFieldChooser(),this._invalidate();break;case"showBorders":this._tableElement().toggleClass(Ka,!!e.value),this.updateDimensions();break;case"wordWrapEnabled":this._tableElement().toggleClass("dx-word-wrap",!!e.value),this.updateDimensions();break;case"rowHeaderLayout":this._tableElement().find(".".concat(La)).toggleClass("dx-area-tree-view","tree"===e.value),this._dataController.updateViewOptions(this._getDataControllerOptions());break;case"height":case"width":this._hasHeight=null,this.callBase(e),this.resize();break;default:this.callBase(e)}},_updateScrollPosition(e,t,a){var o,g,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],w=this._scrollTop||this._scrollLeft;this._scrollUpdating||(this._scrollUpdating=!0,t&&!t.hasScroll()&&this._hasHeight&&(this._scrollTop=null),e&&!e.hasScroll()&&(this._scrollLeft=null),(null!==this._scrollTop||null!==this._scrollLeft||w||this.option("rtlEnabled"))&&(a.scrollTo({left:g=this._scrollLeft||0,top:o=this._scrollTop||0},r),e.scrollTo({left:g},r),t.scrollTo({top:o},r),this._dataController.updateWindowScrollPosition(this._scrollTop)),this._scrollUpdating=!1)},_subscribeToEvents(e,t,a){var r=this;(0,Pe.__)([e,t,a],(o,g)=>{!function hr(e,t){tr(e),e.on("scroll",t).on("stop",t)}(g,w=>function(s,u){var{scrollOffset:y}=s,m=u._getScrollable(),C="vertical"!==m.option("direction")?y.left:r._scrollLeft,P="horizontal"!==m.option("direction")&&r._hasHeight?y.top:r._scrollTop;((r._scrollLeft||0)!==(C||0)||(r._scrollTop||0)!==(P||0))&&(r._scrollLeft=C,r._scrollTop=P,r._updateScrollPosition(e,t,a),"virtual"===r.option("scrolling.mode")&&r._dataController.setViewportPosition(r._scrollLeft,r._scrollTop))}(w,g))}),!r._hasHeight&&r._dataController.subscribeToWindowScrollEvents(a.groupElement())},_clean:Ae.lQ,_needDelayResizing(e){return e.length*(e.length?e[0].length:0)>this.option("renderCellCountLimit")},_renderFieldChooser(){var e,t=this,a=t._pivotGridContainer,r=t.option("fieldChooser")||{},o="onDemand"===r.applyChangesMode?[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:Re.A.format("OK"),onClick(){t._fieldChooserPopup.$content().dxPivotGridFieldChooser("applyChanges"),t._fieldChooserPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:Re.A.format("Cancel"),onClick(){t._fieldChooserPopup.hide()}}}]:[],g={layout:r.layout,texts:r.texts||{},dataSource:t.getDataSource(),allowSearch:r.allowSearch,searchTimeout:r.searchTimeout,width:void 0,height:void 0,headerFilter:t.option("headerFilter"),encodeHtml:null!==(e=t.option("fieldChooser.encodeHtml"))&&void 0!==e?e:t.option("encodeHtml"),applyChangesMode:r.applyChangesMode,onContextMenuPreparing(s){t._trigger("onContextMenuPreparing",s)}},w={shading:!1,title:r.title,width:r.width,height:r.height,showCloseButton:!0,resizeEnabled:!0,minWidth:r.minWidth,minHeight:r.minHeight,toolbarItems:o,onResize(s){s.component.$content().dxPivotGridFieldChooser("updateDimensions")},onShown(s){t._createComponent(s.component.content(),B,g)},onHidden(s){var u=s.component.$content().dxPivotGridFieldChooser("instance");u.resetTreeView(),u.cancelChanges()}};t._fieldChooserPopup?(t._fieldChooserPopup.option(w),t._fieldChooserPopup.$content().dxPivotGridFieldChooser(g)):t._fieldChooserPopup=t._createComponent((0,H.A)(zt).addClass("dx-fieldchooser-popup").appendTo(a),Rt.A,w)},_renderContextMenu(){var e=this,t=e._pivotGridContainer;e._contextMenu&&e._contextMenu.$element().remove(),e._contextMenu=e._createComponent((0,H.A)(zt).appendTo(t),oe.A,{onPositioning(a){var{event:r}=a;if(a.cancel=!0,r){var o=r.target.cellIndex>=0?r.target:(0,H.A)(r.target).closest("td").get(0);if(o){var g=e._createEventArgs(o,r),w=e._getContextMenuItems(g);w&&(a.component.option("items",w),a.cancel=!1)}}},onItemClick(a){a.itemData.onItemClick&&a.itemData.onItemClick(a)},cssClass:Qa,target:e.$element()})},_getContextMenuItems(e){var t=this,a=[],r=t.option("texts");if("row"===e.area||"column"===e.area){var o=e["".concat(e.area,"Fields")],g=e["column"===e.area?"rowFields":"columnFields"],w=e.cell.path&&o[e.cell.path.length-1],s=t.getDataSource();if(w&&w.allowExpandAll&&e.cell.path.length<e["".concat(e.area,"Fields")].length&&!s.paginate()&&(a.push({beginGroup:!0,icon:"none",text:r.expandAll,onItemClick(){s.expandAll(w.index)}}),a.push({text:r.collapseAll,icon:"none",onItemClick(){s.collapseAll(w.index)}})),e.cell.isLast&&!s.paginate()){var u=0;(0,Pe.__)(g,(y,m)=>{m.allowSortingBySummary&&(0,Pe.__)(e.dataFields,(C,P)=>{if(!(0,Oe.O9)(e.cell.dataIndex)||e.cell.dataIndex===C){var G=!(0,Oe.O9)(e.cell.dataIndex)&&e.dataFields.length>1,E="column"===e.area?r.sortColumnBySummary:r.sortRowBySummary,V=(0,Ie.UI)(e.dataFields,m.sortBySummaryField)===C&&(e.cell.path||[]).join("/")===(m.sortBySummaryPath||[]).join("/"),he=(0,te.GP)(E,G?"".concat(m.caption," - ").concat(P.caption):m.caption);a.push({beginGroup:0===u,icon:V?"desc"===m.sortOrder?"sortdowntext":"sortuptext":"none",text:he,onItemClick(){s.field(m.index,{sortBySummaryField:P.name||P.caption||P.dataField,sortBySummaryPath:e.cell.path,sortOrder:"desc"===m.sortOrder?"asc":"desc"}),s.load()}}),u+=1}})}),(0,Pe.__)(g,(y,m)=>{if(m.allowSortingBySummary&&(0,Oe.O9)(m.sortBySummaryField))return a.push({beginGroup:0===u,icon:"none",text:r.removeAllSorting,onItemClick(){(0,Pe.__)(g,(C,P)=>{s.field(P.index,{sortBySummaryField:void 0,sortBySummaryPath:void 0,sortOrder:void 0})}),s.load()}}),!1})}}if(t.option("fieldChooser.enabled")&&a.push({beginGroup:!0,icon:"columnchooser",text:r.showFieldChooser,onItemClick(){t._fieldChooserPopup.show()}}),t.option("export.enabled")&&a.push({beginGroup:!0,icon:"xlsxfile",text:r.exportToExcel,onItemClick(){t.exportTo()}}),e.items=a,t._trigger("onContextMenuPreparing",e),(a=e.items)&&a.length)return a},_createEventArgs(e,t){var a=this.getDataSource(),r={rowFields:a.getAreaFields("row"),columnFields:a.getAreaFields("column"),dataFields:a.getAreaFields("data"),event:t};return function cr(e){return e.closest(".".concat(Ja)).length||e.find(".".concat(Ja)).length}((0,H.A)(e))?(0,Be.X)(this._createFieldArgs(e),r):(0,Be.X)(this._createCellArgs(e),r)},_createFieldArgs(e){var t=(0,H.A)(e).children().data("field"),a={field:t};return(0,Oe.O9)(t)?a:{}},_createCellArgs(e){var t=(0,H.A)(e),a=e.cellIndex,{rowIndex:r}=e.parentElement,o=t.closest("table"),g=o.data("data"),w=g&&g[r]&&g[r][a];return{area:o.data("area"),rowIndex:r,columnIndex:a,cellElement:(0,Dt.c)(t),cell:w}},_handleCellClick(e){var t=this,a=t._createEventArgs(e.currentTarget,e),{cell:r}=a;!r||!a.area&&(a.rowIndex||a.columnIndex)||(t._trigger("onCellClick",a),r&&!a.cancel&&(0,Oe.O9)(r.expanded)&&setTimeout(()=>{t._dataController[r.expanded?"collapseHeaderItem":"expandHeaderItem"](a.area,r.path)}))},_getNoDataText(){return this.option("texts.noData")},_renderNoDataText:Ct.A.renderNoDataText,_renderLoadPanel:Ct.A.renderLoadPanel,_updateLoading(e){var t=this,a=t._dataController.isLoading();if(t._loadPanel){var r=t._loadPanel.option("visible");if(r||(t._startLoadingTime=new Date),a&&(e?new Date-t._startLoadingTime>=1e3&&t._loadPanel.option("message","".concat(Math.floor(100*e),"%")):t._loadPanel.option("message",t.option("loadPanel.text"))),clearTimeout(t._hideLoadingTimeoutID),r&&!a)t._hideLoadingTimeoutID=setTimeout(()=>{t._loadPanel.option("visible",!1),t.$element().removeClass(Ga)});else{var o={visible:a};a&&(o.position=Ct.A.calculateLoadPanelPosition(t._dataArea.groupElement())),t._loadPanel.option(o),t.$element().toggleClass(Ga,!a)}}},_renderDescriptionArea(){var w,e=this.$element(),t=e.find(".".concat(Ra)),a=(0,H.A)(zt).addClass("dx-pivotgrid-toolbar"),r=this.option("fieldPanel"),o=e.find(".dx-filter-header"),g=e.find(".dx-column-header");if(w=r.visible&&r.showFilterFields?o:r.visible&&(r.showDataFields||r.showColumnFields)?g:t,g.toggleClass(Ea,!(!r.visible||!r.showDataFields&&!r.showColumnFields)),o.toggleClass(Ea,!(!r.visible||!r.showFilterFields)),t.toggleClass("dx-pivotgrid-background",r.visible&&(r.showDataFields||r.showColumnFields||r.showRowFields)),this.$element().find(".dx-pivotgrid-toolbar").remove(),a.prependTo(w),this.option("fieldChooser.enabled")){var s=(0,H.A)(zt).appendTo(a).addClass("dx-pivotgrid-field-chooser-button"),u={icon:"columnchooser",hint:this.option("texts.showFieldChooser"),onClick:()=>{this.getFieldChooserPopup().show()}};this._createComponent(s,"dxButton",u)}if(this.option("export.enabled")){var y=(0,H.A)(zt).appendTo(a).addClass("dx-pivotgrid-export-button"),m={icon:"xlsxfile",hint:this.option("texts.exportToExcel"),onClick:()=>{this.exportTo()}};this._createComponent(y,"dxButton",m)}},_detectHasContainerHeight(){var e=this.$element();if((0,Oe.O9)(this._hasHeight)){var t=this.option("height")||this.$element().get(0).style.height;t&&this._hasHeight^"auto"!==t&&(this._hasHeight=null)}if(!(0,Oe.O9)(this._hasHeight)&&!e.is(":hidden")){this._pivotGridContainer.addClass("dx-hidden");var a=(0,H.A)(zt);(0,Ee.k$)(a,66666),e.append(a),this._hasHeight=66666!==(0,Ee.Oq)(e),this._pivotGridContainer.removeClass("dx-hidden"),a.remove()}},_renderHeaders(e,t,a,r){var o=this.getDataSource();this._rowFields=this._rowFields||new S(this,"row"),this._rowFields.render(e,o.getAreaFields("row")),this._columnFields=this._columnFields||new S(this,"column"),this._columnFields.render(t,o.getAreaFields("column")),this._filterFields=this._filterFields||new S(this,"filter"),this._filterFields.render(a,o.getAreaFields("filter")),this._dataFields=this._dataFields||new S(this,"data"),this._dataFields.render(r,o.getAreaFields("data")),this.$element().dxPivotGridFieldChooserBase("instance").renderSortable()},_createTableElement(){var e=(0,H.A)("<table>").css({width:"100%"}).toggleClass(Ka,!!this.option("showBorders")).toggleClass("dx-word-wrap",!!this.option("wordWrapEnabled"));return ee.A.on(e,(0,ct.b4)(ut.U,"dxPivotGrid"),"td",this._handleCellClick.bind(this)),e},_renderDataArea(e){var t=this._dataArea||new Kt.DataArea(this);return this._dataArea=t,t.render(e,this._dataController.getCellsInfo()),t},_renderRowsArea(e){var t=this._rowsArea||new Qt.VerticalHeadersArea(this);return this._rowsArea=t,t.render(e,this._dataController.getRowsInfo()),t},_renderColumnsArea(e){var t=this._columnsArea||new Qt.HorizontalHeadersArea(this);return this._columnsArea=t,t.render(e,this._dataController.getColumnsInfo()),t},_initMarkup(){this.callBase.apply(this,arguments),this.$element().addClass(Qa)},_renderContentImpl(){var e,t,a,r,g,w,s,u,o=!this._pivotGridContainer;(r=!o&&this._tableElement())||(this.$element().addClass("dx-row-lines").addClass("dx-pivotgrid-fields-container"),this._pivotGridContainer=(0,H.A)(zt).addClass("dx-pivotgrid-container"),this._renderFieldChooser(),this._renderContextMenu(),e=(0,H.A)(ta).addClass(Ya),t=(0,H.A)(ta).addClass(La),a=(0,H.A)(ta).addClass(ja),r=this._createTableElement(),u=(0,H.A)(ta).addClass("dx-data-header"),s=(0,H.A)("<td>").attr("colspan","2").addClass("dx-filter-header"),w=(0,H.A)(ta).addClass("dx-column-header"),g=(0,H.A)(ta).addClass(Ra),(0,H.A)(Pa).append(s).appendTo(r),(0,H.A)(Pa).append(u).append(w).appendTo(r),(0,H.A)(Pa).append(g).append(e).appendTo(r),(0,H.A)(Pa).addClass("dx-bottom-row").append(t).append(a).appendTo(r),this._pivotGridContainer.append(r),this.$element().append(this._pivotGridContainer),"tree"===this.option("rowHeaderLayout")&&t.addClass("dx-area-tree-view")),this.$element().addClass(Ga),this._createComponent(this.$element(),_,{dataSource:this.getDataSource(),encodeHtml:this.option("encodeHtml"),allowFieldDragging:this.option("fieldPanel.allowFieldDragging"),headerFilter:this.option("headerFilter"),visible:this.option("visible"),remoteSort:"virtual"===this.option("scrolling.mode")});var y=this._renderDataArea(a),m=this._renderRowsArea(t),C=this._renderColumnsArea(e);y.tableElement().prepend(C.headElement()),o&&(this._renderLoadPanel(y.groupElement().parent(),this.$element()),this._renderDescriptionArea(),m.renderScrollable(),C.renderScrollable(),y.renderScrollable()),[y,m,C].forEach(P=>{tr(P)}),this._renderHeaders(g,w,s,u),this._update(o)},_update(e){var t=this,a=function(){t.updateDimensions()};t._needDelayResizing(t._dataArea.getData())&&e?setTimeout(a):a()},_fireContentReadyAction(){this._dataController.isLoading()||this.callBase()},getScrollPath(e){return"column"===e?this._columnsArea.getScrollPath(this._scrollLeft):this._rowsArea.getScrollPath(this._scrollTop)},getDataSource(){return this._dataController.getDataSource()},getFieldChooserPopup(){return this._fieldChooserPopup},hasScroll(e){return"column"===e?this._columnsArea.hasScroll():this._rowsArea.hasScroll()},_dimensionChanged(){this.updateDimensions()},_visibilityChanged(e){e&&this.updateDimensions()},_dispose(){clearTimeout(this._hideLoadingTimeoutID),this.callBase.apply(this,arguments),this._dataController&&this._dataController.dispose()},_tableElement(){return this.$element().find("table").first()},addWidgetPrefix:e=>"dx-pivotgrid-".concat(e),resize(){this.updateDimensions()},isReady(){return this.callBase()&&!this._dataController.isLoading()},updateDimensions(){var t,r,s,u,e=this,a=e._tableElement(),o=0,g=0,w=0,y=a.find(".".concat(ja)),m=a.find(".".concat(La)),C=a.find(".".concat(Ya)),P=a.find(".".concat(Ra)),G=a.find(".dx-filter-header"),E=a.find(".dx-column-header"),V=e._rowFields,he=new et.cY;if((0,Ze.Vd)()){var q=V.isVisible()&&"tree"!==e.option("rowHeaderLayout");e._detectHasContainerHeight(),e._dataArea.headElement().length||e._dataArea.tableElement().prepend(e._columnsArea.headElement()),q&&(e._rowsArea.updateColspans(V.getColumnsCount()),e._rowsArea.tableElement().prepend(V.headElement())),a.addClass(Za),e._dataArea.reset(),e._rowsArea.reset(),e._columnsArea.reset(),V.reset();var _e=(xe,se)=>se-xe>=1,Se=(xe,se,ge,Y,me)=>ge?xe:se+(Y?me:0);return(0,Ae.OX)(()=>{var xe=e._rowsArea.getRowsHeight(),se=(0,Ee.P$)(P[0],!0)+(q?xe[0]:0),ge=0,Y=0;if(e._hasHeight){ge=(0,Ee.Oq)(G);var me=a.find(".dx-data-header"),we=(0,Ee.Oq)(me);r=ar([C,y,a,E,G],"height"),Y=(0,Ee.Oq)(e.$element())-ge-we-(Math.max((0,Ee.Oq)(e._dataArea.headElement()),(0,Ee.Oq)(C),se)+r)}var ae=e._dataArea.getScrollbarWidth(),j=_e(Y,(0,Ee.Oq)(e._dataArea.tableElement()));e._dataArea.tableElement().css({width:e._hasHeight&&j&&ae?"calc(100% - ".concat(ae,"px)"):"100%"});var ue=e._dataArea.getColumnsWidth(),De=q?xe.slice(1):xe,Me=e._dataArea.getRowsHeight(),ot=e._dataController.getColumnsInfo().length,ft=(0,Ie.JL)(De,Me.slice(ot)),Wt=Me.slice(0,ot),mt=Ha(Wt),Ft=e._rowsArea.getColumnsWidth();if(o=(0,Ee.RG)(e._dataArea.tableElement()),g=Ha(ft),o&&g){w=Ha(Ft);var Ba=(0,Ee.RG)(e.$element());r=ar([m,y,a],"width");var Va=o-(t=(t=Ba-w-r)>0?t:o);Va>=0&&Va<=2&&(Ma(ue,Va),o=t),s=e._hasHeight&&_e(Y,g),u=_e(t,o),e.__scrollBarUseNative=e._dataArea.getUseNativeValue(),e.__scrollBarWidth=ae;var ka=Se(Y,g,s,u,ae);(0,Ae.zE)(()=>{if(e._columnsArea.tableElement().append(e._dataArea.headElement()),V.tableElement().append(e._rowsArea.headElement()),se>mt&&(Ma(Wt,mt-se),e._columnsArea.setRowsHeight(Wt)),a.removeClass(Za),E.children().css("maxWidth",t),e._columnsArea.setGroupWidth(t),e._columnsArea.processScrollBarSpacing(s?ae:0),e._columnsArea.setColumnsWidth(ue),e._rowsArea.setGroupHeight(e._hasHeight?ka:"auto"),e._rowsArea.processScrollBarSpacing(u?ae:0),e._rowsArea.setColumnsWidth(Ft),e._rowsArea.setRowsHeight(ft),e._dataArea.setColumnsWidth(ue),e._dataArea.setRowsHeight(ft),e._dataArea.setGroupWidth(t),e._dataArea.setGroupHeight(e._hasHeight?ka:"auto"),q&&V.setColumnsWidth(Ft),y.toggleClass(Ea,!s),m.toggleClass(Ea,!s),!e._hasHeight&&Ba!==(0,Ee.RG)(e.$element())){var za=Ba-(0,Ee.RG)(e.$element());u||(Ma(ue,za),e._columnsArea.setColumnsWidth(ue),e._dataArea.setColumnsWidth(ue)),e._dataArea.setGroupWidth(t-za),e._columnsArea.setGroupWidth(t-za)}if(e._hasHeight&&e._filterFields.isVisible()&&(0,Ee.Oq)(G)!==ge){var Wa=(0,Ee.Oq)(G)-ge;if(Wa>0){s=_e(Y-Wa,g);var rr=Se(Y-Wa,g,s,u,ae);e._dataArea.setGroupHeight(rr),e._rowsArea.setGroupHeight(rr)}}var nr=e.option("scrolling");"virtual"===nr.mode&&e._setVirtualContentParams(nr,ue,ft,t,ka,e._hasHeight,w);var lr=[];e._dataArea.updateScrollableOptions({direction:e._dataArea.getScrollableDirection(u,s),rtlEnabled:e.option("rtlEnabled")}),e._columnsArea.updateScrollableOptions({rtlEnabled:e.option("rtlEnabled")}),(0,Pe.__)([e._columnsArea,e._rowsArea,e._dataArea],(xr,or)=>{lr.push(or&&or.updateScrollable())}),e._updateLoading(),e._renderNoDataText(y),e._testResultWidths=ue,e._testResultHeights=ft,et.z7.apply(H.A,lr).done(()=>{e._updateScrollPosition(e._columnsArea,e._rowsArea,e._dataArea,!0),e._subscribeToEvents(e._columnsArea,e._rowsArea,e._dataArea),he.resolve()})})}else he.resolve()}),he}},_setVirtualContentParams(e,t,a,r,o,g,w){var s=this._dataController.calculateVirtualContentParams({virtualRowHeight:e.virtualRowHeight,virtualColumnWidth:e.virtualColumnWidth,itemWidths:t,itemHeights:a,rowCount:a.length,columnCount:t.length,viewportWidth:r,viewportHeight:g?o:(0,Ee.P$)(Xa)});this._dataArea.setVirtualContentParams({top:s.contentTop,left:s.contentLeft,width:s.width,height:s.height}),this._rowsArea.setVirtualContentParams({top:s.contentTop,width:w,height:s.height}),this._columnsArea.setVirtualContentParams({left:s.contentLeft,width:s.width,height:(0,Ee.Oq)(this._columnsArea.groupElement())})},applyPartialDataSource(e,t,a){this._dataController.applyPartialDataSource(e,t,a)}}).inherit(X).include(va);(0,Ye.A)("dxPivotGrid",Na);const vr=Na;var ht=N(27380),Xe=N(31837),gr=N(345);let pr=(()=>{class e extends ht.ic{constructor(a,r,o,g,w,s,u,y){super(a,r,o,g,u,y),this._watcherHelper=g,this._idh=w,this._createEventEmitters([{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"exporting",emit:"onExporting"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{emit:"allowExpandAllChange"},{emit:"allowFilteringChange"},{emit:"allowSortingChange"},{emit:"allowSortingBySummaryChange"},{emit:"dataFieldAreaChange"},{emit:"dataSourceChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"encodeHtmlChange"},{emit:"exportChange"},{emit:"fieldChooserChange"},{emit:"fieldPanelChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"hideEmptySummaryCellsChange"},{emit:"hintChange"},{emit:"loadPanelChange"},{emit:"rowHeaderLayoutChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"showBordersChange"},{emit:"showColumnGrandTotalsChange"},{emit:"showColumnTotalsChange"},{emit:"showRowGrandTotalsChange"},{emit:"showRowTotalsChange"},{emit:"showTotalsPriorChange"},{emit:"stateStoringChange"},{emit:"tabIndexChange"},{emit:"textsChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),s.setHost(this)}get allowExpandAll(){return this._getOption("allowExpandAll")}set allowExpandAll(a){this._setOption("allowExpandAll",a)}get allowFiltering(){return this._getOption("allowFiltering")}set allowFiltering(a){this._setOption("allowFiltering",a)}get allowSorting(){return this._getOption("allowSorting")}set allowSorting(a){this._setOption("allowSorting",a)}get allowSortingBySummary(){return this._getOption("allowSortingBySummary")}set allowSortingBySummary(a){this._setOption("allowSortingBySummary",a)}get dataFieldArea(){return this._getOption("dataFieldArea")}set dataFieldArea(a){this._setOption("dataFieldArea",a)}get dataSource(){return this._getOption("dataSource")}set dataSource(a){this._setOption("dataSource",a)}get disabled(){return this._getOption("disabled")}set disabled(a){this._setOption("disabled",a)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(a){this._setOption("elementAttr",a)}get encodeHtml(){return this._getOption("encodeHtml")}set encodeHtml(a){this._setOption("encodeHtml",a)}get export(){return this._getOption("export")}set export(a){this._setOption("export",a)}get fieldChooser(){return this._getOption("fieldChooser")}set fieldChooser(a){this._setOption("fieldChooser",a)}get fieldPanel(){return this._getOption("fieldPanel")}set fieldPanel(a){this._setOption("fieldPanel",a)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(a){this._setOption("headerFilter",a)}get height(){return this._getOption("height")}set height(a){this._setOption("height",a)}get hideEmptySummaryCells(){return this._getOption("hideEmptySummaryCells")}set hideEmptySummaryCells(a){this._setOption("hideEmptySummaryCells",a)}get hint(){return this._getOption("hint")}set hint(a){this._setOption("hint",a)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(a){this._setOption("loadPanel",a)}get rowHeaderLayout(){return this._getOption("rowHeaderLayout")}set rowHeaderLayout(a){this._setOption("rowHeaderLayout",a)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(a){this._setOption("rtlEnabled",a)}get scrolling(){return this._getOption("scrolling")}set scrolling(a){this._setOption("scrolling",a)}get showBorders(){return this._getOption("showBorders")}set showBorders(a){this._setOption("showBorders",a)}get showColumnGrandTotals(){return this._getOption("showColumnGrandTotals")}set showColumnGrandTotals(a){this._setOption("showColumnGrandTotals",a)}get showColumnTotals(){return this._getOption("showColumnTotals")}set showColumnTotals(a){this._setOption("showColumnTotals",a)}get showRowGrandTotals(){return this._getOption("showRowGrandTotals")}set showRowGrandTotals(a){this._setOption("showRowGrandTotals",a)}get showRowTotals(){return this._getOption("showRowTotals")}set showRowTotals(a){this._setOption("showRowTotals",a)}get showTotalsPrior(){return this._getOption("showTotalsPrior")}set showTotalsPrior(a){this._setOption("showTotalsPrior",a)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(a){this._setOption("stateStoring",a)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(a){this._setOption("tabIndex",a)}get texts(){return this._getOption("texts")}set texts(a){this._setOption("texts",a)}get visible(){return this._getOption("visible")}set visible(a){this._setOption("visible",a)}get width(){return this._getOption("width")}set width(a){this._setOption("width",a)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(a){this._setOption("wordWrapEnabled",a)}_createInstance(a,r){return new vr(a,r)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(a){super.ngOnChanges(a),this.setupChanges("dataSource",a)}setupChanges(a,r){a in this._optionsToUpdate||this._idh.setup(a,r)}ngDoCheck(){this._idh.doCheck("dataSource"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(a,r){let o=this._idh.setupSingle(a,r),g=null!==this._idh.getChanges(a,r);(o||g)&&super._setOption(a,r)}}return e.\u0275fac=function(a){return new(a||e)(je.rXU(je.aKT),je.rXU(je.SKi),je.rXU(ht.zF),je.rXU(ht.jS),je.rXU(ht.$M),je.rXU(ht.fH),je.rXU(gr.pJ),je.rXU(je.Agw))},e.\u0275cmp=je.VBU({type:e,selectors:[["dx-pivot-grid"]],inputs:{allowExpandAll:"allowExpandAll",allowFiltering:"allowFiltering",allowSorting:"allowSorting",allowSortingBySummary:"allowSortingBySummary",dataFieldArea:"dataFieldArea",dataSource:"dataSource",disabled:"disabled",elementAttr:"elementAttr",encodeHtml:"encodeHtml",export:"export",fieldChooser:"fieldChooser",fieldPanel:"fieldPanel",headerFilter:"headerFilter",height:"height",hideEmptySummaryCells:"hideEmptySummaryCells",hint:"hint",loadPanel:"loadPanel",rowHeaderLayout:"rowHeaderLayout",rtlEnabled:"rtlEnabled",scrolling:"scrolling",showBorders:"showBorders",showColumnGrandTotals:"showColumnGrandTotals",showColumnTotals:"showColumnTotals",showRowGrandTotals:"showRowGrandTotals",showRowTotals:"showRowTotals",showTotalsPrior:"showTotalsPrior",stateStoring:"stateStoring",tabIndex:"tabIndex",texts:"texts",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onCellClick:"onCellClick",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDisposing:"onDisposing",onExporting:"onExporting",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",allowExpandAllChange:"allowExpandAllChange",allowFilteringChange:"allowFilteringChange",allowSortingChange:"allowSortingChange",allowSortingBySummaryChange:"allowSortingBySummaryChange",dataFieldAreaChange:"dataFieldAreaChange",dataSourceChange:"dataSourceChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",encodeHtmlChange:"encodeHtmlChange",exportChange:"exportChange",fieldChooserChange:"fieldChooserChange",fieldPanelChange:"fieldPanelChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",hideEmptySummaryCellsChange:"hideEmptySummaryCellsChange",hintChange:"hintChange",loadPanelChange:"loadPanelChange",rowHeaderLayoutChange:"rowHeaderLayoutChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",showBordersChange:"showBordersChange",showColumnGrandTotalsChange:"showColumnGrandTotalsChange",showColumnTotalsChange:"showColumnTotalsChange",showRowGrandTotalsChange:"showRowGrandTotalsChange",showRowTotalsChange:"showRowTotalsChange",showTotalsPriorChange:"showTotalsPriorChange",stateStoringChange:"stateStoringChange",tabIndexChange:"tabIndexChange",textsChange:"textsChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[je.Jv_([ht.zF,ht.jS,ht.fH,ht.$M]),je.Vt3,je.OA$],decls:0,vars:0,template:function(a,r){},encapsulation:2}),e})(),fr=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=je.$C({type:e}),e.\u0275inj=je.G2t({imports:[[Xe.xJR,Xe.yA4,Xe.Pxf,Xe.X1G,Xe.t7Z,Xe.uIe,Xe.$Yy,Xe._RO,Xe.Ypp,Xe._zS,Xe.s5o,Xe.lkr,Xe.X6g,ht.p_,ht.xZ],Xe.xJR,Xe.yA4,Xe.Pxf,Xe.X1G,Xe.t7Z,Xe.uIe,Xe.$Yy,Xe._RO,Xe.Ypp,Xe._zS,Xe.s5o,Xe.lkr,Xe.X6g,ht.xZ]}),e})()},50071:($a,aa,N)=>{N.d(aa,{C:()=>ca});var je=N(61076),H=N(44168),Ze=N(5042),ee=N(72463),Ye=N(87951),Dt=N(89518),te=N(12101),Ae=N(12984),Pe=N(56221),Oe=N(17278),Be=N(48745),ut=N(25571),Re=N(59845),_t=N(39504),ct=N(75333),Ct=N(6305),Ee=N(39407),Rt=N(2097),oe=N(69050),Ie=Pe.A.inherit(function(){var n={year:_=>_&&_.getFullYear(),quarter:_=>_&&Math.floor(_.getMonth()/3)+1,month:_=>_&&_.getMonth()+1,day:_=>_&&_.getDate(),dayOfWeek:_=>_&&_.getDay()};function h(_){return-1!==_.indexOf(".")?(0,Ee.Hz)(_):function(l){return l[_]}}function v(_){return function(l){var d=_(l);return d&&!(d instanceof Date)&&(d=_t.A.deserializeDate(d)),d}}function f(_){(0,te.__)(_||[],(l,d)=>{var i,p,x,L,{dataField:S}=d,{levels:O}=d;if(!d.selector){if(L=S?h(S):function(z){return z},O&&f(O),"date"===d.dataType){p=n[d.groupInterval];var F=v(L);i=function(z){var I=F(z);return p?p(I):I}}else"number"===d.dataType?(x=(0,ee.kf)(d.groupInterval)&&d.groupInterval>0&&d.groupInterval,i=function(z){var I=L(z);return(0,ee.Kg)(I)&&(I=Number(I)),x?Math.floor(I/x)*x:I}):i=L;(0,oe.k2)(d),(0,oe.CE)(d,"selector",i)}})}function A(_,l,d,i){var p=[0],S=l.headerName===i?l.path.length:0,x="rows"===i?l.rowExpandedPaths:l.columnExpandedPaths;return function L(F,z,I,c,T){var B,k,W,U,K,fe,b=z.dimensions[c],{expandedPathsHash:R}=z;b&&(B=b.selector(z.data),T=void 0!==T?T+"/./"+B:"".concat(B),W=I,(fe=(K=z.childrenHash)[U=T])||(fe={value:B,index:K.length++},K[U]=fe,W.push(fe)),F.push((k=fe).index),(R&&R[T]||b.expanded)&&(k.children||(k.children=[]),L(F,z,k.children,c+1,T)))}(p,{data:_,childrenHash:d["".concat(i,"Hash")],dimensions:l[i],expandedPathsHash:l.headerName!==i&&x&&x.hash},d[i],S),p}function D(_,l,d,i){var S,x,O,L,p=[],F=A(_,i,d,"rows"),z=A(_,i,d,"columns");for(x=0;x<F.length;x+=1)for(l[O=F[x]]=l[O]||[],S=0;S<z.length;S+=1)p.push(l[O][L=z[S]]=l[O][L]||[]);return p}function $(_){if(_){var l=_.hash={};_.forEach(d=>{var i=d.map(p=>"".concat(p)).join("/./");l[i]=!0})}}function ne(_){_.rows=_.rows||[],_.columns=_.columns||[],_.filters=_.filters||[],$(_.columnExpandedPaths),$(_.rowExpandedPaths),f(_.columns),f(_.rows),f(_.values),f(_.filters)}function le(_){return"custom"===_.summaryType?(_.calculateCustomSummary=_.calculateCustomSummary||Ze.lQ,{seed(){var l={summaryProcess:"start",totalValue:void 0};return _.calculateCustomSummary(l),l},step:(l,d)=>(l.summaryProcess="calculate",l.value=d,_.calculateCustomSummary(l),l),finalize:l=>(l.summaryProcess="finalize",delete l.value,_.calculateCustomSummary(l),l.totalValue)}):ut.zL[_.summaryType]||ut.zL.count}function ve(_,l,d){for(var i=0;i<_.length;i+=1)for(var p=_[i],S=p.selector(d),x=le(p),O="function"==typeof x.seed,L=0;L<l.length;L+=1){var F=l[L];F.length<=i&&(F[i]=O?x.seed():x.seed),void 0===F[i]?F[i]=S:(0,ee.O9)(S)&&(F[i]=x.step(F[i],S))}}function J(_,l){var d=_&&_.valueOf(),i=l&&l.valueOf();if(Array.isArray(_)){l=l||[];for(var p=0;p<_.length;p+=1)if((d=_[p]&&_[p].valueOf())!==(i=l[p]&&l[p].valueOf()))return!1;return!0}return d===i}function de(_){var l=[];return(0,te.__)(_,(d,i)=>{var p=i.filterValues||[],{groupName:S}=i;S&&(0,ee.kf)(i.groupIndex)||p.length&&l.push(function(x){for(var O=i.levels?function(z,I){var c=[];return(0,te.__)(z,(T,b)=>{c.push(b.selector(I))}),c}(i.levels,x):i.selector(x),L=!1,F=0;F<p.length;F+=1)if(J(p[F],O)){L=!0;break}return"exclude"===i.filterType?!L:L})}),l}function pe(_){var l=de(_.rows).concat(de(_.columns)).concat(de(_.filters)),d=_[_.headerName],{path:i}=_;return d&&l.push(p=>{for(var S,x=0;x<i.length;x+=1)if(S=d[x].selector(p),(0,Ee.ao)(S,!0)!==(0,Ee.ao)(i[x],!0))return!1;return!0}),function(p){for(var S=0;S<l.length;S+=1)if(!l[S](p))return!1;return!0}}function Ve(_,l){var d=_.filter();return _.store()instanceof Ct.A&&d?(d=Je(d,l),(0,Re.A)(_.items()).filter(d).toArray()):_.items()}function We(_,l,d){var i=new Ae.cY,p=function(x){_.store()instanceof Rt.A&&(x.storeLoadOptions.filter=Je(x.storeLoadOptions.filter,l))};if(_.on("customizeStoreLoadOptions",p),!_.isLoaded()||d){var S=d?_.load():_.reload();(0,Ae.z7)(S).done(()=>{We(_,l).done(()=>{i.resolve(Ve(_,l))}).fail(i.reject)}).fail(i.reject)}else i.resolve(Ve(_,l));return i.always(()=>{_.off("customizeStoreLoadOptions",p)})}function at(_,l){l.forEach(d=>{if(d.dataField&&"date"===d.dataType){var i=v(h(d.dataField));_[d.dataField]=function(p){return i(p)}}})}function qe(_){var l={};return Array.isArray(_)?at(l,_):_&&["rows","columns","filters"].forEach(d=>{_[d]&&at(l,_[d])}),l}function Je(_,l){if(!Array.isArray(_))return _;_=_.slice(0),(0,ee.Kg)(_[0])&&(_[1]instanceof Date||_[2]instanceof Date)&&(_[0]=l[_[0]]);for(var d=0;d<_.length;d+=1)_[d]=Je(_[d],l);return _}return{ctor(_){this._progressChanged=_.onProgressChanged||Ze.lQ,this._dataSource=new ct.q(_),this._dataSource.paginate(!1)},getFields(_){var l=this._dataSource,d=new Ae.cY;return We(l,qe(_)).done(i=>{d.resolve((0,oe.yg)(i,_))}).fail(d.reject),d},key(){return this._dataSource.key()},load(_){var l=this,d=l._dataSource,i=new Ae.cY;return ne(_),We(d,qe(_),_.reload).done(p=>{(0,Ae.z7)(function Ge(_,l,d){var S,x,i={columns:[],rows:[],columnsHash:{length:1},rowsHash:{length:1}},p=[],O=new Ae.cY,L=0,F=pe(l);return function z(){for(var I=new Date,c=L;L<_.length;L+=1){if(L>c&&L%1e4==0&&new Date-I>=300)return d(L/_.length),void setTimeout(z,0);F(x=_[L])&&(S=D(x,p,i,l),ve(l.values,S,x))}var b;b=p,(0,te.__)(l.values,(R,B)=>{var k=le(B);k.finalize&&(0,te.__)(b,(ie,W)=>{(0,te.__)(W,(U,K)=>{K&&void 0!==K[R]&&(K[R]=k.finalize(K[R]))})})}),d(1),O.resolve({rows:i.rows,columns:i.columns,values:p,grandTotalRowIndex:0,grandTotalColumnIndex:0})}(),O}(p,_,l._progressChanged)).done(i.resolve)}).fail(i.reject),i},filter(){var _=this._dataSource;return _.filter.apply(_,arguments)},supportPaging:()=>!1,getDrillDownItems(_,l){l=l||{},ne(_=_||{});for(var p,d=[],i=this._dataSource.items(),{maxRowCount:S}=l,{customColumns:x}=l,O=pe(_),L=pe({rows:(0,oe.Mt)(_.rows,l.rowPath),columns:(0,oe.Mt)(_.columns,l.columnPath),filters:[]}),F=0;F<i.length;F+=1){if(L(i[F])&&O(i[F])){if(x){p={};for(var z=0;z<x.length;z+=1)p[x[z]]=i[F][x[z]]}else p=i[F];d.push(p)}if(S>0&&d.length===S)break}return d}}}()).include(oe.wN),yt=function n(h,v,f){h=h||[],f=f||0;for(var A=0;A<h.length;A+=1){var D=h[A];v(D,f),D&&D.items&&D.items.length&&n(D.items,v,f+1)}};function At(n,h){var v=[];return(0,te.__)(n,(f,A)=>{v.push({selector:A.dataField,groupInterval:A.groupInterval,desc:h&&"desc"===A.sortOrder,isExpanded:f<n.length-1})}),v}function Xt(n,h,v,f){return[[n,f?"<":">=",v],f?"or":"and",[n,f?">=":"<",v+h]]}function Tt(n,h){var v=[];return n.searchValue?[n.dataField,"contains",n.searchValue]:(h="exclude"===n.filterType?h||"and":h||"or",(0,te.__)(n.filterValues,(f,A)=>{var D=[];Array.isArray(A)?n.levels&&n.levels.length&&(D=Tt({filterValues:A,filterType:n.filterType,levels:n.levels},"and")):D=function Gt(n,h){var v=function Ut(n){var h=n.dataField,{groupInterval:v}=n;return"date"===n.dataType&&"string"==typeof v&&("quarter"===v.toLowerCase()&&(v="Month"),h="".concat(h,".").concat((0,oe.Zr)(v))),h}(n),f="exclude"===n.filterType,A=[v,f?"<>":"=",h];return(0,ee.O9)(n.groupInterval)&&("string"==typeof n.groupInterval&&"quarter"===n.groupInterval.toLowerCase()?A=Xt(v,3,3*(h-1)+1,f):"number"==typeof n.groupInterval&&"date"!==n.dataType&&(A=Xt(v,n.groupInterval,h,f))),A}(n.levels?n.levels[f]:n,A),D.length&&(v.length&&v.push(h),v.push(D))}),v)}function vt(n){var h=[];return(0,te.__)(n,(v,f)=>{var A=Tt(f);if(!A.length)return[];h.length&&h.push("and"),h.push(A)}),1===h.length&&(h=h[0]),h}function Ht(n,h){var f=function(A){return A&&A.length};return f(n)&&f(h)?[n,"and",h]:f(n)?n:h}function Ot(n,h,v,f,A){n[v]=n[v]||[],n[v][f]=n[v][f]||[],(0,ee.O9)(n[v][f][A])||(n[v][f][A]=h)}function jt(n,h){return h&&"number"===h.dataType&&(0,ee.Kg)(n)?Number(n):!h||"date"!==h.dataType||h.groupInterval||n instanceof Date?n:_t.A.deserializeDate(n)}function Et(n){return(n||[]).filter(h=>h.filterValues&&h.filterValues.length||h.searchValue)}function Mt(n,h){if(n.headerName){if(h===n.headerName)return n.path.length;if(n.oppositePath)return n.oppositePath.length}return 0}function M(n,h,v,f){var A=[],D=v>f?0:f,$=n.headerName!==h?n[h].slice(D,v):[],ne="rows"===h?n.rowExpandedPaths:n.columnExpandedPaths;return(0,te.__)($,(le,ve)=>{var J=[];(0,te.__)(ne,(de,pe)=>{if(pe=pe.slice(D,v),le<pe.length){var Ge=pe[le];J.includes(Ge)||J.push(Ge)}}),J.length&&A.push((0,Ye.X)({},ve,{filterType:"include",filterValues:J}))}),A}function Q(n,h,v,f,A,D){var J,ne="columns"===h?"rows":"columns",le=n[h],ve=[];if((("columns"===h?n.columnExpandedPaths:n.rowExpandedPaths)||[]).length)for(var de=v;de<f+1;de+=1)(J={filters:A.concat(M(n,h,de,D))})[h]=le.slice(v,de+1),J[ne]=[],ve.push((0,Ye.X)({},n,J));else(J={filters:A})[h]=le.slice(v,f+1),J[ne]=[],ve.push((0,Ye.X)({},n,J));return ve[0].includeTotalSummary=!0,ve}function re(n){var h=0;return(0,te.__)(n,(v,f)=>{if(!f.expanded)return h=v,!1}),h}function be(n){(0,te.__)(n||[],(h,v)=>{var{levels:f}=v;f&&be(f),(0,oe.k2)(v)})}var Ne=Pe.A.inherit({ctor(n){this._dataSource=new ct.q(n),this._store=this._dataSource.store()},getFields(n){var h=new Ae.cY;return this._store.load({skip:0,take:20}).done(v=>{var f=(0,je.Xp)(v);h.resolve(oe.Ay.discoverObjectFields(f.data,n))}).fail(h.reject),h},key(){return this._store.key()},load(n){var h=this,v=new Ae.cY,f={rows:[],columns:[],values:[],grandTotalRowIndex:0,grandTotalColumnIndex:0,rowHash:{},columnHash:{},rowIndex:1,columnIndex:1},A=function Z(n){var h=(0,oe.G6)(n,"rows"),v=(0,oe.G6)(n,"columns"),f=n.filters||[],A=Mt(n,"columns"),D=re(n.columns),$=re(n.rows),ne=Mt(n,"rows"),le=[],ve=Q(n,"columns",A,v,f=f.concat(Et(n.rows)).concat(Et(n.columns)).concat(function ra(n){return(0,oe.Mt)(n[n.headerName],n.path).concat((0,oe.Mt)(n["rows"===n.headerName?"columns":"rows"],n.oppositePath||[]))}(n)),D);if(n.rows.length&&n.columns.length){"rows"!==n.headerName&&(le=le.concat(ve));for(var J=ne;J<h+1;J+=1)for(var de=n.rows.slice(ne,J+1),pe=M(n,"rows",J,$),Ge=A;Ge<v+1;Ge+=1){var Ve=(0,Ye.X)({},n,{columns:n.columns.slice(A,Ge+1),rows:de,filters:f.concat(M(n,"columns",Ge,D)).concat(pe)});le.push(Ve)}}else le=n.columns.length?ve:Q(n,"rows",ne,h,f,$);return le}(n),D=[];return be(n.rows),be(n.columns),be(n.filters),(0,te.__)(A,($,ne)=>{D.push(h._store.load(function wt(n,h,v){var f=vt(n.filters),A=At(n.rows,n.rowTake).concat(At(n.columns,n.columnTake)),D={groupSummary:[],totalSummary:[],group:A.length?A:void 0,take:A.length?void 0:1};return n.rows.length&&n.rowTake?(D.skip=n.rowSkip,D.take=n.rowTake,D.requireGroupCount=!0):n.columns.length&&n.columnTake&&!v&&(D.skip=n.columnSkip,D.take=n.columnTake,D.requireGroupCount=!0),h&&(f=Ht(f,h)),f.length&&(D.filter=f),(0,te.__)(n.values,($,ne)=>{var le={selector:ne.dataField,summaryType:ne.summaryType||"count"};D.groupSummary.push(le),n.includeTotalSummary&&D.totalSummary.push(le)}),D}(ne,h.filter(),n.rows.length)))}),Ae.z7.apply(null,D).done(function(){(0,te.__)(D.length>1?arguments:[arguments],(ne,le)=>{var ve=(0,je.Xp)(le[0],le[1]);!function St(n,h,v,f){var A=[],D=[],{rowHash:$}=f,{columnHash:ne}=f;function ve(J,de,pe,Ge,Ve){var at,Je,l,We=f["".concat(de,"Hash")],_=pe.slice(0,Ge+1).join("/");return void 0!==We[_]?Je=We[_]:(Je={value:jt(J.key,Ve),index:f["".concat(de,"Index")]++,displayText:J.displayText},l=pe.slice(0,Ge).join("/"),(Ge>0&&void 0!==We[l]?(at=We[l]).children=at.children||[]:f["".concat(de,"s")]).push(Je),We[_]=Je),Je}h&&h.summary&&(0,te.__)(h.summary,(J,de)=>{Ot(f.values,de,f.grandTotalRowIndex,f.grandTotalColumnIndex,J)}),h&&h.groupCount>=0&&((n=[...Array(v.rows.length?v.rowSkip:v.columnSkip)].concat(n)).length=h.groupCount),yt(n,(J,de)=>{var Ve,We,pe=de>=v.rows.length?v.rows.length:de,Ge=de>=v.rows.length?de-v.rows.length:0;if(!(de>=v.rows.length&&Ge>=v.columns.length)){de<v.rows.length&&(D=[]),de>=v.rows.length?J?(D[Ge]="".concat(J.key),Ve=ve(J,"column",D,Ge,v.columns[Ge]),We=$[A.slice(0,pe+1).join("/")]):f.columns.push({}):J?(A[pe]="".concat(J.key),We=ve(J,"row",A,pe,v.rows[pe]),Ve=ne[D.slice(0,Ge+1).join("/")]):f.rows.push({});var at=We&&We.index||f.grandTotalRowIndex,qe=Ve&&Ve.index||f.grandTotalColumnIndex;(0,te.__)(J&&J.summary||[],(Je,_)=>{Ot(f.values,_,at,qe,Je)})}})}(ve.data,ve.extra,A[ne],f)}),v.resolve({rows:f.rows,columns:f.columns,values:f.values,grandTotalRowIndex:f.grandTotalRowIndex,grandTotalColumnIndex:f.grandTotalColumnIndex})}).fail(v.reject),v},filter(){return this._dataSource.filter.apply(this._dataSource,arguments)},supportPaging:()=>!1,createDrillDownDataSource(n,h){var v=this._store,A=vt((0,oe.Mt)((n=n||{}).rows,(h=h||{}).rowPath).concat((0,oe.Mt)(n.columns,h.columnPath)).concat(Et(n.rows)).concat(n.filters||[]).concat(Et(n.columns)));return new ct.q({load:D=>v.load((0,Ye.X)({},D,{filter:Ht(A,D.filter),select:h.customColumns}))})}});function $e(n,h,v,f){var A=h[v]||[],$=[];(0,oe.po)(n[v],(ne,le)=>{var J=$[le]=$[le]||function rt(n,h,v,f,A){var D=A?"asc":n.sortOrder,$=function it(n,h){var v="text";return"none"===n?v="index":(h||"displayText"!==n)&&(v="value"),v}(n.sortBy,A),ne=n.sortingMethod?function(J,de){return n.sortingMethod(J,de)}:(0,oe.gK)(J=>J[$]),le=!A&&function gt(n,h,v,f){var{values:A}=h,D=(0,oe.UI)(v.values,n.sortBySummaryField),$="rows"===f,le=$?h.grandTotalRowIndex:h.grandTotalColumnIndex,ve=n.sortBySummaryPath||[],J=ve.length?function Yt(n,h){var v=null,f=(h||[]).join(".");return f.length&&(0,oe.Fo)(n,A=>{var D=A[0],$=(0,oe.AO)(A).join("."),ne=(0,te.Tj)(A,le=>le.text).reverse().join(".");if(f===$||D.key&&ne===f)return v=A[0].index,!1}),v}($?h.columns:h.rows,ve):le;if(A&&A.length&&D>=0&&(0,ee.O9)(J))return function(de){var Ve=((A[$?de.index:J]||[[]])[$?J:de.index]||[])[D];return(0,ee.O9)(Ve)?Ve:null}}(n,h,v,f),ve=le&&(0,oe.gK)(le);return function(J,de){var pe=ve&&ve(J,de)||ne(J,de);return"desc"===D?-pe:pe}}(A[le]||{},n,h,v,f);ne.sort(J)},h.headerName===v?h.path.length:0)}var It=N(24292),na=N(14435),Qe=N(70370),Kt=N(81591),ba=N(63784),Fa=(0,na.zk)();const Oa={XmlaStore:Pe.A.inherit(function(){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>{2}</RequestType><Restrictions><RestrictionList><CATALOG_NAME>{0}</CATALOG_NAME><CUBE_NAME>{1}</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>{0}</Catalog>{3}</PropertyList></Properties></Discover></Body></Envelope>',h="SELECT {2} FROM {0} {1} CELL PROPERTIES VALUE, FORMAT_STRING, LANGUAGE, BACK_COLOR, FORE_COLOR, FONT_FLAGS";function v(c,T){var b=new Ae.cY,{beforeSend:R}=c,B={url:c.url,dataType:"text",data:T,headers:{"Content-Type":"text/xml"},xhrFields:{},method:"POST"};return(0,ee.Tn)(R)&&R(B),oe.Ay.sendRequest(B).fail(function(){b.reject(arguments)}).done(k=>{var W,ie=new Fa.DOMParser;try{try{W=ie.parseFromString(k,"text/xml")}catch{W=void 0}if(!W||W.getElementsByTagName("parsererror").length||0===W.childNodes.length)throw new Kt.sO.Error("E4023",k)}catch(U){b.reject({statusText:U.message,stack:U.stack,responseText:k})}b.resolve(W)}),b}function f(){var c=(0,ba.G)();return void 0!==c?(0,Qe.GP)("<LocaleIdentifier>{0}</LocaleIdentifier>",c):""}function A(c){return"".concat(c.hierarchyName||c.dataField,".[All]")}function D(c){var T="".concat(c.dataField,".allMembers"),{searchValue:b}=c;return b&&(b=b.replace(/'/g,"''"),T="Filter(".concat(T,", instr(").concat(c.dataField,".currentmember.member_caption,'").concat(b,"') > 0)")),T}function $(c){var T=c.join(",");return c.length>1?(0,Qe.GP)("CrossJoin({0})",T):T}function ne(c,T,b,R,B,k,ie,W){for(var X,Te,Fe,U=[],K=k[ie],fe=[],Ce=R;Ce<=T;Ce+=1){var ye=K[Ce],{dataField:Le}=ye,ke=K[Ce-1]&&K[Ce-1].hierarchyName,{hierarchyName:He}=ye,Ue=!He||!K[Ce+1]||K[Ce+1].hierarchyName!==He,lt=c.length+b+R;if(X=null,fe.push(ye),Ce<c.length)Ue&&(X="(".concat(Le,".").concat(i(c[Ce],Le),")"));else if(Ce<=lt)if(0===Ce&&0===b){var ze=A(K[R]);X=He?"".concat(ze,",").concat(K[R].dataField):D(K[R])}else He?(Fe=i(B[B.length-1]),(Ue||Ce===lt)&&(ke===He?(B.length&&(Te=K[B.length-1]),(!Te||Te.hierarchyName!==He)&&(Te=K[Ce-1],Fe=""),va=Le,X="Descendants({".concat(Fe||Te.dataField,"}, ").concat(va,", SELF_AND_BEFORE)")):X=D(ye))):X=D(ye);else(!He||ke!==He)&&(X="(".concat(A(ye),")"));X&&(X=(0,Qe.GP)("{{0}}",X),W&&(X=(0,Qe.GP)("Order({0}, {1}, {2})",X,(ye.hierarchyName||ye.dataField)+("displayText"===ye.sortBy?".MEMBER_CAPTION":".MEMBER_VALUE"),"desc"===ye.sortOrder?"DESC":"ASC")),U.push(X))}var va;return $(U)}function le(c,T,b,R,B,k,ie,W,U,K){var Te,fe=-1,X=k[ie];do{Te=T.length+(fe+=1)+R;var Fe=ne(T,b,fe,R,B,k,ie,U);!U&&!K&&(Fe=(0,Qe.GP)("NonEmpty({0}, {1})",Fe,W)),c.push(Fe)}while(X[Te]&&X[Te+1]&&X[Te].expanded)}function ve(c,T,b,R){return b=b||"[DX_Set_".concat(T.length,"]"),T.push((0,Qe.GP)("{0} {1} as {2}",R=R||"set",b,c)),b}function J(c,T,b,R,B){var Le,ke,k=c[T],ie=[],W=[],U=[],K=0,fe=0,X=[],Te=(0,Qe.GP)("{{0}}",b.join(","));if(k&&k.length){c.headerName===T?K=(W=c.path).length:c.headerName&&c.oppositePath?K=(W=c.oppositePath).length:U=("columns"===T?c.columnExpandedPaths:c.rowExpandedPaths)||U,fe=(0,oe.G6)(c,T),le(ie,[],fe,K,W,c,T,Te,"rows"===T?c.rowTake:c.columnTake,c.totalsOnly),(0,te.__)(U,(He,Ue)=>{le(ie,Ue,fe,K,Ue,c,T,Te)});for(var Fe=fe;Fe>=W.length;Fe-=1)k[Fe].hierarchyName&&(B.visibleLevels[k[Fe].hierarchyName]=B.visibleLevels[k[Fe].hierarchyName]||[],B.visibleLevels[k[Fe].hierarchyName].push(k[Fe].dataField))}if(ie.length){var Ce=(ke=(Le=ie).join(","),Le.length>1?"Union(".concat(ke,")"):ke);"rows"===T&&c.rowTake&&(Ce=(0,Qe.GP)("Subset({0}, {1}, {2})",Ce,c.rowSkip>0?c.rowSkip+1:0,c.rowSkip>0?c.rowTake:c.rowTake+1)),"columns"===T&&c.columnTake&&(Ce=(0,Qe.GP)("Subset({0}, {1}, {2})",Ce,c.columnSkip>0?c.columnSkip+1:0,c.columnSkip>0?c.columnTake:c.columnTake+1));var ye="[DX_".concat(T,"]");X.push(ve(Ce,R,ye)),c.totalsOnly&&X.push(ve("COUNT(".concat(ye,")"),R,"[DX_".concat(T,"_count]"),"member"))}return"columns"===T&&b.length&&!c.skipValues&&X.push(Te),(0,Qe.GP)("{0} DIMENSION PROPERTIES PARENT_UNIQUE_NAME,HIERARCHY_UNIQUE_NAME, MEMBER_VALUE ON {1}",$(X),T)}function de(c){var T=[];return(0,te.__)(c,(b,R)=>{var W,{dataField:B}=R,k=[],ie=R.filterValues||[];R.hierarchyName&&(0,ee.kf)(R.groupIndex)||((0,te.__)(ie,(U,K)=>{var fe="".concat(B,".").concat(i(Array.isArray(K)?K[K.length-1]:K,B));"exclude"===R.filterType&&(k.push("".concat(fe,".parent")),fe="Descendants(".concat(fe,")")),k.push(fe)}),ie.length&&(W=(0,Qe.GP)("{{0}}",k.join(",")),"exclude"===R.filterType&&(W="Except(".concat(D(R),",").concat(W,")")),T.push(W)))}),T.length?$(T):""}function Ge(c,T,b,R,B,k,ie){var W=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},U="",K="".concat(T.length?"with ".concat(T.join(" ")):""," ");if(c.length){var fe;if(W.totalsOnly){var X=[];R.length&&X.push("[DX_rows_count]"),b.length&&X.push("[DX_columns_count]"),fe="{".concat(X.join(","),"} on columns")}else fe=c.join(",");U=K+(0,Qe.GP)(h,function pe(c,T,b,R){var B="[".concat(R,"]");return(0,te.__)([c,T,b],(k,ie)=>{ie&&(B=(0,Qe.GP)("(SELECT {0} FROM {1})","".concat(ie,"on 0"),B))}),B}(de(b),de(R),de(B||[]),ie),k.length?(0,Qe.GP)("WHERE ({0})",k.join(",")):"",fe)}return U}function Ve(c,T){return(0,te.Tj)(T,b=>((0,ee.Kg)(b.expression)&&ve(b.expression,c,b.dataField,"member"),b.dataField))}function We(c,T,b,R){(0,te.__)(R,(B,k)=>{var ie=T[b][B];(!ie.hierarchyName||ie.hierarchyName!==T[b][B+1].hierarchyName)&&c.push("".concat(ie.dataField,".").concat(i(k,ie.dataField)))})}function at(c,T,b){var R=c.columns||[],B=c.rows||[],k=c.values&&c.values.length?c.values:[{dataField:"[Measures]"}],ie=[],W=[],U=[],K=Ve(W,k);return b.measureCount=c.skipValues?1:k.length,b.visibleLevels={},c.headerName&&c.path&&We(ie,c,c.headerName,c.path),c.headerName&&c.oppositePath&&We(ie,c,"rows"===c.headerName?"columns":"rows",c.oppositePath),(R.length||K.length)&&U.push(J(c,"columns",K,W,b)),B.length&&U.push(J(c,"rows",K,W,b)),Ge(U,W,R,B,c.filters,ie,T,c)}function qe(c,T,b){(0,te.__)(b,(R,B)=>{var k=T[R];k.hierarchyName&&(T[R+1]||{}).hierarchyName===k.hierarchyName||c.push("".concat(k.dataField,".").concat(i(B,k.dataField)))})}function Je(c){return parseInt(c,10)}function _(c,T){return l((c.getElementsByTagName(T)||[])[0])}function l(c){return c&&(c.textContent||c.text||c.innerHTML)||""}function d(c,T,b){for(var R=[],B=[],k=0,ie=[],W=c.getElementsByTagName("Cell"),U={},K=0;K<W.length;K+=1){var fe=W[K],X=fe.getElementsByTagName("Value")[0],Te=X&&X.getElementsByTagName("Error")||[],Fe=0===Te.length?l(X):"#N/A",Ce=parseFloat(Fe),ye=Fe-Ce+1>0,Le=Je(fe.getAttribute("CellOrdinal"));Te.length&&(U[l(Te[0].getElementsByTagName("ErrorCode")[0])]=l(Te[0].getElementsByTagName("Description")[0])),ie[Le]={value:ye?Ce:Fe||null}}return(0,te.__)(T[1],()=>{var ke=[];R.push(ke),(0,te.__)(T[0],()=>{0==k%b&&ke.push(B=[]),B.push(ie[k]?ie[k].value:null),k+=1})}),Object.keys(U).forEach(ke=>{Kt.sO.log("W4002",U[ke])}),R}function i(c,T){return c&&(c=(0,ee.Kg)(c)&&c.includes("&")?c:"[".concat(c,"]"),T&&0===c.indexOf("".concat(T,"."))&&(c=c.slice(T.length+1,c.length))),c}function p(c,T,b,R){var B=c[T];return B||(c[T]=B={}),!(0,ee.O9)(B.value)&&b&&(B.text=b.caption,B.value=b.value,B.key=T||"",B.levelName=b.levelName,B.hierarchyName=b.hierarchyName,B.parentName=b.parentName,B.index=R,B.level=b.level),B}function S(c,T){var b=[],R=c.children&&(c.children.length?c.children:Object.keys(c.children.grandTotalHash||{}).reduce((W,U)=>W.concat(c.children.grandTotalHash[U].children),[])),B=R&&R[0];if(B&&(T[B.hierarchyName]&&T[B.hierarchyName].includes(B.levelName)||!T[B.hierarchyName]||0===B.level)){var k=R.filter(W=>W.hierarchyName===B.hierarchyName);return k.grandTotalHash=R.grandTotalHash,k}if(B)for(var ie=0;ie<R.length;ie+=1)R[ie].hierarchyName===B.hierarchyName&&b.push.apply(b,S(R[ie],T));return b}function x(c,T,b,R){var B=[];(0,te.__)(T,(W,U)=>{var K={children:B},fe=(0,ee.O9)(b)?Math.floor(W/b):W;(0,te.__)(U,(X,Te)=>{K=function(Fe,Ce,ye){var Le=ye.children=ye.children||[],ke=Le.hash=Le.hash||{},He=Le.grandTotalHash=Le.grandTotalHash||{};Ce.parentName&&(Le=(ye=p(ke,Ce.parentName)).children=ye.children||[]);var Ue=p(ke,Ce.name,Ce,Fe);return Ce.hasValue&&!Ue.added&&(Ue.index=Fe,Ue.added=!0,Le.push(Ue)),ye.value&&ye.parentName||!Ce.parentName?He[ye.name]&&delete He[Ce.parentName]:He[Ce.parentName]=ye,Ue}(fe,Te,K)})});var k={children:B};k.children=S(k,R);var ie=function(W,U){var K;if(1===W.children.length&&""===W.children[0].parentName){K=W.children[0].index;var{grandTotalHash:fe}=W.children;W.children=W.children[0].children||[],W.children.grandTotalHash=fe,W.children=S(W,U)}else 0===W.children.length&&(K=0);return K}(k,R);return(0,oe.Fo)(k.children,W=>{var U=W[0],K=S(U,R);K.length?U.children=K:delete U.children,delete U.levelName,delete U.hierarchyName,delete U.added,delete U.parentName,delete U.level},!0),(0,te.__)(k.children||[],(W,U)=>{c.push(U)}),ie}function O(c){var T=c.getElementsByTagName("soap:Fault"),b=c.getElementsByTagName("Fault"),R=(0,It.A)([].slice.call(b.length?b:T)).find("Error");if(R.length){var B=R.attr("Description"),k=new Kt.sO.Error("E4000",B);return Kt.sO.log("E4000",B),k}return null}function F(c,T,b,R){var B=[],k="MEASURE"===T,ie=k?"MEASUREGROUP_NAME":"".concat(T,"_DISPLAY_FOLDER");return(0,te.__)(c.getElementsByTagName("row"),(W,U)=>{var K="LEVEL"===T?_(U,"HIERARCHY_UNIQUE_NAME"):void 0,fe=_(U,"LEVEL_NUMBER"),X=_(U,ie);if(k&&(X=R[X]||X),("0"!==fe||"true"!==_(U,"".concat(T,"_IS_VISIBLE")))&&"2"!==_(U,"DIMENSION_TYPE")){var Te=k?"DX_MEASURES":_(U,"DIMENSION_UNIQUE_NAME"),Fe=_(U,"".concat(T,"_UNIQUE_NAME"));B.push({dimension:b.names[Te]||Te,groupIndex:fe?Je(fe)-1:void 0,dataField:Fe,caption:_(U,"".concat(T,"_CAPTION")),hierarchyName:K,groupName:K,displayFolder:X,isMeasure:k,isDefault:!!b.defaultHierarchies[Fe]})}}),B}function z(c){var T=(c=c.replace(/_x(....)_/g,(b,R)=>String.fromCharCode(parseInt(R,16)))).match(/\[.+?\]/gi);return T&&T.length&&(c=T[T.length-1]),c.replace(/\[/gi,"").replace(/\]/gi,"").replace(/\$/gi,"").replace(/\./gi," ")}function I(c,T){return T=(0,It.A)("<div>").text(T).html(),v(c,(0,Qe.GP)('<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>{0}</Statement></Command><Properties><PropertyList><Catalog>{1}</Catalog><ShowHiddenCubes>True</ShowHiddenCubes><SspropInitAppName>Microsoft SQL Server Management Studio</SspropInitAppName><Timeout>3600</Timeout>{2}</PropertyList></Properties></Execute></Body></Envelope>',T,c.catalog,f()))}return{ctor(c){this._options=c},getFields(){var c=this._options,{catalog:T}=c,{cube:b}=c,R=f(),B=v(c,(0,Qe.GP)(n,T,b,"MDSCHEMA_DIMENSIONS",R)),k=v(c,(0,Qe.GP)(n,T,b,"MDSCHEMA_MEASURES",R)),ie=v(c,(0,Qe.GP)(n,T,b,"MDSCHEMA_HIERARCHIES",R)),W=v(c,(0,Qe.GP)(n,T,b,"MDSCHEMA_LEVELS",R)),U=new Ae.cY;return(0,Ae.z7)(B,k,ie,W).then((K,fe,X,Te)=>{v(c,(0,Qe.GP)(n,T,b,"MDSCHEMA_MEASUREGROUPS",R)).done(Fe=>{var ze,Ce=(ze={names:{},defaultHierarchies:{}},(0,te.__)((0,It.A)(K).find("row"),function(){var st=(0,It.A)(this),ea="2"===st.children("DIMENSION_TYPE").text()?"DX_MEASURES":st.children("DIMENSION_UNIQUE_NAME").text();ze.names[ea]=st.children("DIMENSION_CAPTION").text(),ze.defaultHierarchies[st.children("DEFAULT_HIERARCHY").text()]=!0}),ze),ye=F(X,"HIERARCHY",Ce),Le=F(Te,"LEVEL",Ce),ke=function(lt){var ze={};return(0,te.__)(lt.getElementsByTagName("row"),(st,dt)=>{ze[_(dt,"MEASUREGROUP_NAME")]=_(dt,"MEASUREGROUP_CAPTION")}),ze}(Fe),He=F(fe,"MEASURE",Ce,ke).concat(ye),Ue={};(0,te.__)(Le,(lt,ze)=>{Ue[ze.hierarchyName]=Ue[ze.hierarchyName]||[],Ue[ze.hierarchyName].push(ze)}),(0,te.__)(ye,(lt,ze)=>{Ue[ze.dataField]&&Ue[ze.dataField].length>1&&(ze.groupName=ze.hierarchyName=ze.dataField,He.push.apply(He,Ue[ze.hierarchyName]))}),U.resolve(He)}).fail(U.reject)}).fail(U.reject),U},load(c){var k,T=new Ae.cY,b=this._options,R={skipValues:c.skipValues},B=at(c,b.cube,R);(c.rowSkip||c.rowTake||c.columnTake||c.columnSkip)&&(k=at((0,Ye.X)({},c,{totalsOnly:!0,rowSkip:null,rowTake:null,columnSkip:null,columnTake:null}),b.cube,{}));var ie=()=>{B?(0,Ae.z7)(I(b,B),k&&I(b,k)).done((W,U)=>{var K=O(W)||U&&O(U);if(K)T.reject(K);else{var fe=function L(c,T){var b={columns:[],rows:[]},{measureCount:R}=T,B=function(k,ie){var W=[];for((0,te.__)(k.getElementsByTagName("Axis"),(U,K)=>{var fe=K.getAttribute("name"),X=[],Te=0;0===fe.indexOf("Axis")&&(0,ee.kf)(Je(fe.substr(4)))&&(W.push(X),(0,te.__)(K.getElementsByTagName("Tuple"),(Fe,Ce)=>{var dt,ye=Ce.childNodes,Le=0,ke=[],He=ie?ye.length:ye.length-1;1===W.length&&(He-=1),X.push(ke);for(var lt=He;lt>=0;lt-=1){var ze=ye[lt],st=Je(_(ze,"LNum"));ke[lt]={caption:_(ze,"Caption"),value:(dt=_(ze,"MEMBER_VALUE"),(0,ee.kf)(dt)?parseFloat(dt):dt),level:st,index:Te++,hasValue:!(Le||!st&&0!==lt),name:_(ze,"UName"),hierarchyName:ye[lt].getAttribute("Hierarchy"),parentName:_(ze,"PARENT_UNIQUE_NAME"),levelName:_(ze,"LName")},Le+=st}}))});W.length<2;)W.push([[{level:0}]]);return W}(c,T.skipValues);return b.grandTotalColumnIndex=x(b.columns,B[0],R,T.visibleLevels),b.grandTotalRowIndex=x(b.rows,B[1],void 0,T.visibleLevels),b.values=d(c,B,R),b}(W,R);U&&function(X,Te,Fe){var Ce=[],ye=Te.columns||[],Le=Te.rows||[];ye.length&&Ce.push({}),Le.length&&Ce.push({});var ke=d(Fe,[[{}],[{},{}]],1);if(!ye.length&&Le.length&&(X.rowCount=Math.max(ke[0][0][0]-1,0)),!Le.length&&ye.length&&(X.columnCount=Math.max(ke[0][0][0]-1,0)),Le.length&&ye.length&&(X.rowCount=Math.max(ke[0][0][0]-1,0),X.columnCount=Math.max(ke[1][0][0]-1,0)),void 0!==X.rowCount&&Te.rowTake){X.rows=[...Array(Te.rowSkip)].concat(X.rows),X.rows.length=X.rowCount;for(var He=0;He<X.rows.length;He+=1)X.rows[He]=X.rows[He]||{}}if(void 0!==X.columnCount&&Te.columnTake){X.columns=[...Array(Te.columnSkip)].concat(X.columns),X.columns.length=X.columnCount;for(var Ue=0;Ue<X.columns.length;Ue+=1)X.columns[Ue]=X.columns[Ue]||{}}}(fe,c,U),T.resolve(fe)}}).fail(T.reject):T.resolve({columns:[],rows:[],values:[],grandTotalColumnIndex:0,grandTotalRowIndex:0})};return c.delay?setTimeout(ie,c.delay):ie(),T},supportPaging:()=>!0,getDrillDownItems(c,T){var b=new Ae.cY,R=this._options,B=function(k,ie,W){var U=k.columns||[],K=k.rows||[],X=[],Te=[],Fe=[],Ce=Ve(Te,k.values&&k.values.length?k.values:[{dataField:"[Measures]"}]),{maxRowCount:ye}=W,Le=W.customColumns||[],ke=Le.length>0?" return ".concat(Le.join(",")):"";qe(X,U,W.columnPath||[]),qe(X,K,W.rowPath||[]),(U.length||Ce.length)&&Fe.push(["".concat(Ce[W.dataIndex]||Ce[0]," on 0")]);var He=Ge(Fe,Te,U,K,k.filters,X,ie);return He&&"drillthrough".concat(ye>0?" maxrows ".concat(ye):"").concat(He).concat(ke)}(c,R.cube,T);return B?(0,Ae.z7)(I(R,B)).done(k=>{var ie=O(k);ie?b.reject(ie):b.resolve(function(W){for(var U=W.getElementsByTagName("row"),K=[],fe={},X=0;X<U.length;X+=1){for(var Te=U[X].childNodes,Fe={},Ce=0;Ce<Te.length;Ce+=1){var{tagName:ye}=Te[Ce];Fe[fe[ye]=fe[ye]||z(ye)]=l(Te[Ce])}K.push(Fe)}return K}(k))}).fail(b.reject):b.resolve([]),b},key:Ze.lQ,filter:Ze.lQ}}()).include(oe.wN)};var Pt="column",Lt="row",nt=null,pa=function(n,h){var v=n/h;return(!(0,ee.O9)(n)||isNaN(v))&&(v=nt),v},la=function(n,h){return pa(n.value(),n.grandTotal(h).value())},fa=function(n,h){var v=n.parent(h),f=v?v.value():n.value();return pa(n.value(),f)},ma=function(n){return function(h){var v=h.prev(Pt,n),f=v&&v.value();return(0,ee.O9)(f)&&(0,ee.O9)(h.value())?h.value()-f:nt}},oa={percentOfColumnTotal:n=>fa(n,Lt),percentOfRowTotal:n=>fa(n,Pt),percentOfColumnGrandTotal:n=>la(n,Lt),percentOfRowGrandTotal:n=>la(n,Pt),percentOfGrandTotal:n=>la(n)},Ca=function n(h,v){if(h&&h.parent(v)){var f=h.prev(v);return f||(f=n(h.parent(v),v)),f}},xa=function(n){if(n.runningTotal){var h=n.runningTotal===Pt?Lt:Pt;return function(v){var f=n.allowCrossGroupCalculation?Ca(v,h):v.prev(h,!1),A=v.value(!0),D=f&&f.value(!0);return(0,ee.O9)(D)&&(0,ee.O9)(A)?A=D+A:(0,ee.O9)(D)&&(A=D),A}}};function Qt(n,h,v){var f={index:-1};if(!(0,ee.Gv)(h))if(v.fields[h])h=v[h];else{var A=n.columns.concat(n.rows).concat(n.values),D=(0,oe.UI)(A,h);h=v[h]=A[D]}if(h){var $=h.area||"data";f=v.positions[h.index]=v.positions[h.index]||{area:$,index:n["data"===$?"values":"".concat($,"s")].indexOf(h)}}return f}function Nt(n){return n===Lt?"_rowPath":"_columnPath"}var bt=function(n,h,v,f,A,D){this._columnPath=n,this._rowPath=h,this._fieldIndex=A,this._fieldsCache=D||{fields:{},positions:{}},this._data=v,this._descriptions=f;var $=v.values&&v.values[h[0].index]&&v.values[h[0].index][n[0].index];$&&($.originalCell=$.originalCell||$.slice(),$.postProcessedFlags=$.postProcessedFlags||[],this._cell=$)};function Jt(n){var{summaryDisplayMode:h}=n,v=n.allowCrossGroupCalculation,f=nt;return(0,ee.Tn)(n.calculateSummaryValue)?f=n.calculateSummaryValue:h&&(f="absoluteVariation"===h?ma(v):"percentVariation"===h?function(n){var h=ma(n);return function(v){var f=h(v),A=v.prev(Pt,n),D=A&&A.value();return f!==nt&&D?f/D:nt}}(v):oa[h])&&!n.format&&-1!==h.indexOf("percent")&&oe.Ay.setFieldProperty(n,"format","percent"),f}function wa(n,h,v,f){var A=n.values[h][v]=n.values[h][v]||[],{originalCell:D}=A;D&&((A.allowResetting||!f)&&(n.values[h][v]=D.slice()),n.values[h][v].allowResetting=f)}bt.prototype=(0,Ye.X)(bt.prototype,{_getPath(n){return this[Nt(n)]},_getDimension(n){return this._descriptions[n=n===Lt?"rows":"columns"]},_createCell(n){return new bt(n._columnPath||this._columnPath,n._rowPath||this._rowPath,this._data,this._descriptions,this._fieldIndex)},parent(n){var h=this._getPath(n).slice(),v={};return h.shift(),h.length?(v[Nt(n)]=h,this._createCell(v)):nt},children(n){var h=this._getPath(n).slice(),v=h[0],f=[],A={};if(v.children)for(var D=0;D<v.children.length;D+=1)A[Nt(n)]=[v.children[D]].concat(h.slice()),f.push(this._createCell(A));return f},grandTotal(n){var h={},v=this._rowPath,f=this._columnPath,A=this._getPath(n),D=Nt(n);return n?h[D]=[A[A.length-1]]:(h._rowPath=[v[v.length-1]],h._columnPath=[f[f.length-1]]),this._createCell(h)},next(n,h){var D,v=this._getPath(n),f=v[0],A=this.parent(n);if(A){var $=v[1].children.indexOf(f);if((D=A.children(n))[$+1])return D[$+1]}if(h&&A){do{D=(A=A.next(n,h))?A.children(n):[]}while(A&&!D.length);return D[0]||nt}return nt},prev(n,h){var D,v=this._getPath(n),f=v[0],A=this.parent(n);if(A){var $=v[1].children.indexOf(f);if((D=A.children(n))[$-1])return D[$-1]}if(h&&A){do{D=(A=A.prev(n,h))?A.children(n):[]}while(A&&!D.length);return D[D.length-1]||nt}return nt},cell(){return this._cell},field(n){if("data"===n)return this._descriptions.values[this._fieldIndex];var h=this._getPath(n);return this._getDimension(n)[h.length-2]||nt},child(n,h){for(var v,f=this.children(n),A=0;A<f.length;A+=1)if(v=v||f[A].field(n),f[A].value(v)===h)return f[A];return nt},slice(n,h){var v={},f=Qt(this._descriptions,n,this._fieldsCache),{area:A}=f,D=f.index,$=nt;if(A===Lt||A===Pt){var ne=this._getPath(A).slice(),le=-1!==D&&ne.length-2-D;if(ne[le]){for(var ve=le;ve>=0;ve-=1){if(ne[ve+1]){var J=ne[ve+1].children||[],de=ve===le?h:ne[ve].value;ne[ve]=void 0;for(var pe=0;pe<J.length;pe+=1)if(J[pe].value===de){ne[ve]=J[pe];break}}if(void 0===ne[ve])return $}v[Nt(A)]=ne,$=this._createCell(v)}}return $},value(n,h){var v=this._cell,f=this._fieldIndex,A=!0===n||!1===n,D=A?nt:n,$=A&&n||h;if((0,ee.O9)(D)){var ne=Qt(this._descriptions,D,this._fieldsCache);if(f=ne.index,"data"!==ne.area){var le=this._getPath(ne.area),ve=-1!==f&&le.length-2-f;return le[ve]&&le[ve].value}}return v&&v.originalCell?$?v[f]:v.originalCell[f]:nt},isPostProcessed(n){var h=this._fieldIndex;if((0,ee.O9)(n)){var v=Qt(this._descriptions,n,this._fieldsCache);if(h=v.index,"data"!==v.area)return!1}return!(!this._cell||!this._cell.postProcessedFlags[h])}});const Bt_applyRunningTotal=function Zt(n,h){var v=[],f=[{index:h.grandTotalColumnIndex,children:h.columns}],A=[{index:h.grandTotalRowIndex,children:h.rows}],D=n.values,$={fields:{},positions:{}};h.values=h.values||[],(0,oe.Fo)(A,ne=>{var le=ne[0];h.values[le.index]=h.values[le.index]||[],(0,oe.Fo)(f,ve=>{wa(h,le.index,ve[0].index,!0);for(var de=0;de<D.length;de+=1){var Ge=v[de]=void 0===v[de]?xa(D[de]):v[de];if(Ge){var Ve=new bt(ve,ne,h,n,de,$),We=Ve.cell();We[de]=Ge(Ve),We.postProcessedFlags[de]=!0}}},!1)},!1)},Bt_createMockSummaryCell=function ce(n,h,v){var f=new bt([],[],{},n,0);return f.value=function(A){if((0,ee.O9)(A)){var D=(0,oe.UI)(h,A),$=h[D];!v[D]&&$&&!(0,ee.O9)($.area)&&(n.values.push($),v[D]=!0)}},f.grandTotal=function(){return this},f.children=function(){return[]},f},Bt_applyDisplaySummaryMode=function Ia(n,h){var v=[],f=[{index:h.grandTotalColumnIndex,children:h.columns}],A=[{index:h.grandTotalRowIndex,children:h.rows}],D=n.values,$={fields:{},positions:{}};h.values=h.values||[],(0,oe.Fo)(f,ne=>{ne[0].isEmpty=[]},!1),(0,oe.Fo)(A,ne=>{var le=ne[0];le.isEmpty=[],h.values[le.index]=h.values[le.index]||[],(0,oe.Fo)(f,ve=>{var de,J=ve[0];wa(h,le.index,J.index,!1);for(var pe=0;pe<D.length;pe+=1){var Ve=v[pe]=void 0===v[pe]?Jt(D[pe]):v[pe];if(de=!1,Ve){var We=new bt(ve,ne,h,n,pe,$),at=We.cell(),qe=at[pe]=Ve(We);at.postProcessedFlags[pe]=!0,de=null==qe}void 0===J.isEmpty[pe]&&(J.isEmpty[pe]=!0),void 0===le.isEmpty[pe]&&(le.isEmpty[pe]=!0),de||(le.isEmpty[pe]=J.isEmpty[pe]=!1)}},!1)},!1),h.isEmptyGrandTotalRow=A[0].isEmpty,h.isEmptyGrandTotalColumn=f[0].isEmpty};var qt={row:"rows",column:"columns",data:"values",filter:"filters"},Vt=["area","areaIndex","sortOrder","filterType","filterValues","sortBy","sortBySummaryField","sortBySummaryPath","expanded","summaryType","summaryDisplayMode"],sa=["format","selector","customizeText","caption"],Sa=sa.concat(["allowSorting","allowSortingBySummary","allowFiltering","allowExpandAll"]);function da(n,h){var v=n._initProperties||{};(0,te.__)(h,(f,A)=>{Object.prototype.hasOwnProperty.call(v,A)&&(n[A]=v[A])})}function ua(n,h){da(n,h),(0,ee.O9)(n.caption)||(0,oe.CE)(n,"caption",function pt(n){var h=n.dataField||n.groupName||"",v=(n.summaryType||"").toLowerCase();return(0,ee.Kg)(n.groupInterval)&&(h+="_".concat(n.groupInterval)),v&&"custom"!==v?(v=v.replace(/^./,v[0].toUpperCase()),h.length&&(v=" (".concat(v,")"))):v="",(0,Be.Ns)(h)+v}(n))}function kt(n){return n.some(h=>h.summaryDisplayMode||h.calculateSummaryValue)}function ha(n){return n.rows.length||n.columns.length||n.values.length}var ca=Pe.A.inherit(function(){var n=function(l,d){if(l._cacheByPath)return l._cacheByPath[d.join(".")]||null},h=function l(d,i){var p,x,S=-1;if(d)for(p=0;p<d.length;p+=1)void 0!==(x=d[p]).index&&(S=Math.max(S,x.index)),x.children?S=Math.max(S,l(x.children)):x.collapsedChildren&&(S=Math.max(S,l(x.collapsedChildren)));return(0,ee.O9)(i)&&(S=Math.max(S,i)),S},v=function(l,d,i,p){var O,S=h(i)+1,x=h(l,p)+1,L=[],F=!1,z=new Ae.cY;if(d.children&&d.children.length===i.length)for(var I=0;I<i.length;I+=1){var c=i[I];void 0!==c.index&&(void 0===d.children[I].index?(c.index=L[c.index]=x++,d.children[I]=c):L[c.index]=d.children[I].index)}else{for(F=!0,O=0;O<S;O+=1)L[O]=x++;d.children=i}return(0,Ae.z7)((0,oe.vs)(d.children,T=>{F&&(T[0].index=L[T[0].index])})).done(()=>{z.resolve(L)}),z},f=function(l,d,i){var p=new Ae.cY,S=i>=0&&h(l,i)+1,x=[];return(0,Ae.z7)((0,oe.vs)(l,O=>{delete O[0].collapsedChildren})).done(()=>{(0,Ae.z7)((0,oe.vs)(d,(O,L)=>{var F=O[0];if(F.index>=0){var z=n(l,(0,oe.AO)(O));if(z&&z.index>=0)x[F.index]=z.index;else if(S){var I=(0,oe.AO)(O.slice(1));z=n(l,I);var c=I.length?z&&z.children:l;c&&(c[L]=F,F.index=x[F.index]=S++)}}})).done(()=>{p.resolve(x)})}),p},A=function(l,d,i,p){var S,x,O,L,F,z,I=l.values;if(d)for(S=0;S<d.length;S+=1)if(O=d[S],(0,ee.O9)(F=i[S])||(F=l.grandTotalRowIndex),O&&(0,ee.O9)(F))for(I[F]||(I[F]=[]),x=0;x<O.length;x+=1)L=O[x],(0,ee.O9)(z=p[x])||(z=l.grandTotalColumnIndex),(0,ee.O9)(L)&&(0,ee.O9)(z)&&(I[F][z]=L)};function D(l,d){return new(l.remoteOperations||l.paginate?Ne:Ie)((0,Ye.X)((0,je.ho)(l),{onChanged:null,onLoadingChanged:null,onProgressChanged:d}))}function $(l,d,i,p){var S=[],x=d&&d[i]||[],O=p&&p[i]||[];return(0,oe.Fo)(l[i],L=>{var F=L[0],z=(0,oe.AO)(L);F.children&&x[z.length-1]&&!x[z.length-1].expanded&&z.length<x.length&&(!p||function(I,c,T){for(var b=0;b<T;b+=1)if(!I[b]||!c[b]||I[b].index!==c[b].index)return!1;return!0}(x,O,z.length))&&S.push(z.slice())},!0),S}function ne(l,d,i,p){return d?(0,te.__)(p,(S,x)=>{if(i)l[x]=d[x];else{if(("summaryType"===x||"summaryDisplayMode"===x)&&void 0===d[x])return;(0,oe.CE)(l,x,d[x])}}):da(l,p),l}function le(l,d){var i=[];return(0,te.__)(l,(p,S)=>{i.push(ne({dataField:S.dataField,name:S.name},S,!0,d))}),i}function ve(l){return l.name?l.name:"".concat(l.dataField)}function J(l,d){var i=[];return(0,te.__)(l||[],(p,S)=>{ve(S)===d&&i.push(S)}),i}function de(l,d){l=l||[];var p,i={};return(0,te.__)(d,(S,x)=>{p=ve(x),i[p]||(i[p]=J(d,ve(x)))}),(0,te.__)(i,(S,x)=>{var O;O=(O=J(l,S))||[],(0,te.__)(x,(F,z)=>{ne(z,O[F],!1,Vt),ua(z,sa)})}),d}function pe(l){l.sort((d,i)=>d.areaIndex-i.areaIndex||d.groupIndex-i.groupIndex)}function Ge(l,d){var i=l.groupName||"";return(l.dataField||i)+(l.groupInterval?i+l.groupInterval:"NOGROUP")+(d?"":i)}function Ve(l,d,i){var L,p=[],S={},x={},O=(0,oe.uz)(l);return d?((0,te.__)(d,(L,F)=>{S[Ge(F,i)]=F}),(0,te.__)(l,(L,F)=>{var c,z=Ge(F,i),I=S[z]||x[z];I?(I._initProperties&&da(I,Sa),c=(0,Ye.X)({},I,F,{_initProperties:null})):S[z]=c=F,!c.dataType&&O[F.dataField]&&(c.dataType=O[F.dataField]),delete S[z],x[z]=I,p.push(c)}),i&&(0,te.__)(S,(L,F)=>{p.push(F)})):p=l,p.push.apply(p,[]),(L=p).forEach(F=>{if(F.groupName&&F.groupInterval&&void 0===F.groupIndex){var z=L.filter(I=>I.groupName===F.groupName&&(0,ee.kf)(I.groupIndex)).map(I=>I.groupIndex).reduce((I,c)=>Math.max(I,c),-1);F.groupIndex=z+1}}),p}function We(l){var S,d=new Ae.cY,i=l._store,p=i&&i.getFields(l._fields);return(0,Ae.z7)(p).done(x=>{l._storeFields=x,S=Ve(l._fields,x,l._retrieveFields),d.resolve(S)}).fail(d.reject),d}function at(l,d,i){return(0,oe.vs)(l[i],p=>{var S=p[0];S.text=S.text||(0,oe.Fl)(S.value,d[i][(0,oe.AO)(p).length-1])})}function qe(l,d){return(0,Ae.z7)(at(d,l,"columns"),at(d,l,"rows"))}function Je(l){var d=new Ae.cY,i={};return(0,Ae.z7)((0,oe.vs)(l,p=>{var S=(0,oe.AO)(p).join(".");i[S]=p[0]})).done(d.resolve),l._cacheByPath=i,d}function _(l,d){var i=[];return(0,te.__)(l,function(){var p,S,x;p=this,x="data"===(S=d)||!1!==p.visible,p.area===S&&!(0,ee.O9)(p.groupIndex)&&x&&i.push(this)}),i}return{ctor(l){l=l||{},this._eventsStrategy=new Oe.h(this);var p,S,x,O,d=this,i=(S=p=>{d._eventsStrategy.fireEvent("progressChanged",[p])},(0,ee.Qd)(p=l)&&p.load?x=D(p,S):(p&&!p.store&&(p={store:p}),"xmla"===(O=p.store).type?x=new Oa.XmlaStore(O):(0,ee.Qd)(O)&&O.type||O instanceof H.A||Array.isArray(O)?x=D(p,S):O instanceof Pe.A&&(x=O)),x);d._store=i,d._paginate=!!l.paginate,d._pageSize=l.pageSize||40,d._data={rows:[],columns:[],values:[]},d._loadingCount=0,d._isFieldsModified=!1,(0,te.__)(["changed","loadError","loadingChanged","progressChanged","fieldsPrepared","expandValueChanging"],(p,S)=>{var x="on".concat(S[0].toUpperCase()).concat(S.slice(1));Object.prototype.hasOwnProperty.call(l,x)&&this.on(S,l[x])}),d._retrieveFields=!(0,ee.O9)(l.retrieveFields)||l.retrieveFields,d._fields=l.fields||[],d._descriptions=l.descriptions?(0,Ye.X)(d._createDescriptions(),l.descriptions):void 0,i||(0,Ye.X)(!0,d._data,l.store||l)},getData(){return this._data},getAreaFields(l,d){var i=[];return d||"data"===l?pe(i=_(this._fields,l)):i=(this._descriptions||{})[qt[l]]||[],i},fields(l){return l&&(this._fields=Ve(l,this._storeFields,this._retrieveFields),this._fieldsPrepared(this._fields)),this._fields},field(l,d){var S,i=this._fields,p=i&&i[(0,ee.kf)(l)?l:(0,oe.UI)(i,l)];return p&&d&&((0,te.__)(d,(x,O)=>{var L=!Vt.includes(x);if((0,oe.CE)(p,x,O,L),"sortOrder"===x){S=p.levels||[];for(var F=0;F<S.length;F+=1)S[F][x]=O}}),ua(p,sa),this._descriptions=this._createDescriptions(p),this._isFieldsModified=!0,this._eventsStrategy.fireEvent("fieldChanged",[p])),p},getFieldValues(l,d,i){var F,p=this,S=this._fields&&this._fields[l],x=this.store(),O=[],L={columns:O,rows:[],values:this.getAreaFields("data"),filters:d?this._fields.filter(I=>I!==S&&I.area&&I.filterValues&&I.filterValues.length):[],skipValues:!0},z=new Ae.cY;return i&&(F=i.searchValue,L.columnSkip=i.skip,L.columnTake=i.take),S&&x?((0,te.__)(S.levels||[S],function(){O.push((0,Ye.X)({},this,{expanded:!0,filterValues:null,sortOrder:"asc",sortBySummaryField:null,searchValue:F}))}),x.load(L).done(I=>{L.columnSkip&&(I.columns=I.columns.slice(L.columnSkip)),L.columnTake&&(I.columns=I.columns.slice(0,L.columnTake)),qe(L,I),L.columnTake||p._sort(L,I),z.resolve(I.columns)}).fail(z)):z.reject(),z},reload(){return this.load({reload:!0})},filter(){var l=this._store;return l.filter.apply(l,arguments)},load:function(l){var d=this,i=new Ae.cY;function p(){d._delayedLoadTask=void 0,d._descriptions?d._loadCore(l,i):(0,Ae.z7)(We(d)).done(S=>{d._fieldsPrepared(S),d._loadCore(l,i)}).fail(i.reject).fail(d._loadErrorHandler)}return l=l||{},d.beginLoading(),i.fail(S=>{d._eventsStrategy.fireEvent("loadError",[S])}).always(()=>{d.endLoading()}),d.store()?d._delayedLoadTask=(0,Ze.uG)(p):p(),i},createDrillDownDataSource(l){return this._store.createDrillDownDataSource(this._descriptions,l)},_createDescriptions(l){var d=this.fields(),i={rows:[],columns:[],values:[],filters:[]};(0,te.__)(["row","column","data","filter"],(S,x)=>{(0,Dt.Il)(_(d,x),"areaIndex",l)}),(0,te.__)(d||[],(S,x)=>{var I,L=i[qt[x.area]],{groupName:F}=x;F&&!(0,ee.kf)(x.groupIndex)&&(x.levels=(I=x,d.filter(c=>c.groupName===I.groupName&&(0,ee.kf)(c.groupIndex)&&!1!==c.visible).map(c=>(0,Ye.X)(c,{areaIndex:I.areaIndex,area:I.area,expanded:(0,ee.O9)(c.expanded)?c.expanded:I.expanded,dataField:c.dataField||I.dataField,dataType:c.dataType||I.dataType,sortBy:c.sortBy||I.sortBy,sortOrder:c.sortOrder||I.sortOrder,sortBySummaryField:c.sortBySummaryField||I.sortBySummaryField,sortBySummaryPath:c.sortBySummaryPath||I.sortBySummaryPath,visible:c.visible||I.visible,showTotals:(0,ee.O9)(c.showTotals)?c.showTotals:I.showTotals,showGrandTotals:(0,ee.O9)(c.showGrandTotals)?c.showGrandTotals:I.showGrandTotals})).sort((c,T)=>c.groupIndex-T.groupIndex))),!(!L||F&&(0,ee.kf)(x.groupIndex)||!1===x.visible&&"data"!==x.area&&"filter"!==x.area)&&(x.levels&&L!==i.filters&&L!==i.values?(L.push.apply(L,x.levels),x.filterValues&&x.filterValues.length&&i.filters.push(x)):L.push(x))}),(0,te.__)(i,(S,x)=>{pe(x)});var p={};return(0,te.__)(i.values,(S,x)=>{var O=x.calculateSummaryValue;(0,ee.Tn)(O)&&O(Bt_createMockSummaryCell(i,d,p))}),i},_fieldsPrepared(l){this._fields=l,(0,te.__)(l,(p,S)=>{S.index=p,ua(S,Sa)});var d=le(l,["caption"]);this._eventsStrategy.fireEvent("fieldsPrepared",[l]);for(var i=0;i<l.length;i+=1)l[i].caption!==d[i].caption&&(0,oe.CE)(l[i],"caption",l[i].caption,!0);this._descriptions=this._createDescriptions()},isLoading(){return this._loadingCount>0},state(l,d){var i=this;return arguments.length?(l=(0,Ye.X)({rowExpandedPaths:[],columnExpandedPaths:[]},l),void(i._descriptions?(i._fields=de(l.fields,i._fields),i._descriptions=i._createDescriptions(),!d&&i.load(l)):(i.beginLoading(),(0,Ae.z7)(We(i)).done(p=>{i._fields=de(l.fields,p),i._fieldsPrepared(p),!d&&i.load(l)}).always(()=>{i.endLoading()})))):{fields:le(i._fields,Vt),columnExpandedPaths:$(i._data,i._descriptions,"columns",i._lastLoadOptions),rowExpandedPaths:$(i._data,i._descriptions,"rows",i._lastLoadOptions)}},beginLoading(){this._changeLoadingCount(1)},endLoading(){this._changeLoadingCount(-1)},_changeLoadingCount(l){var d=this.isLoading();this._loadingCount+=l;var i=this.isLoading();d^i&&this._eventsStrategy.fireEvent("loadingChanged",[i])},_hasPagingValues(l,d,i){var p="".concat(d,"Take"),S="".concat(d,"Skip"),{values:x}=this._data,O=this._data["".concat(d,"s")],L="row"===d?"column":"row",F=[];if(l.path&&l.area===d){var z=n(O,l.path);if(!(O=z&&z.children))return!1}if(l.oppositePath&&l.area===L){var I=n(O,l.oppositePath);if(!(O=I&&I.children))return!1}for(var c=l[S];c<l[S]+l[p];c+=1)O[c]&&F.push(O[c].index);return F.every(T=>{if(void 0!==T)return"row"===d?(x[T]||[])[i]:(x[i]||[])[T]})},_processPagingCacheByArea(l,d,i){var L,p="".concat(i,"Take"),S="".concat(i,"Skip"),x=this._data["".concat(i,"s")],O="row"===i?"column":"row";if(l[p]){if(l.path&&l.area===i){var F=n(x,l.path);x=F&&F.children||[]}if(l.oppositePath&&l.area===O){var z=n(x,l.oppositePath);x=z&&z.children||[]}do{if((L=x[l[S]])&&void 0!==L.index){if(!this._hasPagingValues(l,O,L.index))break;l[S]++,l[p]--}}while(L&&void 0!==L.index&&l[p]);if(l[p]){var I=Math.floor(l[S]/d)*d,c=Math.ceil((l[S]+l[p])/d)*d;l[S]=I,l[p]=c-I}}},_processPagingCache(l){var d=this._pageSize;if(!(d<0))for(var i=0;i<l.length;i+=1)this._processPagingCacheByArea(l[i],d,"row"),this._processPagingCacheByArea(l[i],d,"column")},_loadCore(l,d){var i=this,p=this._store,S=this._descriptions,x=l.reload||this.paginate()&&i._isFieldsModified,O=this.paginate(),L=qt[l.area];if(l=l||{},p){(0,Ye.X)(l,S),l.columnExpandedPaths=l.columnExpandedPaths||$(this._data,l,"columns",i._lastLoadOptions),l.rowExpandedPaths=l.rowExpandedPaths||$(this._data,l,"rows",i._lastLoadOptions),O&&(l.pageSize=this._pageSize),L&&(l.headerName=L),i.beginLoading(),d.always(()=>{i.endLoading()});var F=[l];if(i._eventsStrategy.fireEvent("customizeStoreLoadOptions",[F,x]),x||i._processPagingCache(F),!(F=F.filter(I=>!(I.rows.length&&0===I.rowTake||I.columns.length&&0===I.columnTake))).length)return void i._update(d);var z=F.map(I=>p.load(I));Ae.z7.apply(null,z).done(function(){for(var I=arguments,c=0;c<I.length;c+=1){var T=F[c],b=I[c],R=c===I.length-1;T.path?i.applyPartialDataSource(T.area,T.path,b,!!R&&d,T.oppositePath):O&&!x&&ha(i._data)?i.mergePartialDataSource(b,!!R&&d):((0,Ye.X)(i._data,b),i._lastLoadOptions=T,i._update(!!R&&d))}}).fail(d.reject)}else i._update(d)},_sort(l,d,i){this._store&&!this._paginate&&function Ke(n,h,v){$e(h,n,"rows",v),$e(h,n,"columns",v)}(l,d,i)},sortLocal(){this._sort(this._descriptions,this._data,kt(this._descriptions.values)),this._eventsStrategy.fireEvent("changed")},paginate(){return this._paginate&&this._store&&this._store.supportPaging()},isEmpty(){var l=this.getAreaFields("data").filter(i=>!1!==i.visible),d=this.getData();return!l.length||!d.values.length},_update(l){var d=this,i=d._descriptions,p=d._data,S=i.values,x=kt(S);return(0,Ae.z7)(qe(i,p),Je(p.rows),Je(p.columns)).done(()=>{x&&(d._sort(i,p,x),!d.isEmpty()&&Bt_applyDisplaySummaryMode(i,p)),d._sort(i,p),!d.isEmpty()&&function ya(n){return n.some(h=>!!h.runningTotal)}(S)&&Bt_applyRunningTotal(i,p),d._data=p,!1!==l&&(0,Ae.z7)(l).done(()=>{d._isFieldsModified=!1,d._eventsStrategy.fireEvent("changed"),(0,ee.O9)(d._data.grandTotalRowIndex)&&(p.grandTotalRowIndex=d._data.grandTotalRowIndex),(0,ee.O9)(d._data.grandTotalColumnIndex)&&(p.grandTotalColumnIndex=d._data.grandTotalColumnIndex)}),l&&l.resolve(d._data)}),l},store(){return this._store},collapseHeaderItem(l,d){var p=n("column"===l?this._data.columns:this._data.rows,d),S=this.getAreaFields(l)[d.length-1];return!(!p||!p.children||(this._eventsStrategy.fireEvent("expandValueChanging",[{area:l,path:d,expanded:!1}]),S&&(S.expanded=!1),p.collapsedChildren=p.children,delete p.children,this._update(),this.paginate()&&this.load(),0))},collapseAll(l){var d=!1,i=this.field(l)||{},p=[this.getAreaFields(i.area).indexOf(i)];i.expanded=!1,i&&i.levels&&(p=[],i.levels.forEach(S=>{p.push(this.getAreaFields(i.area).indexOf(S)),S.expanded=!1})),(0,oe.Fo)(this._data["".concat(i.area,"s")],S=>{var x=S[0],O=(0,oe.AO)(S);x&&x.children&&p.includes(O.length-1)&&(x.collapsedChildren=x.children,delete x.children,d=!0)},!0),d&&this._update()},expandAll(l){var d=this.field(l);d&&d.area&&(d.expanded=!0,d&&d.levels&&d.levels.forEach(i=>{i.expanded=!0}),this.load())},expandHeaderItem(l,d){var p=n("column"===l?this._data.columns:this._data.rows,d);if(p&&!p.children){var S=!!p.collapsedChildren,x={area:l,path:d,expanded:!0,needExpandData:!S};return this._eventsStrategy.fireEvent("expandValueChanging",[x]),S?(p.children=p.collapsedChildren,delete p.collapsedChildren,this._update()):this.store()&&this.load(x),S}return!1},mergePartialDataSource(l,d){var S,x,i=this,p=i._data;l&&l.values&&(l.rows=l.rows||[],l.columns=l.columns||[],S=f(p.rows,l.rows,p.grandTotalColumnIndex),x=f(p.columns,l.columns,p.grandTotalColumnIndex),(0,Ae.z7)(S,x).done((O,L)=>{(O.length||L.length)&&A(p,l.values,O,L),i._update(d)}))},applyPartialDataSource(l,d,i,p,S){var F,I,c,T,x=this,O=x._data,L="column"===l?O.columns:O.rows,z="column"===l?O.rows:O.columns;i&&i.values&&(i.rows=i.rows||[],i.columns=i.columns||[],F=n(L,d),I=S&&n(z,S),F&&("column"===l?(T=v(L,F,i.columns,O.grandTotalColumnIndex),c=I?v(z,I,i.rows,O.grandTotalRowIndex):f(O.rows,i.rows,O.grandTotalRowIndex)):(c=v(L,F,i.rows,O.grandTotalRowIndex),T=I?v(z,I,i.columns,O.grandTotalColumnIndex):f(O.columns,i.columns,O.grandTotalColumnIndex)),(0,Ae.z7)(c,T).done((b,R)=>{("row"===l&&b.length||"column"===l&&R.length)&&A(O,i.values,b,R),x._update(p)})))},on(l,d){return this._eventsStrategy.on(l,d),this},off(l,d){return this._eventsStrategy.off(l,d),this},dispose(){var l=this._delayedLoadTask;this._eventsStrategy.dispose(),l&&l.abort(),this._isDisposed=!0},isDisposed(){return!!this._isDisposed}}}())},69050:($a,aa,N)=>{N.d(aa,{FY:()=>Mt,Zr:()=>St,AO:()=>yt,Ay:()=>ra,yg:()=>Tt,UI:()=>et,po:()=>$t,Fo:()=>Rt,vs:()=>oe,Fl:()=>Ie,gK:()=>xt,G6:()=>Ut,uz:()=>vt,Mt:()=>Ot,JL:()=>At,k2:()=>wt,CE:()=>_t,wN:()=>jt});var je=N(17669),H=N(435),Ze=N(72463),ee=N(94461),Ye=N(39407),Dt=N(12101),te=N(87951),Ae=N(69259),Pe=N(45),Oe=N(75333),Be=N(2097),ut=N(12984),_t=function(M,Q,re,Z){var be=M._initProperties=M._initProperties||{},Ne=Z?re:M[Q];(!Object.prototype.hasOwnProperty.call(be,Q)||Z)&&(be[Q]=Ne),M[Q]=re},Ct=new Date;function Ee(M){return function Q(re,Z,be,Ne,tt,Ke){var $e,rt;function gt(ga,It,na){(0,ut.z7)(Q(re,Z,be,Ne,It,na)).done(ga.resolve)}for(Ne=Ne||[],re=re||[],$e=tt=tt||0;$e<re.length;$e+=1){if(M&&$e>tt&&$e%1e4==0&&new Date-Ct>=300)return Ct=new Date,gt(rt=new ut.cY,$e,!1),rt;var it=re[$e];if(!Ke){if(Ne.unshift(it),be&&!1===Z(Ne,$e))return;if(it.children){var Yt=Q(it.children,Z,be,Ne);if(M&&Yt)return rt=new ut.cY,Yt.done(gt(rt,$e,!0)),rt}}if(Ke=!1,!be&&!1===Z(Ne,$e))return;Ne.shift(),re[$e]!==it&&($e-=1)}}}var Rt=Ee(!1),oe=Ee(!0);function et(M,Q){if(M&&(0,Ze.O9)(Q))for(var re=0;re<M.length;re+=1){var Z=M[re];if(Z.name===Q||Z.caption===Q||Z.dataField===Q||Z.index===Q)return re}return-1}function Ie(M,Q){var Z={value:M,valueText:M==M&&Pe.A.format(M,Q.format)||""};return Q.customizeText?Q.customizeText.call(Q,Z):Z.valueText}function xt(M){return function(Q,re){var Z=0,be=M(Q),Ne=M(re),tt=(0,Ze.O9)(be),Ke=(0,Ze.O9)(Ne);return tt&&Ke&&(be>Ne?Z=1:be<Ne&&(Z=-1)),tt&&!Ke&&(Z=1),!tt&&Ke&&(Z=-1),Z}}function yt(M){for(var Q=[],re=M.length-1;re>=0;re-=1)Q.push(M[re].key||M[re].value);return Q}function $t(M,Q,re,Z){re=re||0,Z=Z||"children",M.length&&Q(M,re);for(var be=0;be<M.length;be+=1){var Ne=M[be];Ne[Z]&&Ne[Z].length&&$t(Ne[Z],Q,re+1,Z)}}function At(M,Q){for(var re=[],Z=0;Z<M.length;Z+=1)re.push(Math.max(M[Z]||0,Q[Z]||0));return re}function Ut(M,Q){var re=M[Q],Z=0;for(M.headerName===Q?Z=M.path.length:M.headerName&&M.headerName!==Q&&M.oppositePath?Z=M.oppositePath.length:(0,Dt.__)(("columns"===Q?M.columnExpandedPaths:M.rowExpandedPaths)||[],(Ne,tt)=>{Z=Math.max(Z,tt.length)});re[Z+1]&&re[Z].expanded;)Z+=1;return Z}function Gt(M,Q,re,Z){var be=[];return Object.keys(Q||[]).forEach(Ne=>{if(!Ne||!Ne.startsWith("__")){for(var it,tt=1,Ke=re.length?"".concat(re,".").concat(Ne):Ne,$e=Z[Ke],rt=(0,Ye.Hz)(Ke),gt=Q[Ne];!(0,Ze.O9)(gt)&&M[tt];)gt=rt(M[tt]),tt+=1;!$e&&(0,Ze.O9)(gt)&&($e=(0,Ze.NW)(gt)),it=[{dataField:Ke,dataType:$e,groupName:"date"===$e?Ne:void 0,groupInterval:void 0,displayFolder:re}],"date"===$e?it=it.concat(function Xt(M){return(0,Dt.Tj)(["year","quarter","month"],(Q,re)=>(0,te.X)({},M,{groupInterval:Q,groupIndex:re}))}(it[0])):"object"===$e&&(it=Gt(M,gt,Ke,Z)),be.push.apply(be,it)}}),be}function Tt(M,Q){var re=vt(Q);return Gt(M,M[0],"",re)}function vt(M){var Q={};return(0,Dt.__)(M,(re,Z)=>{Q[Z.dataField]=Q[Z.dataField]||Z.dataType}),Q}var Ht={month:M=>Ae.A.getMonthNames()[M-1],quarter:M=>Ae.A.format(new Date(2e3,3*M-1),"quarter"),dayOfWeek:M=>Ae.A.getDayNames()[M]};function wt(M){if("date"===M.dataType)M.format||_t(M,"format",Ht[M.groupInterval]);else if("number"===M.dataType){var Q=(0,Ze.kf)(M.groupInterval)&&M.groupInterval>0&&M.groupInterval;Q&&!M.customizeText&&_t(M,"customizeText",re=>{var be=Pe.A.format(re.value+Q,M.format);return re.valueText&&be?"".concat(re.valueText," - ").concat(be):""})}}function Ot(M,Q){var re=[];Q=Q||[];for(var Z=0;Z<Q.length;Z+=1)re.push((0,te.X)({},M[Z],{groupIndex:null,groupName:null,filterType:"include",filterValues:[Q[Z]]}));return re}var jt={createDrillDownDataSource(M,Q){var re=this.getDrillDownItems(M,Q);function Z(Ne){return function(tt){var Ke;return Ke=new ut.cY,(0,ut.z7)(re).done($e=>{new Be.A($e)[Ne](tt).done(Ke.resolve).fail(Ke.reject)}).fail(Ke.reject),Ke}}return new Oe.q({load:Z("load"),totalCount:Z("totalCount"),key:this.key()})}};function St(M){return M.charAt(0).toUpperCase()+M.slice(1)}var Et=M=>M.offsetWidth-M.clientWidth,Mt=(0,H.A)(()=>{var M=je.A.getDocument();M.body.insertAdjacentHTML("beforeend",'<div class="'.concat("dx-pivotgrid-scrollbar-measure-element",'"></div>'));var Q=M.body.lastElementChild,re=Et(Q);return Q&&M.body.removeChild(Q),re});const ra={setFieldProperty:_t,sendRequest:function ct(M){return ee.A.sendRequest(M)},foreachTree:Rt,foreachTreeAsync:oe,findField:et,formatValue:Ie,getCompareFunction:xt,createPath:yt,foreachDataLevel:$t,mergeArraysByMaxValue:At,getExpandedLevel:Ut,discoverObjectFields:Tt,getFieldsDataType:vt,setDefaultFieldValueFormatting:wt,getFiltersByPath:Ot,storeDrillDownMixin:jt,capitalizeFirstLetter:St,getScrollbarWidth:Et,calculateScrollbarWidth:Mt}}}]);