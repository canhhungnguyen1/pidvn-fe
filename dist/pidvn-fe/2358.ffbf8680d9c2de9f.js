"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[2358],{82358:(oe,B,p)=>{p.d(B,{$W:()=>M,SE:()=>ie});var X=p(67336),D=p(21626),t=p(54438),y=p(14421),T=p(45817),N=p(74337),E=p(45286),R=p(73586),L=p(49090),x=p(95006),Y=p(15539),U=p(7605),j=p(58728),w=p(71265),z=p(49969),h=p(60177),b=p(50513),O=p(72544),G=p(67064),F=p(35154),k=p(36860),A=p(16389),C=p(15215),f=p(70317),V=p(89450),W=p(28203);const K=["file"],Q=["nz-upload-btn",""],$=["*"],I=i=>({$implicit:i}),H=()=>({opacity:.5,"pointer-events":"none"});function q(i,l){}function Z(i,l){if(1&i&&(t.j41(0,"div",20),t.DNE(1,q,0,0,"ng-template",21),t.k0s()),2&i){const e=t.XpG(2).$implicit,n=t.sdS(5);t.AVh("ant-upload-list-item-file",!e.isUploading),t.R7$(),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(4,I,e))}}function J(i,l){if(1&i&&t.nrm(0,"img",24),2&i){const e=t.XpG(3).$implicit;t.Y8G("src",e.thumbUrl||e.url,t.B4B),t.BMQ("alt",e.name)}}function tt(i,l){if(1&i){const e=t.RV6();t.j41(0,"a",22),t.bIt("click",function(o){t.eBV(e);const s=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.handlePreview(s,o))}),t.DNE(1,J,1,2,"img",23),t.k0s()}if(2&i){t.XpG();const e=t.sdS(5),n=t.XpG().$implicit;t.AVh("ant-upload-list-item-file",!n.isImageUrl),t.Y8G("href",n.url||n.thumbUrl,t.B4B),t.R7$(),t.Y8G("ngIf",n.isImageUrl)("ngIfElse",e)}}function et(i,l){}function nt(i,l){if(1&i&&(t.j41(0,"div",25),t.DNE(1,et,0,0,"ng-template",21),t.k0s()),2&i){const e=t.XpG(2).$implicit,n=t.sdS(5);t.R7$(),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,I,e))}}function it(i,l){}function ot(i,l){if(1&i&&t.DNE(0,it,0,0,"ng-template",21),2&i){const e=t.XpG(2).$implicit,n=t.sdS(5);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,I,e))}}function st(i,l){if(1&i&&(t.qex(0,16),t.DNE(1,Z,2,6,"div",17)(2,tt,2,5,"a",18)(3,nt,2,4,"div",19),t.bVm(),t.DNE(4,ot,1,4,"ng-template",null,6,t.C5r)),2&i){const e=t.XpG().$implicit;t.Y8G("ngSwitch",e.iconType),t.R7$(),t.Y8G("ngSwitchCase","uploading"),t.R7$(),t.Y8G("ngSwitchCase","thumbnail")}}function lt(i,l){1&i&&(t.qex(0),t.nrm(1,"span",29),t.bVm())}function at(i,l){if(1&i&&(t.qex(0),t.DNE(1,lt,2,0,"ng-container",26),t.bVm()),2&i){const e=t.XpG(2).$implicit,n=t.sdS(4);t.R7$(),t.Y8G("ngIf",e.isUploading)("ngIfElse",n)}}function rt(i,l){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG(5);t.R7$(),t.SpI(" ",e.locale.uploading," ")}}function pt(i,l){if(1&i&&(t.qex(0),t.DNE(1,rt,2,1,"ng-container",26),t.bVm()),2&i){const e=t.XpG(2).$implicit,n=t.sdS(4);t.R7$(),t.Y8G("ngIf",e.isUploading)("ngIfElse",n)}}function ct(i,l){if(1&i&&t.nrm(0,"span",30),2&i){const e=t.XpG(2).$implicit;t.Y8G("nzType",e.isUploading?"loading":"paper-clip")}}function _t(i,l){if(1&i&&(t.qex(0)(1,16),t.DNE(2,at,2,2,"ng-container",27)(3,pt,2,2,"ng-container",27)(4,ct,1,1,"span",28),t.bVm()()),2&i){const e=t.XpG(3);t.R7$(),t.Y8G("ngSwitch",e.listType),t.R7$(),t.Y8G("ngSwitchCase","picture"),t.R7$(),t.Y8G("ngSwitchCase","picture-card")}}function dt(i,l){}function mt(i,l){if(1&i&&t.nrm(0,"span",31),2&i){const e=t.XpG().$implicit;t.Y8G("nzType",e.isImageUrl?"picture":"file")}}function ut(i,l){if(1&i&&t.DNE(0,_t,5,3,"ng-container",26)(1,dt,0,0,"ng-template",21,7,t.C5r)(3,mt,1,1,"ng-template",null,8,t.C5r),2&i){const e=l.$implicit,n=t.sdS(2),o=t.XpG(2);t.Y8G("ngIf",!o.iconRender)("ngIfElse",n),t.R7$(),t.Y8G("ngTemplateOutlet",o.iconRender)("ngTemplateOutletContext",t.eq3(4,I,e))}}function ht(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(o){t.eBV(e);const s=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.handleRemove(s,o))}),t.nrm(1,"span",34),t.k0s()}if(2&i){const e=t.XpG(3);t.BMQ("title",e.locale.removeFile)}}function gt(i,l){if(1&i&&t.DNE(0,ht,2,1,"button",32),2&i){const e=t.XpG(2);t.Y8G("ngIf",e.icons.showRemoveIcon)}}function ft(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2).$implicit,s=t.XpG();return t.Njj(s.handleDownload(o))}),t.nrm(1,"span",35),t.k0s()}if(2&i){const e=t.XpG(3);t.BMQ("title",e.locale.downloadFile)}}function zt(i,l){if(1&i&&t.DNE(0,ft,2,1,"button",32),2&i){const e=t.XpG().$implicit;t.Y8G("ngIf",e.showDownload)}}function Ct(i,l){}function vt(i,l){}function Tt(i,l){if(1&i&&(t.j41(0,"span"),t.DNE(1,Ct,0,0,"ng-template",13)(2,vt,0,0,"ng-template",13),t.k0s()),2&i){t.XpG(2);const e=t.sdS(7),n=t.sdS(9),o=t.XpG();t.ZvI("ant-upload-list-item-card-actions ","picture"===o.listType?"picture":"",""),t.R7$(),t.Y8G("ngTemplateOutlet",n),t.R7$(),t.Y8G("ngTemplateOutlet",e)}}function yt(i,l){if(1&i&&t.DNE(0,Tt,3,5,"span",36),2&i){const e=t.XpG(2);t.Y8G("ngIf","picture-card"!==e.listType)}}function Ut(i,l){if(1&i){const e=t.RV6();t.j41(0,"a",39),t.bIt("click",function(o){t.eBV(e);const s=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.handlePreview(s,o))}),t.EFF(1),t.k0s()}if(2&i){const e=t.XpG(2).$implicit;t.Y8G("href",e.url,t.B4B),t.BMQ("title",e.name)("download",e.linkProps&&e.linkProps.download),t.R7$(),t.SpI(" ",e.name," ")}}function Dt(i,l){if(1&i){const e=t.RV6();t.j41(0,"span",40),t.bIt("click",function(o){t.eBV(e);const s=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.handlePreview(s,o))}),t.EFF(1),t.k0s()}if(2&i){const e=t.XpG(2).$implicit;t.BMQ("title",e.name),t.R7$(),t.SpI(" ",e.name," ")}}function Lt(i,l){}function It(i,l){if(1&i&&t.DNE(0,Ut,2,4,"a",37)(1,Dt,2,2,"span",38)(2,Lt,0,0,"ng-template",13),2&i){const e=t.XpG().$implicit,n=t.sdS(11);t.Y8G("ngIf",e.url),t.R7$(),t.Y8G("ngIf",!e.url),t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function Rt(i,l){}function xt(i,l){}function Et(i,l){if(1&i){const e=t.RV6();t.j41(0,"a",44),t.bIt("click",function(o){t.eBV(e);const s=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.handlePreview(s,o))}),t.nrm(1,"span",45),t.k0s()}if(2&i){const e=t.XpG(2).$implicit,n=t.XpG();t.Y8G("href",e.url||e.thumbUrl,t.B4B)("ngStyle",e.url||e.thumbUrl?null:t.lJ4(3,H)),t.BMQ("title",n.locale.previewFile)}}function wt(i,l){}function Nt(i,l){if(1&i&&(t.qex(0),t.DNE(1,wt,0,0,"ng-template",13),t.bVm()),2&i){t.XpG(2);const e=t.sdS(9);t.R7$(),t.Y8G("ngTemplateOutlet",e)}}function bt(i,l){}function Ot(i,l){if(1&i&&(t.j41(0,"span",41),t.DNE(1,Et,2,4,"a",42)(2,Nt,2,1,"ng-container",43)(3,bt,0,0,"ng-template",13),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.sdS(7),o=t.XpG();t.R7$(),t.Y8G("ngIf",o.icons.showPreviewIcon),t.R7$(),t.Y8G("ngIf","done"===e.status),t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function Gt(i,l){if(1&i&&(t.j41(0,"div",46),t.nrm(1,"nz-progress",47),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("nzPercent",e.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function Ft(i,l){if(1&i&&(t.j41(0,"div")(1,"div",10),t.DNE(2,st,6,3,"ng-template",null,0,t.C5r)(4,ut,5,6,"ng-template",null,1,t.C5r)(6,gt,1,1,"ng-template",null,2,t.C5r)(8,zt,1,1,"ng-template",null,3,t.C5r)(10,yt,1,1,"ng-template",null,4,t.C5r)(12,It,3,3,"ng-template",null,5,t.C5r),t.j41(14,"div",11)(15,"span",12),t.DNE(16,Rt,0,0,"ng-template",13)(17,xt,0,0,"ng-template",13),t.k0s()(),t.DNE(18,Ot,4,3,"span",14)(19,Gt,2,3,"div",15),t.k0s()()),2&i){const e=l.$implicit,n=t.sdS(3),o=t.sdS(13),s=t.XpG();t.ZvI("ant-upload-list-",s.listType,"-container"),t.R7$(),t.STu("ant-upload-list-item ant-upload-list-item-",e.status," ant-upload-list-item-list-type-",s.listType,""),t.Y8G("@itemState",void 0)("nzTooltipTitle","error"===e.status?e.message:null),t.BMQ("data-key",e.key),t.R7$(15),t.Y8G("ngTemplateOutlet",n),t.R7$(),t.Y8G("ngTemplateOutlet",o),t.R7$(),t.Y8G("ngIf","picture-card"===s.listType&&!e.isUploading),t.R7$(),t.Y8G("ngIf",e.isUploading)}}const $t=["uploadComp"],St=["listComp"],Pt=()=>[];function Mt(i,l){if(1&i&&t.nrm(0,"nz-upload-list",10,5),2&i){const e=t.XpG(2);t.xc7("display",e.nzShowUploadList?"":"none"),t.Y8G("locale",e.locale)("listType",e.nzListType)("items",e.nzFileList||t.lJ4(13,Pt))("icons",e.nzShowUploadList)("iconRender",e.nzIconRender)("previewFile",e.nzPreviewFile)("previewIsImage",e.nzPreviewIsImage)("onPreview",e.nzPreview)("onRemove",e.onRemove)("onDownload",e.nzDownload)("dir",e.dir)}}function Bt(i,l){1&i&&t.eu8(0)}function Xt(i,l){if(1&i&&(t.qex(0),t.DNE(1,Bt,1,0,"ng-container",11),t.bVm()),2&i){const e=t.XpG(2);t.R7$(),t.Y8G("ngTemplateOutlet",e.nzFileListRender)("ngTemplateOutletContext",t.eq3(2,I,e.nzFileList))}}function Yt(i,l){if(1&i&&t.DNE(0,Mt,2,14,"nz-upload-list",8)(1,Xt,2,4,"ng-container",9),2&i){const e=t.XpG();t.Y8G("ngIf",e.locale&&!e.nzFileListRender),t.R7$(),t.Y8G("ngIf",e.nzFileListRender)}}function jt(i,l){1&i&&t.SdG(0)}function kt(i,l){}function At(i,l){if(1&i&&(t.j41(0,"div",12)(1,"div",13,6),t.DNE(3,kt,0,0,"ng-template",14),t.k0s()()),2&i){const e=t.XpG(),n=t.sdS(3);t.xc7("display",e.nzShowButton?"":"none"),t.Y8G("ngClass",e.classList),t.R7$(),t.Y8G("options",e._btnOptions),t.R7$(2),t.Y8G("ngTemplateOutlet",n)}}function Vt(i,l){}function Wt(i,l){}function Kt(i,l){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"div",15),t.bIt("drop",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.fileDrop(o))})("dragover",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.fileDrop(o))})("dragleave",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.fileDrop(o))}),t.j41(2,"div",16,6)(4,"div",17),t.DNE(5,Vt,0,0,"ng-template",14),t.k0s()()(),t.DNE(6,Wt,0,0,"ng-template",14),t.bVm()}if(2&i){const e=t.XpG(),n=t.sdS(1),o=t.sdS(3);t.R7$(),t.Y8G("ngClass",e.classList),t.R7$(),t.Y8G("options",e._btnOptions),t.R7$(3),t.Y8G("ngTemplateOutlet",o),t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function Qt(i,l){}function Ht(i,l){}function qt(i,l){if(1&i&&(t.qex(0),t.DNE(1,Qt,0,0,"ng-template",14)(2,Ht,0,0,"ng-template",14),t.bVm()),2&i){t.XpG(2);const e=t.sdS(1),n=t.sdS(5);t.R7$(),t.Y8G("ngTemplateOutlet",e),t.R7$(),t.Y8G("ngTemplateOutlet",n)}}function Zt(i,l){if(1&i&&t.DNE(0,qt,3,2,"ng-container",7),2&i){const e=t.XpG(),n=t.sdS(10);t.Y8G("ngIf","picture-card"===e.nzListType)("ngIfElse",n)}}function Jt(i,l){}function te(i,l){}function ee(i,l){if(1&i&&t.DNE(0,Jt,0,0,"ng-template",14)(1,te,0,0,"ng-template",14),2&i){t.XpG();const e=t.sdS(1),n=t.sdS(5);t.Y8G("ngTemplateOutlet",n),t.R7$(),t.Y8G("ngTemplateOutlet",e)}}let ne=(()=>{class i{onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(e){if(this.options.disabled||"dragover"===e.type)e.preventDefault();else{if(this.options.directory)this.traverseFileTree(e.dataTransfer.items);else{const n=Array.prototype.slice.call(e.dataTransfer.files).filter(o=>this.attrAccept(o,this.options.accept));n.length&&this.uploadFiles(n)}e.preventDefault()}}onChange(e){if(this.options.disabled)return;const n=e.target;this.uploadFiles(n.files),n.value=""}traverseFileTree(e){const n=(o,s)=>{o.isFile?o.file(a=>{this.attrAccept(a,this.options.accept)&&this.uploadFiles([a])}):o.isDirectory&&o.createReader().readEntries(r=>{for(const _ of r)n(_,`${s}${o.name}/`)})};for(const o of e)n(o.webkitGetAsEntry(),"")}attrAccept(e,n){if(e&&n){const o=Array.isArray(n)?n:n.split(","),s=`${e.name}`,a=`${e.type}`,r=a.replace(/\/.*$/,"");return o.some(_=>{const d=_.trim();return"."===d.charAt(0)?-1!==s.toLowerCase().indexOf(d.toLowerCase(),s.toLowerCase().length-d.toLowerCase().length):/\/\*$/.test(d)?r===d.replace(/\/.*$/,""):a===d})}return!0}attachUid(e){return e.uid||(e.uid=Math.random().toString(36).substring(2)),e}uploadFiles(e){let n=(0,y.of)(Array.prototype.slice.call(e));this.options.filters&&this.options.filters.forEach(o=>{n=n.pipe((0,L.n)(s=>{const a=o.fn(s);return a instanceof T.c?a:(0,y.of)(a)}))}),n.subscribe(o=>{o.forEach(s=>{this.attachUid(s),this.upload(s,o)})},o=>{(0,w.R8)("Unhandled upload filter error",o)})}upload(e,n){if(!this.options.beforeUpload)return this.post(e);const o=this.options.beforeUpload(e,n);if(o instanceof T.c)o.subscribe(s=>{const a=Object.prototype.toString.call(s);"[object File]"===a||"[object Blob]"===a?(this.attachUid(s),this.post(s)):"boolean"==typeof s&&!1!==s&&this.post(e)},s=>{(0,w.R8)("Unhandled upload beforeUpload error",s)});else if(!1!==o)return this.post(e)}post(e){if(this.destroy)return;let o,n=(0,y.of)(e);const s=this.options,{uid:a}=e,{action:r,data:_,headers:d,transformFile:m}=s,g={action:"string"==typeof r?r:"",name:s.name,headers:d,file:e,postFile:e,data:_,withCredentials:s.withCredentials,onProgress:s.onProgress?c=>{s.onProgress(c,e)}:void 0,onSuccess:(c,u)=>{this.clean(a),s.onSuccess(c,e,u)},onError:c=>{this.clean(a),s.onError(c,e)}};if("function"==typeof r){const c=r(e);c instanceof T.c?n=n.pipe((0,L.n)(()=>c),(0,x.T)(u=>(g.action=u,e))):g.action=c}if("function"==typeof m){const c=m(e);n=n.pipe((0,L.n)(()=>c instanceof T.c?c:(0,y.of)(c)),(0,Y.M)(u=>o=u))}if("function"==typeof _){const c=_(e);c instanceof T.c?n=n.pipe((0,L.n)(()=>c),(0,x.T)(u=>(g.data=u,o??e))):g.data=c}if("function"==typeof d){const c=d(e);c instanceof T.c?n=n.pipe((0,L.n)(()=>c),(0,x.T)(u=>(g.headers=u,o??e))):g.headers=c}n.subscribe(c=>{g.postFile=c;const u=(s.customRequest||this.xhr).call(this,g);u instanceof N.y||(0,w.R8)("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[a]=u,s.onStart(e)})}xhr(e){const n=new FormData;e.data&&Object.keys(e.data).map(s=>{n.append(s,e.data[s])}),n.append(e.name,e.postFile),e.headers||(e.headers={}),null!==e.headers["X-Requested-With"]?e.headers["X-Requested-With"]="XMLHttpRequest":delete e.headers["X-Requested-With"];const o=new D.Kd("POST",e.action,n,{reportProgress:!0,withCredentials:e.withCredentials,headers:new D.Lr(e.headers)});return this.http.request(o).subscribe(s=>{s.type===D.hv.UploadProgress?(s.total>0&&(s.percent=s.loaded/s.total*100),e.onProgress(s,e.file)):s instanceof D.cS&&e.onSuccess(s.body,e.file,s)},s=>{this.abort(e.file),e.onError(s,e.file)})}clean(e){const n=this.reqs[e];n instanceof N.y&&n.unsubscribe(),delete this.reqs[e]}abort(e){e?this.clean(e&&e.uid):Object.keys(this.reqs).forEach(n=>this.clean(n))}constructor(e,n,o){if(this.ngZone=e,this.http=n,this.elementRef=o,this.reqs={},this.destroy=!1,this.destroy$=new E.B7,!n)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,R.R)(this.elementRef.nativeElement,"click").pipe((0,U.Q)(this.destroy$)).subscribe(()=>this.onClick()),(0,R.R)(this.elementRef.nativeElement,"keydown").pipe((0,U.Q)(this.destroy$)).subscribe(e=>{this.options.disabled||("Enter"===e.key||e.keyCode===X.Fm)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(t.SKi),t.rXU(D.Qq,8),t.rXU(t.aKT))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["","nz-upload-btn",""]],viewQuery:function(n,o){if(1&n&&t.GBs(K,7),2&n){let s;t.mGM(s=t.lsd())&&(o.file=s.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(n,o){1&n&&t.bIt("drop",function(a){return o.onFileDrop(a)})("dragover",function(a){return o.onFileDrop(a)}),2&n&&(t.BMQ("tabindex","0")("role","button"),t.AVh("ant-upload-disabled",o.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],standalone:!0,features:[t.aNF],attrs:Q,ngContentSelectors:$,decls:3,vars:6,consts:[["file",""],["type","file",3,"change","multiple"]],template:function(n,o){if(1&n){const s=t.RV6();t.NAR(),t.j41(0,"input",1,0),t.bIt("change",function(r){return t.eBV(s),t.Njj(o.onChange(r))}),t.k0s(),t.SdG(2)}2&n&&(t.xc7("display","none"),t.Y8G("multiple",o.options.multiple),t.BMQ("accept",o.options.accept)("directory",o.options.directory?"directory":null)("webkitdirectory",o.options.directory?"webkitdirectory":null))},encapsulation:2})}return i})();const S=i=>!!i&&0===i.indexOf("image/"),v=200;let P=(()=>{class i{get showPic(){return"picture"===this.listType||"picture-card"===this.listType}set items(e){this.list=e}genErr(e){return e.response&&"string"==typeof e.response?e.response:e.error&&e.error.statusText||this.locale.uploadError}extname(e){const n=e.split("/"),s=n[n.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(s)||[""])[0]}isImageUrl(e){if(S(e.type))return!0;const n=e.thumbUrl||e.url||"";if(!n)return!1;const o=this.extname(n);return!(!/^data:image\//.test(n)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(o))||!/^data:/.test(n)&&!o}getIconType(e){return this.showPic?e.isUploading||!e.thumbUrl&&!e.url?"uploading":"thumbnail":""}previewImage(e){if(!S(e.type)||!this.platform.isBrowser)return(0,y.of)("");const n=this.doc.createElement("canvas");n.width=v,n.height=v,n.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",this.doc.body.appendChild(n);const o=n.getContext("2d"),s=new Image,a=URL.createObjectURL(e);return s.src=a,(0,R.R)(s,"load").pipe((0,x.T)(()=>{const{width:r,height:_}=s;let d=v,m=v,g=0,c=0;r<_?(m=_*(v/r),c=-(m-d)/2):(d=r*(v/_),g=-(d-m)/2);try{o.drawImage(s,g,c,d,m)}catch{}const u=n.toDataURL();return this.doc.body.removeChild(n),URL.revokeObjectURL(a),u}))}genThumb(){if(!this.platform.isBrowser)return;const e=window;!this.showPic||typeof document>"u"||typeof e>"u"||!e.FileReader||!e.File||this.list.filter(n=>n.originFileObj instanceof File&&void 0===n.thumbUrl).forEach(n=>{n.thumbUrl="";const o=(this.previewFile?this.previewFile(n):this.previewImage(n.originFileObj)).pipe((0,U.Q)(this.destroy$));this.ngZone.runOutsideAngular(()=>{o.subscribe(s=>{this.ngZone.run(()=>{n.thumbUrl=s,this.detectChanges()})})})})}showDownload(e){return!(!this.icons.showDownloadIcon||"done"!==e.status)}fixData(){this.list.forEach(e=>{e.isUploading="uploading"===e.status,e.message=this.genErr(e),e.linkProps="string"==typeof e.linkProps?JSON.parse(e.linkProps):e.linkProps,e.isImageUrl=this.previewIsImage?this.previewIsImage(e):this.isImageUrl(e),e.iconType=this.getIconType(e),e.showDownload=this.showDownload(e)})}handlePreview(e,n){if(this.onPreview)return n.preventDefault(),this.onPreview(e)}handleRemove(e,n){n.preventDefault(),this.onRemove&&this.onRemove(e)}handleDownload(e){"function"==typeof this.onDownload?this.onDownload(e):e.url&&window.open(e.url)}constructor(e,n,o,s){this.cdr=e,this.doc=n,this.ngZone=o,this.platform=s,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.destroy$=new E.B7}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(t.gRc),t.rXU(h.qQ),t.rXU(t.SKi),t.rXU(k.OD))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(n,o){2&n&&t.AVh("ant-upload-list-rtl","rtl"===o.dir)("ant-upload-list-text","text"===o.listType)("ant-upload-list-picture","picture"===o.listType)("ant-upload-list-picture-card","picture-card"===o.listType)},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],standalone:!0,features:[t.OA$,t.aNF],decls:1,vars:1,consts:[["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],["noImageThumbTpl",""],["customIconRender",""],["iconNodeFileIcon",""],[3,"class",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],["class","ant-upload-list-item-actions",4,"ngIf"],["class","ant-upload-list-item-progress",4,"ngIf"],[3,"ngSwitch"],["class","ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file",4,"ngSwitchCase"],["class","ant-upload-list-item-thumbnail","target","_blank","rel","noopener noreferrer",3,"ant-upload-list-item-file","href","click",4,"ngSwitchCase"],["class","ant-upload-text-icon",4,"ngSwitchDefault"],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"click","href"],["class","ant-upload-list-item-image",3,"src",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],[4,"ngIf","ngIfElse"],[4,"ngSwitchCase"],["nz-icon","",3,"nzType",4,"ngSwitchDefault"],["nz-icon","","nzType","loading"],["nz-icon","",3,"nzType"],["nz-icon","","nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small","class","ant-upload-list-item-card-actions-btn",3,"click",4,"ngIf"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],[3,"class",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","ant-upload-list-item-name",3,"href","click",4,"ngIf"],["class","ant-upload-list-item-name",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"click","href"],[1,"ant-upload-list-item-name",3,"click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click",4,"ngIf"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"click","href","ngStyle"],["nz-icon","","nzType","eye"],[1,"ant-upload-list-item-progress"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(n,o){1&n&&t.DNE(0,Ft,20,14,"div",9),2&n&&t.Y8G("ngForOf",o.list)},dependencies:[h.Sq,F.Qt,F.LH,h.ux,h.T3,h.bT,h.fG,h.e1,O.Y3,O.Dn,b.Zw,b.aO,A.c,h.B3,G.m,G.V],encapsulation:2,data:{animation:[(0,z.hZ)("itemState",[(0,z.kY)(":enter",[(0,z.iF)({height:"0",width:"0",opacity:0}),(0,z.i0)(150,(0,z.iF)({height:"*",width:"*",opacity:1}))]),(0,z.kY)(":leave",[(0,z.i0)(150,(0,z.iF)({height:"0",width:"0",opacity:0}))])])]},changeDetection:0})}return i})(),M=(()=>{class i{set nzShowUploadList(e){this._showUploadList="boolean"==typeof e?(0,f.G4)(e):e}get nzShowUploadList(){return this._showUploadList}zipOptions(){"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});const e=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===e.findIndex(n=>"limit"===n.name)&&e.push({name:"limit",fn:n=>n.slice(-this.nzLimit)}),this.nzSize>0&&-1===e.findIndex(n=>"size"===n.name)&&e.push({name:"size",fn:n=>n.filter(o=>o.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&-1===e.findIndex(n=>"type"===n.name)){const n=this.nzFileType.split(",");e.push({name:"type",fn:o=>o.filter(s=>~n.indexOf(s.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:e,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}constructor(e,n,o,s,a){this.ngZone=e,this.document=n,this.cdr=o,this.i18n=s,this.directionality=a,this.destroy$=new E.B7,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new t.bkB,this.nzFileListChange=new t.bkB,this.onStart=r=>{this.nzFileList||(this.nzFileList=[]);const _=this.fileToObject(r);_.status="uploading",this.nzFileList=this.nzFileList.concat(_),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:_,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(r,_)=>{const m=this.getFileItem(_,this.nzFileList);m.percent=r.percent,this.nzChange.emit({event:r,file:{...m},fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(r,_)=>{const d=this.nzFileList,m=this.getFileItem(_,d);m.status="done",m.response=r,this.nzChange.emit({file:{...m},fileList:d,type:"success"}),this.detectChangesList()},this.onError=(r,_)=>{const d=this.nzFileList,m=this.getFileItem(_,d);m.error=r,m.status="error",this.nzChange.emit({file:{...m},fileList:d,type:"error"}),this.detectChangesList()},this.onRemove=r=>{this.uploadComp.abort(r),r.status="removed";const _="function"==typeof this.nzRemove?this.nzRemove(r):null==this.nzRemove||this.nzRemove;(_ instanceof T.c?_:(0,y.of)(_)).pipe((0,j.p)(d=>d)).subscribe(()=>{this.nzFileList=this.removeFileItem(r,this.nzFileList),this.nzChange.emit({file:r,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}fileToObject(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e}}getFileItem(e,n){return n.filter(o=>o.uid===e.uid)[0]}removeFileItem(e,n){return n.filter(o=>o.uid!==e.uid)}fileDrop(e){e.type!==this.dragState&&(this.dragState=e.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}setClassMap(){let e=[];"drag"===this.nzType?(this.nzFileList.some(n=>"uploading"===n.status)&&e.push(`${this.prefixCls}-drag-uploading`),"dragover"===this.dragState&&e.push(`${this.prefixCls}-drag-hover`)):e=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...e,this.nzDisabled&&`${this.prefixCls}-disabled`||"","rtl"===this.dir&&`${this.prefixCls}-rtl`||""].filter(n=>!!n),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,U.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe((0,U.Q)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>(0,R.R)(this.document.body,"drop").pipe((0,U.Q)(this.destroy$)).subscribe(e=>{e.preventDefault(),e.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(t.SKi),t.rXU(h.qQ),t.rXU(t.gRc),t.rXU(V.Og),t.rXU(W.dS,8))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["nz-upload"]],viewQuery:function(n,o){if(1&n&&(t.GBs($t,5),t.GBs(St,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.uploadComp=s.first),t.mGM(s=t.lsd())&&(o.listComp=s.first)}},hostVars:2,hostBindings:function(n,o){2&n&&t.AVh("ant-upload-picture-card-wrapper","picture-card"===o.nzListType)},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:$,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],["select",""],["pic",""],["listComp",""],["uploadComp",""],[4,"ngIf","ngIfElse"],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir",4,"ngIf"],[4,"ngIf"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],[3,"ngTemplateOutlet"],[3,"drop","dragover","dragleave","ngClass"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(n,o){if(1&n&&(t.NAR(),t.DNE(0,Yt,2,2,"ng-template",null,0,t.C5r)(2,jt,1,0,"ng-template",null,1,t.C5r)(4,At,4,5,"ng-template",null,2,t.C5r)(6,Kt,7,4,"ng-container",7)(7,Zt,1,2,"ng-template",null,3,t.C5r)(9,ee,2,2,"ng-template",null,4,t.C5r)),2&n){const s=t.sdS(8);t.R7$(6),t.Y8G("ngIf","drag"===o.nzType)("ngIfElse",s)}},dependencies:[P,h.bT,h.T3,h.YU,ne],encapsulation:2,changeDetection:0})}return(0,C.Cg)([(0,f.YI)()],i.prototype,"nzLimit",void 0),(0,C.Cg)([(0,f.YI)()],i.prototype,"nzSize",void 0),(0,C.Cg)([(0,f.H3)()],i.prototype,"nzDirectory",void 0),(0,C.Cg)([(0,f.H3)()],i.prototype,"nzOpenFileDialogOnClick",void 0),(0,C.Cg)([(0,f.H3)()],i.prototype,"nzDisabled",void 0),(0,C.Cg)([(0,f.H3)()],i.prototype,"nzMultiple",void 0),(0,C.Cg)([(0,f.H3)()],i.prototype,"nzShowButton",void 0),(0,C.Cg)([(0,f.H3)()],i.prototype,"nzWithCredentials",void 0),i})(),ie=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[M,P]})}return i})()}}]);