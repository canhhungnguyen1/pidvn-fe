"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[3971],{33971:(V,b,u)=>{u.r(b),u.d(b,{RelayInventoryModule:()=>zt});var z=u(60177),r=u(33514),E=u(38296),R=u(31958),h=u(23359),v=u(46661),t=u(54438),F=u(45794),j=u(45312),w=u(21626);let C=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl=j.c.baseUrl}getInventoryRequests(){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/Requests`)}getInventoryRequest(e){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/Request/${e}`)}scanMaterial(e){return this.httpClient.post(`${this.baseUrl}/Relay/Inventory/ScanMaterial`,e)}getRelayInventories(e){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/RelayInventories?reqNo=${e}`)}createInventoryRequest(e){return this.httpClient.post(`${this.baseUrl}/Relay/Inventory/Request`,e)}saveRelayInventory(e){return this.httpClient.post(`${this.baseUrl}/Relay/Inventory/RelayInventory`,e)}getBalances(e){return this.httpClient.get(`${this.baseUrl}/Relay/Inventory/Balances?reqId=${e}`)}static#t=this.\u0275fac=function(a){return new(a||n)(t.KVO(w.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p=u(31837),S=u(23617),x=u(66646),k=u(9541);const T=()=>[10,25,50,100];function D(n,m){1&n&&(t.j41(0,"nz-spin",17),t.nrm(1,"nz-alert",18),t.k0s())}function N(n,m){if(1&n){const e=t.RV6();t.j41(0,"dx-data-grid",5),t.bIt("onExporting",function(o){t.eBV(e);const c=t.XpG();return t.Njj(c.onExportBalance(o))}),t.nrm(1,"dxo-export",6)(2,"dxo-paging",7)(3,"dxo-filter-row",8)(4,"dxi-column",19)(5,"dxi-column",10)(6,"dxi-column",20)(7,"dxi-column",21)(8,"dxi-column",22)(9,"dxi-column",12)(10,"dxi-column",23)(11,"dxo-pager",16),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("dataSource",e.balances)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(),t.Y8G("pageSize",15),t.R7$(),t.Y8G("visible",!0),t.R7$(8),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(12,T))}}let B=(()=>{class n{constructor(e,a,o){this.toastr=e,this.reIvtSvc=a,this.activatedRoute=o,this.isShowSpin=!0}ngOnInit(){this.getInventoryRequest(),this.getBalances()}getBalances(){let e=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.reIvtSvc.getBalances(e).subscribe(a=>{this.isShowSpin=!1,this.balances=a})}getInventoryRequest(){let e=Number(this.activatedRoute.snapshot.paramMap.get("id"));this.reIvtSvc.getInventoryRequest(e).subscribe(a=>{this.ivtReq=a,this.getInventories()})}getInventories(){this.reIvtSvc.getRelayInventories(this.ivtReq.reqNo).subscribe(e=>{this.inventories=e})}onExportBalance(e){}onExportInventory(e){}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(F.tw),t.rXU(C),t.rXU(v.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-balance"]],decls:27,vars:27,consts:[[2,"margin-left","-20px"],["nzTitle","Ch\xeanh l\u1ec7ch L\xfd thuy\u1ebft v\xe0 Th\u1ef1c t\u1ebf"],["nzTip","H\u1ec7 th\u1ed1ng \u0111ang t\xednh to\xe1n ch\xeanh l\u1ec7ch...",4,"ngIf"],["keyExpr","id",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled","onExporting",4,"ngIf"],["nzTitle","D\u1eef li\u1ec7u ki\u1ec3m k\xea th\u1ef1c t\u1ebf"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],[3,"pageSize"],[3,"visible"],["dataField","partNo","caption","Part No",3,"groupIndex"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","Line"],["column","partNo","summaryType","count","displayFormat","{0} parts"],["column","qty","summaryType","sum",3,"showInGroupFooter","alignByColumn"],["summaryItem","count"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTip","H\u1ec7 th\u1ed1ng \u0111ang t\xednh to\xe1n ch\xeanh l\u1ec7ch..."],["nzType","info","nzMessage","T\xednh to\xe1n ch\xeanh l\u1ec7ch","nzDescription","H\u1ec7 th\u1ed1ng \u0111ang x\u1eed l\xfd t\xednh to\xe1n d\u1eef li\u1ec7u ch\xeanh l\u1ec7ch"],["dataField","partNo","caption","Part No"],["dataField","systemStock","caption","Stock (H\u1ec7 th\u1ed1ng)","dataType","number","format","#,##0"],["dataField","actualStock","caption","Stock (Th\u1ef1c t\u1ebf)","dataType","number","format","#,##0"],["dataField","balance","caption","Ch\xeanh l\u1ec7ch","dataType","number","format","#,##0"],["dataField","remark","caption","Ghi ch\xfa"]],template:function(a,o){1&a&&(t.j41(0,"ul",0)(1,"li"),t.EFF(2),t.k0s(),t.j41(3,"li"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"li"),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"nz-tabset")(10,"nz-tab",1),t.DNE(11,D,2,0,"nz-spin",2)(12,N,12,13,"dx-data-grid",3),t.k0s(),t.j41(13,"nz-tab",4)(14,"dx-data-grid",5),t.bIt("onExporting",function(_){return o.onExportInventory(_)}),t.nrm(15,"dxo-export",6)(16,"dxo-paging",7)(17,"dxo-filter-row",8)(18,"dxi-column",9)(19,"dxi-column",10)(20,"dxi-column",11)(21,"dxi-column",12),t.j41(22,"dxo-summary"),t.nrm(23,"dxi-group-item",13)(24,"dxi-group-item",14),t.k0s(),t.nrm(25,"dxi-sort-by-group-summary-info",15)(26,"dxo-pager",16),t.k0s()()()),2&a&&(t.R7$(2),t.SpI("Request No: ",null==o.ivtReq?null:o.ivtReq.reqNo,""),t.R7$(2),t.SpI("Cut Off: ",t.i5U(5,20,null==o.ivtReq?null:o.ivtReq.cutOff,"yyyy-MM-dd"),""),t.R7$(3),t.SpI("Inventory Date: ",t.i5U(8,23,null==o.ivtReq?null:o.ivtReq.inventoryDate,"yyyy-MM-dd"),""),t.R7$(4),t.Y8G("ngIf",o.isShowSpin),t.R7$(),t.Y8G("ngIf",!o.isShowSpin),t.R7$(2),t.Y8G("dataSource",o.inventories)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(),t.Y8G("pageSize",15),t.R7$(),t.Y8G("visible",!0),t.R7$(),t.Y8G("groupIndex",0),t.R7$(6),t.Y8G("showInGroupFooter",!1)("alignByColumn",!0),t.R7$(2),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(26,T)))},dependencies:[z.bT,E.s,p.nj_,p.ZJU,p.FTx,p.sVQ,p.PVd,p.x$q,p.XvM,p.ryC,S.Y,x.a,k.JZ,k.rE,z.vh]})}return n})();var f=u(89417),M=u(27380),I=u(97529),s=u(21011),g=u(43053),i=u(50513),l=u(16389),d=u(25930);const $=["infoIpt"],q=["qrCodeIpt"],A=()=>[""],P=n=>["/admin/relay/relay-inventory/balance",n],L=()=>[10,25,50,100];function Y(n,m){if(1&n){const e=t.RV6();t.j41(0,"div",31),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openDetailModal(o.data))}),t.j41(1,"a"),t.EFF(2,"S\u1eeda"),t.k0s()()}}function U(n,m){if(1&n&&t.nrm(0,"nz-alert",36),2&n){const e=t.XpG(2);t.Y8G("nzMessage",e.lotErrMsg)}}function X(n,m){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td",31),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.openDetailModal(o))}),t.j41(11,"a"),t.EFF(12,"S\u1eeda"),t.k0s()()()}if(2&n){const e=m.$implicit;t.R7$(2),t.JRh(e.partNo),t.R7$(2),t.JRh(e.lotNo),t.R7$(2),t.JRh(t.i5U(7,4,e.qty,"1.0-3")),t.R7$(3),t.JRh(e.line)}}function J(n,m){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",5)(2,"input",32,2),t.bIt("keydown.enter",function(o){t.eBV(e);const c=t.XpG();return t.Njj(c.scanMaterial(o))})("click",function(){t.eBV(e);const o=t.sdS(3);return t.Njj(o.select())}),t.k0s(),t.DNE(4,U,1,1,"nz-alert",33),t.j41(5,"nz-table",34,3)(7,"thead")(8,"tr")(9,"th"),t.EFF(10,"Part No"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Lot No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Qty"),t.k0s(),t.j41(15,"th"),t.EFF(16,"V\u1ecb tr\xed"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Action"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,X,13,7,"tr",35),t.k0s()()(),t.bVm()}if(2&n){const e=t.sdS(6),a=t.XpG();t.R7$(),t.Y8G("nzGutter",24),t.R7$(3),t.Y8G("ngIf",a.lotErrMsg),t.R7$(),t.Y8G("nzData",a.materialScanned),t.R7$(15),t.Y8G("ngForOf",e.data)}}function W(n,m){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",37),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeScanMaterialModal())}),t.EFF(2," OK "),t.k0s()()}}function H(n,m){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"nz-table",38,4)(3,"tbody")(4,"tr")(5,"td")(6,"label"),t.EFF(7,"Part No"),t.k0s()(),t.j41(8,"td"),t.EFF(9),t.k0s()(),t.j41(10,"tr")(11,"td")(12,"label"),t.EFF(13,"Lot No"),t.k0s()(),t.j41(14,"td"),t.EFF(15),t.k0s()(),t.j41(16,"tr")(17,"td")(18,"label"),t.EFF(19,"Qty"),t.k0s()(),t.j41(20,"td")(21,"input",39),t.mxI("ngModelChange",function(o){t.eBV(e);const c=t.XpG();return t.DH7(c.lotSelected.qty,o)||(c.lotSelected.qty=o),t.Njj(o)}),t.k0s()()(),t.j41(22,"tr")(23,"td")(24,"label"),t.EFF(25,"Line"),t.k0s()(),t.j41(26,"td"),t.EFF(27),t.k0s()()()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("nzData",t.lJ4(5,A)),t.R7$(8),t.JRh(e.lotSelected.partNo),t.R7$(6),t.JRh(e.lotSelected.lotNo),t.R7$(6),t.R50("ngModel",e.lotSelected.qty),t.R7$(6),t.JRh(e.lotSelected.line)}}function K(n,m){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",40),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelEdit())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",37),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveChange())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}let Q=(()=>{class n{constructor(e,a,o){this.toastr=e,this.reIvtSvc=a,this.route=o,this.infoScan={username:null,position:null},this.lotErrMsg=null,this.isOpenScanMaterialModal=!1,this.isOpenLotDetailModal=!1,this.materialScanned=new Array}ngOnInit(){this.getInventoryRequest()}ngAfterViewInit(){setTimeout(()=>{this.infoIpt.nativeElement.focus()},0)}scanInfo(e){let a=e.target.value;if(this.infoIpt.nativeElement.select(),a.includes("*")&&a.includes(";")&&a.includes("-")){if(!this.infoScan.username||!this.infoScan.position)return void this.toastr.warning("C\u1ea7n scan User v\xe0 V\u1ecb tr\xed ki\u1ec3m k\xea !","Warning");if(this.infoScan.username&&this.infoScan.position)return}/^\d+$/.test(a)?this.infoScan.username=a:this.infoScan.position=a,this.infoScan.username&&this.infoScan.position&&this.openScanQRCodeModal()}getInventoryRequest(){let e=Number(this.route.snapshot.paramMap.get("id"));this.reIvtSvc.getInventoryRequest(e).subscribe(a=>{this.reqNo=a.reqNo,this.getRelayInventories(this.reqNo)})}getRelayInventories(e){this.reIvtSvc.getRelayInventories(e).subscribe(a=>{this.relayInventories=a})}openScanQRCodeModal(){this.isOpenScanMaterialModal=!0,setTimeout(()=>{this.qrCodeIpt.nativeElement.select()},500)}scanMaterial(e){if(!e.target.value)return void this.toastr.warning("C\u1ea7n scan tem NVL","Warning");this.qrCodeIpt.nativeElement.select();let a=e.target.value.split(";"),o={reqNo:this.reqNo,date:new Date,recordType:"IVT",partNo:a[0],lotNo:a[3],qty:Number(a[2]),createdBy:this.infoScan.username,line:this.infoScan.position};this.reIvtSvc.scanMaterial(o).subscribe(c=>{"OK"==c.status?(this.lotErrMsg=null,this.materialScanned.push(c.data),this.materialScanned=[...this.materialScanned.reverse()]):"ERROR"==c.status&&(this.lotErrMsg=c.message)})}closeScanMaterialModal(){this.lotErrMsg=null,this.isOpenScanMaterialModal=!1,this.infoScan.username=null,this.infoScan.position=null,this.materialScanned=new Array,this.reIvtSvc.getRelayInventories(this.reqNo).subscribe(e=>{this.relayInventories=e})}openDetailModal(e){this.isOpenLotDetailModal=!0,this.lotSelected=e}saveChange(){console.log(this.lotSelected),this.reIvtSvc.saveRelayInventory(this.lotSelected).subscribe(e=>{this.isOpenLotDetailModal=!1})}cancelEdit(){this.isOpenLotDetailModal=!1}onExportClient(e){}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(F.tw),t.rXU(C),t.rXU(v.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-execute"]],viewQuery:function(a,o){if(1&a&&(t.GBs($,5),t.GBs(q,5)),2&a){let c;t.mGM(c=t.lsd())&&(o.infoIpt=c.first),t.mGM(c=t.lsd())&&(o.qrCodeIpt=c.first)}},decls:54,vars:27,consts:[["infoTbl",""],["infoIpt",""],["qrCodeIpt",""],["scannedTbl",""],["detailTbl",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["width","33%"],["colspan","3"],["id","infoIpt","nz-input","","placeholder","Scan ng\u01b0\u1eddi ki\u1ec3m k\xea v\xe0 v\u1ecb tr\xed ki\u1ec3m k\xea","autocomplete","off",2,"font-weight","bold",3,"keydown.enter","click"],["nz-row","","nzJustify","start","nzAlign","middle",2,"margin-top","-25px",3,"nzGutter"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],["location","before"],[1,"ivt-data"],[1,"balance",3,"routerLink"],["name","exportButton"],[3,"pageSize"],[3,"visible"],["dataField","partNo","caption","Part No"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","V\u1ecb tr\xed"],["caption","Action","cellTemplate","cellTemplate","alignment","center"],["style","text-align: center",3,"click",4,"dxTemplate","dxTemplateOf"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Scan ki\u1ec3m k\xea NVL","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Th\xf4ng tin NVL","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[2,"text-align","center",3,"click"],["nz-input","","placeholder","Scan m\xe3 QR nguy\xean v\u1eadt li\u1ec7u",2,"font-weight","bold",3,"keydown.enter","click"],["id","error-msg","nzBanner","","nzShowIcon","","style","margin-top: 10px","nzType","error",3,"nzMessage",4,"ngIf"],["id","scannedTbl","nzBordered","","nzSize","small","nzFrontPagination","true",2,"margin-top","15px",3,"nzData"],[4,"ngFor","ngForOf"],["id","error-msg","nzBanner","","nzShowIcon","","nzType","error",2,"margin-top","10px",3,"nzMessage"],["nz-button","","nzType","primary",3,"click"],["id","detailTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["nz-input","","type","number",3,"ngModelChange","ngModel"],["nz-button","","nzType","default",3,"click"]],template:function(a,o){if(1&a){const c=t.RV6();t.j41(0,"div",5)(1,"div",6)(2,"nz-table",7,0)(4,"thead")(5,"tr")(6,"th",8)(7,"label"),t.EFF(8,"Request: "),t.k0s(),t.j41(9,"span"),t.EFF(10),t.k0s()(),t.j41(11,"th",8)(12,"label"),t.EFF(13,"User: "),t.k0s(),t.j41(14,"span"),t.EFF(15),t.k0s()(),t.j41(16,"th",8)(17,"label"),t.EFF(18,"V\u1ecb tr\xed: "),t.k0s(),t.j41(19,"span"),t.EFF(20),t.k0s()()()(),t.j41(21,"tbody")(22,"tr")(23,"td",9)(24,"input",10,1),t.bIt("keydown.enter",function(y){return t.eBV(c),t.Njj(o.scanInfo(y))})("click",function(){t.eBV(c);const y=t.sdS(25);return t.Njj(y.select())}),t.k0s()()()()()()(),t.j41(26,"div",11)(27,"div",6)(28,"dx-data-grid",12),t.bIt("onExporting",function(y){return t.eBV(c),t.Njj(o.onExportClient(y))}),t.nrm(29,"dxo-export",13),t.j41(30,"dxo-toolbar")(31,"dxi-item",14)(32,"span",15),t.EFF(33,"Danh s\xe1ch NVL th\u1ef1c t\u1ebf ki\u1ec3m k\xea"),t.k0s()(),t.j41(34,"dxi-item")(35,"span",16),t.EFF(36,"Xem ch\xeanh l\u1ec7ch "),t.k0s()(),t.nrm(37,"dxi-item",17),t.k0s(),t.nrm(38,"dxo-paging",18)(39,"dxo-filter-row",19)(40,"dxi-column",20)(41,"dxi-column",21)(42,"dxi-column",22)(43,"dxi-column",23)(44,"dxi-column",24),t.DNE(45,Y,3,0,"div",25),t.nrm(46,"dxo-paging",18)(47,"dxo-pager",26),t.k0s()()(),t.j41(48,"nz-modal",27),t.mxI("nzVisibleChange",function(y){return t.eBV(c),t.DH7(o.isOpenScanMaterialModal,y)||(o.isOpenScanMaterialModal=y),t.Njj(y)}),t.DNE(49,J,21,4,"ng-container",28)(50,W,3,0,"div",29),t.k0s(),t.j41(51,"nz-modal",30),t.mxI("nzVisibleChange",function(y){return t.eBV(c),t.DH7(o.isOpenLotDetailModal,y)||(o.isOpenLotDetailModal=y),t.Njj(y)}),t.DNE(52,H,28,6,"ng-container",28)(53,K,5,0,"div",29),t.k0s()}2&a&&(t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("nzData",t.lJ4(23,A)),t.R7$(8),t.JRh(o.reqNo),t.R7$(5),t.JRh(o.infoScan.username),t.R7$(5),t.JRh(o.infoScan.position),t.R7$(6),t.Y8G("nzGutter",24),t.R7$(2),t.Y8G("dataSource",o.relayInventories)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(),t.Y8G("enabled",!0),t.R7$(6),t.Y8G("routerLink",t.eq3(24,P,o.route.snapshot.paramMap.get("id"))),t.R7$(3),t.Y8G("pageSize",10),t.R7$(),t.Y8G("visible",!0),t.R7$(6),t.Y8G("dxTemplateOf","cellTemplate"),t.R7$(),t.Y8G("pageSize",10),t.R7$(),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(26,L)),t.R7$(),t.R50("nzVisible",o.isOpenScanMaterialModal),t.R7$(3),t.R50("nzVisible",o.isOpenLotDetailModal))},dependencies:[z.Sq,z.bT,f.me,f.Q0,f.BC,f.vS,v.Wk,M.eC,E.s,p.nj_,p.CVf,p.ZJU,p.FTx,p.sVQ,p.PVd,p.KOr,h.CP,h.SO,h._4,h.IL,h.aj,h.kt,I.Uq,I.e,s.Sy,g.F2,g.Oj,g.A9,S.Y,i.aO,l.c,d.p,z.QX],styles:["nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}nz-table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:green;font-weight:700}#error-msg[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;width:100%}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}.ivt-data[_ngcontent-%COMP%]{font-style:italic;color:#00f}.balance[_ngcontent-%COMP%]{color:green;float:right;cursor:pointer}"]})}return n})();function Z(n,m){if(1&n&&(t.j41(0,"tr")(1,"td",3),t.EFF(2),t.k0s(),t.j41(3,"td",4)(4,"a"),t.EFF(5),t.k0s()()()),2&n){const e=m.$implicit,a=m.index;t.R7$(2),t.JRh(a+1),t.R7$(),t.Y8G("routerLink",e.route),t.R7$(2),t.JRh(e.name)}}let tt=(()=>{class n{constructor(){this.menu=[{name:"Phi\u1ebfu ki\u1ec3m k\xea",route:"/admin/relay/relay-inventory/requests"}]}ngOnInit(){}static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-main"]],decls:18,vars:2,consts:[["menuTable",""],["nzBordered","","nzFrontPagination","false",3,"nzData"],[4,"ngFor","ngForOf"],[2,"width","100px","text-align","center"],[3,"routerLink"]],template:function(a,o){if(1&a&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Kho trung chuy\u1ec3n "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Ki\u1ec3m k\xea menu "),t.k0s()(),t.nrm(7,"br"),t.j41(8,"nz-table",1,0)(10,"thead")(11,"tr")(12,"th"),t.EFF(13,"STT"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Action"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,Z,6,3,"tr",2),t.k0s()()),2&a){const c=t.sdS(9);t.R7$(8),t.Y8G("nzData",o.menu),t.R7$(9),t.Y8G("ngForOf",c.data)}},dependencies:[z.Sq,v.Wk,R.hL,R.K7,h.CP,h.SO,h._4,h.IL,h.aj,h.kt],styles:["nz-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-weight:700}"]})}return n})();var et=u(86372),nt=u(37736),G=u(35154),O=u(58960);const ot=()=>[10,25,50,100],at=n=>["/admin/relay/relay-inventory/execute",n],it=n=>["/admin/relay/relay-inventory/balance",n],rt=()=>[""];function st(n,m){1&n&&(t.j41(0,"div"),t.EFF(1," This content is not shown "),t.k0s())}function lt(n,m){if(1&n&&(t.j41(0,"a",19),t.EFF(1," Ki\u1ec3m k\xea "),t.k0s()),2&n){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(1,at,e.data.id))}}function ct(n,m){if(1&n&&(t.j41(0,"a",20),t.EFF(1," Balance "),t.k0s()),2&n){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(3,it,e.data.id))("nzTooltipTitle","Hi\u1ec3n th\u1ecb ch\xeanh l\u1ec7ch l\xfd thuy\u1ebft v\xe0 th\u1ef1c t\u1ebf")("nzTooltipColor","green")}}function ut(n,m){if(1&n&&(t.j41(0,"div",17),t.DNE(1,st,2,0,"div",18)(2,lt,2,3,"ng-template",null,0,t.C5r)(4,ct,2,5,"ng-template",null,1,t.C5r),t.k0s()),2&n){const e=m.$implicit,a=t.sdS(3),o=t.sdS(5);t.R7$(),t.Y8G("ngIf",e.data.expired)("ngIfThen",a)("ngIfElse",o)}}function dt(n,m){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"nz-table",21)(2,"tbody")(3,"tr")(4,"td")(5,"label",22),t.EFF(6,"Cut Off"),t.k0s()(),t.j41(7,"td")(8,"nz-date-picker",23),t.mxI("ngModelChange",function(o){t.eBV(e);const c=t.XpG();return t.DH7(c.cutOffDate,o)||(c.cutOffDate=o),t.Njj(o)}),t.bIt("ngModelChange",function(o){t.eBV(e);const c=t.XpG();return t.Njj(c.onChange(o))}),t.k0s()()()()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("nzData",t.lJ4(3,rt)),t.R7$(7),t.R50("ngModel",e.cutOffDate),t.Y8G("nzDisabledDate",e.disabledDate)}}function pt(n,m){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",24),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancelRequest())}),t.EFF(2,"H\u1ee7y"),t.k0s(),t.j41(3,"button",25),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createRequest())}),t.EFF(4,"L\u01b0u"),t.k0s()()}}const mt=[{path:"main",component:tt},{path:"requests",component:(()=>{class n{constructor(e,a,o){this.toastr=e,this.reIvtSvc=a,this.jwtHelperSvc=o,this.today=new Date,this.requests=[],this.cutOffDate=null,this.isOpenIvtCreateModal=!1,this.disabledDate=c=>(0,et.A)(c,this.today)>0}ngOnInit(){this.getInventoryRequests()}getInventoryRequests(){this.reIvtSvc.getInventoryRequests().subscribe(e=>{this.requests=e})}onChange(e){console.log("onChange: ",e)}cancelRequest(){this.cutOffDate=null,this.isOpenIvtCreateModal=!1}createRequest(){if(this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()),!this.cutOffDate)return void this.toastr.warning("C\u1ea7n ch\u1ecdn ng\xe0y Cut Off !","Warning");let a={cutOff:this.cutOffDate,createdBy:this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username};this.reIvtSvc.createInventoryRequest(a).subscribe(o=>{this.toastr.success("Success !","OK"),this.isOpenIvtCreateModal=!1,this.getInventoryRequests()})}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(F.tw),t.rXU(C),t.rXU(nt.X7))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-relay-inventory-request"]],decls:23,vars:14,consts:[["inventory",""],["balance",""],["keyExpr","id",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["location","before"],["stylingMode","contained","type","success","icon","plus","text","T\u1ea1o phi\u1ebfu ki\u1ec3m k\xea",3,"onClick"],[3,"pageSize"],[3,"visible"],["dataField","reqNo","caption","Request No"],["dataField","cutOff","dataType","date","caption","Cut Off","format","yyyy-MM-dd"],["dataField","inventoryDate","dataType","date","caption","Ng\xe0y ki\u1ec3m k\xea","format","yyyy-MM-dd"],["dataField","createdBy","caption","Ng\u01b0\u1eddi t\u1ea1o"],["caption","Action","cellTemplate","cellTemplate","alignment","center"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","T\u1ea1o phi\u1ebfu ki\u1ec3m k\xea",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],[2,"text-align","center"],[4,"ngIf","ngIfThen","ngIfElse"],[2,"color","blue",3,"routerLink"],["nz-tooltip","",2,"color","green",3,"routerLink","nzTooltipTitle","nzTooltipColor"],["nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],[2,"font-weight","bold"],[2,"width","100%",3,"ngModelChange","ngModel","nzDisabledDate"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(a,o){1&a&&(t.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),t.EFF(2," Relay "),t.k0s(),t.j41(3,"nz-breadcrumb-item"),t.EFF(4," Ki\u1ec3m k\xea NVL "),t.k0s(),t.j41(5,"nz-breadcrumb-item"),t.EFF(6," Phi\u1ebfu ki\u1ec3m k\xea "),t.k0s()(),t.j41(7,"dx-data-grid",2)(8,"dxo-toolbar")(9,"dxi-item",3)(10,"dx-button",4),t.bIt("onClick",function(){return o.isOpenIvtCreateModal=!0}),t.k0s()()(),t.nrm(11,"dxo-paging",5)(12,"dxo-filter-row",6)(13,"dxi-column",7)(14,"dxi-column",8)(15,"dxi-column",9)(16,"dxi-column",10)(17,"dxi-column",11),t.DNE(18,ut,6,3,"div",12),t.nrm(19,"dxo-pager",13),t.k0s(),t.j41(20,"nz-modal",14),t.mxI("nzVisibleChange",function(_){return t.DH7(o.isOpenIvtCreateModal,_)||(o.isOpenIvtCreateModal=_),_}),t.DNE(21,dt,9,4,"ng-container",15)(22,pt,5,0,"div",16),t.k0s()),2&a&&(t.R7$(7),t.Y8G("dataSource",o.requests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),t.R7$(4),t.Y8G("pageSize",10),t.R7$(),t.Y8G("visible",!0),t.R7$(6),t.Y8G("dxTemplateOf","cellTemplate"),t.R7$(),t.Y8G("showPageSizeSelector",!0)("allowedPageSizes",t.lJ4(13,ot)),t.R7$(),t.R50("nzVisible",o.isOpenIvtCreateModal))},dependencies:[z.bT,f.BC,f.vS,v.Wk,R.hL,R.K7,r.e,M.eC,E.s,p.nj_,p.CVf,p.FTx,p.sVQ,p.PVd,p.KOr,h.CP,h.SO,h.aj,h.kt,g.F2,g.Oj,g.A9,G.LH,i.aO,l.c,d.p,O.SN]})}return n})()},{path:"execute/:id",component:Q},{path:"balance/:id",component:B}];let ht=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[v.iI.forChild(mt),v.iI]})}return n})();var gt=u(75699),yt=u(61912);let zt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[z.MD,f.YN,ht,R.EJ,r.L,E.N,h.$G,I.f3,s.j,gt.T,g.U6,S.$,G.Qt,i.Zw,O.LE,yt.i3,x.V,k.hM]})}return n})()},61912:(V,b,u)=>{u.d(b,{Bi:()=>M,i3:()=>I});var z=u(60177),r=u(54438),E=u(70317),R=u(15215);const v=["nzType","avatar"],j=["*"];function w(s,g){if(1&s&&(r.j41(0,"div",5),r.nrm(1,"nz-skeleton-element",6),r.k0s()),2&s){const i=r.XpG(2);r.R7$(),r.Y8G("nzSize",i.avatar.size||"default")("nzShape",i.avatar.shape||"circle")}}function C(s,g){if(1&s&&r.nrm(0,"h3",7),2&s){const i=r.XpG(2);r.xc7("width",i.toCSSUnit(i.title.width))}}function p(s,g){if(1&s&&r.nrm(0,"li"),2&s){const i=g.index,l=r.XpG(3);r.xc7("width",l.toCSSUnit(l.widthList[i]))}}function S(s,g){if(1&s&&(r.j41(0,"ul",8),r.DNE(1,p,1,2,"li",9),r.k0s()),2&s){const i=r.XpG(2);r.R7$(),r.Y8G("ngForOf",i.rowsList)}}function x(s,g){if(1&s&&(r.qex(0),r.DNE(1,w,2,2,"div",1),r.j41(2,"div",2),r.DNE(3,C,1,2,"h3",3)(4,S,2,1,"ul",4),r.k0s(),r.bVm()),2&s){const i=r.XpG();r.R7$(),r.Y8G("ngIf",!!i.nzAvatar),r.R7$(2),r.Y8G("ngIf",!!i.nzTitle),r.R7$(),r.Y8G("ngIf",!!i.nzParagraph)}}function k(s,g){1&s&&(r.qex(0),r.SdG(1),r.bVm())}let T=(()=>{class s{constructor(){this.nzActive=!1,this.nzBlock=!1}static#t=this.\u0275fac=function(l){return new(l||s)};static#e=this.\u0275dir=r.FsC({type:s,selectors:[["nz-skeleton-element"]],hostAttrs:[1,"ant-skeleton","ant-skeleton-element"],hostVars:4,hostBindings:function(l,d){2&l&&r.AVh("ant-skeleton-active",d.nzActive)("ant-skeleton-block",d.nzBlock)},inputs:{nzActive:"nzActive",nzType:"nzType",nzBlock:"nzBlock"},standalone:!0})}return(0,R.Cg)([(0,E.H3)()],s.prototype,"nzBlock",void 0),s})(),N=(()=>{class s{constructor(){this.nzShape="circle",this.nzSize="default",this.styleMap={}}ngOnChanges(i){if(i.nzSize&&"number"==typeof this.nzSize){const l=`${this.nzSize}px`;this.styleMap={width:l,height:l,"line-height":l}}else this.styleMap={}}static#t=this.\u0275fac=function(l){return new(l||s)};static#e=this.\u0275cmp=r.VBU({type:s,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},standalone:!0,features:[r.OA$,r.aNF],attrs:v,decls:1,vars:9,consts:[[1,"ant-skeleton-avatar",3,"ngStyle"]],template:function(l,d){1&l&&r.nrm(0,"span",0),2&l&&(r.AVh("ant-skeleton-avatar-square","square"===d.nzShape)("ant-skeleton-avatar-circle","circle"===d.nzShape)("ant-skeleton-avatar-lg","large"===d.nzSize)("ant-skeleton-avatar-sm","small"===d.nzSize),r.Y8G("ngStyle",d.styleMap))},dependencies:[z.B3],encapsulation:2,changeDetection:0})}return s})(),M=(()=>{class s{constructor(i){this.cdr=i,this.nzActive=!1,this.nzLoading=!0,this.nzRound=!1,this.nzTitle=!0,this.nzAvatar=!1,this.nzParagraph=!0,this.rowsList=[],this.widthList=[]}toCSSUnit(i=""){return(0,E.j3)(i)}getTitleProps(){const i=!!this.nzAvatar,l=!!this.nzParagraph;let d="";return!i&&l?d="38%":i&&l&&(d="50%"),{width:d,...this.getProps(this.nzTitle)}}getAvatarProps(){return{shape:this.nzTitle&&!this.nzParagraph?"square":"circle",size:"large",...this.getProps(this.nzAvatar)}}getParagraphProps(){const i=!!this.nzAvatar,l=!!this.nzTitle,d={};return(!i||!l)&&(d.width="61%"),d.rows=!i&&l?3:2,{...d,...this.getProps(this.nzParagraph)}}getProps(i){return i&&"object"==typeof i?i:{}}getWidthList(){const{width:i,rows:l}=this.paragraph;let d=[];return i&&Array.isArray(i)?d=i:i&&!Array.isArray(i)&&(d=[],d[l-1]=i),d}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(i){(i.nzTitle||i.nzAvatar||i.nzParagraph)&&this.updateProps()}static#t=this.\u0275fac=function(l){return new(l||s)(r.rXU(r.gRc))};static#e=this.\u0275cmp=r.VBU({type:s,selectors:[["nz-skeleton"]],hostAttrs:[1,"ant-skeleton"],hostVars:6,hostBindings:function(l,d){2&l&&r.AVh("ant-skeleton-with-avatar",!!d.nzAvatar)("ant-skeleton-active",d.nzActive)("ant-skeleton-round",!!d.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],standalone:!0,features:[r.OA$,r.aNF],ngContentSelectors:j,decls:2,vars:2,consts:[[4,"ngIf"],["class","ant-skeleton-header",4,"ngIf"],[1,"ant-skeleton-content"],["class","ant-skeleton-title",3,"width",4,"ngIf"],["class","ant-skeleton-paragraph",4,"ngIf"],[1,"ant-skeleton-header"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[1,"ant-skeleton-paragraph"],[3,"width",4,"ngFor","ngForOf"]],template:function(l,d){1&l&&(r.NAR(),r.DNE(0,x,5,3,"ng-container",0)(1,k,2,0,"ng-container",0)),2&l&&(r.Y8G("ngIf",d.nzLoading),r.R7$(),r.Y8G("ngIf",!d.nzLoading))},dependencies:[T,N,z.bT,z.Sq],encapsulation:2,changeDetection:0})}return s})(),I=(()=>{class s{static#t=this.\u0275fac=function(l){return new(l||s)};static#e=this.\u0275mod=r.$C({type:s});static#n=this.\u0275inj=r.G2t({})}return s})()}}]);