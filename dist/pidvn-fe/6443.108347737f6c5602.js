"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[6443],{16443:(tn,Q,l)=>{l.r(Q),l.d(Q,{VrEncProcessRecordingModule:()=>Ln});var f=l(60177),r=l(89417),L=l(66646),y=l(12673),i=l(23617),j=l(31958),M=l(50513),T=l(74696),V=l(58960),P=l(97529),A=l(21011),F=l(43053),G=l(72874),b=l(1997),R=l(23359),v=l(46661),n=l(54438),x=l(45794),$=l(45312),Y=l(21626);let I=(()=>{class a{constructor(e){this.httpClient=e,this.baseUrl=$.c.baseUrl}getModels(){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Models`)}getPartsByModel(e){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Parts?model=${e}`)}getShifts(){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Shifts`)}getLines(e){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Lines?productId=${e}`)}getCustomers(){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Customers`)}getQaCards(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/QaCards`,e)}createQaCard(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/CreateQaCard`,e)}getProcesses(e){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Processes?productTypeName=${e}`)}getProcessesVer2(e){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/ProcessesVer2?line=${e}`)}getMaterials(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/Materials`,e)}scanLabel(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/ScanLabel`,e)}insertMaterials(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/InsertMaterials`,e)}updateMaterial(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/UpdateMaterial`,e)}downloadQaCard(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/DownloadQaCard`,e,{responseType:"blob"})}traceability(e){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/Traceability`,e)}static#n=this.\u0275fac=function(o){return new(o||a)(n.KVO(Y.Qq))};static#e=this.\u0275prov=n.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var N=l(16389),B=l(25930);const U=["infoIpt"],H=["labelIpt"],m=["importQtyIpt"],k=()=>[""];function h(a,u){if(1&a){const e=n.RV6();n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.k0s(),n.j41(5,"td",19),n.EFF(6),n.nI1(7,"number"),n.k0s(),n.j41(8,"td"),n.EFF(9),n.k0s(),n.j41(10,"td",20)(11,"a",21),n.bIt("click",function(){const t=n.eBV(e).$implicit,s=n.XpG();return n.Njj(s.openEditQtyModal(t))}),n.EFF(12,"S\u1eeda"),n.k0s()()()}if(2&a){const e=u.$implicit;n.R7$(2),n.JRh(e.cpn),n.R7$(2),n.JRh(e.clotno),n.R7$(2),n.JRh(n.i5U(7,4,e.qty,"1.0-3")),n.R7$(3),n.JRh(e.processName)}}function g(a,u){if(1&a&&n.nrm(0,"nz-option",30),2&a){const e=u.$implicit;n.Y8G("nzLabel",e.name)("nzValue",e.id)}}function z(a,u){if(1&a&&(n.j41(0,"tbody")(1,"tr")(2,"td",31)(3,"div",32)(4,"span"),n.EFF(5),n.k0s()()()()()),2&a){const e=n.XpG(2);n.R7$(5),n.JRh(e.lotErrMsg)}}function S(a,u){if(1&a){const e=n.RV6();n.j41(0,"tr")(1,"td")(2,"label"),n.EFF(3),n.k0s()(),n.j41(4,"td")(5,"label"),n.EFF(6),n.k0s()(),n.j41(7,"td",33)(8,"div",34),n.bIt("click",function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.startEdit(t))}),n.EFF(9),n.nI1(10,"number"),n.k0s(),n.j41(11,"input",35,5),n.mxI("ngModelChange",function(t){const s=n.eBV(e).$implicit;return n.DH7(s.qty,t)||(s.qty=t),n.Njj(t)}),n.bIt("blur",function(){n.eBV(e);const t=n.XpG(2);return n.Njj(t.stopEdit())}),n.k0s()(),n.j41(13,"td",36),n.bIt("nzOnConfirm",function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.deleteLabelScanned(t))}),n.j41(14,"a",37),n.EFF(15,"X\xf3a"),n.k0s()()()}if(2&a){const e=u.$implicit,o=n.XpG(2);n.R7$(3),n.JRh(e.cpn),n.R7$(3),n.JRh(e.clotno),n.R7$(2),n.Y8G("hidden",o.lotNoEdit===e.clotno),n.R7$(),n.SpI(" ",n.i5U(10,6,e.qty,"1.0-3")," "),n.R7$(2),n.Y8G("hidden",o.lotNoEdit!==e.clotno),n.R50("ngModel",e.qty)}}function q(a,u){if(1&a){const e=n.RV6();n.qex(0),n.j41(1,"div",7)(2,"nz-table",22)(3,"thead")(4,"tr")(5,"th",23)(6,"input",24,3),n.bIt("keydown.enter",function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.scanLabel(t))})("click",function(){n.eBV(e);const t=n.sdS(7);return n.Njj(t.select())}),n.k0s()(),n.j41(8,"th",25)(9,"nz-select",26),n.bIt("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.onChangeProcess(t))}),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.process,t)||(s.process=t),n.Njj(t)}),n.DNE(10,g,1,2,"nz-option",27),n.k0s()()()(),n.DNE(11,z,6,1,"tbody",28),n.k0s(),n.j41(12,"nz-table",29,4)(14,"thead")(15,"tr")(16,"th"),n.EFF(17,"Part No"),n.k0s(),n.j41(18,"th"),n.EFF(19,"Lot No"),n.k0s(),n.j41(20,"th"),n.EFF(21,"Qty (Nh\u1eadp line)"),n.k0s(),n.j41(22,"th"),n.EFF(23,"Action"),n.k0s()()(),n.j41(24,"tbody"),n.DNE(25,S,16,9,"tr",14),n.k0s()()(),n.bVm()}if(2&a){const e=n.sdS(13),o=n.XpG();n.R7$(),n.Y8G("nzGutter",24),n.R7$(),n.Y8G("nzData",n.lJ4(9,k)),n.R7$(7),n.Y8G("nzAutoFocus",!0)("nzStatus","warning"),n.R50("ngModel",o.process),n.R7$(),n.Y8G("ngForOf",o.processes),n.R7$(),n.Y8G("ngIf",o.lotErrMsg),n.R7$(),n.Y8G("nzData",o.listLotsScanned),n.R7$(13),n.Y8G("ngForOf",e.data)}}function W(a,u){if(1&a){const e=n.RV6();n.j41(0,"button",38),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.closeScanLabelModal())}),n.EFF(1," H\u1ee7y "),n.k0s(),n.j41(2,"button",39),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.insertMaterials())}),n.EFF(3," L\u01b0u "),n.k0s()}if(2&a){const e=n.XpG();n.R7$(2),n.Y8G("nzLoading",e.isLoadingSaveBtn)}}function Z(a,u){if(1&a){const e=n.RV6();n.qex(0),n.j41(1,"div",7)(2,"nz-table",40,6)(4,"tbody")(5,"tr")(6,"td")(7,"label"),n.EFF(8,"Part No"),n.k0s()(),n.j41(9,"td"),n.EFF(10),n.k0s()(),n.j41(11,"tr")(12,"td")(13,"label"),n.EFF(14,"Lot No"),n.k0s()(),n.j41(15,"td"),n.EFF(16),n.k0s()(),n.j41(17,"tr")(18,"td")(19,"label"),n.EFF(20,"Qty"),n.k0s()(),n.j41(21,"td")(22,"input",41),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.materialSelected.qty,t)||(s.materialSelected.qty=t),n.Njj(t)}),n.k0s()()(),n.j41(23,"tr")(24,"td")(25,"label"),n.EFF(26,"Remark"),n.k0s()(),n.j41(27,"td")(28,"input",42),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.materialSelected.remark,t)||(s.materialSelected.remark=t),n.Njj(t)}),n.k0s()()()()()(),n.bVm()}if(2&a){const e=n.XpG();n.R7$(),n.Y8G("nzGutter",24),n.R7$(),n.Y8G("nzData",n.lJ4(6,k)),n.R7$(8),n.JRh(e.materialSelected.cpn),n.R7$(6),n.JRh(e.materialSelected.clotno),n.R7$(6),n.R50("ngModel",e.materialSelected.qty),n.R7$(6),n.R50("ngModel",e.materialSelected.remark)}}function K(a,u){if(1&a){const e=n.RV6();n.j41(0,"button",38),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.isOpenEditQtyModal=!1)}),n.EFF(1," H\u1ee7y "),n.k0s(),n.j41(2,"button",39),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.updateQty())}),n.EFF(3," L\u01b0u "),n.k0s()}if(2&a){const e=n.XpG();n.R7$(2),n.Y8G("nzLoading",e.isLoadingSaveBtn)}}let nn=(()=>{class a{constructor(e,o,t){this.toastr=e,this.vrEncPRSvc=o,this.activatedRoute=t,this.infoScan={qaCard:null,model:null,line:null,date:null,shift:null,user:null},this.materialSelected={},this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.lotNoEdit=null,this.isLoadingSaveBtn=!1,this.isOpenEditQtyModal=!1,this.isOpenScanLabelModal=!1,this.lotErrMsg=null}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.infoIpt.nativeElement.focus(),this.scanInfo({target:{value:this.activatedRoute.snapshot.queryParams.qaCard}})},0)}getProcesses(e){this.vrEncPRSvc.getProcesses(e).subscribe(o=>{this.processes=o})}getProcessesVer2(e){this.vrEncPRSvc.getProcessesVer2(e).subscribe(o=>{this.processes=o})}getMaterials(e){this.vrEncPRSvc.getMaterials(e).subscribe(o=>{this.materials=o})}scanInfo(e){let o=e.target.value,t=o.split("*");if(5===t.length){if(o.includes(";"))return this.toastr.warning("C\u1ea7n scan QA card v\xe0 ID"),void this.infoIpt.nativeElement.select();this.infoScan.qaCard=o,this.infoScan.model=t[0],this.infoScan.line=t[1],this.infoScan.date=t[2],this.infoScan.shift=t[3],this.getProcessesVer2(t[1]),this.getPartsByModel(this.infoScan.model),this.getMaterials({qaCard:this.infoScan.qaCard,recordType:"VEP"})}7===o.length&&(this.infoScan.user=o),Object.values(this.infoScan).some(d=>null==d||""==d)?this.toastr.warning("C\u1ea7n scan m\xe3 nh\xe2n vi\xean","Warning"):this.isOpenScanLabelModal=!0,this.infoIpt.nativeElement.select()}scanLabel(e){if(this.labelIpt.nativeElement.select(),!this.process)return void(this.lotErrMsg="B\u1ea1n c\u1ea7n ch\u1ecdn c\xf4ng \u0111o\u1ea1n tr\u01b0\u1edbc khi scan tem NVL");let o=Object.assign(this.infoScan,{processId:this.process},{label:e.target.value.trim()},{type:"VEP"}),t=o.label.split(";"),s="B"==t[0]?t[4]:t[3];if(!this.partsOfModel.includes("B"==t[0]?t[1]:t[0]))return this.lotErrMsg=`Lot ${s} kh\xf4ng d\xf9ng cho model ${o.model}`,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:15e3});this.vrEncPRSvc.scanLabel(o).subscribe(E=>"ERROR"==E.status?(this.lotErrMsg=E.message,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:15e3})):"OK"==E.status?(this.lotErrMsg=null,this.mapLotsScanned.set(o.label,E.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0,E=>{}),this.labelIpt.nativeElement.select()}onChangeProcess(e){console.log(e),this.labelIpt.nativeElement.select()}startEdit(e){setTimeout(()=>{this.importQtyIpt.nativeElement.select()},400),this.lotNoEdit=e.clotno}stopEdit(){this.lotNoEdit=null,this.importQtyIpt.nativeElement.select()}deleteLabelScanned(e){console.log(e),this.mapLotsScanned.delete(e.label),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}insertMaterials(){this.isLoadingSaveBtn=!0,console.log(this.listLotsScanned),this.listLotsScanned.length?this.vrEncPRSvc.insertMaterials(this.listLotsScanned).subscribe(e=>{this.toastr.success("OK","Success"),this.isOpenScanLabelModal=!1,this.getMaterials({qaCard:this.infoScan.qaCard}),this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.isLoadingSaveBtn=!1,this.infoScan.user=null,this.process=null,this.lotErrMsg=null}):this.isLoadingSaveBtn=!1}closeScanLabelModal(){this.lotErrMsg=null,this.isOpenScanLabelModal=!1}getPartsByModel(e){this.vrEncPRSvc.getPartsByModel(e).subscribe(o=>{let t=new Array;for(const s of o)t.push(s.pncomp);this.partsOfModel=t,console.log("Parts: ",this.partsOfModel)})}openEditQtyModal(e){this.materialSelected.id=e.id,this.materialSelected.cpn=e.cpn,this.materialSelected.clotno=e.clotno,this.materialSelected.qty=e.qty,this.materialSelected.remark=e.remark,this.isOpenEditQtyModal=!0}updateQty(){this.vrEncPRSvc.updateMaterial(this.materialSelected).subscribe(e=>{this.toastr.success("Update th\xe0nh c\xf4ng","Success"),this.isOpenEditQtyModal=!1,this.getMaterials({qaCard:this.infoScan.qaCard,recordType:"VEP"})})}static#n=this.\u0275fac=function(o){return new(o||a)(n.rXU(x.tw),n.rXU(I),n.rXU(v.nX))};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-vr-enc-p-r-insert"]],viewQuery:function(o,t){if(1&o&&(n.GBs(U,5),n.GBs(H,5),n.GBs(m,5)),2&o){let s;n.mGM(s=n.lsd())&&(t.infoIpt=s.first),n.mGM(s=n.lsd())&&(t.labelIpt=s.first),n.mGM(s=n.lsd())&&(t.importQtyIpt=s.first)}},decls:64,vars:13,consts:[["infoTbl",""],["infoIpt",""],["materialsTable",""],["labelIpt",""],["labelTable",""],["importQtyIpt",""],["qtyEditTable",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","18","nzLg","18"],[1,"attention"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["id","infoIpt","nz-input","","nzSize","small","placeholder","Scan User ID, QA card","autocomplete","off",3,"keydown.enter","click"],["nzSize","small","nzBordered","",2,"margin-top","-25px",3,"nzData","nzPageSize"],[4,"ngFor","ngForOf"],["id","importMaterialModal","nzTitle","Scan tem NVL","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[3,"nzModalFooter"],["id","editQty","nzTitle","Update Qty",3,"nzVisibleChange","nzVisible"],[2,"text-align","right"],[2,"text-align","center"],[3,"click"],["id","materialEditTbl","nzBordered","","nzFrontPagination","false","nzSize","small",2,"margin-top","-15px",3,"nzData"],[2,"width","60%"],["id","labelIpt","nz-input","","placeholder","Scan tem NVL","autocomplete","off",3,"keydown.enter","click"],[2,"width","40%"],["nzPlaceHolder","Ch\u1ecdn c\xf4ng \u0111o\u1ea1n","nzAllowClear","","nzShowSearch","","nzNotFoundContent","",3,"ngModelChange","nzAutoFocus","nzStatus","ngModel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[4,"ngIf"],["nzSize","small","nzBordered","",2,"margin-top","-20px",3,"nzData"],[3,"nzLabel","nzValue"],["colspan","2"],["id","error-msg"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nzSize","small","nzBordered","","nzFrontPagination","false",3,"nzData"],["nz-input","","type","number",3,"ngModelChange","ngModel"],["nz-input","","placeholder","Nh\u1eadp ghi ch\xfa",3,"ngModelChange","ngModel"]],template:function(o,t){if(1&o){const s=n.RV6();n.j41(0,"div",7)(1,"div",8)(2,"span",9),n.EFF(3,"* H\u01b0\u1edbng d\u1eabn VR-ENC Process Recording: Scan l\u1ea7n l\u01b0\u1ee3t QA card, User ID, Tem NVL"),n.k0s()(),n.j41(4,"div",10)(5,"nz-table",11,0)(7,"tbody")(8,"tr")(9,"td")(10,"label"),n.EFF(11,"Scanner"),n.k0s()(),n.j41(12,"td")(13,"input",12,1),n.bIt("keydown.enter",function(E){return n.eBV(s),n.Njj(t.scanInfo(E))})("click",function(){n.eBV(s);const E=n.sdS(14);return n.Njj(E.select())}),n.k0s()(),n.j41(15,"td")(16,"label"),n.EFF(17,"User ID"),n.k0s()(),n.j41(18,"td"),n.EFF(19),n.k0s()(),n.j41(20,"tr")(21,"td")(22,"label"),n.EFF(23,"Product"),n.k0s()(),n.j41(24,"td"),n.EFF(25),n.k0s(),n.j41(26,"td")(27,"label"),n.EFF(28,"Line"),n.k0s()(),n.j41(29,"td"),n.EFF(30),n.k0s()(),n.j41(31,"tr")(32,"td")(33,"label"),n.EFF(34,"Date"),n.k0s()(),n.j41(35,"td"),n.EFF(36),n.k0s(),n.j41(37,"td")(38,"label"),n.EFF(39,"Shift"),n.k0s()(),n.j41(40,"td"),n.EFF(41),n.k0s()()()()()(),n.j41(42,"nz-table",13,2)(44,"thead")(45,"tr")(46,"th"),n.EFF(47,"Part No"),n.k0s(),n.j41(48,"th"),n.EFF(49,"Lot No (\u0110\xe3 nh\u1eadp v\xe0o LINE)"),n.k0s(),n.j41(50,"th"),n.EFF(51,"Qty"),n.k0s(),n.j41(52,"th"),n.EFF(53,"C\xf4ng \u0111o\u1ea1n"),n.k0s(),n.j41(54,"th"),n.EFF(55,"Action"),n.k0s()()(),n.j41(56,"tbody"),n.DNE(57,h,13,7,"tr",14),n.k0s()(),n.j41(58,"nz-modal",15),n.mxI("nzVisibleChange",function(E){return n.eBV(s),n.DH7(t.isOpenScanLabelModal,E)||(t.isOpenScanLabelModal=E),n.Njj(E)}),n.DNE(59,q,26,10,"ng-container",16)(60,W,4,1,"ng-template",17),n.k0s(),n.j41(61,"nz-modal",18),n.mxI("nzVisibleChange",function(E){return n.eBV(s),n.DH7(t.isOpenEditQtyModal,E)||(t.isOpenEditQtyModal=E),n.Njj(E)}),n.DNE(62,Z,29,7,"ng-container",16)(63,K,4,1,"ng-template",17),n.k0s()}if(2&o){const s=n.sdS(43);n.Y8G("nzGutter",24),n.R7$(5),n.Y8G("nzData",n.lJ4(12,k)),n.R7$(14),n.JRh(t.infoScan.user),n.R7$(6),n.JRh(t.infoScan.model),n.R7$(5),n.JRh(t.infoScan.line),n.R7$(6),n.JRh(t.infoScan.date),n.R7$(5),n.JRh(t.infoScan.shift),n.R7$(),n.Y8G("nzData",t.materials)("nzPageSize",20),n.R7$(15),n.Y8G("ngForOf",s.data),n.R7$(),n.R50("nzVisible",t.isOpenScanLabelModal),n.R7$(3),n.R50("nzVisible",t.isOpenEditQtyModal)}},dependencies:[f.Sq,f.bT,r.me,r.Q0,r.BC,r.vS,P.Uq,P.e,R.CP,R.SO,R._4,R.IL,R.aj,R.kt,R.OL,A.Sy,b.ld,b.WI,F.F2,F.Oj,F.A9,G.PV,M.aO,N.c,B.p,f.QX],styles:["nz-select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%;font-weight:700}span.attention[_ngcontent-%COMP%]{font-style:italic;color:red}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#00f}#error-msg[_ngcontent-%COMP%]{border:3px solid rgb(255,0,0);font-weight:700;width:100%;color:red;padding:5px}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red;font-size:20px}"]})}return a})();const p=()=>["/admin/relay/relay-datecode"],D=()=>({area:"VR-ENC"});let c=(()=>{class a{constructor(){}ngOnInit(){}redirectReturnWh(){window.open("https://10.92.176.57:8080/pur_wh_records.material_return")}static#n=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-vr-enc-p-r-menu"]],decls:35,vars:5,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","6"],[1,"item","import",3,"routerLink","queryParams"],["src","./../../../../../../assets/images/schedule.png","alt",""],["routerLink","/admin/relay/vr-enc-process-recording/qa-card",1,"item","qa-card"],["src","./../../../../../../assets/images/printer.png","alt",""],[1,"item","return",3,"click"],["src","./../../../../../../assets/images/return.png","alt",""],["routerLink","/admin/relay/vr-enc-process-recording/traceability",1,"item","data"],["src","./../../../../../../assets/images/traceability.png","alt",""]],template:function(o,t){1&o&&(n.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),n.EFF(2," VR-ENC "),n.k0s(),n.j41(3,"nz-breadcrumb-item"),n.EFF(4," Process Recording "),n.k0s()(),n.nrm(5,"br"),n.j41(6,"div",0)(7,"div",1)(8,"div",2),n.nrm(9,"img",3),n.j41(10,"h6"),n.EFF(11,"Nh\u1eadp Date Code"),n.k0s(),n.j41(12,"h4"),n.EFF(13,"Date Code Input"),n.k0s()()(),n.j41(14,"div",1)(15,"div",4),n.nrm(16,"img",5),n.j41(17,"h6"),n.EFF(18,"QA card"),n.k0s(),n.j41(19,"h4"),n.EFF(20,"QA card"),n.k0s()()(),n.j41(21,"div",1)(22,"div",6),n.bIt("click",function(){return t.redirectReturnWh()}),n.nrm(23,"img",7),n.j41(24,"h6"),n.EFF(25,"Tr\u1ea3 NVL"),n.k0s(),n.j41(26,"h4"),n.EFF(27,"Return"),n.k0s()()(),n.j41(28,"div",1)(29,"div",8),n.nrm(30,"img",9),n.j41(31,"h6"),n.EFF(32,"Truy v\u1ebft d\u1eef li\u1ec7u"),n.k0s(),n.j41(33,"h4"),n.EFF(34,"Traceability"),n.k0s()()()()),2&o&&(n.R7$(6),n.Y8G("nzGutter",8),n.R7$(2),n.Y8G("routerLink",n.lJ4(3,p))("queryParams",n.lJ4(4,D)))},dependencies:[v.Wk,j.hL,j.K7,P.Uq,P.e],styles:[".item[_ngcontent-%COMP%]{text-align:center;border:1px solid #ccc;padding:15px 10px}.item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;color:#fff}.item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:15px;font-size:18px;color:#fff;font-weight:700}.import[_ngcontent-%COMP%]{background:#e07e37;cursor:pointer}.qa-card[_ngcontent-%COMP%]{background:#63d171;cursor:pointer}.return[_ngcontent-%COMP%]{background:#959595c7}.data[_ngcontent-%COMP%]{background:#3498db;cursor:pointer}"]})}return a})();var C=l(37736),_=l(31837),O=l(27380),w=l(72544),X=l(3104),on=l(45398),en=l(97685);const an=()=>[10,25,50,100],rn=()=>["/admin/relay/vr-enc-process-recording/insert"],sn=a=>({qaCard:a}),ln=()=>["/admin/vr/defect-record/input"],cn=a=>({qaCard:a,area:"VR"}),dn=()=>[""];function pn(a,u){if(1&a&&n.nrm(0,"nz-option",31),2&a){const e=u.$implicit;n.Y8G("nzValue",e.name)("nzLabel",e.description)}}function mn(a,u){if(1&a&&n.nrm(0,"nz-option",31),2&a){const e=u.$implicit;n.Y8G("nzValue",e.code)("nzLabel",e.name)}}function _n(a,u){if(1&a){const e=n.RV6();n.j41(0,"div",32),n.bIt("click",function(){const t=n.eBV(e).$implicit,s=n.XpG();return n.Njj(s.openQACardModal(t))}),n.EFF(1),n.k0s()}if(2&a){const e=u.$implicit;n.R7$(),n.SpI(" ",e.data.customerCode?e.data.customerCode:"Ch\u01b0a ch\u1ecdn m\xe3"," ")}}function un(a,u){if(1&a){const e=n.RV6();n.j41(0,"a",37),n.bIt("click",function(){n.eBV(e);const t=n.XpG().$implicit,s=n.XpG();return n.Njj(s.downloadQaCard(t))}),n.EFF(1,"QA"),n.k0s()}}function hn(a,u){if(1&a&&(n.j41(0,"a",38),n.EFF(1,"Scan NVL"),n.k0s()),2&a){const e=n.XpG().$implicit;n.Y8G("routerLink",n.lJ4(2,rn))("queryParams",n.eq3(3,sn,e.data.lotNo))}}function gn(a,u){if(1&a&&(n.j41(0,"a",39),n.EFF(1," Nh\u1eadp l\u1ed7i "),n.k0s()),2&a){const e=n.XpG().$implicit;n.Y8G("routerLink",n.lJ4(2,ln))("queryParams",n.eq3(3,cn,e.data.lotNo))}}function zn(a,u){1&a&&(n.j41(0,"div",33)(1,"nz-space"),n.DNE(2,un,2,0,"a",34)(3,hn,2,5,"a",35)(4,gn,2,5,"a",36),n.k0s()())}function Cn(a,u){1&a&&(n.qex(0),n.j41(1,"nz-spin",40),n.nrm(2,"nz-alert",41),n.k0s(),n.bVm())}function fn(a,u){1&a&&n.nrm(0,"div")}function En(a,u){if(1&a&&n.nrm(0,"nz-option",31),2&a){const e=u.$implicit;n.Y8G("nzValue",e.code)("nzLabel",e.name)}}function Pn(a,u){if(1&a&&n.nrm(0,"nz-option",31),2&a){const e=u.$implicit;n.Y8G("nzValue",e.name)("nzLabel",e.description)}}function Rn(a,u){if(1&a&&n.nrm(0,"nz-option",31),2&a){const e=u.$implicit;n.Y8G("nzValue",e.name)("nzLabel",e.name)}}function Mn(a,u){if(1&a&&n.nrm(0,"nz-option",51),2&a){const e=u.$implicit;n.Y8G("nzLabel",e.code)("nzValue",e.code)}}function vn(a,u){1&a&&n.EFF(0),2&a&&n.SpI(" and ",u.$implicit.length," more selected ")}function bn(a,u){if(1&a&&(n.j41(0,"tr")(1,"td",52)(2,"div",53),n.nrm(3,"span",54),n.j41(4,"span",55),n.EFF(5),n.k0s()()()()),2&a){const e=n.XpG(2);n.R7$(5),n.JRh(e.errorMsg)}}function yn(a,u){if(1&a){const e=n.RV6();n.qex(0),n.j41(1,"nz-table",42)(2,"tbody")(3,"tr")(4,"td")(5,"label"),n.EFF(6,"Ng\xe0y SX"),n.k0s()(),n.j41(7,"td")(8,"nz-date-picker",43),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.date,t)||(s.qaCard.date=t),n.Njj(t)}),n.k0s()(),n.j41(9,"td")(10,"label"),n.EFF(11,"Ca"),n.k0s()(),n.j41(12,"td")(13,"nz-select",44),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.shift,t)||(s.qaCard.shift=t),n.Njj(t)})("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.shiftCode,t)||(s.qaCard.shiftCode=t),n.Njj(t)}),n.DNE(14,En,1,2,"nz-option",6),n.k0s()()(),n.j41(15,"tr")(16,"td")(17,"label"),n.EFF(18,"Line"),n.k0s()(),n.j41(19,"td")(20,"nz-select",45),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.lineCode,t)||(s.qaCard.lineCode=t),n.Njj(t)}),n.DNE(21,Pn,1,2,"nz-option",6),n.k0s()(),n.j41(22,"td")(23,"label"),n.EFF(24,"Part No"),n.k0s()(),n.j41(25,"td")(26,"nz-select",46),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.model,t)||(s.qaCard.model=t),n.Njj(t)}),n.DNE(27,Rn,1,2,"nz-option",6),n.k0s()()(),n.j41(28,"tr")(29,"td")(30,"label"),n.EFF(31,"Customer"),n.k0s()(),n.j41(32,"td")(33,"nz-select",47),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.customers,t)||(s.qaCard.customers=t),n.Njj(t)}),n.DNE(34,Mn,1,2,"nz-option",48),n.k0s(),n.DNE(35,vn,1,1,"ng-template",null,0,n.C5r),n.k0s(),n.j41(37,"td")(38,"label"),n.EFF(39,"Remark"),n.k0s()(),n.j41(40,"td")(41,"input",49),n.mxI("ngModelChange",function(t){n.eBV(e);const s=n.XpG();return n.DH7(s.qaCard.remark,t)||(s.qaCard.remark=t),n.Njj(t)}),n.k0s()()(),n.DNE(42,bn,6,1,"tr",50),n.k0s()(),n.bVm()}if(2&a){const e=n.sdS(36),o=n.XpG();n.R7$(),n.Y8G("nzData",n.lJ4(20,dn)),n.R7$(7),n.R50("ngModel",o.qaCard.date),n.Y8G("nzDisabled",o.isEditMode),n.R7$(5),n.R50("ngModel",o.qaCard.shift)("ngModel",o.qaCard.shiftCode),n.Y8G("nzDisabled",o.isEditMode),n.R7$(),n.Y8G("ngForOf",o.shifts),n.R7$(6),n.R50("ngModel",o.qaCard.lineCode),n.Y8G("nzDisabled",o.isEditMode),n.R7$(),n.Y8G("ngForOf",o.lines),n.R7$(5),n.R50("ngModel",o.qaCard.model),n.Y8G("nzDisabled",o.isEditMode),n.R7$(),n.Y8G("ngForOf",o.models),n.R7$(6),n.Y8G("nzMaxTagCount",3)("nzMaxTagPlaceholder",e),n.R50("ngModel",o.qaCard.customers),n.R7$(),n.Y8G("ngForOf",o.customers),n.R7$(7),n.R50("ngModel",o.qaCard.remark),n.Y8G("disabled",o.isEditMode),n.R7$(),n.Y8G("ngIf",o.errorMsg)}}function Fn(a,u){if(1&a){const e=n.RV6();n.j41(0,"div")(1,"button",56),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.cancelQACard())}),n.EFF(2,"H\u1ee7y"),n.k0s(),n.j41(3,"button",57),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.createQACard())}),n.EFF(4),n.k0s()()}if(2&a){const e=n.XpG();n.R7$(4),n.SpI(" ",e.isEditMode?"C\u1eadp nh\u1eadt":"T\u1ea1o m\u1edbi"," ")}}function On(a,u){if(1&a&&(n.qex(0),n.j41(1,"div",58)(2,"table",59)(3,"tbody")(4,"tr")(5,"td",60)(6,"label"),n.EFF(7),n.k0s()(),n.j41(8,"td",60)(9,"label"),n.EFF(10),n.k0s()(),n.j41(11,"td",61),n.nrm(12,"qrcode",62),n.k0s()(),n.j41(13,"tr")(14,"td",63)(15,"label",64),n.EFF(16),n.k0s()()(),n.j41(17,"tr")(18,"td",63)(19,"label"),n.EFF(20),n.nI1(21,"date"),n.k0s()()()()()(),n.bVm()),2&a){const e=n.XpG();n.R7$(7),n.JRh(null==e.qaCardSelected?null:e.qaCardSelected.lineCode),n.R7$(3),n.JRh(null==e.qaCardSelected?null:e.qaCardSelected.shiftCode),n.R7$(2),n.Y8G("qrdata",null==e.qaCardSelected?null:e.qaCardSelected.lotNo)("allowEmptyString",!0)("cssClass","center")("elementType","img")("errorCorrectionLevel","M")("margin",4)("scale",1)("width",60),n.R7$(4),n.JRh(null==e.qaCardSelected?null:e.qaCardSelected.model),n.R7$(4),n.JRh(n.i5U(21,12,null==e.qaCardSelected?null:e.qaCardSelected.date,"yyyy-MM-dd"))}}function Vn(a,u){if(1&a){const e=n.RV6();n.j41(0,"div")(1,"button",56),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.isOpenPrintQAModal=!1)}),n.EFF(2," \u0110\xf3ng "),n.k0s(),n.j41(3,"button",65),n.nrm(4,"span",66),n.EFF(5," In QA card "),n.k0s()()}2&a&&(n.R7$(3),n.Y8G("nzType","primary")("useExistingCss",!0))}let kn=(()=>{class a{constructor(e,o,t){this.toastr=e,this.vrEncPRSvc=o,this.jwtHelperSvc=t,this.searchVo={line:null,date:new Date,shift:null,model:null},this.qaCard={id:null,date:new Date,line:null,lineCode:null,model:null,shift:null,shiftCode:null,remark:null,userCode:null,customers:[]},this.date=null,this.isOpenModalLoading=!1,this.isOpenQAModal=!1,this.isOpenPrintQAModal=!1,this.isEditMode=!0}ngOnInit(){this.getShifts(),this.getLines(2),this.getModels(),this.getCustomers()}getLines(e){this.vrEncPRSvc.getLines(e).subscribe(o=>{this.lines=o,console.log("Lines: ",this.lines)})}getShifts(){this.vrEncPRSvc.getShifts().subscribe(e=>{this.shifts=e})}getCustomers(){this.vrEncPRSvc.getCustomers().subscribe(e=>{this.customers=e})}getModels(){this.vrEncPRSvc.getModels().subscribe(e=>{this.models=e})}onSearch(){this.searchVo.line&&this.searchVo.date?this.vrEncPRSvc.getQaCards(this.searchVo).subscribe(e=>{this.qaCards=e}):this.toastr.warning("C\u1ea7n ch\u1ecdn Line v\xe0 Date","Warning")}downloadQaCard(e){console.log("EVENT: ",e),this.isOpenModalLoading=!0;let o={qaCard:e.data.lotNo},t=e.data.lotNo.replace("*","_");this.vrEncPRSvc.downloadQaCard(o).subscribe(s=>{this.isOpenModalLoading=!1;const d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=window.URL.createObjectURL(d),J=document.createElement("a");J.href=E,J.download=`${t}.xls`,J.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(E),J.remove()},100)})}openQACardModal(e){if(e){this.isEditMode=!0;let o={...this.qaCard,...e.data,customers:e.data.customerCode.split(";")};this.qaCard=o}else this.isEditMode=!1,this.qaCard={id:null,date:new Date,line:null,lineCode:null,model:null,shift:null,shiftCode:null,remark:null,userCode:null,customers:[]};console.log("QA card: ",this.qaCard),this.isOpenQAModal=!0}createQACard(){let e=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username;this.qaCard.userCode=e,console.log("QA Card: ",this.qaCard),this.vrEncPRSvc.createQaCard(this.qaCard).subscribe(o=>{"ERROR"==o.result?this.errorMsg=o.message:"OK"==o.result&&(this.isOpenQAModal=!1,this.searchVo.line=this.qaCard.lineCode,this.searchVo.date=this.qaCard.date,this.searchVo.model=this.qaCard.model,this.vrEncPRSvc.getQaCards(this.searchVo).subscribe(t=>{this.qaCards=t}))})}cancelQACard(){this.resetComponent(),this.isOpenQAModal=!1}resetComponent(){this.searchVo.date=new Date,this.searchVo.line=null,this.searchVo.model=null,this.searchVo.shift=null,this.qaCard.date=new Date,this.qaCard.line=null,this.qaCard.model=null,this.qaCard.remark=null,this.qaCard.shift=null,this.qaCard.userCode=null}openPrintQaCardModal(e){console.log("item: ",e.data),this.qaCardSelected=e.data,this.isOpenPrintQAModal=!0}printQRCard(){}onCustomerClicked(e){this.qaCardSelected=e.data,this.isOpenQAModal=!0}static#n=this.\u0275fac=function(o){return new(o||a)(n.rXU(x.tw),n.rXU(I),n.rXU(C.X7))};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-vr-enc-p-r-qacard"]],decls:54,vars:32,consts:[["tagPlaceHolder",""],["nzHeader","T\xecm ki\u1ebfm",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","6"],["nzXs","24","nzSm","24","nzLg","24"],["nzPlaceHolder","Line","nzShowSearch","","nzAllowClear","",3,"ngModelChange","ngModel","nzSize"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModelChange","nzSize","ngModel"],["nzPlaceHolder","Shifts","nzShowSearch","","nzAllowClear","",3,"ngModelChange","ngModel","nzSize"],["nz-button","","nzType","primary",3,"click","nzSize"],["nz-button","","nzType","primary",2,"background","green","margin-left","5px",3,"click","nzSize"],[3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"visible"],[3,"enabled"],["dataField","line","caption","Line"],["dataField","model","caption","Product"],["dataField","shift","caption","Shift"],["caption","Customer","cellTemplate","customerCodeTemplate"],[3,"click",4,"dxTemplate","dxTemplateOf"],["dataField","date","dataType","date","caption","Date","format","yyyy-MM-dd"],["caption","Tr\u1ea1ng th\xe1i","cellTemplate","statusTemplate"],["style","text-align: center; color: green",4,"dxTemplate","dxTemplateOf"],["column","lotNo","summaryType","count"],["column","qty","summaryType","sum","valueFormat","#,##0"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Download QA card",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzWidth","750px",3,"nzVisibleChange","nzVisible","nzTitle"],["nzTitle","Print QA card",3,"nzVisibleChange","nzVisible"],[3,"nzValue","nzLabel"],[3,"click"],[2,"text-align","center","color","green"],["nz-button","","style","color: rgb(107, 45, 1)",3,"click",4,"nzSpaceItem"],["nz-button","","style","color: blue",3,"routerLink","queryParams",4,"nzSpaceItem"],["nz-button","",3,"routerLink","queryParams",4,"nzSpaceItem"],["nz-button","",2,"color","rgb(107, 45, 1)",3,"click"],["nz-button","",2,"color","blue",3,"routerLink","queryParams"],["nz-button","",3,"routerLink","queryParams"],["nzTip","Downloading..."],["nzType","info","nzMessage","Downloading","nzDescription","B\u1ea1n vui l\xf2ng ch\u1edd \u0111\u1ec3 h\u1ec7 th\u1ed1ng download QA card"],["nzBordered","","nzFrontPagination","false",3,"nzData"],[3,"ngModelChange","ngModel","nzDisabled"],["nzPlaceHolder","Shifts","nzAllowClear","","nzShowSearch","",3,"ngModelChange","ngModel","nzDisabled"],["nzPlaceHolder","Line","nzAllowClear","","nzShowSearch","",3,"ngModelChange","ngModel","nzDisabled"],["nzPlaceHolder","Model","nzAllowClear","","nzShowSearch","",3,"ngModelChange","ngModel","nzDisabled"],["nzMode","multiple","nzPlaceHolder","Customers",2,"width","100%",3,"ngModelChange","nzMaxTagCount","nzMaxTagPlaceholder","ngModel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-input","","placeholder","Nh\u1eadp ghi ch\xfa",3,"ngModelChange","ngModel","disabled"],[4,"ngIf"],[3,"nzLabel","nzValue"],["colspan","4"],[1,"error"],["nz-icon","","nzType","warning","nzTheme","outline",2,"color","red"],[2,"color","red","margin-left","5px"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["id","printLabel"],[1,"qa-card-label"],[2,"text-align","center"],["rowspan","3",2,"text-align","center"],[3,"qrdata","allowEmptyString","cssClass","elementType","errorCorrectionLevel","margin","scale","width"],["colspan","2",2,"text-align","center"],[2,"color","green"],["nz-button","","printSectionId","printLabel","ngxPrint","",3,"nzType","useExistingCss"],["nz-icon","","nzType","printer"]],template:function(o,t){1&o&&(n.j41(0,"nz-collapse")(1,"nz-collapse-panel",1)(2,"div",2)(3,"div",3)(4,"label",4),n.EFF(5,"Line"),n.k0s(),n.j41(6,"div",4)(7,"nz-select",5),n.mxI("ngModelChange",function(d){return n.DH7(t.searchVo.line,d)||(t.searchVo.line=d),d}),n.DNE(8,pn,1,2,"nz-option",6),n.k0s()()(),n.j41(9,"div",3)(10,"label",4),n.EFF(11,"Date"),n.k0s(),n.j41(12,"div",4)(13,"nz-date-picker",7),n.mxI("ngModelChange",function(d){return n.DH7(t.searchVo.date,d)||(t.searchVo.date=d),d}),n.k0s()()(),n.j41(14,"div",3)(15,"label",4),n.EFF(16,"Shift"),n.k0s(),n.j41(17,"div",4)(18,"nz-select",8),n.mxI("ngModelChange",function(d){return n.DH7(t.searchVo.shift,d)||(t.searchVo.shift=d),d}),n.DNE(19,mn,1,2,"nz-option",6),n.k0s()()(),n.j41(20,"div",3)(21,"label",4),n.EFF(22,"\xa0"),n.k0s(),n.j41(23,"div",4)(24,"button",9),n.bIt("click",function(){return t.onSearch()}),n.EFF(25," T\xecm ki\u1ebfm "),n.k0s(),n.j41(26,"button",10),n.bIt("click",function(){return t.openQACardModal(null)}),n.EFF(27," T\u1ea1o QA card "),n.k0s()()()()()(),n.nrm(28,"br"),n.j41(29,"dx-data-grid",11),n.nrm(30,"dxo-filter-row",12)(31,"dxo-column-fixing",13)(32,"dxi-column",14)(33,"dxi-column",15)(34,"dxi-column",16)(35,"dxi-column",17),n.DNE(36,_n,2,1,"div",18),n.nrm(37,"dxi-column",19)(38,"dxi-column",20),n.DNE(39,zn,5,0,"div",21),n.j41(40,"dxo-summary"),n.nrm(41,"dxi-total-item",22)(42,"dxi-total-item",23),n.k0s(),n.nrm(43,"dxo-paging",24)(44,"dxo-pager",25),n.k0s(),n.j41(45,"nz-modal",26),n.mxI("nzVisibleChange",function(d){return n.DH7(t.isOpenModalLoading,d)||(t.isOpenModalLoading=d),d}),n.DNE(46,Cn,3,0,"ng-container",27)(47,fn,1,0,"div",28),n.k0s(),n.j41(48,"nz-modal",29),n.mxI("nzVisibleChange",function(d){return n.DH7(t.isOpenQAModal,d)||(t.isOpenQAModal=d),d}),n.DNE(49,yn,43,21,"ng-container",27)(50,Fn,5,1,"div",28),n.k0s(),n.j41(51,"nz-modal",30),n.mxI("nzVisibleChange",function(d){return n.DH7(t.isOpenPrintQAModal,d)||(t.isOpenPrintQAModal=d),d}),n.DNE(52,On,22,15,"ng-container",27)(53,Vn,6,2,"div",28),n.k0s()),2&o&&(n.R7$(),n.Y8G("nzActive",!0)("nzShowArrow",!0),n.R7$(),n.Y8G("nzGutter",24),n.R7$(5),n.R50("ngModel",t.searchVo.line),n.Y8G("nzSize","large"),n.R7$(),n.Y8G("ngForOf",t.lines),n.R7$(5),n.Y8G("nzSize","large"),n.R50("ngModel",t.searchVo.date),n.R7$(5),n.R50("ngModel",t.searchVo.shift),n.Y8G("nzSize","large"),n.R7$(),n.Y8G("ngForOf",t.shifts),n.R7$(5),n.Y8G("nzSize","large"),n.R7$(2),n.Y8G("nzSize","large"),n.R7$(3),n.Y8G("dataSource",t.qaCards)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),n.R7$(),n.Y8G("visible",!0),n.R7$(),n.Y8G("enabled",!0),n.R7$(5),n.Y8G("dxTemplateOf","customerCodeTemplate"),n.R7$(3),n.Y8G("dxTemplateOf","statusTemplate"),n.R7$(4),n.Y8G("pageSize",10),n.R7$(),n.Y8G("showPageSizeSelector",!0)("allowedPageSizes",n.lJ4(31,an)),n.R7$(),n.R50("nzVisible",t.isOpenModalLoading),n.R7$(3),n.R50("nzVisible",t.isOpenQAModal),n.Y8G("nzTitle",t.isEditMode?"C\u1eadp nh\u1eadt QA Card":"T\u1ea1o m\u1edbi QA Card"),n.R7$(3),n.R50("nzVisible",t.isOpenPrintQAModal))},dependencies:[f.Sq,f.bT,r.me,r.BC,r.vS,v.Wk,y.s,_.Omo,_.nj_,_.FTx,_.sVQ,_.PVd,_.XvM,_.CWS,O.eC,i.Y,P.Uq,P.e,R.CP,R.SO,R.aj,R.kt,A.Sy,b.ld,b.WI,F.F2,F.Oj,F.A9,M.aO,N.c,B.p,T.Vz,T.pc,V.SN,L.a,w.Dn,X.G,on.c,en.U5,en.Dq,f.vh],styles:["nz-select[_ngcontent-%COMP%], nz-date-picker[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}nz-table[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;padding:5px}.qa-card-label[_ngcontent-%COMP%]{width:250px;vertical-align:middle}.qa-card-label[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:2px solid black;border-collapse:collapse}.qa-card-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}"]})}return a})(),Tn=(()=>{class a{constructor(){}ngOnInit(){}static#n=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-vr-enc-p-r-return"]],decls:2,vars:0,template:function(o,t){1&o&&(n.j41(0,"p"),n.EFF(1,"vr-enc-p-r-return works!"),n.k0s())}})}return a})();var Sn=l(92887),Dn=l(71451),jn=l(2578);const An=()=>[10,25,50,100];function xn(a,u){if(1&a&&n.nrm(0,"nz-option",28),2&a){const e=u.$implicit;n.Y8G("nzValue",e.name)("nzLabel",e.name)}}const In=[{path:"menu",component:c},{path:"insert",component:nn},{path:"qa-card",component:kn},{path:"traceability",component:(()=>{class a{constructor(e,o){this.toastr=e,this.vrEncPRSvc=o,this.searchVo={fromDate:new Date,toDate:new Date,line:null},this.date=[new Date,new Date]}ngOnInit(){this.getLines(2)}getLines(e){this.vrEncPRSvc.getLines(e).subscribe(o=>{this.lines=o,console.log("Lines: ",this.lines)})}onSearch(){console.log(this.searchVo),this.vrEncPRSvc.traceability(this.searchVo).subscribe(e=>{this.records=e})}onChangeTime(e){this.searchVo.fromDate=e[0],this.searchVo.toDate=e[1]}onExportClient(e){const o=new Sn.Workbook,t=o.addWorksheet("Main sheet");(0,Dn.V)({component:e.component,worksheet:t}).then(function(){o.xlsx.writeBuffer().then(function(s){jn(new Blob([s],{type:"application/octet-stream"}),"VR-Process-Records.xlsx")})})}static#n=this.\u0275fac=function(o){return new(o||a)(n.rXU(x.tw),n.rXU(I))};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-vr-enc-p-r-traceability"]],decls:42,vars:20,consts:[["nzHeader","T\xecm ki\u1ebfm",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","5"],["nzXs","24","nzSm","24","nzLg","24"],["nzPlaceHolder","Line",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFormat","yyyy-MM-dd","nzMode","date",3,"ngModelChange","ngModel"],["nz-col","","nzXs","12","nzSm","12","nzLg","14"],["nz-button","","nzType","primary",3,"click"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],[3,"visible"],["dataField","ppn","caption","Model"],["dataField","cpn","caption","Part No"],["dataField","clotno","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","Line"],["dataField","shift","caption","Shift"],["dataField","processName","caption","Process Name"],["dataField","plotno","caption","QA Card"],["dataField","employee","caption","Employee"],["dataField","username","caption","Username"],["dataField","createdAt","dataType","date","caption","Created At","format","yyyy-MM-dd HH:mm"],["dataField","remark","caption","Remark"],["column","lotNo","summaryType","count"],["column","qty","summaryType","sum","valueFormat","#,##0"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],[3,"nzValue","nzLabel"]],template:function(o,t){1&o&&(n.j41(0,"nz-collapse")(1,"nz-collapse-panel",0)(2,"div",1)(3,"div",2)(4,"label",3),n.EFF(5,"Line"),n.k0s(),n.j41(6,"div",3)(7,"nz-select",4),n.mxI("ngModelChange",function(d){return n.DH7(t.searchVo.line,d)||(t.searchVo.line=d),d}),n.DNE(8,xn,1,2,"nz-option",5),n.k0s()()(),n.j41(9,"div",2)(10,"label",3),n.EFF(11,"Date"),n.k0s(),n.j41(12,"div",3)(13,"nz-range-picker",6),n.mxI("ngModelChange",function(d){return n.DH7(t.date,d)||(t.date=d),d}),n.bIt("ngModelChange",function(d){return t.onChangeTime(d)}),n.k0s()()(),n.j41(14,"div",7)(15,"label",3),n.EFF(16,"\xa0"),n.k0s(),n.j41(17,"div",3)(18,"button",8),n.bIt("click",function(){return t.onSearch()}),n.EFF(19,"Search"),n.k0s()()()()()(),n.nrm(20,"br"),n.j41(21,"dx-data-grid",9),n.bIt("onExporting",function(d){return t.onExportClient(d)}),n.nrm(22,"dxo-export",10)(23,"dxo-filter-row",11)(24,"dxo-column-fixing",10)(25,"dxi-column",12)(26,"dxi-column",13)(27,"dxi-column",14)(28,"dxi-column",15)(29,"dxi-column",16)(30,"dxi-column",17)(31,"dxi-column",18)(32,"dxi-column",19)(33,"dxi-column",20)(34,"dxi-column",21)(35,"dxi-column",22)(36,"dxi-column",23),n.j41(37,"dxo-summary"),n.nrm(38,"dxi-total-item",24)(39,"dxi-total-item",25),n.k0s(),n.nrm(40,"dxo-paging",26)(41,"dxo-pager",27),n.k0s()),2&o&&(n.R7$(),n.Y8G("nzActive",!0)("nzShowArrow",!0),n.R7$(),n.Y8G("nzGutter",24),n.R7$(5),n.R50("ngModel",t.searchVo.line),n.R7$(),n.Y8G("ngForOf",t.lines),n.R7$(5),n.R50("ngModel",t.date),n.R7$(8),n.Y8G("dataSource",t.records)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),n.R7$(),n.Y8G("enabled",!0),n.R7$(),n.Y8G("visible",!0),n.R7$(),n.Y8G("enabled",!0),n.R7$(16),n.Y8G("pageSize",10),n.R7$(),n.Y8G("showPageSizeSelector",!0)("allowedPageSizes",n.lJ4(19,An)))},dependencies:[f.Sq,r.BC,r.vS,y.s,_.Omo,_.nj_,_.ZJU,_.FTx,_.sVQ,_.PVd,_.XvM,_.CWS,P.Uq,P.e,b.ld,b.WI,M.aO,N.c,B.p,T.Vz,T.pc,V.SN,V.vw],styles:["nz-select[_ngcontent-%COMP%]{width:100%}"]})}return a})()},{path:"return",component:Tn}];let Nn=(()=>{class a{static#n=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=n.$C({type:a});static#t=this.\u0275inj=n.G2t({imports:[v.iI.forChild(In),v.iI]})}return a})();var Bn=l(53606);let Ln=(()=>{class a{static#n=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=n.$C({type:a});static#t=this.\u0275inj=n.G2t({imports:[f.MD,r.YN,Nn,y.N,j.EJ,i.$,P.f3,R.$G,A.j,b.DH,F.U6,G.g9,M.Zw,T.GB,V.LE,L.V,w.Y3,Bn.t,X.j,on.f,en.pc]})}return a})()},74696:(tn,Q,l)=>{l.d(Q,{GB:()=>H,Vz:()=>U,pc:()=>N});var f=l(15215),r=l(54438),L=l(73586),y=l(7605),i=l(58728),j=l(40713),M=l(16042),T=l(57806),V=l(21025),P=l(70317),A=l(72544),F=l(28203),G=l(26841);const b=["*"],R=["collapseHeader"];function v(m,k){if(1&m&&(r.qex(0),r.nrm(1,"span",7),r.bVm()),2&m){const h=k.$implicit,g=r.XpG(2);r.R7$(),r.Y8G("nzType",h||"right")("nzRotate",g.nzActive?90:0)}}function n(m,k){if(1&m&&(r.j41(0,"div"),r.DNE(1,v,2,2,"ng-container",3),r.k0s()),2&m){const h=r.XpG();r.R7$(),r.Y8G("nzStringTemplateOutlet",h.nzExpandedIcon)}}function x(m,k){if(1&m&&(r.qex(0),r.EFF(1),r.bVm()),2&m){const h=r.XpG();r.R7$(),r.JRh(h.nzHeader)}}function $(m,k){if(1&m&&(r.qex(0),r.EFF(1),r.bVm()),2&m){const h=r.XpG(2);r.R7$(),r.JRh(h.nzExtra)}}function Y(m,k){if(1&m&&(r.j41(0,"div",4),r.DNE(1,$,2,1,"ng-container",3),r.k0s()),2&m){const h=r.XpG();r.R7$(),r.Y8G("nzStringTemplateOutlet",h.nzExtra)}}const I="collapse";let N=(()=>{class m{constructor(h,g,z,S){this.nzConfigService=h,this.cdr=g,this.directionality=z,this.destroy$=S,this._nzModuleName=I,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(I).pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,y.Q)(this.destroy$)).subscribe(h=>{this.dir=h,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(h){this.listOfNzCollapsePanelComponent.push(h)}removePanel(h){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(h),1)}click(h){this.nzAccordion&&!h.nzActive&&this.listOfNzCollapsePanelComponent.filter(g=>g!==h).forEach(g=>{g.nzActive&&(g.nzActive=!1,g.nzActiveChange.emit(g.nzActive),g.markForCheck())}),h.nzActive=!h.nzActive,h.nzActiveChange.emit(h.nzActive)}static#n=this.\u0275fac=function(g){return new(g||m)(r.rXU(M.yx),r.rXU(r.gRc),r.rXU(F.dS,8),r.rXU(V.y4))};static#e=this.\u0275cmp=r.VBU({type:m,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(g,z){2&g&&r.AVh("ant-collapse-icon-position-start","left"===z.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===z.nzExpandIconPosition)("ant-collapse-ghost",z.nzGhost)("ant-collapse-borderless",!z.nzBordered)("ant-collapse-rtl","rtl"===z.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[r.Jv_([V.y4]),r.aNF],ngContentSelectors:b,decls:1,vars:0,template:function(g,z){1&g&&(r.NAR(),r.SdG(0))},encapsulation:2,changeDetection:0})}return(0,f.Cg)([(0,M.H4)(),(0,P.H3)()],m.prototype,"nzAccordion",void 0),(0,f.Cg)([(0,M.H4)(),(0,P.H3)()],m.prototype,"nzBordered",void 0),(0,f.Cg)([(0,M.H4)(),(0,P.H3)()],m.prototype,"nzGhost",void 0),m})();const B="collapsePanel";let U=(()=>{class m{markForCheck(){this.cdr.markForCheck()}constructor(h,g,z,S,q,W){this.nzConfigService=h,this.ngZone=g,this.cdr=z,this.destroy$=S,this.nzCollapseComponent=q,this.noAnimation=W,this._nzModuleName=B,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new r.bkB,this.nzConfigService.getConfigChangeEventForComponent(B).pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,L.R)(this.collapseHeader.nativeElement,"click").pipe((0,i.p)(()=>!this.nzDisabled),(0,y.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#n=this.\u0275fac=function(g){return new(g||m)(r.rXU(M.yx),r.rXU(r.SKi),r.rXU(r.gRc),r.rXU(V.y4),r.rXU(N,1),r.rXU(G.z,8))};static#e=this.\u0275cmp=r.VBU({type:m,selectors:[["nz-collapse-panel"]],viewQuery:function(g,z){if(1&g&&r.GBs(R,7),2&g){let S;r.mGM(S=r.lsd())&&(z.collapseHeader=S.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(g,z){2&g&&r.AVh("ant-collapse-no-arrow",!z.nzShowArrow)("ant-collapse-item-active",z.nzActive)("ant-collapse-item-disabled",z.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[r.Jv_([V.y4]),r.aNF],ngContentSelectors:b,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(g,z){1&g&&(r.NAR(),r.j41(0,"div",1,0),r.DNE(2,n,2,1,"div"),r.j41(3,"span",2),r.DNE(4,x,2,1,"ng-container",3),r.k0s(),r.DNE(5,Y,2,1,"div",4),r.k0s(),r.j41(6,"div",5)(7,"div",6),r.SdG(8),r.k0s()()),2&g&&(r.BMQ("aria-expanded",z.nzActive),r.R7$(2),r.vxM(2,z.nzShowArrow?2:-1),r.R7$(2),r.Y8G("nzStringTemplateOutlet",z.nzHeader),r.R7$(),r.vxM(5,z.nzExtra?5:-1),r.R7$(),r.AVh("ant-collapse-content-active",z.nzActive),r.Y8G("@.disabled",!(null==z.noAnimation||!z.noAnimation.nzNoAnimation))("@collapseMotion",z.nzActive?"expanded":"hidden"))},dependencies:[T.C,T.m,A.Y3,A.Dn],encapsulation:2,data:{animation:[j.GE]},changeDetection:0})}return(0,f.Cg)([(0,P.H3)()],m.prototype,"nzActive",void 0),(0,f.Cg)([(0,P.H3)()],m.prototype,"nzDisabled",void 0),(0,f.Cg)([(0,M.H4)(),(0,P.H3)()],m.prototype,"nzShowArrow",void 0),m})(),H=(()=>{class m{static#n=this.\u0275fac=function(g){return new(g||m)};static#e=this.\u0275mod=r.$C({type:m});static#t=this.\u0275inj=r.G2t({imports:[U]})}return m})()},72874:(tn,Q,l)=>{l.d(Q,{PV:()=>Z,g9:()=>nn});var f=l(15215),r=l(10851),L=l(32753),y=l(60177),i=l(54438),j=l(45286),M=l(7605),T=l(84046),V=l(77312),P=l(50513),A=l(40713),F=l(16042),G=l(26841),b=l(57806),R=l(65463),v=l(70317),n=l(89450),x=l(72544),$=l(35154),Y=l(28203),I=l(16389),N=l(25930);const B=["okBtn"],U=["cancelBtn"];function H(p,D){1&p&&(i.j41(0,"div",6),i.nrm(1,"span",14),i.k0s())}function m(p,D){if(1&p&&(i.qex(0),i.j41(1,"span",16),i.nrm(2,"span",17),i.k0s(),i.bVm()),2&p){const c=D.$implicit;i.R7$(2),i.Y8G("nzType",c||"exclamation-circle")}}function k(p,D){if(1&p&&(i.qex(0),i.DNE(1,m,3,1,"ng-container",10),i.j41(2,"div",15),i.EFF(3),i.k0s(),i.bVm()),2&p){const c=i.XpG(2);i.R7$(),i.Y8G("nzStringTemplateOutlet",c.nzIcon),i.R7$(2),i.JRh(c.nzTitle)}}function h(p,D){if(1&p&&i.EFF(0),2&p){const c=i.XpG(2);i.SpI(" ",c.nzCancelText," ")}}function g(p,D){1&p&&(i.EFF(0),i.nI1(1,"nzI18n")),2&p&&i.SpI(" ",i.bMT(1,1,"Modal.cancelText")," ")}function z(p,D){if(1&p&&i.EFF(0),2&p){const c=i.XpG(2);i.SpI(" ",c.nzOkText," ")}}function S(p,D){1&p&&(i.EFF(0),i.nI1(1,"nzI18n")),2&p&&i.SpI(" ",i.bMT(1,1,"Modal.okText")," ")}function q(p,D){if(1&p){const c=i.RV6();i.j41(0,"div",4)(1,"div",5),i.DNE(2,H,2,0,"div",6),i.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),i.DNE(7,k,4,2,"ng-container",10),i.k0s(),i.j41(8,"div",11)(9,"button",12,1),i.bIt("click",function(){i.eBV(c);const _=i.XpG();return i.Njj(_.onCancel())}),i.DNE(11,h,1,1)(12,g,2,3),i.k0s(),i.j41(13,"button",13,2),i.bIt("click",function(){i.eBV(c);const _=i.XpG();return i.Njj(_.onConfirm())}),i.DNE(15,z,1,1)(16,S,2,3),i.k0s()()()()()()()}if(2&p){const c=i.XpG();i.AVh("ant-popover-rtl","rtl"===c.dir),i.Y8G("cdkTrapFocusAutoCapture",null!==c.nzAutoFocus)("ngClass",c._classMap)("ngStyle",c.nzOverlayStyle)("@.disabled",!(null==c.noAnimation||!c.noAnimation.nzNoAnimation))("nzNoAnimation",null==c.noAnimation?null:c.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),i.R7$(2),i.vxM(2,c.nzPopconfirmShowArrow?2:-1),i.R7$(5),i.Y8G("nzStringTemplateOutlet",c.nzTitle),i.R7$(2),i.Y8G("nzSize","small"),i.BMQ("cdkFocusInitial","cancel"===c.nzAutoFocus||null),i.R7$(2),i.vxM(11,c.nzCancelText?11:12),i.R7$(2),i.Y8G("nzSize","small")("nzType","danger"!==c.nzOkType?c.nzOkType:"primary")("nzDanger",c.nzOkDanger||"danger"===c.nzOkType)("nzLoading",c.confirmLoading)("disabled",c.nzOkDisabled),i.BMQ("cdkFocusInitial","ok"===c.nzAutoFocus||null),i.R7$(2),i.vxM(15,c.nzOkText?15:16)}}let Z=(()=>{class p extends $.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(K),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new i.bkB,this.nzOnCancel=new i.bkB,this.nzOnConfirm=new i.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,M.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,M.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#n=this.\u0275fac=function(C){return new(C||p)};static#e=this.\u0275dir=i.FsC({type:p,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(C,_){2&C&&i.AVh("ant-popover-open",_.visible)},inputs:{arrowPointAtCenter:[i.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[i.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[i.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[i.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[i.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[i.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[i.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[i.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[i.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[i.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[i.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[i.Vt3]})}return(0,f.Cg)([(0,v.H3)()],p.prototype,"arrowPointAtCenter",void 0),(0,f.Cg)([(0,v.H3)()],p.prototype,"nzOkDisabled",void 0),(0,f.Cg)([(0,v.H3)()],p.prototype,"nzOkDanger",void 0),(0,f.Cg)([(0,v.H3)()],p.prototype,"nzCondition",void 0),(0,f.Cg)([(0,v.H3)()],p.prototype,"nzPopconfirmShowArrow",void 0),(0,f.Cg)([(0,F.H4)()],p.prototype,"nzPopconfirmBackdrop",void 0),(0,f.Cg)([(0,F.H4)()],p.prototype,"nzAutofocus",void 0),p})(),K=(()=>{class p extends $.VJ{constructor(c,C,_,O,w){super(c,_,w),this.elementRef=C,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new j.B7,this.nzOnConfirm=new j.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=O}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const c=(0,v.cG)(this.nzBeforeConfirm()).pipe((0,T.$)());this.confirmLoading=!0,c.pipe((0,V.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,M.Q)(this.nzVisibleChange),(0,M.Q)(this.destroy$)).subscribe(C=>{C&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const c=this.elementFocusedBeforeModalWasOpened;if(c&&"function"==typeof c.focus){const C=this.document.activeElement,_=this.elementRef.nativeElement;(!C||C===this.document.body||C===_||_.contains(C))&&c.focus()}}static#n=this.\u0275fac=function(C){return new(C||p)(i.rXU(i.gRc),i.rXU(i.aKT),i.rXU(Y.dS,8),i.rXU(y.qQ,8),i.rXU(G.z,9))};static#e=this.\u0275cmp=i.VBU({type:p,selectors:[["nz-popconfirm"]],viewQuery:function(C,_){if(1&C&&(i.GBs(B,5,i.aKT),i.GBs(U,5,i.aKT)),2&C){let O;i.mGM(O=i.lsd())&&(_.okBtn=O),i.mGM(O=i.lsd())&&(_.cancelBtn=O)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[i.Vt3,i.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(C,_){if(1&C){const O=i.RV6();i.DNE(0,q,17,20,"ng-template",3,0,i.C5r),i.bIt("overlayOutsideClick",function(X){return i.eBV(O),i.Njj(_.onClickOutside(X))})("detach",function(){return i.eBV(O),i.Njj(_.hide())})("positionChange",function(X){return i.eBV(O),i.Njj(_.onPositionChange(X))})}2&C&&i.Y8G("cdkConnectedOverlayHasBackdrop",_.nzBackdrop)("cdkConnectedOverlayOrigin",_.origin)("cdkConnectedOverlayPositions",_._positions)("cdkConnectedOverlayOpen",_._visible)("cdkConnectedOverlayPush",_.cdkConnectedOverlayPush)("nzArrowPointAtCenter",_.nzArrowPointAtCenter)},dependencies:[L.z_,L.WB,R.$_,R.vT,r.Pd,r.kB,y.YU,y.B3,G.z,b.C,b.m,x.Y3,x.Dn,P.Zw,P.aO,I.c,N.p,n.bP,n.Vc],encapsulation:2,data:{animation:[A.uX]},changeDetection:0})}return p})(),nn=(()=>{class p{static#n=this.\u0275fac=function(C){return new(C||p)};static#e=this.\u0275mod=i.$C({type:p});static#t=this.\u0275inj=i.G2t({imports:[K]})}return p})()}}]);