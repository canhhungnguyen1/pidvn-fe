"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[3606],{53606:(nt,L,g)=>{g.d(L,{m:()=>y,t:()=>tt});var F=g(60177),c=g(54438),T=g(45286),U=g(7605),B=g(50513),D=g(72544),O=g(66646),b=g(89450),v=g(16389);const S=["canvas"];function x(r,E){1&r&&c.nrm(0,"nz-spin")}function k(r,E){if(1&r){const l=c.RV6();c.j41(0,"div")(1,"p",2),c.EFF(2),c.k0s(),c.j41(3,"button",3),c.bIt("click",function(){c.eBV(l);const d=c.XpG(2);return c.Njj(d.reloadQRCode())}),c.nrm(4,"span",4),c.j41(5,"span"),c.EFF(6),c.k0s()()()}if(2&r){const l=c.XpG(2);c.R7$(2),c.JRh(l.locale.expired),c.R7$(4),c.JRh(l.locale.refresh)}}function K(r,E){if(1&r&&(c.j41(0,"div",1),c.DNE(1,x,1,0)(2,k,7,2),c.k0s()),2&r){let l;const a=c.XpG();c.R7$(),c.vxM(1,"loading"===(l=a.nzStatus)?1:"expired"===l?2:-1)}}function V(r,E){1&r&&c.nrm(0,"canvas",null,0)}var _,r;(function(r){let E=(()=>{class s{static encodeText(t,e){const n=r.QrSegment.makeSegments(t);return s.encodeSegments(n,e)}static encodeBinary(t,e){const n=r.QrSegment.makeBytes(t);return s.encodeSegments([n],e)}static encodeSegments(t,e,n=1,i=40,o=-1,u=!0){if(!(s.MIN_VERSION<=n&&n<=i&&i<=s.MAX_VERSION)||o<-1||o>7)throw new RangeError("Invalid value");let h,C;for(h=n;;h++){const m=8*s.getNumDataCodewords(h,e),M=R.getTotalBits(t,h);if(M<=m){C=M;break}if(h>=i)throw new RangeError("Data too long")}for(const m of[s.Ecc.MEDIUM,s.Ecc.QUARTILE,s.Ecc.HIGH])u&&C<=8*s.getNumDataCodewords(h,m)&&(e=m);let f=[];for(const m of t){l(m.mode.modeBits,4,f),l(m.numChars,m.mode.numCharCountBits(h),f);for(const M of m.getData())f.push(M)}d(f.length==C);const N=8*s.getNumDataCodewords(h,e);d(f.length<=N),l(0,Math.min(4,N-f.length),f),l(0,(8-f.length%8)%8,f),d(f.length%8==0);for(let m=236;f.length<N;m^=253)l(m,8,f);let z=[];for(;8*z.length<f.length;)z.push(0);return f.forEach((m,M)=>z[M>>>3]|=m<<7-(7&M)),new s(h,e,z,o)}constructor(t,e,n,i){if(this.version=t,this.errorCorrectionLevel=e,this.modules=[],this.isFunction=[],t<s.MIN_VERSION||t>s.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*t+17;let o=[];for(let h=0;h<this.size;h++)o.push(!1);for(let h=0;h<this.size;h++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const u=this.addEccAndInterleave(n);if(this.drawCodewords(u),-1==i){let h=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const f=this.getPenaltyScore();f<h&&(i=C,h=f),this.applyMask(C)}}d(i>=0&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}getModule(t,e){return t>=0&&t<this.size&&e>=0&&e<this.size&&this.modules[e][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),e=t.length;for(let n=0;n<e;n++)for(let i=0;i<e;i++)0==n&&0==i||0==n&&i==e-1||n==e-1&&0==i||this.drawAlignmentPattern(t[n],t[i]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const e=this.errorCorrectionLevel.formatBits<<3|t;let n=e;for(let o=0;o<10;o++)n=n<<1^1335*(n>>>9);const i=21522^(e<<10|n);d(i>>>15==0);for(let o=0;o<=5;o++)this.setFunctionModule(8,o,a(i,o));this.setFunctionModule(8,7,a(i,6)),this.setFunctionModule(8,8,a(i,7)),this.setFunctionModule(7,8,a(i,8));for(let o=9;o<15;o++)this.setFunctionModule(14-o,8,a(i,o));for(let o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,a(i,o));for(let o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,a(i,o));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let n=0;n<12;n++)t=t<<1^7973*(t>>>11);const e=this.version<<12|t;d(e>>>18==0);for(let n=0;n<18;n++){const i=a(e,n),o=this.size-11+n%3,u=Math.floor(n/3);this.setFunctionModule(o,u,i),this.setFunctionModule(u,o,i)}}drawFinderPattern(t,e){for(let n=-4;n<=4;n++)for(let i=-4;i<=4;i++){const o=Math.max(Math.abs(i),Math.abs(n)),u=t+i,h=e+n;u>=0&&u<this.size&&h>=0&&h<this.size&&this.setFunctionModule(u,h,2!=o&&4!=o)}}drawAlignmentPattern(t,e){for(let n=-2;n<=2;n++)for(let i=-2;i<=2;i++)this.setFunctionModule(t+i,e+n,1!=Math.max(Math.abs(i),Math.abs(n)))}setFunctionModule(t,e,n){this.modules[e][t]=n,this.isFunction[e][t]=!0}addEccAndInterleave(t){const e=this.version,n=this.errorCorrectionLevel;if(t.length!=s.getNumDataCodewords(e,n))throw new RangeError("Invalid argument");const i=s.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e],o=s.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e],u=Math.floor(s.getNumRawDataModules(e)/8),h=i-u%i,C=Math.floor(u/i);let f=[];const N=s.reedSolomonComputeDivisor(o);for(let m=0,M=0;m<i;m++){let A=t.slice(M,M+C-o+(m<h?0:1));M+=A.length;const et=s.reedSolomonComputeRemainder(A,N);m<h&&A.push(0),f.push(A.concat(et))}let z=[];for(let m=0;m<f[0].length;m++)f.forEach((M,A)=>{(m!=C-o||A>=h)&&z.push(M[m])});return d(z.length==u),z}drawCodewords(t){if(t.length!=Math.floor(s.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let e=0;for(let n=this.size-1;n>=1;n-=2){6==n&&(n=5);for(let i=0;i<this.size;i++)for(let o=0;o<2;o++){const u=n-o,C=n+1&2?i:this.size-1-i;!this.isFunction[C][u]&&e<8*t.length&&(this.modules[C][u]=a(t[e>>>3],7-(7&e)),e++)}}d(e==8*t.length)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let e=0;e<this.size;e++)for(let n=0;n<this.size;n++){let i;switch(t){case 0:i=(n+e)%2==0;break;case 1:i=e%2==0;break;case 2:i=n%3==0;break;case 3:i=(n+e)%3==0;break;case 4:i=(Math.floor(n/3)+Math.floor(e/2))%2==0;break;case 5:i=n*e%2+n*e%3==0;break;case 6:i=(n*e%2+n*e%3)%2==0;break;case 7:i=((n+e)%2+n*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][n]&&i&&(this.modules[e][n]=!this.modules[e][n])}}getPenaltyScore(){let t=0;for(let o=0;o<this.size;o++){let u=!1,h=0,C=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[o][f]==u?(h++,5==h?t+=s.PENALTY_N1:h>5&&t++):(this.finderPenaltyAddHistory(h,C),u||(t+=this.finderPenaltyCountPatterns(C)*s.PENALTY_N3),u=this.modules[o][f],h=1);t+=this.finderPenaltyTerminateAndCount(u,h,C)*s.PENALTY_N3}for(let o=0;o<this.size;o++){let u=!1,h=0,C=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[f][o]==u?(h++,5==h?t+=s.PENALTY_N1:h>5&&t++):(this.finderPenaltyAddHistory(h,C),u||(t+=this.finderPenaltyCountPatterns(C)*s.PENALTY_N3),u=this.modules[f][o],h=1);t+=this.finderPenaltyTerminateAndCount(u,h,C)*s.PENALTY_N3}for(let o=0;o<this.size-1;o++)for(let u=0;u<this.size-1;u++){const h=this.modules[o][u];h==this.modules[o][u+1]&&h==this.modules[o+1][u]&&h==this.modules[o+1][u+1]&&(t+=s.PENALTY_N2)}let e=0;for(const o of this.modules)e=o.reduce((u,h)=>u+(h?1:0),e);const n=this.size*this.size,i=Math.ceil(Math.abs(20*e-10*n)/n)-1;return d(i>=0&&i<=9),t+=i*s.PENALTY_N4,d(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(1==this.version)return[];{const t=Math.floor(this.version/7)+2,e=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*t-2));let n=[6];for(let i=this.size-7;n.length<t;i-=e)n.splice(1,0,i);return n}}static getNumRawDataModules(t){if(t<s.MIN_VERSION||t>s.MAX_VERSION)throw new RangeError("Version number out of range");let e=(16*t+128)*t+64;if(t>=2){const n=Math.floor(t/7)+2;e-=(25*n-10)*n-55,t>=7&&(e-=36)}return d(e>=208&&e<=29648),e}static getNumDataCodewords(t,e){return Math.floor(s.getNumRawDataModules(t)/8)-s.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*s.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let e=[];for(let i=0;i<t-1;i++)e.push(0);e.push(1);let n=1;for(let i=0;i<t;i++){for(let o=0;o<e.length;o++)e[o]=s.reedSolomonMultiply(e[o],n),o+1<e.length&&(e[o]^=e[o+1]);n=s.reedSolomonMultiply(n,2)}return e}static reedSolomonComputeRemainder(t,e){let n=e.map(i=>0);for(const i of t){const o=i^n.shift();n.push(0),e.forEach((u,h)=>n[h]^=s.reedSolomonMultiply(u,o))}return n}static reedSolomonMultiply(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");let n=0;for(let i=7;i>=0;i--)n=n<<1^285*(n>>>7),n^=(e>>>i&1)*t;return d(n>>>8==0),n}finderPenaltyCountPatterns(t){const e=t[1];d(e<=3*this.size);const n=e>0&&t[2]==e&&t[3]==3*e&&t[4]==e&&t[5]==e;return(n&&t[0]>=4*e&&t[6]>=e?1:0)+(n&&t[6]>=4*e&&t[0]>=e?1:0)}finderPenaltyTerminateAndCount(t,e,n){return t&&(this.finderPenaltyAddHistory(e,n),e=0),this.finderPenaltyAddHistory(e+=this.size,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(t,e){0==e[0]&&(t+=this.size),e.pop(),e.unshift(t)}static#t=this.MIN_VERSION=1;static#e=this.MAX_VERSION=40;static#n=this.PENALTY_N1=3;static#i=this.PENALTY_N2=3;static#s=this.PENALTY_N3=40;static#o=this.PENALTY_N4=10;static#r=this.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]];static#a=this.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}return s})();function l(s,w,t){if(w<0||w>31||s>>>w)throw new RangeError("Value out of range");for(let e=w-1;e>=0;e--)t.push(s>>>e&1)}function a(s,w){return!!(s>>>w&1)}function d(s){if(!s)throw new Error("Assertion error")}r.QrCode=E;let R=(()=>{class s{static makeBytes(t){let e=[];for(const n of t)l(n,8,e);return new s(s.Mode.BYTE,t.length,e)}static makeNumeric(t){if(!s.isNumeric(t))throw new RangeError("String contains non-numeric characters");let e=[];for(let n=0;n<t.length;){const i=Math.min(t.length-n,3);l(parseInt(t.substring(n,n+i),10),3*i+1,e),n+=i}return new s(s.Mode.NUMERIC,t.length,e)}static makeAlphanumeric(t){if(!s.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n,e=[];for(n=0;n+2<=t.length;n+=2){let i=45*s.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));i+=s.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),l(i,11,e)}return n<t.length&&l(s.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,e),new s(s.Mode.ALPHANUMERIC,t.length,e)}static makeSegments(t){return""==t?[]:s.isNumeric(t)?[s.makeNumeric(t)]:s.isAlphanumeric(t)?[s.makeAlphanumeric(t)]:[s.makeBytes(s.toUtf8ByteArray(t))]}static makeEci(t){let e=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)l(t,8,e);else if(t<16384)l(2,2,e),l(t,14,e);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");l(6,3,e),l(t,21,e)}return new s(s.Mode.ECI,0,e)}static isNumeric(t){return s.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return s.ALPHANUMERIC_REGEX.test(t)}constructor(t,e,n){if(this.mode=t,this.numChars=e,this.bitData=n,e<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,e){let n=0;for(const i of t){const o=i.mode.numCharCountBits(e);if(i.numChars>=1<<o)return 1/0;n+=4+o+i.bitData.length}return n}static toUtf8ByteArray(t){t=encodeURI(t);let e=[];for(let n=0;n<t.length;n++)"%"!=t.charAt(n)?e.push(t.charCodeAt(n)):(e.push(parseInt(t.substring(n+1,n+3),16)),n+=2);return e}static#t=this.NUMERIC_REGEX=/^[0-9]*$/;static#e=this.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/;static#n=this.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}return s})();r.QrSegment=R})(_||(_={})),function(l){class a{static#t=this.LOW=new a(0,1);static#e=this.MEDIUM=new a(1,0);static#n=this.QUARTILE=new a(2,3);static#i=this.HIGH=new a(3,2);constructor(R,s){this.ordinal=R,this.formatBits=s}}l.Ecc=a}((r=_||(_={})).QrCode||(r.QrCode={})),function(r){!function(l){class a{static#t=this.NUMERIC=new a(1,[10,12,14]);static#e=this.ALPHANUMERIC=new a(2,[9,11,13]);static#n=this.BYTE=new a(4,[8,16,16]);static#i=this.KANJI=new a(8,[8,10,12]);static#s=this.ECI=new a(7,[0,0,0]);constructor(R,s){this.modeBits=R,this.numBitsCharCount=s}numCharCountBits(R){return this.numBitsCharCount[Math.floor((R+7)/17)]}}l.Mode=a}(r.QrSegment||(r.QrSegment={}))}(_||(_={}));var p=_;const X={L:p.QrCode.Ecc.LOW,M:p.QrCode.Ecc.MEDIUM,Q:p.QrCode.Ecc.QUARTILE,H:p.QrCode.Ecc.HIGH};function P(r,E,l,a,d,R){for(let s=0;s<E.size;s++)for(let w=0;w<E.size;w++)r.fillStyle=E.getModule(w,s)?R:d,r.fillRect(a[3]+w*l,a[0]+s*l,l,l)}function I(r,E,l,a,d){r.fillStyle=d,r.fillRect(0,0,E*a,l*a)}let y=(()=>{class r{constructor(l,a,d,R){this.i18n=l,this.el=a,this.cdr=d,this.platformId=R,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new c.bkB,this.isBrowser=!0,this.destroy$=new T.B7,this.isBrowser=(0,F.UE)(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe((0,U.Q)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(l){const{nzValue:a,nzIcon:d,nzLevel:R,nzSize:s,nzIconSize:w,nzColor:t,nzPadding:e,nzBgColor:n}=l;(a||d||R||s||w||t||e||n)&&this.canvas&&this.drawCanvasQRCode(),n&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&function q(r,E,l=160,a=10,d=10,R="#000000",s="#FFFFFF",w=40,t){const e=r.getContext("2d"),n=function Q(r){return Array.isArray(r)?Array(4).fill(0).map((E,l)=>r[l%r.length]):[r,r,r,r]}(d);if(r.style.width=`${l}px`,r.style.height=`${l}px`,!E)return e.fillStyle="rgba(0, 0, 0, 0)",void e.fillRect(0,0,r.width,r.height);if(r.width=E.size*a+n[1]+n[3],r.height=E.size*a+n[0]+n[2],t){const i=new Image;i.src=t,i.crossOrigin="anonymous",i.width=w*(r.width/l),i.height=w*(r.width/l),i.onload=()=>{I(e,r.width,r.height,a,s),P(e,E,a,n,s,R);const o=r.width/2-w*(r.width/l)/2;e.fillRect(o,o,w*(r.width/l),w*(r.width/l)),e.drawImage(i,o,o,w*(r.width/l),w*(r.width/l))},i.onerror=()=>{I(e,r.width,r.height,a,s),P(e,E,a,n,s,R)}}else I(e,r.width,r.height,a,s),P(e,E,a,n,s,R)}(this.canvas.nativeElement,((r,E="M")=>r?p.QrCode.encodeText(r,X[E]):null)(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(a){return new(a||r)(c.rXU(b.Og),c.rXU(c.aKT),c.rXU(c.gRc),c.rXU(c.Agw))};static#e=this.\u0275cmp=c.VBU({type:r,selectors:[["nz-qrcode"]],viewQuery:function(a,d){if(1&a&&c.GBs(S,5),2&a){let R;c.mGM(R=c.lsd())&&(d.canvas=R.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(a,d){2&a&&c.AVh("ant-qrcode-border",d.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:"nzSize",nzIcon:"nzIcon",nzIconSize:"nzIconSize",nzBordered:"nzBordered",nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],standalone:!0,features:[c.OA$,c.aNF],decls:2,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"]],template:function(a,d){1&a&&c.DNE(0,K,3,1,"div",1)(1,V,2,0,"canvas"),2&a&&(c.vxM(0,"active"!==d.nzStatus?0:-1),c.R7$(),c.vxM(1,d.isBrowser?1:-1))},dependencies:[O.V,O.a,B.Zw,B.aO,v.c,D.Y3,D.Dn],encapsulation:2,changeDetection:0})}return r})(),tt=(()=>{class r{static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275mod=c.$C({type:r});static#n=this.\u0275inj=c.G2t({imports:[y]})}return r})()}}]);