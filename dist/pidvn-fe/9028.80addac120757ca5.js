"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[9028],{69028:(Ua,aa,B)=>{B.d(aa,{M:()=>fr,t:()=>mr});var Ye=B(54438),xt=B(64905),Bt=B(60181),G=B(24292),ye=B(5042),Re=B(12984),Ne=B(87951),L=B(12101),N=B(80186),kt=B(70370),Pe=B(72463),nt=B(14435),wt=B(18060),ot=B(91269),ft=B(49104),Fe=B(20736),Dt=B(458),St=B(12897),oe=B(98041),vt=B(25207),De=B(59613),ra={number:"numeric",date:"datetime"},mt="dxPivotGridUnbinding";function Ot(e,t){var a=[],r=t.length-1;return(0,L.__)(e,(o,c)=>{a.push(c.text||(0,De.Fl)(c.value,t[r-o]))}),a.reverse()}function yt(e){var t=0;return(0,De.Fo)(e,a=>{t=Math.max(t,a.length-1)}),t}function $t(e,t){var a=e.getAreaFields("data");if("args"!==t.putDataFieldsInto&&"singleAxis"!==t.dataFieldsDisplayMode||1===a.length){var r=[];return(0,L.__)(a,(o,c)=>{var f={name:c.caption,title:c.caption,valueType:ra[c.dataType]||c.dataType,label:{format:c.format}};c.customizeText&&(f.label.customizeText=function(s){return c.customizeText.call(c,s)}),"splitPanes"===t.dataFieldsDisplayMode&&(f.pane=c.caption),r.push(f)}),r}return[{}]}function It(e,t){var a=[],r=e.getAreaFields("data");return r.length>1&&"splitPanes"===t.dataFieldsDisplayMode&&"args"!==t.putDataFieldsInto&&(0,L.__)(r,(o,c)=>{a.push({name:c.caption})}),a.length||a.push({}),a}var Tt={bindChart(e,t){t=(0,Ne.X)({},t);var a=this,r=function(){t.grandTotalText=a.option("texts.grandTotal");var c=function At(e,t){var{customizeSeries:a}=t,{customizeChart:r}=t,o={valueAxis:$t(e,t),panes:It(e,t)},c={};return r&&(o=(0,Ne.X)(!0,{},o,r(o))),o.dataSource=function Wt(e,t,a){var E,M,P,k,se,ee,ve,_e,Se,de,r=e.getData(),o=[],c=e.getAreaFields("data"),f=e.getAreaFields("row"),s=e.getAreaFields("column"),u=[{index:r.grandTotalColumnIndex,children:r.columns}],S=[{index:r.grandTotalRowIndex,children:r.rows}],w=yt(S),_=yt(u);function ge(){var J,Ce=(r.values[P]||[])[ve]||[],te=Ce[E],we={rowPath:ee,maxRowLevel:w,rowPathFormatted:se,rowFields:f,columnPathFormatted:de,maxColumnLevel:_,columnPath:Se,columnFields:s,dataFields:c,dataIndex:E,dataValues:Ce,visible:_e&&k},Ee=(t.inverted?de:se).join(" - "),Me=(t.inverted?se:de).join("/");c.length>1&&(("args"===t.putDataFieldsInto||"both"===t.putDataFieldsInto)&&(Me+=" | ".concat(M.caption)),"args"!==t.putDataFieldsInto&&(Ee+=" | ".concat(M.caption),"singleAxis"!==t.dataFieldsDisplayMode&&(J=M.caption))),we.chartDataItem={val:void 0===te?null:te,series:Ee,arg:Me},we=function zt(e,t){var{chartDataItem:a}=e,r=t&&t(e);return r?(a=(0,Ne.X)({},a,r.chartDataItem),r=(0,Ne.X)({},e,r,{chartDataItem:a})):e}(we,t.processCell),we.visible&&(a[we.chartDataItem.series]=a[we.chartDataItem.series]||J,o.push(we.chartDataItem))}function j(Ce){(0,De.Fo)(S,te=>{P=te[0].index,te=te.slice(0,te.length-1),k=w===te.length,ee=(0,De.AO)(te),se=Ot(te,f),0===ee.length&&(se=[t.grandTotalText]),(0,De.Fo)(u,J=>{ve=J[0].index,J=J.slice(0,J.length-1),_e=_===J.length,Se=(0,De.AO)(J),de=Ot(J,s),0===Se.length&&(de=[t.grandTotalText]),Ce()})})}function ue(Ce){(0,L.__)(c,(te,J)=>{M=J,E=te,Ce()})}return!1===t.alternateDataFields?ue(()=>{j(ge)}):j(()=>{ue(ge)}),o}(e,t,c),o.seriesTemplate={nameField:"series",customizeSeries(f){var s={};return"splitPanes"===t.dataFieldsDisplayMode?s.pane=c[f]:"singleAxis"!==t.dataFieldsDisplayMode&&(s.axis=c[f]),a&&(s=(0,Ne.X)(s,a(f,s))),s}},o}(a.getDataSource(),t);e.option(c)};if(e=function Ut(e){if(!e)return!1;if(e.NAME)return"dxChart"===e.NAME&&e;var t=(0,G.A)(e);return t.data("dxChart")&&t.dxChart("instance")}(e),!e)return null;(function Xt(e){var t=e.$element().data(mt);t&&t()})(e),a.on("changed",r),r();var o=function(){e.$element().removeData(mt),a.off("changed",r)};return e.on("disposing",o),this.on("disposing",o),e.$element().data(mt,o),o}},jt=B(19900),rt=B(58168),_t=B(56221),lt=B(17669),V=B(50448),q=B(5918),Oe=function(e){var t=0,{offsetWidth:a}=e;if(e.getBoundingClientRect){var r=(0,V.N)(e);(t=r.width)||(t=r.right-r.left),t<=a-1&&(t=a)}return t>0?t:a};function Ie(e,t,a,r){var o=0,c=0,f=a/2;return e+r-(t+a)>1?(e>=t+a+f&&(c=parseInt((e-(t+a))/f,10)),o=t+a+f*c):e<t?(e<=t-f&&(c=parseInt((e-(t-f))/f,10)),o=t-(a-f*c)):o=t,o}var Ke=_t.A.inherit({ctor(e){this.component=e},option(){return this.component.option.apply(this.component,arguments)},_getRowElement(e){return this._tableElement&&this._tableElement.length>0?this._tableElement[0].rows[e]:null},_createGroupElement:()=>(0,G.A)("<div>"),_createTableElement:()=>(0,G.A)("<table>"),_getCellText(e,t){var a=e.isWhiteSpace?"&nbsp":e.text||"&nbsp";return t&&(-1!==a.indexOf("<")||-1!==a.indexOf(">"))&&(a=(0,G.A)("<div>").text(a).html()),a},_getRowClassNames(){},_applyCustomStyles(e){e.cell.width&&e.cssArray.push("min-width:".concat(e.cell.width,"px")),e.cell.sorted&&e.classArray.push("dx-pivotgrid-sorted")},_getMainElementMarkup:()=>lt.A.createElement("tbody"),_getCloseMainElementMarkup:()=>"</tbody>",_renderTableContent(e,t){var r,o,c,f,s,w,a=t.length,u=this.option("rtlEnabled"),S=this.option("encodeHtml");e.data("area",this._getAreaName()),e.data("data",t),e.css("width","");var _=this._getMainElementMarkup();for(c=0;c<a;c+=1){r=t[c],w=[];var E=lt.A.createElement("tr");for(f=0;f<r.length;f+=1){this._getRowClassNames(c,o=r[f],w);var M=lt.A.createElement("td");if(o){o.rowspan&&M.setAttribute("rowspan",o.rowspan||1),o.colspan&&M.setAttribute("colspan",o.colspan||1);var P={cellElement:void 0,cell:o,cellsCount:r.length,cellIndex:f,rowElement:void 0,rowIndex:c,rowsCount:a,rtlEnabled:u,classArray:[],cssArray:[]};if(this._applyCustomStyles(P),P.cssArray.length&&(0,q.eC)(M,P.cssArray.join(";")),P.classArray.length&&M.setAttribute("class",P.classArray.join(" ")),(0,Pe.O9)(o.expanded)){var k=lt.A.createElement("div");k.classList.add("dx-expand-icon-container");var se=lt.A.createElement("span");se.classList.add("dx-expand"),k.appendChild(se),M.appendChild(k)}s=this._getCellText(o,S)}else s="";var ee=lt.A.createElement("span");if((0,Pe.O9)(o.wordWrapEnabled)&&(ee.style.whiteSpace=o.wordWrapEnabled?"normal":"nowrap"),ee.innerHTML=s,M.appendChild(ee),o.sorted){var ve=lt.A.createElement("span");ve.classList.add("dx-icon-sorted"),M.appendChild(ve)}E.appendChild(M)}w.length&&E.setAttribute("class",w.join(" ")),_.appendChild(E)}e.append(_),this._triggerOnCellPrepared(e,t)},_triggerOnCellPrepared(e,t){var f,s,u,w,_,E,M,a=e.find("tr"),r=this._getAreaName(),o=this.option("onCellPrepared"),c=this.component._eventsStrategy.hasEvent("cellPrepared"),S=this.component._defaultActionArgs();if(o||c)for(E=0;E<t.length;E+=1)for(w=t[E],f=a.eq(E),M=0;M<w.length;M+=1)_=w[M],s=f.children().eq(M),u={area:r,rowIndex:E,columnIndex:M,cellElement:(0,Bt.c)(s),cell:_},c?this.component._trigger("onCellPrepared",u):o((0,Ne.X)(u,S))},_getRowHeight(e){var t=this._getRowElement(e),a=0,{offsetHeight:r}=t;return t&&t.lastChild?(t.getBoundingClientRect&&(a=(0,V.N)(t).height)<=r-1&&(a=r),a>0?a:r):0},_setRowHeight(e,t){var a=this._getRowElement(e);a&&(a.style.height="".concat(t,"px"))},getRowsLength(){return this._tableElement&&this._tableElement.length>0?this._tableElement[0].rows.length:0},getRowsHeight(){for(var e=[],t=this.getRowsLength(),a=0;a<t;a+=1)e.push(this._getRowHeight(a));return e},setRowsHeight(e){for(var t=0,a=e.length,r=0;r<a;r+=1)t+=e[r],this._setRowHeight(r,e[r]);this._tableHeight=t,this._tableElement[0].style.height="".concat(t,"px")},getColumnsWidth(){var t,a,r,o,e=this.getRowsLength(),c=[],f=[],s=function(u,S,w,_,E){var M,P;for(M=0;M<_;M+=1)for(P=0;P<E;P+=1)u[S+M]=u[S+M]||[],u[S+M][w+P]=!0};if(e)for(t=0;t<e;t+=1)for(c[t]=c[t]||[],a=this._getRowElement(t),r=0;r<a.cells.length;r+=1){for(o=0;c[t][o];o+=1);s(c,t,o,a.cells[r].rowSpan,a.cells[r].colSpan),1===a.cells[r].colSpan&&(f[o]=f[o]||Oe(a.cells[r]))}return f},setColumnsWidth(e){var t,a=this._tableElement[0];this._colgroupElement.html("");var r=this.getColumnsCount(),o=[];for(t=0;t<r;t+=1)o.push(e[t]||0);for(t=r;t<e.length&&e;t+=1)o[r-1]+=e[t];for(t=0;t<r;t+=1){var c=lt.A.createElement("col");c.style.width="".concat(o[t],"px"),this._colgroupElement.append(c)}this._tableWidth=o.reduce((f,s)=>f+s,0),a.style.width="".concat(this._tableWidth,"px"),a.style.tableLayout="fixed"},resetColumnsWidth(){(0,N.zj)(this._colgroupElement.find("col"),"auto"),this._tableElement.css({width:"",tableLayout:""})},setGroupWidth(e){this._getScrollable().option("width",e)},setGroupHeight(e){this._getScrollable().option("height",e)},getGroupHeight(){return this._getGroupElementSize("height")},getGroupWidth(){return this._getGroupElementSize("width")},_getGroupElementSize(e){var t=this.groupElement()[0].style[e];return t.indexOf("px")>0?parseFloat(t):null},groupElement(){return this._groupElement},tableElement(){return this._tableElement},element(){return this._rootElement},headElement(){return this._tableElement.find("thead")},_setTableCss(e){this.option("rtlEnabled")&&(e.right=e.left,delete e.left),this.tableElement().css(e)},setVirtualContentParams(e){this._virtualContent.css({width:e.width,height:e.height});var t=this._getScrollable();t?.isRenovated()?this._getScrollable().option("classes","dx-virtual-mode"):this.groupElement().addClass("dx-virtual-mode")},disableVirtualMode(){var e=this._getScrollable();e?.isRenovated()?this._getScrollable().option("classes",""):this.groupElement().removeClass("dx-virtual-mode")},_renderVirtualContent(){!this._virtualContent&&"virtual"===this.option("scrolling.mode")&&(this._virtualContent=(0,G.A)("<div>").addClass("dx-virtual-content").insertBefore(this._tableElement))},reset(){var e=this._tableElement[0];if(this._fakeTable&&this._fakeTable.detach(),this._fakeTable=null,this.disableVirtualMode(),this.setGroupWidth("100%"),this.setGroupHeight("auto"),this.resetColumnsWidth(),e){for(var t=0;t<e.rows.length;t+=1)e.rows[t].style.height="";e.style.height="",e.style.width="100%"}},_updateFakeTableVisibility(){var e=this.tableElement()[0],t=this.option("rtlEnabled")?"right":"left",a=this._fakeTable[0];e.style.top===a.style.top&&a.style[t]===e.style[t]?this._fakeTable.addClass("dx-hidden"):this._fakeTable.removeClass("dx-hidden")},_moveFakeTableHorizontally(e){var a=this.option("rtlEnabled")?"right":"left",o=Ie(e,parseFloat(this.tableElement()[0].style[a]),this._tableWidth,this.getGroupWidth());parseFloat(this._fakeTable[0].style[a])!==o&&(this._fakeTable[0].style[a]="".concat(o,"px"))},_moveFakeTableTop(e){var a=Ie(e,parseFloat(this.tableElement()[0].style.top),this._tableHeight,this.getGroupHeight());parseFloat(this._fakeTable[0].style.top)!==a&&(this._fakeTable[0].style.top="".concat(a,"px"))},_moveFakeTable(){this._updateFakeTableVisibility()},_createFakeTable(){this._fakeTable||(this._fakeTable=this.tableElement().clone().addClass("dx-pivot-grid-fake-table").appendTo(this._virtualContent))},render(e,t){if(this._tableElement){try{this._tableElement[0].innerHTML=""}catch{this._tableElement.empty()}this._tableElement.removeAttr("style")}else this._groupElement=this._createGroupElement(),this._tableElement=this._createTableElement(),this._tableElement.appendTo(this._groupElement),this._groupElement.appendTo(e),this._rootElement=e;this._colgroupElement=(0,G.A)("<colgroup>").appendTo(this._tableElement),this._renderTableContent(this._tableElement,t),this._renderVirtualContent()},_getScrollable(){return this.groupElement().data("dxScrollable")},_getMemoizeScrollTo(){var e;return this._memoizeScrollTo=null!==(e=this._memoizeScrollTo)&&void 0!==e?e:function ie(e){var t=e(),a={};return function(r){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c={top:void 0!==r.top?Math.ceil(r.top):void 0,left:void 0!==r.left?Math.ceil(r.left):void 0};!o&&c.top===a.top&&c.left===a.left||(a=c,t.scrollTo(r))}}(()=>this._getScrollable()),this._memoizeScrollTo},_getMaxLeftOffset(e){var t=(0,G.A)(e.container()).get(0);return t.scrollWidth-t.clientWidth},on(e,t){var a=this,r=a._getScrollable();return r&&r.on(e,o=>{a.option("rtlEnabled")&&(0,Pe.O9)(o.scrollOffset.left)&&(o.scrollOffset.left=a._getMaxLeftOffset(r)-o.scrollOffset.left),t(o)}),this},off(e){var t=this._getScrollable();return t&&t.off(e),this},scrollTo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this._getScrollable();if(a){var r=this.option("rtlEnabled"),o=this._getAreaName(),c=(0,rt.A)((0,rt.A)({},e),{left:!r||"column"!==o&&"data"!==o?e.left:this._getMaxLeftOffset(a)-e.left});this._getMemoizeScrollTo()(c,t),this._virtualContent&&(this._createFakeTable(),this._moveFakeTable(e))}},updateScrollable(){var e=this._getScrollable();if(e)return e.update()},getColumnsCount(){var a,e=0,t=this._getRowElement(0);if(t)for(var r=0,o=(a=t.cells).length;r<o;++r)e+=a[r].colSpan;return e},getData(){var e=this._tableElement;return e?e.data("data"):[]}});const la={DataArea:Ke.inherit({_getAreaName:()=>"data",_createGroupElement:()=>(0,G.A)("<div>").addClass("dx-pivotgrid-area").addClass("dx-pivotgrid-area-data").css("borderTopWidth",0),_applyCustomStyles(e){var{cell:t}=e,{classArray:a}=e;("T"===t.rowType||"T"===t.columnType)&&a.push("dx-total"),("GT"===t.rowType||"GT"===t.columnType)&&a.push("dx-grandtotal"),("T"===t.rowType||"GT"===t.rowType)&&a.push("dx-row-total"),e.rowIndex===e.rowsCount-1&&e.cssArray.push("border-bottom: 0px"),this.callBase(e)},_moveFakeTable(e){this._moveFakeTableHorizontally(e.x),this._moveFakeTableTop(e.y),this.callBase()},renderScrollable(){this._groupElement.dxScrollable({useNative:this.getUseNativeValue(),useSimulatedScrollbar:!1,rtlEnabled:this.component.option("rtlEnabled"),bounceEnabled:!1,updateManually:!0})},getUseNativeValue(){var{useNative:e}=this.component.option("scrolling");return"auto"===e?!!jt.nativeScrolling:!!e},getScrollbarWidth(){return this.getUseNativeValue()?(0,De.FY)():0},updateScrollableOptions(e){var{direction:t,rtlEnabled:a}=e,r=this._getScrollable();r.option("useNative",this.getUseNativeValue()),r.option({direction:t,rtlEnabled:a})},getScrollableDirection:(e,t)=>e&&!t?"horizontal":!e&&t?"vertical":"both",reset(){this.callBase(),this._virtualContent&&this._virtualContent.parent().css("height","auto")},setVirtualContentParams(e){this.callBase(e),this._virtualContent.parent().css("height",e.height),this._setTableCss({top:e.top,left:e.left})}})};var gt=B(34423),Aa=B(83651),oa=B(72915),ia=B(12208),Kt=B(42323),Ct=Math,Rt=function(e,t,a){e[t]||(e[t]=function(){var r=this._dataSource;return r?r[t].apply(r,arguments):a})};const Qe={DataController:_t.A.inherit(function(){function e(s,u,S){return"#N/A"===s?S:(0,De.Fl)(s,u)}var t=function(){function S(w,_,E){var P=(w[_]=w[_]||[])[E]={};if(w[_+1]){P.children=w[_+1];for(var k=_+1;k<w.length;k+=1)w[k]=void 0;w.length=_+1}return P}return function(w,_,E,M,P){var _e,k=[],se=(_e=0,(0,De.Fo)(w,Se=>{_e=Ct.max(_e,Se.length)}),_e||1),ee=new Re.cY;return function(w,_,E,M,P){var _e,Se,ue,de,ge,j,k=E.length,se=(_e=w,de=(Se=_)&&Se.length||0,ge=[],j=new Re.cY,(0,Re.z7)((0,De.vs)(_e,(Ce,te)=>{var J=Ce[0],we=(0,De.AO)(Ce);(ue=S(ge,we.length,te)).type="D",ue.value=J.value,ue.path=we,ue.text=J.text,ue.index=J.index,ue.displayText=J.displayText,ue.key=J.key,ue.isEmpty=J.isEmpty,we.length<de&&(!J.children||0!==J.children.length)&&(ue.expanded=!!J.children)})).done(()=>{j.resolve(S(ge,0,0).children||[])}),j),{dataFields:ee}=P,ve=new Re.cY;return(0,Re.z7)(se).done(_e=>{P.notifyProgress(.5),P.showGrandTotals&&_e[P.showTotalsPrior?"unshift":"push"]({type:"GT",isEmpty:P.isEmptyGrandTotal});var Se=!1===P.showTotals||ee.length>0&&ee.length===P.hiddenTotals.length,de=ee.length>0&&P.hiddenValues.length===ee.length;de&&Se&&(M=1),(!Se||"tree"===P.layout)&&function(ge,j,ue,Ce){ue=ue||Ce,(0,De.Fo)(ge,(te,J)=>{var we=te[0];"D"===we.type&&we.expanded&&(!1!==j[te.length-1].showTotals||Ce)&&(-1!==J&&((te[1]?te[1].children:ge)||[]).splice(ue?J:J+1,0,(0,Ne.X)({},we,{children:null,type:"T",expanded:!!ue||null,isAdditionalTotal:!0})),ue&&(we.expanded=null))})}(_e,_,P.showTotalsPrior,"tree"===P.layout),(0,Re.z7)((0,De.vs)(_e,ge=>{var j=ge[0];(!j.children||0===j.children.length)&&(j.depthSize=M-ge.length+1)})).done(()=>{k>1&&function(ge,j,ue){(0,De.Fo)(ge,Ce=>{var J,te=Ce[0];if(!te.children||0===te.children.length)for(te.children=[],J=0;J<j.length;J+=1){var Ee="T"===te.type,Me="D"===te.type;!1===j[J].visible||"GT"===te.type&&ue.hiddenGrandTotals.includes(J)||Ee&&ue.hiddenTotals.includes(J)||Me&&ue.hiddenValues.includes(J)||te.children.push({caption:j[J].caption,path:te.path,type:te.type,value:J,index:te.index,dataIndex:J,isMetric:!0,isEmpty:te.isEmpty&&te.isEmpty[J]})}})}(_e,E,P),!P.showEmpty&&function(ge){(0,De.Fo)([{children:ge}],(j,ue)=>{var Ce=j[0],te=(j[1]?j[1].children:ge)||[],{isEmpty:J}=Ce;J&&J.length&&(J=Ce.isEmpty.filter(we=>we).length===J.length),Ce&&!Ce.children&&J&&(te.splice(ue,1),function we(Ee,Me){var at=Ee[Me+1];!Ee[Me].children.length&&at&&at.children&&(at.children.splice(at.children.indexOf(Ee[Me]),1),we(Ee,Me+1))}(j,1))})}(_e),P.notifyProgress(.75),(0,Re.z7)((0,De.vs)(_e,ge=>{var j=ge[0],{isMetric:ue}=j,Ce=_[ge.length-1]||{};if("D"===j.type&&!ue&&(j.width=Ce.width),de&&"D"===j.type){var te=(ge[1]?ge[1].children:_e)||[];te.splice(te.indexOf(j),1)}else j.wordWrapEnabled=ue?E[j.dataIndex].wordWrapEnabled:Ce.wordWrapEnabled,j.isLast=!j.children||!j.children.length,j.isLast&&(0,L.__)(P.sortBySummaryPaths,(J,we)=>{if((0,Pe.O9)(j.dataIndex)||(we=we.slice(0)).pop(),Pt=(Ee=ge)[0],bt=(0,Pe.Kg)((Me=we)[0]),ct=Pt.dataIndex>=0?Ee[1]:Pt,at=bt&&-1!==Me[0].indexOf("&[")&&ct.key||!ct.key?(0,De.AO)(Ee):(0,L.Tj)(Ee,Ft=>Ft.dataIndex>=0?Ft.value:Ft.text).reverse(),"GT"===Pt.type&&(at=at.slice(1)),at.join("/")===Me.join("/"))return j.sorted=!0,!1;var Ee,Me,at,Pt,bt,ct}),j.text=function(J,we,Ee){var{text:Me}=J;return(0,Pe.O9)(J.displayText)?Me=J.displayText:(0,Pe.O9)(J.caption)?Me=J.caption:"GT"===J.type&&(Me=Ee.texts.grandTotal),J.isAdditionalTotal&&(Me=(0,kt.GP)(Ee.texts.total||"",Me)),Me}(j,0,P)})).done(()=>{_e.length||_e.push({}),P.notifyProgress(1),ve.resolve(_e)})})}),ve}(w,_,E,se,P).done(ve=>{(function(_e,Se,de,ge,j){var te,ue=0,J=[0];(0,De.Fo)(Se,we=>{var Ee=we[0];for(te=Ee.isMetric?de:we.length-1;J.length-1<te;)J.push(J[J.length-1]);ue=function(w,_){var P,k,se,ee,ve;return function(P,k,se,ee,ve){for(var _e=ve?ee:se;!P[_e];)P.push([]);ve?P[_e].push(k):P[_e].unshift(k)}(w,(k=_.lastIndex-_.index||1,se=_.isHorizontal,ee=_.isTree,ve={type:(P=_.headerItem).type,text:P.text},P.path&&(ve.path=P.path),P.width&&(ve.width=P.width),(0,Pe.O9)(P.wordWrapEnabled)&&(ve.wordWrapEnabled=P.wordWrapEnabled),P.isLast&&(ve.isLast=!0),P.sorted&&(ve.sorted=!0),P.isMetric&&(ve.dataIndex=P.dataIndex),(0,Pe.O9)(P.expanded)&&(ve.expanded=P.expanded),k>1&&(ve[se?"colspan":"rowspan"]=k),P.depthSize&&P.depthSize>1&&(ve[se?"rowspan":"colspan"]=P.depthSize),P.index>=0&&(ve.dataSourceIndex=P.index),ee&&P.children&&P.children.length&&!P.children[0].isMetric&&(ve.width=null,ve.isWhiteSpace=!0),ve),_.index,_.depth,_.isHorizontal),_.headerItem.children&&0!==_.headerItem.children.length?_.lastIndex:_.lastIndex+1}(_e,{headerItem:Ee,index:J[te]||0,lastIndex:ue,depth:te,isHorizontal:ge,isTree:j}),J.length=te,J.push(ue)})})(k,ve,se,M,"tree"===P.layout),P.notifyProgress(1),ee.resolve(k)}),ee}}();function a(s,u){var S=[];return(0,L.__)(s,(w,_)=>{var E=(0,De.UI)(u,_.sortBySummaryField);E>=0&&S.push((_.sortBySummaryPath||[]).concat([E]))}),S}function r(s,u){for(var S=0,w=[],_=0;_<s.length;_+=1)for(var E=0;E<s[_].length;E+=1){var P=_+((s[_][E].rowspan||1)-1);if(w[_]&&(S-=w[_],w[_]=0),!1===u(s[_][E],P,_,E,S))break;w[_+(s[_][E].rowspan||1)]=(w[_+(s[_][E].rowspan||1)]||0)+1,S+=1}}function o(s,u){var S=0,w=[];return(0,De.Fo)(s,_=>{var E=_[0],M=(0,De.AO)(_);if(!E.children||!1!==u.showTotals){var P=(0,Ne.X)(!0,{},E,{visibleIndex:S+=1,path:M});(0,Pe.O9)(P.index)?w[P.index]=P:w.push(P)}}),w}function c(s,u,S){return new ia.Ay.VirtualScrollController(u,(0,Ne.X)({hasKnownLastPage:()=>!0,pageCount(){return Ct.ceil(this.totalItemsCount()/this.pageSize())},updateLoading(){},itemsCount(){return this.pageIndex()<this.pageCount()-1?this.pageSize():this.totalItemsCount()%this.pageSize()},items:()=>[],viewportItems:()=>[],onChanged(){},isLoading:()=>s.isLoading(),changingDuration:()=>s._dataSource.paginate()?300:s._changingDuration||0},S))}var f={ctor(s){var u=this,S=u._fireChanged.bind(u);s=u._options=s||{},u.dataSourceChanged=(0,gt.A)(),u._dataSource=u._createDataSource(s),s.component&&"virtual"===s.component.option("scrolling.mode")&&(u._rowsScrollController=c(u,s.component,{totalItemsCount:()=>u.totalRowCount(),pageIndex:w=>u.rowPageIndex(w),pageSize:()=>u.rowPageSize(),load(){return u._rowsScrollController.pageIndex()>=this.pageCount()&&u._rowsScrollController.pageIndex(this.pageCount()-1),u._rowsScrollController.handleDataChanged(function(){u._dataSource.paginate()?u._dataSource.load():S.apply(this,arguments)})}}),u._columnsScrollController=c(u,s.component,{totalItemsCount:()=>u.totalColumnCount(),pageIndex:w=>u.columnPageIndex(w),pageSize:()=>u.columnPageSize(),load(){return u._columnsScrollController.pageIndex()>=this.pageCount()&&u._columnsScrollController.pageIndex(this.pageCount()-1),u._columnsScrollController.handleDataChanged(function(){u._dataSource.paginate()?u._dataSource.load():S.apply(this,arguments)})}})),u._stateStoringController=new Aa.A.StateStoringController(s.component).init(),u._columnsInfo=[],u._rowsInfo=[],u._cellsInfo=[],u.expandValueChanging=(0,gt.A)(),u.loadingChanged=(0,gt.A)(),u.progressChanged=(0,gt.A)(),u.scrollChanged=(0,gt.A)(),u.load(),u._update(),u.changed=(0,gt.A)()},_fireChanged(){var s=new Date;this.changed&&!this._lockChanged&&this.changed.fire(),this._changingDuration=new Date-s},_correctSkipsTakes(s,u,S,w,_,E){var M=S?s+S-1:s;_[w.length]=_[w.length]||0,E[w.length]=E[w.length]||0,M<u?_[w.length]+=1:E[w.length]+=1},_calculatePagingForRowExpandedPaths(s,u,S,w,_){var ee,ve,_e,E=this._rowsInfo,M=Math.min(s.rowSkip+s.rowTake,E.length),{rowExpandedPaths:P}=s,k=[],se={};for(P.forEach((ge,j)=>{se[ge]=j}),ee=0;ee<M;ee+=1){for(S.length=u.length=k.length+1,ve=0;ve<E[ee].length;ve+=1){var Se=E[ee][ve];if("D"===Se.type){this._correctSkipsTakes(ee,s.rowSkip,Se.rowspan,k,u,S);var de=(_e=Se.path||_e)&&_e.length>1?se[_e.slice(0,-1)]:-1;de>=0&&(w[de]=u[k.length]||0,_[de]=S[k.length]||0),Se.rowspan&&k.push(Se.rowspan)}}k=k.map(ge=>ge-1).filter(ge=>ge>0)}},_calculatePagingForColumnExpandedPaths(s,u,S,w,_){var E={},M={};(0,oa.z)(this._columnsInfo,(P,k)=>{if("D"===P.type&&P.path&&void 0===P.dataIndex){var se=P.colspan||1,ee=P.path.slice(0,-1).toString();E[ee]=E[ee]||0,M[ee]=M[ee]||0,k+se<=s.columnSkip?E[ee]+=1:k<s.columnSkip+s.columnTake&&(M[ee]+=1)}}),u[0]=E[""],S[0]=M[""],s.columnExpandedPaths.forEach((P,k)=>{var se=E[P],ee=M[P];void 0!==se&&(w[k]=se),void 0!==ee&&(_[k]=ee)})},_processPagingForExpandedPaths(s,u,S,w){var _=s["".concat(u,"ExpandedPaths")],E=_.map(()=>0),M=_.map(()=>w?s.pageSize:0),P=[],k=[];w||("row"===u?this._calculatePagingForRowExpandedPaths(s,P,k,E,M):this._calculatePagingForColumnExpandedPaths(s,P,k,E,M)),this._savePagingForExpandedPaths(s,u,S,P[0],k[0],E,M)},_savePagingForExpandedPaths(s,u,S,w,_,E,M){var P=s["".concat(u,"ExpandedPaths")];s["".concat(u,"ExpandedPaths")]=[],s["".concat(u,"Skip")]=void 0!==w?w:s["".concat(u,"Skip")],s["".concat(u,"Take")]=void 0!==_?_:s["".concat(u,"Take")];for(var k=0;k<P.length;k+=1)if(M[k]){var se=s.area&&s.area!==u;S.push((0,Ne.X)({area:u,headerName:"".concat(u,"s")},s,{["".concat(u,"Skip")]:E[k],["".concat(u,"Take")]:M[k],[se?"oppositePath":"path"]:P[k]}))}},_handleCustomizeStoreLoadOptions(s,u){var S=s[0],w=this._rowsScrollController;if(this._dataSource.paginate()&&w){var _=w.pageSize();"rows"===S.headerName?(S.rowSkip=0,S.rowTake=_,S.rowExpandedPaths=[]):(S.rowSkip=w.beginPageIndex()*_,S.rowTake=(w.endPageIndex()-w.beginPageIndex()+1)*_,this._processPagingForExpandedPaths(S,"row",s,u))}var E=this._columnsScrollController;if(this._dataSource.paginate()&&E){var M=E.pageSize();s.forEach(P=>{"columns"===P.headerName?(P.columnSkip=0,P.columnTake=M,P.columnExpandedPaths=[]):(P.columnSkip=E.beginPageIndex()*M,P.columnTake=(E.endPageIndex()-E.beginPageIndex()+1)*M,this._processPagingForExpandedPaths(P,"column",s,u))})}},load(){var s=this,u=this._stateStoringController;u.isEnabled()&&!u.isLoaded()?u.load().always(S=>{S?s._dataSource.state(S):s._dataSource.load()}):s._dataSource.load()},calculateVirtualContentParams(s){var u=this._rowsScrollController,S=this._columnsScrollController;if(u&&S)return u.viewportItemSize(s.virtualRowHeight),u.viewportSize(s.viewportHeight/u.viewportItemSize()),u.setContentItemSizes(s.itemHeights),S.viewportItemSize(s.virtualColumnWidth),S.viewportSize(s.viewportWidth/S.viewportItemSize()),S.setContentItemSizes(s.itemWidths),(0,ye.OX)(()=>{S.loadIfNeed(),u.loadIfNeed()}),this.scrollChanged.fire({left:S.getViewportPosition(),top:u.getViewportPosition()}),{contentTop:u.getContentOffset(),contentLeft:S.getContentOffset(),width:S.getVirtualContentSize(),height:u.getVirtualContentSize()}},setViewportPosition(s,u){this._rowsScrollController.setViewportPosition(u||0),this._columnsScrollController.setViewportPosition(s||0)},subscribeToWindowScrollEvents(s){var u;null===(u=this._rowsScrollController)||void 0===u||u.subscribeToWindowScrollEvents(s)},updateWindowScrollPosition(s){var u;null===(u=this._rowsScrollController)||void 0===u||u.scrollTo(s)},updateViewOptions(s){(0,Ne.X)(this._options,s),this._update()},_handleExpandValueChanging(s){this.expandValueChanging.fire(s)},_handleLoadingChanged(s){this.loadingChanged.fire(s)},_handleProgressChanged(s){this.progressChanged.fire(s)},_handleFieldsPrepared(s){this._options.onFieldsPrepared&&this._options.onFieldsPrepared(s)},_createDataSource(s){var w,u=this,S=s.dataSource;return u._isSharedDataSource=S instanceof Kt.C,w=u._isSharedDataSource?S:new Kt.C(S),u._expandValueChangingHandler=u._handleExpandValueChanging.bind(u),u._loadingChangedHandler=u._handleLoadingChanged.bind(u),u._fieldsPreparedHandler=u._handleFieldsPrepared.bind(u),u._customizeStoreLoadOptionsHandler=u._handleCustomizeStoreLoadOptions.bind(u),u._changedHandler=function(){u._update(),u.dataSourceChanged.fire()},u._progressChangedHandler=function(_){u._handleProgressChanged(.8*_)},w.on("changed",u._changedHandler),w.on("expandValueChanging",u._expandValueChangingHandler),w.on("loadingChanged",u._loadingChangedHandler),w.on("progressChanged",u._progressChangedHandler),w.on("fieldsPrepared",u._fieldsPreparedHandler),w.on("customizeStoreLoadOptions",u._customizeStoreLoadOptionsHandler),w},getDataSource(){return this._dataSource},isLoading(){return this._dataSource.isLoading()},beginLoading(){this._dataSource.beginLoading()},endLoading(){this._dataSource.endLoading()},_update(){var ue,s=this,u=s._dataSource,S=s._options,w=u.getAreaFields("column"),_=u.getAreaFields("row"),E=u.getAreaFields("data"),M="row"===S.dataFieldArea?E:[],P="row"!==S.dataFieldArea?E:[],k=u.getData(),se=(ue=[],(0,L.__)(E,(Ce,te)=>{!1===te.showTotals&&ue.push(Ce)}),ue),ee=function(j){var ue=[];return j.forEach((Ce,te)=>{(void 0===Ce.showValues&&!1===Ce.showTotals||!1===Ce.showValues)&&ue.push(te)}),ue}(E),ve=function(j,ue){var Ce=[];return(0,L.__)(j,(te,J)=>{!1===J.showGrandTotals&&Ce.push(te)}),0===ue.length&&Ce.length===j.length&&(Ce=[]),Ce}(E,w),_e=!(E.length>0)||ve.length!==E.length,Se={isEmptyGrandTotal:k.isEmptyGrandTotalRow,texts:S.texts||{},hiddenTotals:se,hiddenValues:ee,hiddenGrandTotals:[],showTotals:S.showRowTotals,showGrandTotals:!1!==S.showRowGrandTotals&&_e,sortBySummaryPaths:a(w,E),showTotalsPrior:"rows"===S.showTotalsPrior||"both"===S.showTotalsPrior,showEmpty:!S.hideEmptySummaryCells,layout:S.rowHeaderLayout,fields:_,dataFields:E,progress:0},de={isEmptyGrandTotal:k.isEmptyGrandTotalColumn,texts:S.texts||{},hiddenTotals:se,hiddenValues:ee,hiddenGrandTotals:ve,showTotals:S.showColumnTotals,showTotalsPrior:"columns"===S.showTotalsPrior||"both"===S.showTotalsPrior,showGrandTotals:!1!==S.showColumnGrandTotals&&_e,sortBySummaryPaths:a(_,E),showEmpty:!S.hideEmptySummaryCells,fields:w,dataFields:E,progress:0},ge=function(j){this.progress=j,s._handleProgressChanged(.8+.1*Se.progress+.1*de.progress)};Se.notifyProgress=ge,de.notifyProgress=ge,(0,Pe.O9)(k.grandTotalRowIndex)||(k.grandTotalRowIndex=o(k.rows,Se).length),(0,Pe.O9)(k.grandTotalColumnIndex)||(k.grandTotalColumnIndex=o(k.columns,de).length),u._changeLoadingCount(1),(0,Re.z7)(t(k.columns,w,P,!0,de),t(k.rows,_,M,!1,Se)).always(()=>{u._changeLoadingCount(-1)}).done((j,ue)=>{s._columnsInfo=j,s._rowsInfo=ue,s._rowsScrollController&&s._columnsScrollController&&s.changed&&!s._dataSource.paginate()&&(s._rowsScrollController.reset(!0),s._columnsScrollController.reset(!0),s._lockChanged=!0,s._rowsScrollController.load(),s._columnsScrollController.load(),s._lockChanged=!1)}).done(()=>{s._fireChanged(),s._stateStoringController.isEnabled()&&!s._dataSource.isLoading()&&(s._stateStoringController.state(s._dataSource.state()),s._stateStoringController.save())})},getRowsInfo(s){var w,u=this._rowsInfo,S=this._rowsScrollController;if(S&&!s){var _=S.beginPageIndex()*this.rowPageSize(),E=S.endPageIndex()*this.rowPageSize()+this.rowPageSize(),M=this._dataSource.getSummaryFields(),P="row"===this._options.dataFieldArea,k=[],se=1;return r(u,(ee,ve,_e,Se,de)=>{var j=_e<_?0:_e-_,ue=ee;if(!(ve>=_&&_e<E))return!1;k[j]=k[j]||[],_+j+(w=_e<_?ee.rowspan-(_-_e)||1:ee.rowspan)>E&&(w=E-(j+_)||1),w!==ee.rowspan&&(ue=(0,Ne.X)({},ue,{rowspan:w})),k[j].push(ue);var Ce=M.some(te=>te.caption===ue.text);(!P||!Ce)&&(se=Ct.max(se,de+1))}),r(k,(ee,ve,_e,Se,de)=>{de+(ee.colspan||1)>se&&(k[_e][Se]=(0,Ne.X)({},ee,{colspan:se-de||1}))}),k}return u},getColumnsInfo(s){var u=this._columnsInfo,S=this._columnsScrollController;if(S&&!s){var w=S.beginPageIndex()*this.columnPageSize(),_=S.endPageIndex()*this.columnPageSize()+this.columnPageSize();u=(0,oa.i)(u,w,_)}return u},totalRowCount(){return this._rowsInfo.length},rowPageIndex(s){return void 0!==s&&(this._rowPageIndex=s),this._rowPageIndex||0},totalColumnCount(){var s=0;if(this._columnsInfo&&this._columnsInfo.length)for(var u=0;u<this._columnsInfo[0].length;u+=1)s+=this._columnsInfo[0][u].colspan||1;return s},rowPageSize(s){return void 0!==s&&(this._rowPageSize=s),this._rowPageSize||20},columnPageSize(s){return void 0!==s&&(this._columnPageSize=s),this._columnPageSize||20},columnPageIndex(s){return void 0!==s&&(this._columnPageIndex=s),this._columnPageIndex||0},getCellsInfo(s){var E,M,P,k,ee,ve,_e,Se,u=this.getRowsInfo(s),S=this.getColumnsInfo(s),w=this._dataSource.getData(),_=this._options.texts||{};return E=u,M=S,P=w,k=this._dataSource.getAreaFields("data"),ee=_.dataNotAvailable,ve=[],_e="row"===this._options.dataFieldArea,(Se=P.values).length&&r(E,(de,ge)=>{var j=ve[ge]=[],ue=Se[de.dataSourceIndex>=0?de.dataSourceIndex:P.grandTotalRowIndex]||[];de.isLast&&(0,oa.z)(M,(Ce,te)=>{var J=(_e?de.dataIndex:Ce.dataIndex)||0,we=k[J];if(Ce.isLast&&we&&!1!==we.visible){var Ee=ue[Ce.dataSourceIndex>=0?Ce.dataSourceIndex:P.grandTotalColumnIndex];Array.isArray(Ee)||(Ee=[Ee]);var Me=Ee[J];j[te]={text:e(Me,we,ee),value:Me,format:we.format,dataType:we.dataType,columnType:Ce.type,rowType:de.type,rowPath:de.path||[],columnPath:Ce.path||[],dataIndex:J},we.width&&(j[te].width=we.width)}})}),ve},dispose(){this._isSharedDataSource?(this._dataSource.off("changed",this._changedHandler),this._dataSource.off("expandValueChanging",this._expandValueChangingHandler),this._dataSource.off("loadingChanged",this._loadingChangedHandler),this._dataSource.off("progressChanged",this._progressChangedHandler),this._dataSource.off("fieldsPrepared",this._fieldsPreparedHandler),this._dataSource.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler)):this._dataSource.dispose(),this._columnsScrollController&&this._columnsScrollController.dispose(),this._rowsScrollController&&this._rowsScrollController.dispose(),this._stateStoringController.dispose(),this.expandValueChanging.empty(),this.changed.empty(),this.loadingChanged.empty(),this.progressChanged.empty(),this.scrollChanged.empty(),this.dataSourceChanged.empty()}};return Rt(f,"applyPartialDataSource"),Rt(f,"collapseHeaderItem"),Rt(f,"expandHeaderItem"),Rt(f,"getData"),Rt(f,"isEmpty"),f}()),DataController__internals:{NO_DATA_AVAILABLE_TEXT:"#N/A"}};var fa=B(45),Jt=B(15655),Ea=B(70902),ma={exportTo(){var e=this._createActionByOption("onExporting"),t={rtlEnabled:this.option("rtlEnabled"),fileName:"PivotGrid",cancel:!1};(0,Pe.Tn)(e)&&e(t)},_getLength(e){var t,a=e[0].length,r=0;for(t=0;t<a;t+=1)r+=e[0][t].colspan||1;return r},_correctCellsInfoItemLengths(e,t){for(var a=0;a<e.length;a+=1)for(;e[a].length<t;)e[a].push({});return e},_calculateCellInfoItemLength(e){for(var t=0,a=0;a<e.length;a+=1)t+=(0,Pe.O9)(e[a].colspan)?e[a].colspan:1;return t},_getEmptyCell:()=>({text:"",value:void 0,colspan:1,rowspan:1}),_getAllItems(e,t,a){var r,o,c=a,f=this._getLength(t),s=e.length;if(e.length>0&&e[0].length>0&&a.length>0&&0===a[0].length){var u=this._calculateCellInfoItemLength(e[0]);u>0&&(c=this._correctCellsInfoItemLengths(a,u))}if(0===c.length)for(var S=t.length,w=e.map(P=>P.filter(k=>!k.expanded).length).reduce((P,k)=>P+k,0),_=0;_<S;_+=1){c[_]=[];for(var E=0;E<w;E+=1)c[_][E]=this._getEmptyCell()}var M=e.concat(c);for(o=0;o<t.length;o+=1)for(r=t[o].length-1;r>=0;r-=1)(0,Pe.O9)(M[o+s])||(M[o+s]=[]),M[o+s].splice(0,0,(0,Ne.X)({},t[o][r]));return M[0].splice(0,0,(0,Ne.X)({},this._getEmptyCell(),{alignment:(0,V.n)(this._options.rtlEnabled),colspan:f,rowspan:s})),(0,Ea.Q)(M,this._getEmptyCell())},getDataProvider(){return new ha(this)}},ha=_t.A.inherit({ctor(e){this._exportController=e},ready(){this._initOptions();var e=this._options;return(0,Re.z7)(e.items).done(t=>{var r=t[t[0][0].rowspan-1];(0,L.__)(r,(o,c)=>{c.width=100}),e.columns=r,e.items=t})},_initOptions(){var e=this._exportController,t=e._dataController,a=new Re.cY;t.beginLoading(),setTimeout(()=>{var r=(0,Ne.X)(!0,[],t.getColumnsInfo(!0)),o=(0,Ne.X)(!0,[],t.getRowsInfo(!0)),c=t.getCellsInfo(!0);a.resolve(e._getAllItems(r,o,c)),t.endLoading()}),this._options={items:a,rtlEnabled:e.option("rtlEnabled"),dataFields:e.getDataSource().getAreaFields("data"),rowsArea:e._rowsArea,columnsArea:e._columnsArea}},getColumns(){return this._options.columns},getColumnsWidths(){var e=this._options.columnsArea,{rowsArea:t}=this._options,{columns:a}=this._options;return!(0,nt.Vd)()||"virtual"===e.option("scrolling.mode")||e.element().is(":hidden")?a.map(()=>100):t.getColumnsWidth().concat(e.getColumnsWidth())},getRowsCount(){return this._options.items.length},getGroupLevel:()=>0,getCellMerging(e,t){var{items:a}=this._options,r=a[e]&&a[e][t];return r?{colspan:r.colspan-1,rowspan:r.rowspan-1}:{colspan:0,rowspan:0}},getFrozenArea(){return{x:this.getRowAreaColCount(),y:this.getColumnAreaRowCount()}},getCellType(e,t){var a=this.getStyles()[this.getStyleId(e,t)];return a&&a.dataType||"string"},getCellData(e,t,a){var r={},{items:o}=this._options,c=o[e]&&o[e][t]||{};if(a){r.cellSourceData=c;var f=this._tryGetAreaName(c,e,t);f&&(r.cellSourceData.area=f),r.cellSourceData.rowIndex=e,r.cellSourceData.columnIndex=t}return r.value="string"===this.getCellType(e,t)?c.text:c.value,r.cellSourceData&&r.cellSourceData.isWhiteSpace&&(r.value=""),r},_tryGetAreaName(e,t,a){return this.isColumnAreaCell(t,a)?"column":this.isRowAreaCell(t,a)?"row":(0,Pe.O9)(e.dataIndex)?"data":void 0},isRowAreaCell(e,t){return e>=this.getColumnAreaRowCount()&&t<this.getRowAreaColCount()},isColumnAreaCell(e,t){return t>=this.getRowAreaColCount()&&e<this.getColumnAreaRowCount()},getColumnAreaRowCount(){return this._options.items[0][0].rowspan},getRowAreaColCount(){return this._options.items[0][0].colspan},getHeaderStyles(){return[{alignment:"center",dataType:"string"},{alignment:(0,V.n)(this._options.rtlEnabled),dataType:"string"}]},getDataFieldStyles(){var{dataFields:e}=this._options,t={alignment:this._options.rtlEnabled?"left":"right"},a=[];return e.length?(e.forEach(r=>{a.push((0,rt.A)((0,rt.A)({},t),{format:r.format,dataType:this.getCellDataType(r)}))}),a):[t]},getStyles(){return this._styles||(this._styles=[...this.getHeaderStyles(),...this.getDataFieldStyles()]),this._styles},getCellDataType(e){if(e&&e.customizeText)return"string";if(e.dataType)return e.dataType;if(e.format){if(1===Jt.A.parse(fa.A.format(1,e.format)))return"number";if(fa.A.format(new Date,e.format))return"date"}return"string"},getStyleId(e,t){var{items:a}=this._options,r=a[e]&&a[e][t]||{};return 0===t&&0===e||this.isColumnAreaCell(e,t)?0:this.isRowAreaCell(e,t)?1:this.getHeaderStyles().length+(r.dataIndex||0)}}),ba=B(86018),Fa=B(58321),Zt={treeViewItem:"tree-view-item",allowScrolling:"allow-scrolling",itemGroup:"item-group"},pe={area:{self:"dx-area",box:"dx-area-box",caption:"dx-area-caption",icon:"dx-area-icon",field:"dx-area-field",fieldContainer:"dx-area-field-container",fieldContent:"dx-area-field-content",fieldList:"dx-area-fields",fieldListHeader:"dx-area-fields-header"},pivotGrid:{dragAction:"dx-pivotgrid-drag-action",fieldsContainer:"dx-pivotgrid-fields-container"},fieldChooser:{self:"dx-pivotgridfieldchooser",container:"dx-pivotgridfieldchooser-container",contextMenu:"dx-pivotgridfieldchooser-context-menu"},layout:{zero:"dx-layout-0",second:"dx-layout-2"},treeView:{self:"dx-treeview",borderVisible:"dx-treeview-border-visible"},scrollable:{self:"dx-scrollable"},allFields:"dx-all-fields",col:"dx-col",headerFilter:"dx-header-filter",row:"dx-row",widget:"dx-widget"},qt={targets:{drag:"drag"}},Ca=B(2097),Da=B(53635),Mt=B(98849),ca=B(9423),Oa=B(66426),pt=B(99393),Ia=B(69049),{getSwatchContainer:xa}=Ia.A,va="dxSortable",n="dx-sortable-old";function D(e,t,a){return!(0,Pe.O9)(t.posHorizontal)||(a?e>t.posHorizontal:e<t.posHorizontal)}var Z=Oa.A.inherit({_getDefaultOptions(){return(0,Ne.X)(this.callBase(),{onChanged:null,onDragging:null,itemRender:null,groupSelector:null,itemSelector:".dx-sort-item",itemContainerSelector:".dx-sortable-old",sourceClass:"dx-drag-source",dragClass:"dx-drag",targetClass:"dx-drag-target",direction:"vertical",allowDragging:!0,groupFilter:null,useIndicator:!1})},_renderItem(e,t){var r,a=this.option("itemRender");return a?r=a(e,t):(r=e.clone()).css({width:(0,N.RG)(e),height:(0,N.Oq)(e)}),r},_renderIndicator(e,t,a,r){var o=(0,N.P$)(e,!0),c=(0,N.Ot)(e,!0),f=e.offset().top-a.offset().top,s=e.offset().left-a.offset().left;this._indicator.css({position:"absolute",top:r&&t?f+o:f,left:r&&!t?s+c:s}).toggleClass("dx-position-indicator-horizontal",!t).toggleClass("dx-position-indicator-vertical",!!t).toggleClass("dx-position-indicator-last",!!r).appendTo(a),(0,N.k$)(this._indicator,""),(0,N.zj)(this._indicator,""),t?(0,N.zj)(this._indicator,c):(0,N.k$)(this._indicator,o)},_renderDraggable(e){this._$draggable&&this._$draggable.remove(),this._$draggable=this._renderItem(e,"drag").addClass(this.option("dragClass")).appendTo(xa(e)).css({zIndex:1e6,position:"absolute"})},_detachEventHandlers(){var e=[pt.Cy,pt.ni,pt._N,pt.Ve,pt.qG,pt.gv].join(" ");ot.A.off(this._getEventListener(),(0,ft.b4)(e,va),void 0)},_getItemOffset(e,t,a){for(var r=0;r<t.length;r+=1){var o=void 0,c=a.pageY<t[r].posVertical;if(e?o=c:c&&!(o=D(a.pageX,t[r],this.option("rtlEnabled")))&&t[r+1]&&t[r+1].posVertical>t[r].posVertical&&(o=!0),o)return t[r]}},_getEventListener(){var e=this.option("groupSelector"),t=this.$element();return e?t.find(e):t},_attachEventHandlers(){var u,S,w,_,E,M,k,e=this,t=e.option("itemSelector"),a=e.option("itemContainerSelector"),r=e.option("groupSelector"),o=e.option("sourceClass"),c=e.option("targetClass"),f=e.option("onDragging"),s=e.option("groupFilter"),P=e.$element(),se=null,ee=-1,ve=function(){se?.dispose(),se=null};if(e._detachEventHandlers(),e.option("allowDragging")){var _e=e._getEventListener();ot.A.on(_e,(0,ft.b4)(pt.ni,va),t,Se=>{var ge,de=(u=(0,G.A)(Se.currentTarget)).closest(r);M=de.attr("group"),S=function X(e,t){var a=-1,r=t.get(0);return(0,L.__)(e,(o,c)=>{var f=(0,G.A)(c);if(f.attr("item-group")&&f.attr("item-group")===e.eq(o-1).attr("item-group")||(a+=1),c===r)return!1}),a===e.length?-1:a}((r?de:P).find(t),u),u.attr("item-group")&&(u=de.find("[item-group='".concat(u.attr("item-group"),"']"))),e._renderDraggable(u),w=e._renderItem(u,"target").addClass(c),u.addClass(o),E=[],(0,L.__)(u,(ge,j)=>{E.push((0,G.A)(j).offset())}),ge=lt.A.getRootNode(e.$element().get(0)),k=r?s?(0,G.A)(ge).find(r).filter(s):P.find(r):P,e._indicator=(0,G.A)("<div>").addClass("dx-position-indicator")}),ot.A.on(_e,(0,ft.b4)(pt.Cy,va),Se=>{var de,ge,j,ct;if(u){if(ee=-1,e._indicator.detach(),(0,L.__)(e._$draggable,(ct,Ft)=>{(0,G.A)(Ft).css({top:E[ct].top+Se.offset.y,left:E[ct].left+Se.offset.x})}),_&&_.removeClass(c),(_=function ne(e,t){var a;return(0,L.__)(t,function(){(function T(e,t,a){var r=(0,G.A)(e),o=r.offset();if(t>=o.left&&t<=o.left+(0,N.Ot)(r,!0)&&a>=o.top&&a<=o.top+(0,N.P$)(r,!0))return!0})(this,e.pageX,e.pageY)&&(a=(0,G.A)(this))}),a}(Se,k))&&(ct={sourceGroup:M,sourceIndex:S,sourceElement:u,targetGroup:_.attr("group"),targetIndex:_.find(t).index(w)},f&&f(ct),ct.cancel&&(_=void 0)),_&&se&&_.get(0)!==se.element().get(0)&&ve(),se&&se.moveIfNeed(Se),!_)return void w.detach();!se&&_.attr("allow-scrolling")&&(se=function ce(e){var t,a=e.scrollTop(),r=e.$element(),{top:o}=r.offset(),c=(0,N.Oq)(r),f=0;function s(w){a=w.scrollOffset.top}function u(){S(),e.scrollTo(a+=f),t=setTimeout(u,10)}function S(){clearTimeout(t)}return e.on("scroll",s),{moveIfNeed:function(w){if(w.pageY<=o+20)f=-2;else{if(!(w.pageY>=o+c-20))return f=0,void S();f=2}u()},element:()=>r,dispose(){S(),e.off("scroll",s)}}}(_.dxScrollable("instance"))),_.addClass(c);var ue=_.find(a),Ce=ue.find(t),te=_.closest(".".concat(n)).data("dxSortableOld"),J=te.option("useIndicator"),we="vertical"===(te||e).option("direction"),Ee=function le(e,t,a){for(var r=[],o=[],c=0;c<e.length;c+=o.length)if((o=e.eq(c)).attr("item-group")&&(o=a.find("[item-group='".concat(o.attr("item-group"),"']"))),o.is(":visible")){var f={item:o,index:r.length,posVertical:t?(o.last().offset().top+o.offset().top+(0,N.P$)(o.last(),!0))/2:(0,N.P$)(o.last(),!0)+o.last().offset().top,posHorizontal:t?void 0:((0,N.Ot)(o.last(),!0)+o.last().offset().left+o.offset().left)/2};r.push(f)}return r}(Ce,we,ue),Me=e._getItemOffset(we,Ee,Se);if(Me){if(j=Ee[Me.index-1]&&Ee[Me.index-1].item,(de=Me.item).hasClass(o)||j&&j.hasClass(o)&&j.is(":visible"))return void w.detach();if(ee=Me.index,!J)return void w.insertBefore(de);var at=_.attr("group")!==M,Pt=ee===S,bt=ee===S+1;if(at)return void e._renderIndicator(de,we,_,e.option("rtlEnabled")&&!we);!Pt&&!bt&&e._renderIndicator(de,we,_,e.option("rtlEnabled")&&!we)}else{if((ge=Ce.last()).is(":visible")&&ge.hasClass(o))return;ue.length&&(ee=Ee.length?Ee[Ee.length-1].index+1:0),J?Ce.length&&e._renderIndicator(ge,we,_,!e.option("rtlEnabled")||we):w.appendTo(ue)}}}),ot.A.on(_e,(0,ft.b4)(pt._N,va),()=>{if(ve(),u){var Se=e.option("onChanged"),de={sourceIndex:S,sourceElement:u,sourceGroup:M,targetIndex:ee,removeSourceElement:!0,removeTargetElement:!1,removeSourceClass:!0};_&&(_.removeClass(c),de.targetGroup=_.attr("group"),(M!==de.targetGroup||ee>-1)&&(Se&&Se(de),de.removeSourceElement&&u.remove())),e._indicator.detach(),de.removeSourceClass&&u.removeClass(o),u=null,e._$draggable.remove(),e._$draggable=null,de.removeTargetElement&&w.remove(),w.removeClass(c),w=null}})}},_init(){this.callBase(),this._attachEventHandlers()},_render(){this.callBase(),this.$element().addClass(n)},_dispose(){this.callBase.apply(this,arguments),this._$draggable&&this._$draggable.detach(),this._indicator&&this._indicator.detach()},_optionChanged(e){switch(e.name){case"onDragging":case"onChanged":case"itemRender":case"groupSelector":case"itemSelector":case"itemContainerSelector":case"sourceClass":case"targetClass":case"dragClass":case"allowDragging":case"groupFilter":case"useIndicator":this._attachEventHandlers();break;case"direction":break;default:this.callBase(e)}},_useTemplates:()=>!1});function qe(e,t){var a=function We(e,t){var a=e.hasClass(pe.area.box),r=e.attr(Zt.treeViewItem);return a?function Le(e,t){var a=e.clone();return t===qt.targets.drag&&e.each((r,o)=>{var c=parseFloat((0,N.Ot)(o));return a.eq(r).css("width",c),!0}),a}(e,t):r?function fe(e){return e.clone().addClass(pe.area.box).css("width",parseFloat((0,N.Ot)(e)))}(e):function ze(e){return(0,G.A)("<div>").addClass(pe.area.field).addClass(pe.area.box).text(e.text())}(e)}(e,t);return t===qt.targets.drag?function Ze(e){var t=(0,G.A)("<div>");return e.each((a,r)=>{var o=(0,G.A)("<div>").addClass(pe.pivotGrid.fieldsContainer).addClass(pe.widget).append((0,G.A)(r));return t.append(o),!0}),t.children()}(a):a}(0,xt.A)("dxSortableOld",Z);var x="<div>";class l extends Mt.$k{_getSearchExpr(t,a){return t.useDefaultSearchExpr=!0,super._getSearchExpr(t,a)}}function i(e,t){var a=t;return(0,Pe.O9)(t.groupIndex)&&(a=e.getAreaFields(t.area,!0)[t.areaIndex]),a}function p(e){return e=e||{},JSON.stringify([e.fields,e.columnExpandedPaths,e.rowExpandedPaths])}var y=(0,Mt.v2)((0,ca.A)((0,Da.A)(oe.A)));class C extends y{_getDefaultOptions(){return(0,rt.A)((0,rt.A)({},super._getDefaultOptions()),{allowFieldDragging:!0,applyChangesMode:"instantly",state:null,headerFilter:{width:252,height:325,allowSelectAll:!0,showRelevantValues:!1,search:{enabled:!1,timeout:500,editorOptions:{},mode:"contains"},texts:{emptyValue:Fe.A.format("dxDataGrid-headerFilterEmptyValue"),ok:Fe.A.format("dxDataGrid-headerFilterOK"),cancel:Fe.A.format("dxDataGrid-headerFilterCancel")}},remoteSort:!1})}_init(){super._init(),this._headerFilterView=new l(this),this._refreshDataSource(),this.subscribeToEvents(),vt.A.logHeaderFilterDeprecatedWarningIfNeed(this)}_refreshDataSource(){var t=this.option("dataSource");t&&t.fields&&t.load&&(this._dataSource=t)}_optionChanged(t){switch(t.name){case"dataSource":this._refreshDataSource();break;case"applyChangesMode":case"remoteSort":break;case"state":if(this._skipStateChange||!this._dataSource)break;"instantly"===this.option("applyChangesMode")&&p(this._dataSource.state())!==p(t.value)?this._dataSource.state(t.value):(this._clean(!0),this._renderComponent());break;case"headerFilter":case"allowFieldDragging":this._invalidate();break;default:super._optionChanged(t)}}renderField(t,a){var r=(0,G.A)(x).addClass(pe.area.fieldContent).text(t.caption||t.dataField),o=(0,G.A)(x).addClass(pe.area.field).addClass(pe.area.box).data("field",t).append(r),c=i(this._dataSource,t);return"data"!==t.area&&(t.allowSorting&&this._applyColumnState({name:"sort",rootElement:o,column:{alignment:this.option("rtlEnabled")?"right":"left",sortOrder:"desc"===t.sortOrder?"desc":"asc",allowSorting:t.allowSorting},showColumnLines:a}),this._applyColumnState({name:"headerFilter",rootElement:o,column:{alignment:this.option("rtlEnabled")?"right":"left",filterValues:c.filterValues,allowFiltering:c.allowFiltering&&!t.groupIndex,allowSorting:t.allowSorting},showColumnLines:a})),t.groupName&&o.attr(Zt.itemGroup,t.groupName),o}_clean(t){}_render(){super._render(),this._headerFilterView.render(this.$element())}renderSortable(){var t=this;t._createComponent(t.$element(),Z,(0,Ne.X)({allowDragging:t.option("allowFieldDragging"),itemSelector:".".concat(pe.area.field),itemContainerSelector:".".concat(pe.area.fieldContainer),groupSelector:".".concat(pe.area.fieldList),groupFilter(){var a=t._dataSource,r=(0,G.A)(this).closest(".dx-sortable-old"),o=r.data("dxPivotGrid"),c=r.data("dxPivotGridFieldChooser");return o?o.getDataSource()===a:!!c&&c.option("dataSource")===a},itemRender:qe,onDragging(a){var r=a.sourceElement.data("field"),{targetGroup:o}=a;a.cancel=!1,!0===r.isMeasure?("column"===o||"row"===o||"filter"===o)&&(a.cancel=!0):!1===r.isMeasure&&"data"===o&&(a.cancel=!0)},useIndicator:!0,onChanged(a){var r=a.sourceElement.data("field");if(a.removeSourceElement=!!a.sourceGroup,t._adjustSortableOnChangedArgs(a),r){var c,{targetIndex:o}=a,f=0;t._processDemandState(s=>{var u=s.getAreaFields(r.area,!0);c=i(s,r);var w=u.filter(_=>!1!==_.visible)[o-1];w&&(f=u.filter(_=>!1===_.visible&&_.areaIndex<=w.areaIndex).length)}),t._applyChanges([c],{area:a.targetGroup,areaIndex:o+f})}}},t._getSortableOptions()))}_processDemandState(t){var a="instantly"===this.option("applyChangesMode"),r=this._dataSource;if(a)t(r,a);else{var o=r.state(),c=this.option("state");c&&r.state(c,!0),t(r,a),r.state(o,!0)}}_applyChanges(t,a){var r=this;r._processDemandState((o,c)=>{t.forEach(f=>{var{index:s}=f;o.field(s,a)}),c?o.load():r._changedHandler()})}_applyLocalSortChanges(t,a){this._processDemandState(r=>{r.field(t,{sortOrder:a}),r.sortLocal()})}_adjustSortableOnChangedArgs(t){t.removeSourceElement=!1,t.removeTargetElement=!0,t.removeSourceClass=!1}_getSortableOptions(){return{direction:"auto"}}subscribeToEvents(t){var a=this;ot.A.on(t||a.$element(),wt.U,".".concat(pe.area.field,".").concat(pe.area.box),function(o){var c=(0,G.A)(o.currentTarget).data("field"),f=(0,Ne.X)(!0,{},i(a._dataSource,c)),s=(0,G.A)(o.target).hasClass(pe.headerFilter),u=a._dataSource,S=f.groupName?"tree":"list",w=u.paginate()&&"list"===S;if(s)a._headerFilterView.showHeaderFilterMenu((0,G.A)(o.currentTarget),(0,Ne.X)(f,{type:S,encodeHtml:a.option("encodeHtml"),dataSource:{useDefaultSearch:!w,load(M){var{userData:P}=M;if(P.store)return P.store.load(M);var k=new Re.cY;return u.getFieldValues(f.index,a.option("headerFilter.showRelevantValues"),w?M:void 0).done(se=>{var ee=a.option("headerFilter.texts.emptyValue");se.forEach(ve=>{ve.text||(ve.text=ee)}),w?k.resolve(se):(P.store=new Ca.A(se),P.store.load(M).done(k.resolve).fail(k.reject))}).fail(k.reject),k},postProcess:M=>(function(e,t){var a=[],r=!!t.groupName,o="exclude"===t.filterType;t.filterValues&&(0,L.__)(t.filterValues,(c,f)=>{a.push(Array.isArray(f)?f.join("/"):f&&f.valueOf())}),(0,De.Fo)(e,c=>{var f=c[0],s=(0,De.AO)(c),u=r?(0,L.Tj)(c,w=>w.text).reverse().join("/"):f.text;f.value=r?s.slice(0):f.key||f.value;var S=r?s.join("/"):f.value&&f.value.valueOf();f.children&&(f.items=f.children,f.children=null),(0,Mt.NX)(f,f.key&&a.includes(u)||a.includes(S),o)})}(M,f),M)},apply(){a._applyChanges([f],{filterValues:this.filterValues,filterType:this.filterType})}}));else if(c.allowSorting&&"data"!==c.area){var _=a.option("remoteSort"),E="desc"===c.sortOrder?"asc":"desc";_?a._applyChanges([c],{sortOrder:E}):a._applyLocalSortChanges(c.index,E)}})}_initTemplates(){}addWidgetPrefix(t){return"dx-pivotgrid-".concat(t)}}(0,xt.A)("dxPivotGridFieldChooserBase",C);var F="<div>",R=(0,nt.Vd)();function $(e,t){var a=[];if(e.items)for(var r=0;r<e.items.length;r+=1)a.push.apply(a,$(e.items[r],t));else(0,Pe.O9)(e.index)&&a.push(t[e.index]);return a}function I(e,t){if(e.items)for(var a=0;a<e.items.length;a+=1){var r=I(e.items[a],t);if(r)return r}if(t(e))return e}var v=[function(e,t){return+!!t.isMeasure-!!e.isMeasure},function(e,t){return+!(!t.items||!t.items.length)-!(!e.items||!e.items.length)},function(e,t){return+!!(!1===e.isMeasure&&e.field&&e.field.levels&&e.field.levels.length)-!!(!1===t.isMeasure&&t.field&&t.field.levels&&t.field.levels.length)},(0,De.gK)(e=>e.text)];function A(e,t){for(var a=0,r=0;!a&&v[r];)a=v[r++](e,t);return a}function b(e){return e.find(".".concat(pe.scrollable.self)).dxScrollable("instance")}class H extends C{_getDefaultOptions(){return(0,rt.A)((0,rt.A)({},super._getDefaultOptions()),{height:400,layout:0,dataSource:null,encodeHtml:!0,onContextMenuPreparing:null,allowSearch:!1,searchTimeout:500,texts:{columnFields:Fe.A.format("dxPivotGrid-columnFields"),rowFields:Fe.A.format("dxPivotGrid-rowFields"),dataFields:Fe.A.format("dxPivotGrid-dataFields"),filterFields:Fe.A.format("dxPivotGrid-filterFields"),allFields:Fe.A.format("dxPivotGrid-allFields")}})}_refreshDataSource(){var t=this;t._expandedPaths=[],t._changedHandler=t._changedHandler||function(){(0,L.__)(t._dataChangedHandlers,(a,r)=>{r()}),t._fireContentReadyAction(),t._skipStateChange=!0,t.option("state",t._dataSource.state()),t._skipStateChange=!1},t._disposeDataSource(),super._refreshDataSource(),t._dataSource&&t._dataSource.on("changed",t._changedHandler)}_disposeDataSource(){var t=this._dataSource;t&&(t.off("changed",this._changedHandler),this._dataSource=void 0)}_dispose(){this._disposeDataSource(),super._dispose.apply(this,arguments)}_init(){super._init(),this._refreshDataSource(),this._dataChangedHandlers=[],this._initActions()}_initActions(){this._actions={onContextMenuPreparing:this._createActionByOption("onContextMenuPreparing")}}_trigger(t,a){this._actions[t](a)}_setOptionsByReference(){super._setOptionsByReference(),(0,Ne.X)(this._optionsByReference,{dataSource:!0})}_optionChanged(t){switch(t.name){case"dataSource":this._refreshDataSource(),this._invalidate();break;case"layout":case"texts":case"allowSearch":case"searchTimeout":case"encodeHtml":this._invalidate();break;case"onContextMenuPreparing":this._actions[t.name]=this._createActionByOption(t.name);break;default:super._optionChanged(t)}}_clean(t){!t&&this._dataSource&&this.option("state",this._dataSource.state()),this.$element().children(".".concat(pe.fieldChooser.container)).remove()}_renderLayout0(t){t.addClass(pe.layout.zero);var a=(0,G.A)(F).addClass(pe.row).appendTo(t),r=(0,G.A)(F).addClass(pe.row).appendTo(t),o=(0,G.A)(F).addClass(pe.col).appendTo(a),c=(0,G.A)(F).addClass(pe.col).appendTo(a),f=(0,G.A)(F).addClass(pe.col).appendTo(r),s=(0,G.A)(F).addClass(pe.col).appendTo(r);this._renderArea(o,"all"),this._renderArea(c,"row"),this._renderArea(c,"column"),this._renderArea(f,"filter"),this._renderArea(s,"data")}_renderLayout1(t){var a=(0,G.A)(F).addClass(pe.col).appendTo(t),r=(0,G.A)(F).addClass(pe.col).appendTo(t);this._renderArea(a,"all"),this._renderArea(r,"filter"),this._renderArea(r,"row"),this._renderArea(r,"column"),this._renderArea(r,"data")}_renderLayout2(t){t.addClass(pe.layout.second);var a=(0,G.A)(F).addClass(pe.row).appendTo(t);this._renderArea(a,"all");var r=(0,G.A)(F).addClass(pe.row).appendTo(t),o=(0,G.A)(F).addClass(pe.col).appendTo(r),c=(0,G.A)(F).addClass(pe.col).appendTo(r);this._renderArea(o,"filter"),this._renderArea(o,"row"),this._renderArea(c,"column"),this._renderArea(c,"data")}_initMarkup(){var t=this.$element(),a=(0,G.A)(F).addClass(pe.fieldChooser.container).appendTo(t),r=this.option("layout");super._initMarkup(),t.addClass(pe.fieldChooser.self).addClass(pe.pivotGrid.fieldsContainer),this._dataChangedHandlers=[];var o=this._dataSource,c="instantly"!==this.option("applyChangesMode")&&o&&o.state();c&&this.option("state")&&o.state(this.option("state"),!0),0===r?this._renderLayout0(a):1===r?this._renderLayout1(a):this._renderLayout2(a),c&&o.state(c,!0)}_renderContentImpl(){super._renderContentImpl(),this.renderSortable(),this._renderContextMenu(),this.updateDimensions()}_fireContentReadyAction(){(!this._dataSource||!this._dataSource.isLoading())&&super._fireContentReadyAction()}_getContextMenuArgs(t){var o,c,a=(0,G.A)(t.target).closest(".".concat(pe.area.field)),r=(0,G.A)(t.target).closest(".".concat(pe.area.fieldList));if(a.length){var f=a.data("field");f&&(o=this.getDataSource().field(f.index)||f)}return r.length&&(c=r.attr("group")),{event:t,field:o,area:c,items:[]}}_renderContextMenu(){var t=this,a=t.$element();t._contextMenu&&t._contextMenu.$element().remove(),t._contextMenu=t._createComponent((0,G.A)(F).appendTo(a),Dt.A,{onPositioning(r){var{event:o}=r;if(o){var c=t._getContextMenuArgs(o);t._trigger("onContextMenuPreparing",c),c.items&&c.items.length?r.component.option("items",c.items):r.cancel=!0}},target:a,onItemClick(r){r.itemData.onItemClick&&r.itemData.onItemClick(r)},cssClass:pe.fieldChooser.contextMenu})}_createTreeItems(t,a,r){var c,o=this,f=[],s=[],u=a[0],S={};return u?((0,L.__)(t,(w,_)=>{var E=_[u]||"";S[E]=S[E]||[],S[E].push(_),void 0===c&&(c=!0),c=c&&!0===_.isMeasure}),(0,L.__)(S,(w,_)=>{var E=r?"".concat(r,".").concat(w):w,M=o._createTreeItems(_,a.slice(1),E);w?s.push({key:w,text:w,path:E,isMeasure:M.isMeasure,expanded:o._expandedPaths.includes(E),items:M}):f=M}),(f=s.concat(f)).isMeasure=c):(0,L.__)(t,(w,_)=>{var E;!0===_.isMeasure&&(E="measure"),!1===_.isMeasure&&(E=_.groupName?"hierarchy":"dimension"),f.push({index:_.index,field:_,key:_.dataField,selected:(0,Pe.O9)(_.area),text:_.caption||_.dataField,icon:E,isMeasure:_.isMeasure,isDefault:_.isDefault})}),f}_createFieldsDataSource(t){var a=t&&t.fields()||[];a=a.filter(o=>!1!==o.visible&&!(0,Pe.O9)(o.groupIndex));var r=this._createTreeItems(a,["dimension","displayFolder"]);return(0,De.po)(r,o=>{o.sort(A)},0,"items"),r}_renderFieldsTreeView(t){var a=this,r=a._dataSource,o=a._createComponent(t,Fa.A,{dataSource:a._createFieldsDataSource(r),showCheckBoxesMode:"normal",expandNodesRecursive:!1,searchEnabled:a.option("allowSearch"),searchTimeout:a.option("searchTimeout"),useNativeScrolling:!1,itemTemplate(c,f,s){var u,S=(0,G.A)("<div>").toggleClass(pe.area.field,!c.items).attr(Zt.treeViewItem,!0).data("field",c.field).appendTo(s);c.icon&&(null===(u=(0,ba.N)(c.icon))||void 0===u||u.appendTo(S)),(0,G.A)("<span>").text(c.text).appendTo(S)},onItemCollapsed(c){var f=a._expandedPaths.indexOf(c.itemData.path);f>=0&&a._expandedPaths.splice(f,1)},onItemExpanded(c){a._expandedPaths.indexOf(c.itemData.path)<0&&a._expandedPaths.push(c.itemData.path)},onItemSelectionChanged(c){var s,u,w,f=c.itemData,S=!0;if(f.items){if(f.selected)return void o.unselectItem(f);if(a._processDemandState(()=>{u=$(f,r.fields());for(var E=0;E<u.length;E+=1)if(u[E].area){S=!1;break}}),S){var _=I(f,E=>E.isDefault)||I(f,E=>(0,Pe.O9)(E.index));return void(_&&o.selectItem(_))}}else s=r.fields()[f.index],f.selected&&(w=s.isMeasure?"data":"column"),s&&(u=[s]);a._applyChanges(u,{area:w,areaIndex:void 0})}});a._dataChangedHandlers.push(function(){var c=b(t),f=c?c.scrollTop():0;o.option({dataSource:a._createFieldsDataSource(r)}),(c=b(t))&&(c.scrollTo({y:f}),c.update())})}_renderAreaFields(t,a){var r=this,o=r._dataSource,c=o?(0,Ne.X)(!0,[],o.getAreaFields(a,!0)):[];t.empty(),(0,L.__)(c,(f,s)=>{!1!==s.visible&&r.renderField(s,!0).appendTo(t)})}_renderArea(t,a){var s,u,r=this,o=(0,G.A)(F).addClass(pe.area.self).appendTo(t),c=(0,G.A)(F).addClass(pe.area.fieldListHeader).appendTo(o),f=r.option("texts.".concat(a,"Fields"));(0,G.A)("<span>").addClass(pe.area.icon).addClass("dx-area-icon-".concat(a)).appendTo(c),(0,G.A)("<span>").html("&nbsp;").appendTo(c),(0,G.A)("<span>").addClass(pe.area.caption).text(f).appendTo(c);var S=(0,G.A)(F).addClass(pe.area.fieldList).addClass(pe.pivotGrid.dragAction).appendTo(o);"all"!==a?(S.attr("group",a).attr(Zt.allowScrolling,!0),s=(0,G.A)(F).addClass(pe.area.fieldContainer).appendTo(S),u=function(){r._renderAreaFields(s,a)},r._dataChangedHandlers.push(u),u(),S.dxScrollable({useNative:!1})):(o.addClass(pe.allFields),S.addClass(pe.treeView.borderVisible),r._renderFieldsTreeView(S))}_getSortableOptions(){return{direction:""}}_adjustSortableOnChangedArgs(){}resetTreeView(){var t=this.$element().find(".".concat(pe.treeView.self)).dxTreeView("instance");t&&(t.option("searchValue",""),t.collapseAll())}applyChanges(){var t=this.option("state");(0,Pe.O9)(t)&&this._dataSource.state(t)}cancelChanges(){var t=this._dataSource;return!t.isLoading()&&(this.option("state",t.state()),!0)}getDataSource(){return this._dataSource}updateDimensions(){this.$element().find(".".concat(pe.area.self," .").concat(pe.scrollable.self)).dxScrollable("update")}_visibilityChanged(t){t&&R&&this.updateDimensions()}}(0,xt.A)("dxPivotGridFieldChooser",H);var W=B(2839),re="<div>",K=Ke.inherit({ctor(e,t){this.callBase(e),this._area=t},_getAreaName:()=>"fields",_createGroupElement(){return(0,G.A)(re).addClass("dx-pivotgrid-fields-area").addClass("dx-area-fields").addClass("dx-pivotgrid-drag-action").attr("group",this._area)},isVisible(){return!!this.option("fieldPanel.visible")&&this.option("fieldPanel.show".concat((0,De.Zr)(this._area),"Fields"))},_renderButton(e){var t=this,a=(0,G.A)("<td>").appendTo((0,G.A)("<tr>").appendTo(e));t.component._createComponent((0,G.A)(re).appendTo(a),W.A,{text:"Fields",icon:"menu",width:"auto",onClick(){var o=t.tableElement().find(".dx-fields-area-popup").dxPopup("instance");o.option("visible")||o.show()}}).$element().addClass("dx-pivotgrid-fields-area-hamburger")},_getPopupOptions:(e,t)=>({contentTemplate:()=>(0,G.A)("<table>").addClass("dx-area-field-container").append((0,G.A)("<thead>").addClass("dx-pivotgrid-fields-area-head").append(e)),height:"auto",width:"auto",position:{at:"left",my:"left",of:t},dragEnabled:!1,animation:{show:{type:"pop",duration:200}},shading:!1,showTitle:!1,hideOnOutsideClick:!0,container:t.parent()}),_renderPopup(e,t){var a=e.find(".dx-button"),r=this._getPopupOptions(t,a),o=this.component.$element().dxPivotGridFieldChooserBase("instance");this._rowPopup&&this._rowPopup.$element().remove(),this._rowPopup=this.component._createComponent((0,G.A)(re).appendTo(e),St.A,r),this._rowPopup.$element().addClass("dx-fields-area-popup"),this._rowPopup.content().addClass("dx-pivotgrid-fields-container"),this._rowPopup.content().parent().attr("group","row"),o.subscribeToEvents(this._rowPopup.content()),o.renderSortable(this._rowPopup.content())},_shouldCreateButton:()=>!1,_renderTableContent(e,t){var a=this,r=this.groupElement(),o=this.isVisible(),c=a.component.$element().dxPivotGridFieldChooserBase("instance"),f=(0,G.A)("<thead>").addClass("dx-pivotgrid-fields-area-head").appendTo(e),s=a._area,u=(0,G.A)("<tr>");r.toggleClass("dx-hidden",!o),e.addClass("dx-area-field-container"),o&&((0,L.__)(t,(S,w)=>{if(w.area===s&&!1!==w.visible){var _=(0,G.A)("<td>").append(c.renderField(w,"row"===w.area)),E=_.find(".dx-column-indicators");E.length&&a._shouldCreateButton()&&E.insertAfter(E.next()),_.appendTo(u),function Y(e,t,a,r){a&&a.groupName&&a.groupName===e.groupName&&(0,G.A)(re).addClass("dx-group-connector").addClass("dx-group-connector-prev").appendTo(r),t&&t.groupName&&t.groupName===e.groupName&&(0,G.A)(re).addClass("dx-group-connector").addClass("dx-group-connector-next").appendTo(r)}(w,t[S+1],t[S-1],_)}}),u.children().length||(0,G.A)("<td>").append((0,G.A)(re).addClass("dx-empty-area-text").text(this.option("fieldPanel.texts.".concat(s,"FieldArea")))).appendTo(u),a._shouldCreateButton()?(a._renderButton(f),a._renderPopup(e,u)):f.append(u))},setGroupWidth(e){(0,q.zj)(this.groupElement(),e)},setGroupHeight(e){(0,q.k$)(this.groupElement(),e)},reset(){this.callBase(),this.groupElement().css("marginTop",0)},_renderVirtualContent:ye.lQ}),Q=B(49057),it="dx-expand-border",st=!!Q.A.IS_RENOVATED_WIDGET;function Nt(e,t){if(t){var{data:a}=e.data(),{rowIndex:r}=t.parentNode,{cellIndex:o}=t;return a[r]&&a[r][o]&&a[r][o].path}}var ga=Ke.inherit({ctor(e){this.callBase(e),this._scrollBarWidth=0},_getAreaName:()=>"column",_getAreaClassName:()=>"dx-pivotgrid-horizontal-headers",_createGroupElement(){return(0,G.A)("<div>").addClass(this._getAreaClassName()).addClass("dx-pivotgrid-area")},_applyCustomStyles(e){var{cssArray:t}=e,{cell:a}=e,{rowsCount:r}=e,{classArray:o}=e;e.cellIndex===e.cellsCount-1&&t.push("".concat(e.rtlEnabled?"border-left:":"border-right:","0px")),(a.rowspan===r-e.rowIndex||e.rowIndex+1===r)&&t.push("border-bottom-width:0px"),("T"===a.type||"GT"===a.type)&&o.push("dx-row-total"),"T"===e.cell.type&&o.push("dx-total"),"GT"===e.cell.type&&o.push("dx-grandtotal"),(0,Pe.O9)(a.expanded)&&o.push(a.expanded?"dx-pivotgrid-expanded":"dx-pivotgrid-collapsed"),this.callBase(e)},_getMainElementMarkup(){var e=lt.A.createElement("thead");return e.setAttribute("class",this._getAreaClassName()),e},_getCloseMainElementMarkup:()=>"</thead>",setVirtualContentParams(e){this.callBase(e),this._setTableCss({left:e.left,top:0}),this._virtualContentWidth=e.width},hasScroll(){var e=this._virtualContent?this._virtualContentWidth:this._tableWidth,t=this.getGroupWidth();return!(!t||!e)&&e-t>=1},renderScrollable(){this._groupElement.dxScrollable({useNative:!1,useSimulatedScrollbar:!1,showScrollbar:"never",bounceEnabled:!1,direction:"horizontal",rtlEnabled:!!st&&this.component.option("rtlEnabled"),updateManually:!0})},updateScrollableOptions(e){var{rtlEnabled:t}=e,a=this._getScrollable();st&&a.option({rtlEnabled:t})},processScrollBarSpacing(e){var t=this.option("rtlEnabled")?"right":"left",a=this.getGroupWidth();a&&this.setGroupWidth(a-e),this._scrollBarWidth&&this._groupElement.next().remove(),this._groupElement.toggleClass("dx-vertical-scroll",e>0),(0,N.zj)(this._groupElement.css("float",t),this.getGroupHeight()),this._scrollBarWidth=e},getScrollPath(e){var a,t=this.tableElement();return e-=parseInt(t[0].style.left,10)||0,(0,L.__)(t.find("td"),(r,o)=>{if(1===o.colSpan&&o.offsetLeft<=e&&o.offsetWidth+o.offsetLeft>e)return a=o,!1}),Nt(t,a)},_moveFakeTable(e){this._moveFakeTableHorizontally(e),this.callBase()}}),wa=ga.inherit({_getAreaClassName:()=>"dx-pivotgrid-vertical-headers",_applyCustomStyles(e){this.callBase(e),e.cellIndex===e.cellsCount-1&&e.classArray.push("dx-last-cell"),e.rowIndex===e.rowsCount-1&&e.cssArray.push("border-bottom: 0px"),e.cell.isWhiteSpace&&e.classArray.push("dx-white-space-column")},_getAreaName:()=>"row",setVirtualContentParams(e){this.callBase(e),this._setTableCss({top:e.top,left:0}),this._virtualContentHeight=e.height},hasScroll(){var e=this._virtualContent?this._virtualContentHeight:this._tableHeight,t=this.getGroupHeight();return!(!t||!e)&&e-t>=1},renderScrollable(){this._groupElement.dxScrollable({useNative:!1,useSimulatedScrollbar:!1,showScrollbar:"never",bounceEnabled:!1,direction:"vertical",updateManually:!0})},processScrollBarSpacing(e){var t=this.getGroupHeight();if(t&&this.setGroupHeight(t-e),this._scrollBarWidth&&this._groupElement.next().remove(),e){var a=(0,G.A)("<div>");(0,N.zj)(a,"100%"),(0,N.k$)(a,e-1),this._groupElement.after(a)}this._scrollBarWidth=e},getScrollPath(e){var a,t=this.tableElement();return e-=parseInt(t[0].style.top,10)||0,(0,L.__)(t.find("tr"),(r,o)=>{var c=o.childNodes[o.childNodes.length-1];if(c&&1===c.rowSpan&&c.offsetTop<=e&&c.offsetHeight+c.offsetTop>e)return a=c,!1}),Nt(t,a)},_moveFakeTable(e){this._moveFakeTableTop(e),this.callBase()},_getRowClassNames(e,t,a){0!==e&t.expanded&&!a.includes(it)&&a.push(it)},_getMainElementMarkup(){var e=lt.A.createElement("tbody");return e.classList.add(this._getAreaClassName()),e},_getCloseMainElementMarkup:()=>"</tbody>",updateColspans(e){var{rows:t}=this.tableElement()[0],a=0,r=[];if(!(this.getColumnsCount()-e>0))for(var o=0;o<t.length;o+=1)for(var c=0;c<t[o].cells.length;c+=1){var f=t[o].cells[c],{rowSpan:s}=f;r[o]&&(a-=r[o],r[o]=0);var u=e-(a+f.colSpan);c===t[o].cells.length-1&&u>0&&(f.colSpan+=u),r[o+s]=(r[o+s]||0)+f.colSpan,a+=f.colSpan}}});const ea={HorizontalHeadersArea:ga,VerticalHeadersArea:wa};var ja=(0,nt.zk)(),Ya="dx-area-data-cell",La="dx-area-row-cell",Ka="dx-area-column-cell",Ra="dx-area-description-cell",Qa="dx-pivotgrid-border",Ja="dx-pivotgrid",Sa="dx-bottom-border",Za="dx-area-fields",qa="dx-incompressible-fields",Ga="dx-overflow-hidden",ya="<tr>",ta="<td>",Vt="<div>",tr=["allowSorting","allowSortingBySummary","allowFiltering","allowExpandAll"];function Ha(e){var t=0;return(0,L.__)(e,(a,r)=>{t+=r||0}),t}function Ma(e,t){for(var a=t/e.length,r=0;r<e.length;r+=1)e[r]-=a}function ar(e){e.off("scroll").off("stop")}function rr(e,t){var a="width"===t?["borderLeftWidth","borderRightWidth"]:["borderTopWidth","borderBottomWidth"],r=0;return(0,L.__)(e,(o,c)=>{var f=ja.getComputedStyle(c.get(0));a.forEach(s=>{r+=parseFloat(f[s])||0})}),r}var Na=oe.A.inherit({_getDefaultOptions(){return(0,Ne.X)(this.callBase(),{scrolling:{timeout:300,renderingThreshold:150,minTimeout:10,mode:"standard",useNative:"auto",removeInvisiblePages:!0,virtualRowHeight:50,virtualColumnWidth:100,loadTwoPagesOnStart:!0},encodeHtml:!0,dataSource:null,activeStateEnabled:!1,fieldChooser:{minWidth:250,minHeight:250,enabled:!0,allowSearch:!1,searchTimeout:500,layout:0,title:Fe.A.format("dxPivotGrid-fieldChooserTitle"),width:600,height:600,applyChangesMode:"instantly"},onContextMenuPreparing:null,allowSorting:!1,allowSortingBySummary:!1,allowFiltering:!1,allowExpandAll:!1,wordWrapEnabled:!0,fieldPanel:{showColumnFields:!0,showFilterFields:!0,showDataFields:!0,showRowFields:!0,allowFieldDragging:!0,visible:!1,texts:{columnFieldArea:Fe.A.format("dxPivotGrid-columnFieldArea"),rowFieldArea:Fe.A.format("dxPivotGrid-rowFieldArea"),filterFieldArea:Fe.A.format("dxPivotGrid-filterFieldArea"),dataFieldArea:Fe.A.format("dxPivotGrid-dataFieldArea")}},dataFieldArea:"column",export:{enabled:!1,fileName:"PivotGrid"},showRowTotals:!0,showRowGrandTotals:!0,showColumnTotals:!0,showColumnGrandTotals:!0,hideEmptySummaryCells:!0,showTotalsPrior:"none",rowHeaderLayout:"standard",loadPanel:{enabled:!0,text:Fe.A.format("Loading"),width:200,height:70,showIndicator:!0,indicatorSrc:"",showPane:!0},texts:{grandTotal:Fe.A.format("dxPivotGrid-grandTotal"),total:Fe.A.getFormatter("dxPivotGrid-total"),noData:Fe.A.format("dxDataGrid-noDataText"),showFieldChooser:Fe.A.format("dxPivotGrid-showFieldChooser"),expandAll:Fe.A.format("dxPivotGrid-expandAll"),collapseAll:Fe.A.format("dxPivotGrid-collapseAll"),sortColumnBySummary:Fe.A.getFormatter("dxPivotGrid-sortColumnBySummary"),sortRowBySummary:Fe.A.getFormatter("dxPivotGrid-sortRowBySummary"),removeAllSorting:Fe.A.format("dxPivotGrid-removeAllSorting"),exportToExcel:Fe.A.format("dxDataGrid-exportToExcel"),dataNotAvailable:Fe.A.format("dxPivotGrid-dataNotAvailable")},onCellClick:null,onCellPrepared:null,showBorders:!1,stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3},onExpandValueChanging:null,renderCellCountLimit:2e4,onExporting:null,headerFilter:{width:252,height:325,allowSelectAll:!0,showRelevantValues:!1,search:{enabled:!1,timeout:500,editorOptions:{},mode:"contains"},texts:{emptyValue:Fe.A.format("dxDataGrid-headerFilterEmptyValue"),ok:Fe.A.format("dxDataGrid-headerFilterOK"),cancel:Fe.A.format("dxDataGrid-headerFilterCancel")}}})},_updateCalculatedOptions(e){var t=this;(0,L.__)(e,(a,r)=>{(0,L.__)(tr,(o,c)=>{(void 0===r[c]||r._initProperties&&c in r._initProperties&&void 0===r._initProperties[c])&&(0,De.CE)(r,c,t.option(c))})})},_getDataControllerOptions(){var e=this;return{component:e,dataSource:e.option("dataSource"),texts:e.option("texts"),showRowTotals:e.option("showRowTotals"),showRowGrandTotals:e.option("showRowGrandTotals"),showColumnTotals:e.option("showColumnTotals"),showTotalsPrior:e.option("showTotalsPrior"),showColumnGrandTotals:e.option("showColumnGrandTotals"),dataFieldArea:e.option("dataFieldArea"),rowHeaderLayout:e.option("rowHeaderLayout"),hideEmptySummaryCells:e.option("hideEmptySummaryCells"),onFieldsPrepared(t){e._updateCalculatedOptions(t)}}},_initDataController(){var e=this;e._dataController&&e._dataController.dispose(),e._dataController=new Qe.DataController(e._getDataControllerOptions()),(0,nt.Vd)()&&e._dataController.changed.add(()=>{e._render()}),e._dataController.scrollChanged.add(a=>{e._scrollLeft=a.left,e._scrollTop=a.top}),e._dataController.loadingChanged.add(()=>{e._updateLoading()}),e._dataController.progressChanged.add(e._updateLoading.bind(e)),e._dataController.dataSourceChanged.add(()=>{e._trigger("onChanged")});var t=e.option("onExpandValueChanging");t&&e._dataController.expandValueChanging.add(a=>{t(a)})},_init(){this.callBase(),this._initDataController(),vt.A.logHeaderFilterDeprecatedWarningIfNeed(this),this._scrollLeft=this._scrollTop=null,this._initActions()},_initActions(){this._actions={onChanged:this._createActionByOption("onChanged"),onContextMenuPreparing:this._createActionByOption("onContextMenuPreparing"),onCellClick:this._createActionByOption("onCellClick"),onExporting:this._createActionByOption("onExporting"),onCellPrepared:this._createActionByOption("onCellPrepared")}},_trigger(e,t){this._actions[e](t)},_optionChanged(e){if(tr.includes(e.name)){var t=this.getDataSource().fields();this._updateCalculatedOptions(t)}switch(e.name){case"dataSource":case"allowSorting":case"allowFiltering":case"allowExpandAll":case"allowSortingBySummary":case"scrolling":case"stateStoring":this._initDataController(),this._fieldChooserPopup.hide(),this._renderFieldChooser(),this._invalidate();break;case"texts":case"showTotalsPrior":case"showRowTotals":case"showRowGrandTotals":case"showColumnTotals":case"showColumnGrandTotals":case"hideEmptySummaryCells":case"dataFieldArea":this._dataController.updateViewOptions(this._getDataControllerOptions());break;case"useNativeScrolling":case"encodeHtml":case"renderCellCountLimit":case"onExpandValueChanging":break;case"rtlEnabled":this.callBase(e),this._renderFieldChooser(),this._renderContextMenu(),(0,nt.Vd)()&&this._renderLoadPanel(this._dataArea.groupElement(),this.$element()),this._invalidate();break;case"export":this._renderDescriptionArea();break;case"onCellClick":case"onContextMenuPreparing":case"onExporting":case"onExported":case"onFileSaving":case"onCellPrepared":this._actions[e.name]=this._createActionByOption(e.name);break;case"fieldChooser":this._renderFieldChooser(),this._renderDescriptionArea();break;case"loadPanel":(0,nt.Vd)()&&("loadPanel.enabled"===e.fullName?(clearTimeout(this._hideLoadingTimeoutID),this._renderLoadPanel(this._dataArea.groupElement(),this.$element())):(this._renderLoadPanel(this._dataArea.groupElement(),this.$element()),this._invalidate()));break;case"fieldPanel":this._renderDescriptionArea(),this._invalidate();break;case"headerFilter":this._renderFieldChooser(),this._invalidate();break;case"showBorders":this._tableElement().toggleClass(Qa,!!e.value),this.updateDimensions();break;case"wordWrapEnabled":this._tableElement().toggleClass("dx-word-wrap",!!e.value),this.updateDimensions();break;case"rowHeaderLayout":this._tableElement().find(".".concat(La)).toggleClass("dx-area-tree-view","tree"===e.value),this._dataController.updateViewOptions(this._getDataControllerOptions());break;case"height":case"width":this._hasHeight=null,this.callBase(e),this.resize();break;default:this.callBase(e)}},_updateScrollPosition(e,t,a){var o,c,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=this._scrollTop||this._scrollLeft;this._scrollUpdating||(this._scrollUpdating=!0,t&&!t.hasScroll()&&this._hasHeight&&(this._scrollTop=null),e&&!e.hasScroll()&&(this._scrollLeft=null),(null!==this._scrollTop||null!==this._scrollLeft||f||this.option("rtlEnabled"))&&(a.scrollTo({left:c=this._scrollLeft||0,top:o=this._scrollTop||0},r),e.scrollTo({left:c},r),t.scrollTo({top:o},r),this._dataController.updateWindowScrollPosition(this._scrollTop)),this._scrollUpdating=!1)},_subscribeToEvents(e,t,a){var r=this;(0,L.__)([e,t,a],(o,c)=>{!function cr(e,t){ar(e),e.on("scroll",t).on("stop",t)}(c,f=>function(s,u){var{scrollOffset:S}=s,w=u._getScrollable(),_="vertical"!==w.option("direction")?S.left:r._scrollLeft,E="horizontal"!==w.option("direction")&&r._hasHeight?S.top:r._scrollTop;((r._scrollLeft||0)!==(_||0)||(r._scrollTop||0)!==(E||0))&&(r._scrollLeft=_,r._scrollTop=E,r._updateScrollPosition(e,t,a),"virtual"===r.option("scrolling.mode")&&r._dataController.setViewportPosition(r._scrollLeft,r._scrollTop))}(f,c))}),!r._hasHeight&&r._dataController.subscribeToWindowScrollEvents(a.groupElement())},_clean:ye.lQ,_needDelayResizing(e){return e.length*(e.length?e[0].length:0)>this.option("renderCellCountLimit")},_renderFieldChooser(){var e,t=this,a=t._pivotGridContainer,r=t.option("fieldChooser")||{},o="onDemand"===r.applyChangesMode?[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:Fe.A.format("OK"),onClick(){t._fieldChooserPopup.$content().dxPivotGridFieldChooser("applyChanges"),t._fieldChooserPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:Fe.A.format("Cancel"),onClick(){t._fieldChooserPopup.hide()}}}]:[],c={layout:r.layout,texts:r.texts||{},dataSource:t.getDataSource(),allowSearch:r.allowSearch,searchTimeout:r.searchTimeout,width:void 0,height:void 0,headerFilter:t.option("headerFilter"),encodeHtml:null!==(e=t.option("fieldChooser.encodeHtml"))&&void 0!==e?e:t.option("encodeHtml"),applyChangesMode:r.applyChangesMode,onContextMenuPreparing(s){t._trigger("onContextMenuPreparing",s)}},f={shading:!1,title:r.title,width:r.width,height:r.height,showCloseButton:!0,resizeEnabled:!0,minWidth:r.minWidth,minHeight:r.minHeight,toolbarItems:o,onResize(s){s.component.$content().dxPivotGridFieldChooser("updateDimensions")},onShown(s){t._createComponent(s.component.content(),H,c)},onHidden(s){var u=s.component.$content().dxPivotGridFieldChooser("instance");u.resetTreeView(),u.cancelChanges()}};t._fieldChooserPopup?(t._fieldChooserPopup.option(f),t._fieldChooserPopup.$content().dxPivotGridFieldChooser(c)):t._fieldChooserPopup=t._createComponent((0,G.A)(Vt).addClass("dx-fieldchooser-popup").appendTo(a),St.A,f)},_renderContextMenu(){var e=this,t=e._pivotGridContainer;e._contextMenu&&e._contextMenu.$element().remove(),e._contextMenu=e._createComponent((0,G.A)(Vt).appendTo(t),Dt.A,{onPositioning(a){var{event:r}=a;if(a.cancel=!0,r){var o=r.target.cellIndex>=0?r.target:(0,G.A)(r.target).closest("td").get(0);if(o){var c=e._createEventArgs(o,r),f=e._getContextMenuItems(c);f&&(a.component.option("items",f),a.cancel=!1)}}},onItemClick(a){a.itemData.onItemClick&&a.itemData.onItemClick(a)},cssClass:Ja,target:e.$element()})},_getContextMenuItems(e){var t=this,a=[],r=t.option("texts");if("row"===e.area||"column"===e.area){var o=e["".concat(e.area,"Fields")],c=e["column"===e.area?"rowFields":"columnFields"],f=e.cell.path&&o[e.cell.path.length-1],s=t.getDataSource();if(f&&f.allowExpandAll&&e.cell.path.length<e["".concat(e.area,"Fields")].length&&!s.paginate()&&(a.push({beginGroup:!0,icon:"none",text:r.expandAll,onItemClick(){s.expandAll(f.index)}}),a.push({text:r.collapseAll,icon:"none",onItemClick(){s.collapseAll(f.index)}})),e.cell.isLast&&!s.paginate()){var u=0;(0,L.__)(c,(S,w)=>{w.allowSortingBySummary&&(0,L.__)(e.dataFields,(_,E)=>{if(!(0,Pe.O9)(e.cell.dataIndex)||e.cell.dataIndex===_){var M=!(0,Pe.O9)(e.cell.dataIndex)&&e.dataFields.length>1,P="column"===e.area?r.sortColumnBySummary:r.sortRowBySummary,k=(0,De.UI)(e.dataFields,w.sortBySummaryField)===_&&(e.cell.path||[]).join("/")===(w.sortBySummaryPath||[]).join("/"),se=(0,kt.GP)(P,M?"".concat(w.caption," - ").concat(E.caption):w.caption);a.push({beginGroup:0===u,icon:k?"desc"===w.sortOrder?"sortdowntext":"sortuptext":"none",text:se,onItemClick(){s.field(w.index,{sortBySummaryField:E.name||E.caption||E.dataField,sortBySummaryPath:e.cell.path,sortOrder:"desc"===w.sortOrder?"asc":"desc"}),s.load()}}),u+=1}})}),(0,L.__)(c,(S,w)=>{if(w.allowSortingBySummary&&(0,Pe.O9)(w.sortBySummaryField))return a.push({beginGroup:0===u,icon:"none",text:r.removeAllSorting,onItemClick(){(0,L.__)(c,(_,E)=>{s.field(E.index,{sortBySummaryField:void 0,sortBySummaryPath:void 0,sortOrder:void 0})}),s.load()}}),!1})}}if(t.option("fieldChooser.enabled")&&a.push({beginGroup:!0,icon:"columnchooser",text:r.showFieldChooser,onItemClick(){t._fieldChooserPopup.show()}}),t.option("export.enabled")&&a.push({beginGroup:!0,icon:"xlsxfile",text:r.exportToExcel,onItemClick(){t.exportTo()}}),e.items=a,t._trigger("onContextMenuPreparing",e),(a=e.items)&&a.length)return a},_createEventArgs(e,t){var a=this.getDataSource(),r={rowFields:a.getAreaFields("row"),columnFields:a.getAreaFields("column"),dataFields:a.getAreaFields("data"),event:t};return function vr(e){return e.closest(".".concat(Za)).length||e.find(".".concat(Za)).length}((0,G.A)(e))?(0,Ne.X)(this._createFieldArgs(e),r):(0,Ne.X)(this._createCellArgs(e),r)},_createFieldArgs(e){var t=(0,G.A)(e).children().data("field"),a={field:t};return(0,Pe.O9)(t)?a:{}},_createCellArgs(e){var t=(0,G.A)(e),a=e.cellIndex,{rowIndex:r}=e.parentElement,o=t.closest("table"),c=o.data("data"),f=c&&c[r]&&c[r][a];return{area:o.data("area"),rowIndex:r,columnIndex:a,cellElement:(0,Bt.c)(t),cell:f}},_handleCellClick(e){var t=this,a=t._createEventArgs(e.currentTarget,e),{cell:r}=a;!r||!a.area&&(a.rowIndex||a.columnIndex)||(t._trigger("onCellClick",a),r&&!a.cancel&&(0,Pe.O9)(r.expanded)&&setTimeout(()=>{t._dataController[r.expanded?"collapseHeaderItem":"expandHeaderItem"](a.area,r.path)}))},_getNoDataText(){return this.option("texts.noData")},_renderNoDataText:vt.A.renderNoDataText,_renderLoadPanel:vt.A.renderLoadPanel,_updateLoading(e){var t=this,a=t._dataController.isLoading();if(t._loadPanel){var r=t._loadPanel.option("visible");if(r||(t._startLoadingTime=new Date),a&&(e?new Date-t._startLoadingTime>=1e3&&t._loadPanel.option("message","".concat(Math.floor(100*e),"%")):t._loadPanel.option("message",t.option("loadPanel.text"))),clearTimeout(t._hideLoadingTimeoutID),r&&!a)t._hideLoadingTimeoutID=setTimeout(()=>{t._loadPanel.option("visible",!1),t.$element().removeClass(Ga)});else{var o={visible:a};a&&(o.position=vt.A.calculateLoadPanelPosition(t._dataArea.groupElement())),t._loadPanel.option(o),t.$element().toggleClass(Ga,!a)}}},_renderDescriptionArea(){var f,e=this.$element(),t=e.find(".".concat(Ra)),a=(0,G.A)(Vt).addClass("dx-pivotgrid-toolbar"),r=this.option("fieldPanel"),o=e.find(".dx-filter-header"),c=e.find(".dx-column-header");if(f=r.visible&&r.showFilterFields?o:r.visible&&(r.showDataFields||r.showColumnFields)?c:t,c.toggleClass(Sa,!(!r.visible||!r.showDataFields&&!r.showColumnFields)),o.toggleClass(Sa,!(!r.visible||!r.showFilterFields)),t.toggleClass("dx-pivotgrid-background",r.visible&&(r.showDataFields||r.showColumnFields||r.showRowFields)),this.$element().find(".dx-pivotgrid-toolbar").remove(),a.prependTo(f),this.option("fieldChooser.enabled")){var s=(0,G.A)(Vt).appendTo(a).addClass("dx-pivotgrid-field-chooser-button"),u={icon:"columnchooser",hint:this.option("texts.showFieldChooser"),onClick:()=>{this.getFieldChooserPopup().show()}};this._createComponent(s,"dxButton",u)}if(this.option("export.enabled")){var S=(0,G.A)(Vt).appendTo(a).addClass("dx-pivotgrid-export-button"),w={icon:"xlsxfile",hint:this.option("texts.exportToExcel"),onClick:()=>{this.exportTo()}};this._createComponent(S,"dxButton",w)}},_detectHasContainerHeight(){var e=this.$element();if((0,Pe.O9)(this._hasHeight)){var t=this.option("height")||this.$element().get(0).style.height;t&&this._hasHeight^"auto"!==t&&(this._hasHeight=null)}if(!(0,Pe.O9)(this._hasHeight)&&!e.is(":hidden")){this._pivotGridContainer.addClass("dx-hidden");var a=(0,G.A)(Vt);(0,N.k$)(a,66666),e.append(a),this._hasHeight=66666!==(0,N.Oq)(e),this._pivotGridContainer.removeClass("dx-hidden"),a.remove()}},_renderHeaders(e,t,a,r){var o=this.getDataSource();this._rowFields=this._rowFields||new K(this,"row"),this._rowFields.render(e,o.getAreaFields("row")),this._columnFields=this._columnFields||new K(this,"column"),this._columnFields.render(t,o.getAreaFields("column")),this._filterFields=this._filterFields||new K(this,"filter"),this._filterFields.render(a,o.getAreaFields("filter")),this._dataFields=this._dataFields||new K(this,"data"),this._dataFields.render(r,o.getAreaFields("data")),this.$element().dxPivotGridFieldChooserBase("instance").renderSortable()},_createTableElement(){var e=(0,G.A)("<table>").css({width:"100%"}).toggleClass(Qa,!!this.option("showBorders")).toggleClass("dx-word-wrap",!!this.option("wordWrapEnabled"));return ot.A.on(e,(0,ft.b4)(wt.U,"dxPivotGrid"),"td",this._handleCellClick.bind(this)),e},_renderDataArea(e){var t=this._dataArea||new la.DataArea(this);return this._dataArea=t,t.render(e,this._dataController.getCellsInfo()),t},_renderRowsArea(e){var t=this._rowsArea||new ea.VerticalHeadersArea(this);return this._rowsArea=t,t.render(e,this._dataController.getRowsInfo()),t},_renderColumnsArea(e){var t=this._columnsArea||new ea.HorizontalHeadersArea(this);return this._columnsArea=t,t.render(e,this._dataController.getColumnsInfo()),t},_initMarkup(){this.callBase.apply(this,arguments),this.$element().addClass(Ja)},_renderContentImpl(){var e,t,a,r,c,f,s,u,o=!this._pivotGridContainer;(r=!o&&this._tableElement())||(this.$element().addClass("dx-row-lines").addClass("dx-pivotgrid-fields-container"),this._pivotGridContainer=(0,G.A)(Vt).addClass("dx-pivotgrid-container"),this._renderFieldChooser(),this._renderContextMenu(),e=(0,G.A)(ta).addClass(Ka),t=(0,G.A)(ta).addClass(La),a=(0,G.A)(ta).addClass(Ya),r=this._createTableElement(),u=(0,G.A)(ta).addClass("dx-data-header"),s=(0,G.A)("<td>").attr("colspan","2").addClass("dx-filter-header"),f=(0,G.A)(ta).addClass("dx-column-header"),c=(0,G.A)(ta).addClass(Ra),(0,G.A)(ya).append(s).appendTo(r),(0,G.A)(ya).append(u).append(f).appendTo(r),(0,G.A)(ya).append(c).append(e).appendTo(r),(0,G.A)(ya).addClass("dx-bottom-row").append(t).append(a).appendTo(r),this._pivotGridContainer.append(r),this.$element().append(this._pivotGridContainer),"tree"===this.option("rowHeaderLayout")&&t.addClass("dx-area-tree-view")),this.$element().addClass(Ga),this._createComponent(this.$element(),C,{dataSource:this.getDataSource(),encodeHtml:this.option("encodeHtml"),allowFieldDragging:this.option("fieldPanel.allowFieldDragging"),headerFilter:this.option("headerFilter"),visible:this.option("visible"),remoteSort:"virtual"===this.option("scrolling.mode")});var S=this._renderDataArea(a),w=this._renderRowsArea(t),_=this._renderColumnsArea(e);S.tableElement().prepend(_.headElement()),o&&(this._renderLoadPanel(S.groupElement().parent(),this.$element()),this._renderDescriptionArea(),w.renderScrollable(),_.renderScrollable(),S.renderScrollable()),[S,w,_].forEach(E=>{ar(E)}),this._renderHeaders(c,f,s,u),this._update(o)},_update(e){var t=this,a=function(){t.updateDimensions()};t._needDelayResizing(t._dataArea.getData())&&e?setTimeout(a):a()},_fireContentReadyAction(){this._dataController.isLoading()||this.callBase()},getScrollPath(e){return"column"===e?this._columnsArea.getScrollPath(this._scrollLeft):this._rowsArea.getScrollPath(this._scrollTop)},getDataSource(){return this._dataController.getDataSource()},getFieldChooserPopup(){return this._fieldChooserPopup},hasScroll(e){return"column"===e?this._columnsArea.hasScroll():this._rowsArea.hasScroll()},_dimensionChanged(){this.updateDimensions()},_visibilityChanged(e){e&&this.updateDimensions()},_dispose(){clearTimeout(this._hideLoadingTimeoutID),this.callBase.apply(this,arguments),this._dataController&&this._dataController.dispose()},_tableElement(){return this.$element().find("table").first()},addWidgetPrefix:e=>"dx-pivotgrid-".concat(e),resize(){this.updateDimensions()},isReady(){return this.callBase()&&!this._dataController.isLoading()},updateDimensions(){var t,r,s,u,e=this,a=e._tableElement(),o=0,c=0,f=0,S=a.find(".".concat(Ya)),w=a.find(".".concat(La)),_=a.find(".".concat(Ka)),E=a.find(".".concat(Ra)),M=a.find(".dx-filter-header"),P=a.find(".dx-column-header"),k=e._rowFields,se=new Re.cY;if((0,nt.Vd)()){var ee=k.isVisible()&&"tree"!==e.option("rowHeaderLayout");e._detectHasContainerHeight(),e._dataArea.headElement().length||e._dataArea.tableElement().prepend(e._columnsArea.headElement()),ee&&(e._rowsArea.updateColspans(k.getColumnsCount()),e._rowsArea.tableElement().prepend(k.headElement())),a.addClass(qa),e._dataArea.reset(),e._rowsArea.reset(),e._columnsArea.reset(),k.reset();var ve=(Se,de)=>de-Se>=1,_e=(Se,de,ge,j,ue)=>ge?Se:de+(j?ue:0);return(0,ye.OX)(()=>{var Se=e._rowsArea.getRowsHeight(),de=(0,N.P$)(E[0],!0)+(ee?Se[0]:0),ge=0,j=0;if(e._hasHeight){ge=(0,N.Oq)(M);var ue=a.find(".dx-data-header"),Ce=(0,N.Oq)(ue);r=rr([_,S,a,P,M],"height"),j=(0,N.Oq)(e.$element())-ge-Ce-(Math.max((0,N.Oq)(e._dataArea.headElement()),(0,N.Oq)(_),de)+r)}var te=e._dataArea.getScrollbarWidth(),J=(0,N.Oq)(e._dataArea.tableElement())-(0,N.Oq)(e._dataArea.headElement()),we=ve(j,J);e._dataArea.tableElement().css({width:e._hasHeight&&we&&te?"calc(100% - ".concat(te,"px)"):"100%"});var Ee=e._dataArea.getColumnsWidth(),Me=ee?Se.slice(1):Se,at=e._dataArea.getRowsHeight(),Pt=e._dataController.getColumnsInfo().length,bt=(0,De.JL)(Me,at.slice(Pt)),ct=at.slice(0,Pt),Ft=Ha(ct),Va=e._rowsArea.getColumnsWidth();if(o=(0,N.RG)(e._dataArea.tableElement()),c=Ha(bt),o&&c){f=Ha(Va);var Ba=(0,N.RG)(e.$element());r=rr([w,S,a],"width");var ka=o-(t=(t=Ba-f-r)>0?t:o);ka>=0&&ka<=2&&(Ma(Ee,ka),o=t),s=e._hasHeight&&ve(j,c),u=ve(t,o);var za=_e(j,c,s,u,te);(0,ye.zE)(()=>{if(e._columnsArea.tableElement().append(e._dataArea.headElement()),k.tableElement().append(e._rowsArea.headElement()),de>Ft&&(Ma(ct,Ft-de),e._columnsArea.setRowsHeight(ct)),a.removeClass(qa),P.children().css("maxWidth",t),e._columnsArea.setGroupWidth(t),e._columnsArea.processScrollBarSpacing(s?te:0),e._columnsArea.setColumnsWidth(Ee),e._rowsArea.setGroupHeight(e._hasHeight?za:"auto"),e._rowsArea.processScrollBarSpacing(u?te:0),e._rowsArea.setColumnsWidth(Va),e._rowsArea.setRowsHeight(bt),e._dataArea.setColumnsWidth(Ee),e._dataArea.setRowsHeight(bt),e._dataArea.setGroupWidth(t),e._dataArea.setGroupHeight(e._hasHeight?za:"auto"),ee&&k.setColumnsWidth(Va),S.toggleClass(Sa,!s),w.toggleClass(Sa,!s),!e._hasHeight&&Ba!==(0,N.RG)(e.$element())){var Wa=Ba-(0,N.RG)(e.$element());u||(Ma(Ee,Wa),e._columnsArea.setColumnsWidth(Ee),e._dataArea.setColumnsWidth(Ee)),e._dataArea.setGroupWidth(t-Wa),e._columnsArea.setGroupWidth(t-Wa)}if(e._hasHeight&&e._filterFields.isVisible()&&(0,N.Oq)(M)!==ge){var $a=(0,N.Oq)(M)-ge;if($a>0){s=ve(j-$a,c);var nr=_e(j-$a,c,s,u,te);e._dataArea.setGroupHeight(nr),e._rowsArea.setGroupHeight(nr)}}var lr=e.option("scrolling");"virtual"===lr.mode&&e._setVirtualContentParams(lr,Ee,bt,t,za,e._hasHeight,f);var or=[];e._dataArea.updateScrollableOptions({direction:e._dataArea.getScrollableDirection(u,s),rtlEnabled:e.option("rtlEnabled")}),e._columnsArea.updateScrollableOptions({rtlEnabled:e.option("rtlEnabled")}),(0,L.__)([e._columnsArea,e._rowsArea,e._dataArea],(wr,ir)=>{or.push(ir&&ir.updateScrollable())}),e._updateLoading(),e._renderNoDataText(S),Re.z7.apply(G.A,or).done(()=>{e._updateScrollPosition(e._columnsArea,e._rowsArea,e._dataArea,!0),e._subscribeToEvents(e._columnsArea,e._rowsArea,e._dataArea),se.resolve()})})}else se.resolve()}),se}},_setVirtualContentParams(e,t,a,r,o,c,f){var s=this._dataController.calculateVirtualContentParams({virtualRowHeight:e.virtualRowHeight,virtualColumnWidth:e.virtualColumnWidth,itemWidths:t,itemHeights:a,rowCount:a.length,columnCount:t.length,viewportWidth:r,viewportHeight:c?o:(0,N.P$)(ja)});this._dataArea.setVirtualContentParams({top:s.contentTop,left:s.contentLeft,width:s.width,height:s.height}),this._rowsArea.setVirtualContentParams({top:s.contentTop,width:f,height:s.height}),this._columnsArea.setVirtualContentParams({left:s.contentLeft,width:s.width,height:(0,N.Oq)(this._columnsArea.groupElement())})},applyPartialDataSource(e,t,a){this._dataController.applyPartialDataSource(e,t,a)}}).inherit(ma).include(Tt);(0,xt.A)("dxPivotGrid",Na);const gr=Na;var ht=B(27380),je=B(31837),pr=B(345);let fr=(()=>{class e extends ht.ic{constructor(a,r,o,c,f,s,u,S){super(a,r,o,c,u,S),this._watcherHelper=c,this._idh=f,this._createEventEmitters([{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"exporting",emit:"onExporting"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{emit:"allowExpandAllChange"},{emit:"allowFilteringChange"},{emit:"allowSortingChange"},{emit:"allowSortingBySummaryChange"},{emit:"dataFieldAreaChange"},{emit:"dataSourceChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"encodeHtmlChange"},{emit:"exportChange"},{emit:"fieldChooserChange"},{emit:"fieldPanelChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"hideEmptySummaryCellsChange"},{emit:"hintChange"},{emit:"loadPanelChange"},{emit:"rowHeaderLayoutChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"showBordersChange"},{emit:"showColumnGrandTotalsChange"},{emit:"showColumnTotalsChange"},{emit:"showRowGrandTotalsChange"},{emit:"showRowTotalsChange"},{emit:"showTotalsPriorChange"},{emit:"stateStoringChange"},{emit:"tabIndexChange"},{emit:"textsChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),s.setHost(this)}get allowExpandAll(){return this._getOption("allowExpandAll")}set allowExpandAll(a){this._setOption("allowExpandAll",a)}get allowFiltering(){return this._getOption("allowFiltering")}set allowFiltering(a){this._setOption("allowFiltering",a)}get allowSorting(){return this._getOption("allowSorting")}set allowSorting(a){this._setOption("allowSorting",a)}get allowSortingBySummary(){return this._getOption("allowSortingBySummary")}set allowSortingBySummary(a){this._setOption("allowSortingBySummary",a)}get dataFieldArea(){return this._getOption("dataFieldArea")}set dataFieldArea(a){this._setOption("dataFieldArea",a)}get dataSource(){return this._getOption("dataSource")}set dataSource(a){this._setOption("dataSource",a)}get disabled(){return this._getOption("disabled")}set disabled(a){this._setOption("disabled",a)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(a){this._setOption("elementAttr",a)}get encodeHtml(){return this._getOption("encodeHtml")}set encodeHtml(a){this._setOption("encodeHtml",a)}get export(){return this._getOption("export")}set export(a){this._setOption("export",a)}get fieldChooser(){return this._getOption("fieldChooser")}set fieldChooser(a){this._setOption("fieldChooser",a)}get fieldPanel(){return this._getOption("fieldPanel")}set fieldPanel(a){this._setOption("fieldPanel",a)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(a){this._setOption("headerFilter",a)}get height(){return this._getOption("height")}set height(a){this._setOption("height",a)}get hideEmptySummaryCells(){return this._getOption("hideEmptySummaryCells")}set hideEmptySummaryCells(a){this._setOption("hideEmptySummaryCells",a)}get hint(){return this._getOption("hint")}set hint(a){this._setOption("hint",a)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(a){this._setOption("loadPanel",a)}get rowHeaderLayout(){return this._getOption("rowHeaderLayout")}set rowHeaderLayout(a){this._setOption("rowHeaderLayout",a)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(a){this._setOption("rtlEnabled",a)}get scrolling(){return this._getOption("scrolling")}set scrolling(a){this._setOption("scrolling",a)}get showBorders(){return this._getOption("showBorders")}set showBorders(a){this._setOption("showBorders",a)}get showColumnGrandTotals(){return this._getOption("showColumnGrandTotals")}set showColumnGrandTotals(a){this._setOption("showColumnGrandTotals",a)}get showColumnTotals(){return this._getOption("showColumnTotals")}set showColumnTotals(a){this._setOption("showColumnTotals",a)}get showRowGrandTotals(){return this._getOption("showRowGrandTotals")}set showRowGrandTotals(a){this._setOption("showRowGrandTotals",a)}get showRowTotals(){return this._getOption("showRowTotals")}set showRowTotals(a){this._setOption("showRowTotals",a)}get showTotalsPrior(){return this._getOption("showTotalsPrior")}set showTotalsPrior(a){this._setOption("showTotalsPrior",a)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(a){this._setOption("stateStoring",a)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(a){this._setOption("tabIndex",a)}get texts(){return this._getOption("texts")}set texts(a){this._setOption("texts",a)}get visible(){return this._getOption("visible")}set visible(a){this._setOption("visible",a)}get width(){return this._getOption("width")}set width(a){this._setOption("width",a)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(a){this._setOption("wordWrapEnabled",a)}_createInstance(a,r){return new gr(a,r)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(a){super.ngOnChanges(a),this.setupChanges("dataSource",a)}setupChanges(a,r){a in this._optionsToUpdate||this._idh.setup(a,r)}ngDoCheck(){this._idh.doCheck("dataSource"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(a,r){let o=this._idh.setupSingle(a,r),c=null!==this._idh.getChanges(a,r);(o||c)&&super._setOption(a,r)}}return e.\u0275fac=function(a){return new(a||e)(Ye.rXU(Ye.aKT),Ye.rXU(Ye.SKi),Ye.rXU(ht.zF),Ye.rXU(ht.jS),Ye.rXU(ht.$M),Ye.rXU(ht.fH),Ye.rXU(pr.pJ),Ye.rXU(Ye.Agw))},e.\u0275cmp=Ye.VBU({type:e,selectors:[["dx-pivot-grid"]],inputs:{allowExpandAll:"allowExpandAll",allowFiltering:"allowFiltering",allowSorting:"allowSorting",allowSortingBySummary:"allowSortingBySummary",dataFieldArea:"dataFieldArea",dataSource:"dataSource",disabled:"disabled",elementAttr:"elementAttr",encodeHtml:"encodeHtml",export:"export",fieldChooser:"fieldChooser",fieldPanel:"fieldPanel",headerFilter:"headerFilter",height:"height",hideEmptySummaryCells:"hideEmptySummaryCells",hint:"hint",loadPanel:"loadPanel",rowHeaderLayout:"rowHeaderLayout",rtlEnabled:"rtlEnabled",scrolling:"scrolling",showBorders:"showBorders",showColumnGrandTotals:"showColumnGrandTotals",showColumnTotals:"showColumnTotals",showRowGrandTotals:"showRowGrandTotals",showRowTotals:"showRowTotals",showTotalsPrior:"showTotalsPrior",stateStoring:"stateStoring",tabIndex:"tabIndex",texts:"texts",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onCellClick:"onCellClick",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDisposing:"onDisposing",onExporting:"onExporting",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",allowExpandAllChange:"allowExpandAllChange",allowFilteringChange:"allowFilteringChange",allowSortingChange:"allowSortingChange",allowSortingBySummaryChange:"allowSortingBySummaryChange",dataFieldAreaChange:"dataFieldAreaChange",dataSourceChange:"dataSourceChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",encodeHtmlChange:"encodeHtmlChange",exportChange:"exportChange",fieldChooserChange:"fieldChooserChange",fieldPanelChange:"fieldPanelChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",hideEmptySummaryCellsChange:"hideEmptySummaryCellsChange",hintChange:"hintChange",loadPanelChange:"loadPanelChange",rowHeaderLayoutChange:"rowHeaderLayoutChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",showBordersChange:"showBordersChange",showColumnGrandTotalsChange:"showColumnGrandTotalsChange",showColumnTotalsChange:"showColumnTotalsChange",showRowGrandTotalsChange:"showRowGrandTotalsChange",showRowTotalsChange:"showRowTotalsChange",showTotalsPriorChange:"showTotalsPriorChange",stateStoringChange:"stateStoringChange",tabIndexChange:"tabIndexChange",textsChange:"textsChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[Ye.Jv_([ht.zF,ht.jS,ht.fH,ht.$M]),Ye.Vt3,Ye.OA$],decls:0,vars:0,template:function(a,r){},encapsulation:2}),e})(),mr=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=Ye.$C({type:e}),e.\u0275inj=Ye.G2t({imports:[[je.xJR,je.yA4,je.Pxf,je.X1G,je.t7Z,je.uIe,je.$Yy,je._RO,je.Ypp,je._zS,je.s5o,je.lkr,je.X6g,ht.p_,ht.xZ],je.xJR,je.yA4,je.Pxf,je.X1G,je.t7Z,je.uIe,je.$Yy,je._RO,je.Ypp,je._zS,je.s5o,je.lkr,je.X6g,ht.xZ]}),e})()},42323:(Ua,aa,B)=>{B.d(aa,{C:()=>xa});var Ye=B(56221),xt=B(17278),Bt=B(89518),G=B(5042),ye=B(12984),Re=B(87951),Ne=B(48745),L=B(12101),N=B(72463),kt=B(44168),Pe=B(61076),nt=B(39407),wt=B(39504),ot=B(2097),ft=B(6305),Fe=B(75333),Dt=B(59845),St=B(25571),oe=B(59613),De=Ye.A.inherit(function(){var n={year:x=>x&&x.getFullYear(),quarter:x=>x&&Math.floor(x.getMonth()/3)+1,month:x=>x&&x.getMonth()+1,day:x=>x&&x.getDate(),dayOfWeek:x=>x&&x.getDay()};function h(x){return-1!==x.indexOf(".")?(0,nt.Hz)(x):function(l){return l[x]}}function g(x){return function(l){var d=x(l);return d&&!(d instanceof Date)&&(d=wt.A.deserializeDate(d)),d}}function m(x){(0,L.__)(x||[],(l,d)=>{var i,p,C,F,{dataField:y}=d,{levels:O}=d;if(!d.selector){if(F=y?h(y):function($){return $},O&&m(O),"date"===d.dataType){p=n[d.groupInterval];var R=g(F);i=function($){var I=R($);return p?p(I):I}}else"number"===d.dataType?(C=(0,N.kf)(d.groupInterval)&&d.groupInterval>0&&d.groupInterval,i=function($){var I=F($);return(0,N.Kg)(I)&&(I=Number(I)),C?Math.floor(I/C)*C:I}):i=F;(0,oe.k2)(d),(0,oe.CE)(d,"selector",i)}})}function T(x,l,d,i){var p=[0],y=l.headerName===i?l.path.length:0,C="rows"===i?l.rowExpandedPaths:l.columnExpandedPaths;return function F(R,$,I,v,A){var z,W,U,Y,K,xe,b=$.dimensions[v],{expandedPathsHash:H}=$;b&&(z=b.selector($.data),A=void 0!==A?A+"/./"+z:"".concat(z),U=I,(xe=(K=$.childrenHash)[Y=A])||(xe={value:z,index:K.length++},K[Y]=xe,U.push(xe)),R.push((W=xe).index),(H&&H[A]||b.expanded)&&(W.children||(W.children=[]),F(R,$,W.children,v+1,A)))}(p,{data:x,childrenHash:d["".concat(i,"Hash")],dimensions:l[i],expandedPathsHash:l.headerName!==i&&C&&C.hash},d[i],y),p}function D(x,l,d,i){var y,C,O,F,p=[],R=T(x,i,d,"rows"),$=T(x,i,d,"columns");for(C=0;C<R.length;C+=1)for(l[O=R[C]]=l[O]||[],y=0;y<$.length;y+=1)p.push(l[O][F=$[y]]=l[O][F]||[]);return p}function X(x){if(x){var l=x.hash={};x.forEach(d=>{var i=d.map(p=>"".concat(p)).join("/./");l[i]=!0})}}function ne(x){x.rows=x.rows||[],x.columns=x.columns||[],x.filters=x.filters||[],X(x.columnExpandedPaths),X(x.rowExpandedPaths),m(x.columns),m(x.rows),m(x.values),m(x.filters)}function le(x){return"custom"===x.summaryType?(x.calculateCustomSummary=x.calculateCustomSummary||G.lQ,{seed(){var l={summaryProcess:"start",totalValue:void 0};return x.calculateCustomSummary(l),l},step:(l,d)=>(l.summaryProcess="calculate",l.value=d,x.calculateCustomSummary(l),l),finalize:l=>(l.summaryProcess="finalize",delete l.value,x.calculateCustomSummary(l),l.totalValue)}):St.zL[x.summaryType]||St.zL.count}function ce(x,l,d){for(var i=0;i<x.length;i+=1)for(var p=x[i],y=p.selector(d),C=le(p),O="function"==typeof C.seed,F=0;F<l.length;F+=1){var R=l[F];R.length<=i&&(R[i]=O?C.seed():C.seed),void 0===R[i]?R[i]=y:(0,N.O9)(y)&&(R[i]=C.step(R[i],y))}}function Z(x,l){var d=x&&x.valueOf(),i=l&&l.valueOf();if(Array.isArray(x)){l=l||[];for(var p=0;p<x.length;p+=1)if((d=x[p]&&x[p].valueOf())!==(i=l[p]&&l[p].valueOf()))return!1;return!0}return d===i}function he(x){var l=[];return(0,L.__)(x,(d,i)=>{var p=i.filterValues||[],{groupName:y}=i;y&&(0,N.kf)(i.groupIndex)||p.length&&l.push(function(C){for(var O=i.levels?function($,I){var v=[];return(0,L.__)($,(A,b)=>{v.push(b.selector(I))}),v}(i.levels,C):i.selector(C),F=!1,R=0;R<p.length;R+=1)if(Z(p[R],O)){F=!0;break}return"exclude"===i.filterType?!F:F})}),l}function fe(x){var l=he(x.rows).concat(he(x.columns)).concat(he(x.filters)),d=x[x.headerName],{path:i}=x;return d&&l.push(p=>{for(var y,C=0;C<i.length;C+=1)if(y=d[C].selector(p),(0,nt.ao)(y,!0)!==(0,nt.ao)(i[C],!0))return!1;return!0}),function(p){for(var y=0;y<l.length;y+=1)if(!l[y](p))return!1;return!0}}function ze(x,l){var d=x.filter();return x.store()instanceof ft.A&&d?(d=Je(d,l),(0,Dt.A)(x.items()).filter(d).toArray()):x.items()}function We(x,l,d){var i=new ye.cY,p=function(C){x.store()instanceof ot.A&&(C.storeLoadOptions.filter=Je(C.storeLoadOptions.filter,l))};if(x.on("customizeStoreLoadOptions",p),!x.isLoaded()||d){var y=d?x.load():x.reload();(0,ye.z7)(y).done(()=>{We(x,l).done(()=>{i.resolve(ze(x,l))}).fail(i.reject)}).fail(i.reject)}else i.resolve(ze(x,l));return i.always(()=>{x.off("customizeStoreLoadOptions",p)})}function Ze(x,l){l.forEach(d=>{if(d.dataField&&"date"===d.dataType){var i=g(h(d.dataField));x[d.dataField]=function(p){return i(p)}}})}function qe(x){var l={};return Array.isArray(x)?Ze(l,x):x&&["rows","columns","filters"].forEach(d=>{x[d]&&Ze(l,x[d])}),l}function Je(x,l){if(!Array.isArray(x))return x;x=x.slice(0),(0,N.Kg)(x[0])&&(x[1]instanceof Date||x[2]instanceof Date)&&(x[0]=l[x[0]]);for(var d=0;d<x.length;d+=1)x[d]=Je(x[d],l);return x}return{ctor(x){this._progressChanged=x.onProgressChanged||G.lQ,this._dataSource=new Fe.q(x),this._dataSource.paginate(!1)},getFields(x){var l=this._dataSource,d=new ye.cY;return We(l,qe(x)).done(i=>{d.resolve((0,oe.yg)(i,x))}).fail(d.reject),d},key(){return this._dataSource.key()},load(x){var l=this,d=l._dataSource,i=new ye.cY;return ne(x),We(d,qe(x),x.reload).done(p=>{(0,ye.z7)(function Le(x,l,d){var y,C,i={columns:[],rows:[],columnsHash:{length:1},rowsHash:{length:1}},p=[],O=new ye.cY,F=0,R=fe(l);return function $(){for(var I=new Date,v=F;F<x.length;F+=1){if(F>v&&F%1e4==0&&new Date-I>=300)return d(F/x.length),void setTimeout($,0);R(C=x[F])&&(y=D(C,p,i,l),ce(l.values,y,C))}var b;b=p,(0,L.__)(l.values,(H,z)=>{var W=le(z);W.finalize&&(0,L.__)(b,(re,U)=>{(0,L.__)(U,(Y,K)=>{K&&void 0!==K[H]&&(K[H]=W.finalize(K[H]))})})}),d(1),O.resolve({rows:i.rows,columns:i.columns,values:p,grandTotalRowIndex:0,grandTotalColumnIndex:0})}(),O}(p,x,l._progressChanged)).done(i.resolve)}).fail(i.reject),i},filter(){var x=this._dataSource;return x.filter.apply(x,arguments)},supportPaging:()=>!1,getDrillDownItems(x,l){l=l||{},ne(x=x||{});for(var p,d=[],i=this._dataSource.items(),{maxRowCount:y}=l,{customColumns:C}=l,O=fe(x),F=fe({rows:(0,oe.Mt)(x.rows,l.rowPath),columns:(0,oe.Mt)(x.columns,l.columnPath),filters:[]}),R=0;R<i.length;R+=1){if(F(i[R])&&O(i[R])){if(C){p={};for(var $=0;$<C.length;$+=1)p[C[$]]=i[R][C[$]]}else p=i[R];d.push(p)}if(y>0&&d.length===y)break}return d}}}()).include(oe.wN),mt=function n(h,g,m){h=h||[],m=m||0;for(var T=0;T<h.length;T+=1){var D=h[T];g(D,m),D&&D.items&&D.items.length&&n(D.items,g,m+1)}};function yt(n,h){var g=[];return(0,L.__)(n,(m,T)=>{g.push({selector:T.dataField,groupInterval:T.groupInterval,desc:h&&"desc"===T.sortOrder,isExpanded:m<n.length-1})}),g}function Wt(n,h,g,m){return[[n,m?"<":">=",g],m?"or":"and",[n,m?">=":"<",g+h]]}function It(n,h){var g=[];return n.searchValue?[n.dataField,"contains",n.searchValue]:(h="exclude"===n.filterType?h||"and":h||"or",(0,L.__)(n.filterValues,(m,T)=>{var D=[];Array.isArray(T)?n.levels&&n.levels.length&&(D=It({filterValues:T,filterType:n.filterType,levels:n.levels},"and")):D=function $t(n,h){var g=function zt(n){var h=n.dataField,{groupInterval:g}=n;return"date"===n.dataType&&"string"==typeof g&&("quarter"===g.toLowerCase()&&(g="Month"),h="".concat(h,".").concat((0,oe.Zr)(g))),h}(n),m="exclude"===n.filterType,T=[g,m?"<>":"=",h];return(0,N.O9)(n.groupInterval)&&("string"==typeof n.groupInterval&&"quarter"===n.groupInterval.toLowerCase()?T=Wt(g,3,3*(h-1)+1,m):"number"==typeof n.groupInterval&&"date"!==n.dataType&&(T=Wt(g,n.groupInterval,h,m))),T}(n.levels?n.levels[m]:n,T),D.length&&(g.length&&g.push(h),g.push(D))}),g)}function At(n){var h=[];return(0,L.__)(n,(g,m)=>{var T=It(m);if(!T.length)return[];h.length&&h.push("and"),h.push(T)}),1===h.length&&(h=h[0]),h}function Ut(n,h){var m=function(T){return T&&T.length};return m(n)&&m(h)?[n,"and",h]:m(n)?n:h}function Tt(n,h,g,m,T){n[g]=n[g]||[],n[g][m]=n[g][m]||[],(0,N.O9)(n[g][m][T])||(n[g][m][T]=h)}function na(n,h){return h&&"number"===h.dataType&&(0,N.Kg)(n)?Number(n):!h||"date"!==h.dataType||h.groupInterval||n instanceof Date?n:wt.A.deserializeDate(n)}function rt(n){return(n||[]).filter(h=>h.filterValues&&h.filterValues.length||h.searchValue)}function _t(n,h){if(n.headerName){if(h===n.headerName)return n.path.length;if(n.oppositePath)return n.oppositePath.length}return 0}function V(n,h,g,m){var T=[],D=g>m?0:m,X=n.headerName!==h?n[h].slice(D,g):[],ne="rows"===h?n.rowExpandedPaths:n.columnExpandedPaths;return(0,L.__)(X,(le,ce)=>{var Z=[];(0,L.__)(ne,(he,fe)=>{if(fe=fe.slice(D,g),le<fe.length){var Le=fe[le];Z.includes(Le)||Z.push(Le)}}),Z.length&&T.push((0,Re.X)({},ce,{filterType:"include",filterValues:Z}))}),T}function q(n,h,g,m,T,D){var Z,ne="columns"===h?"rows":"columns",le=n[h],ce=[];if((("columns"===h?n.columnExpandedPaths:n.rowExpandedPaths)||[]).length)for(var he=g;he<m+1;he+=1)(Z={filters:T.concat(V(n,h,he,D))})[h]=le.slice(g,he+1),Z[ne]=[],ce.push((0,Re.X)({},n,Z));else(Z={filters:T})[h]=le.slice(g,m+1),Z[ne]=[],ce.push((0,Re.X)({},n,Z));return ce[0].includeTotalSummary=!0,ce}function ie(n){var h=0;return(0,L.__)(n,(g,m)=>{if(!m.expanded)return h=g,!1}),h}function Oe(n){(0,L.__)(n||[],(h,g)=>{var{levels:m}=g;m&&Oe(m),(0,oe.k2)(g)})}var Ie=Ye.A.inherit({ctor(n){this._dataSource=new Fe.q(n),this._store=this._dataSource.store()},getFields(n){var h=new ye.cY;return this._store.load({skip:0,take:20}).done(g=>{var m=(0,Pe.Xp)(g);h.resolve(oe.Ay.discoverObjectFields(m.data,n))}).fail(h.reject),h},key(){return this._store.key()},load(n){var h=this,g=new ye.cY,m={rows:[],columns:[],values:[],grandTotalRowIndex:0,grandTotalColumnIndex:0,rowHash:{},columnHash:{},rowIndex:1,columnIndex:1},T=function ae(n){var h=(0,oe.G6)(n,"rows"),g=(0,oe.G6)(n,"columns"),m=n.filters||[],T=_t(n,"columns"),D=ie(n.columns),X=ie(n.rows),ne=_t(n,"rows"),le=[],ce=q(n,"columns",T,g,m=m.concat(rt(n.rows)).concat(rt(n.columns)).concat(function lt(n){return(0,oe.Mt)(n[n.headerName],n.path).concat((0,oe.Mt)(n["rows"===n.headerName?"columns":"rows"],n.oppositePath||[]))}(n)),D);if(n.rows.length&&n.columns.length){"rows"!==n.headerName&&(le=le.concat(ce));for(var Z=ne;Z<h+1;Z+=1)for(var he=n.rows.slice(ne,Z+1),fe=V(n,"rows",Z,X),Le=T;Le<g+1;Le+=1){var ze=(0,Re.X)({},n,{columns:n.columns.slice(T,Le+1),rows:he,filters:m.concat(V(n,"columns",Le,D)).concat(fe)});le.push(ze)}}else le=n.columns.length?ce:q(n,"rows",ne,h,m,X);return le}(n),D=[];return Oe(n.rows),Oe(n.columns),Oe(n.filters),(0,L.__)(T,(X,ne)=>{D.push(h._store.load(function Xt(n,h,g){var m=At(n.filters),T=yt(n.rows,n.rowTake).concat(yt(n.columns,n.columnTake)),D={groupSummary:[],totalSummary:[],group:T.length?T:void 0,take:T.length?void 0:1};return n.rows.length&&n.rowTake?(D.skip=n.rowSkip,D.take=n.rowTake,D.requireGroupCount=!0):n.columns.length&&n.columnTake&&!g&&(D.skip=n.columnSkip,D.take=n.columnTake,D.requireGroupCount=!0),h&&(m=Ut(m,h)),m.length&&(D.filter=m),(0,L.__)(n.values,(X,ne)=>{var le={selector:ne.dataField,summaryType:ne.summaryType||"count"};D.groupSummary.push(le),n.includeTotalSummary&&D.totalSummary.push(le)}),D}(ne,h.filter(),n.rows.length)))}),ye.z7.apply(null,D).done(function(){(0,L.__)(D.length>1?arguments:[arguments],(ne,le)=>{var ce=(0,Pe.Xp)(le[0],le[1]);!function jt(n,h,g,m){var T=[],D=[],{rowHash:X}=m,{columnHash:ne}=m;function ce(Z,he,fe,Le,ze){var Ze,Je,l,We=m["".concat(he,"Hash")],x=fe.slice(0,Le+1).join("/");return void 0!==We[x]?Je=We[x]:(Je={value:na(Z.key,ze),index:m["".concat(he,"Index")]++,displayText:Z.displayText},l=fe.slice(0,Le).join("/"),(Le>0&&void 0!==We[l]?(Ze=We[l]).children=Ze.children||[]:m["".concat(he,"s")]).push(Je),We[x]=Je),Je}h&&h.summary&&(0,L.__)(h.summary,(Z,he)=>{Tt(m.values,he,m.grandTotalRowIndex,m.grandTotalColumnIndex,Z)}),h&&h.groupCount>=0&&((n=[...Array(g.rows.length?g.rowSkip:g.columnSkip)].concat(n)).length=h.groupCount),mt(n,(Z,he)=>{var ze,We,fe=he>=g.rows.length?g.rows.length:he,Le=he>=g.rows.length?he-g.rows.length:0;if(!(he>=g.rows.length&&Le>=g.columns.length)){he<g.rows.length&&(D=[]),he>=g.rows.length?Z?(D[Le]="".concat(Z.key),ze=ce(Z,"column",D,Le,g.columns[Le]),We=X[T.slice(0,fe+1).join("/")]):m.columns.push({}):Z?(T[fe]="".concat(Z.key),We=ce(Z,"row",T,fe,g.rows[fe]),ze=ne[D.slice(0,Le+1).join("/")]):m.rows.push({});var Ze=We&&We.index||m.grandTotalRowIndex,qe=ze&&ze.index||m.grandTotalColumnIndex;(0,L.__)(Z&&Z.summary||[],(Je,x)=>{Tt(m.values,x,Ze,qe,Je)})}})}(ce.data,ce.extra,T[ne],m)}),g.resolve({rows:m.rows,columns:m.columns,values:m.values,grandTotalRowIndex:m.grandTotalRowIndex,grandTotalColumnIndex:m.grandTotalColumnIndex})}).fail(g.reject),g},filter(){return this._dataSource.filter.apply(this._dataSource,arguments)},supportPaging:()=>!1,createDrillDownDataSource(n,h){var g=this._store,T=At((0,oe.Mt)((n=n||{}).rows,(h=h||{}).rowPath).concat((0,oe.Mt)(n.columns,h.columnPath)).concat(rt(n.rows)).concat(n.filters||[]).concat(rt(n.columns)));return new Fe.q({load:D=>g.load((0,Re.X)({},D,{filter:Ut(T,D.filter),select:h.customColumns}))})}}),Xe="column",Ve="row",ke=null,dt=function(n,h){var g=n/h;return(!(0,N.O9)(n)||isNaN(g))&&(g=ke),g},et=function(n,h){return dt(n.value(),n.grandTotal(h).value())},Lt=function(n,h){var g=n.parent(h),m=g?g.value():n.value();return dt(n.value(),m)},Yt=function(n){return function(h){var g=h.prev(Xe,n),m=g&&g.value();return(0,N.O9)(m)&&(0,N.O9)(h.value())?h.value()-m:ke}},gt={percentOfColumnTotal:n=>Lt(n,Ve),percentOfRowTotal:n=>Lt(n,Xe),percentOfColumnGrandTotal:n=>et(n,Ve),percentOfRowGrandTotal:n=>et(n,Xe),percentOfGrandTotal:n=>et(n)},Aa=function n(h,g){if(h&&h.parent(g)){var m=h.prev(g);return m||(m=n(h.parent(g),g)),m}},oa=n=>{if(n.runningTotal){var h=n.runningTotal===Xe?Ve:Xe;return g=>{var m=n.allowCrossGroupCalculation?Aa(g,h):g.prev(h,!1),T=g.value(!0),D=g.value(!1),X=m?.value(!0);switch(!0){case(0,N.O9)(T)&&(0,N.O9)(D)&&(0,N.O9)(X):return X+T;case(0,N.O9)(X):return X;default:return T}}}};function Kt(n,h,g){var m={index:-1};if(!(0,N.Gv)(h))if(g.fields[h])h=g[h];else{var T=n.columns.concat(n.rows).concat(n.values),D=(0,oe.UI)(T,h);h=g[h]=T[D]}if(h){var X=h.area||"data";m=g.positions[h.index]=g.positions[h.index]||{area:X,index:n["data"===X?"values":"".concat(X,"s")].indexOf(h)}}return m}function Ct(n){return n===Ve?"_rowPath":"_columnPath"}var ut=function(n,h,g,m,T,D){this._columnPath=n,this._rowPath=h,this._fieldIndex=T,this._fieldsCache=D||{fields:{},positions:{}},this._data=g,this._descriptions=m;var X=g.values&&g.values[h[0].index]&&g.values[h[0].index][n[0].index];X&&(X.originalCell=X.originalCell||X.slice(),X.postProcessedFlags=X.postProcessedFlags||[],this._cell=X)};function sa(n){var{summaryDisplayMode:h}=n,g=n.allowCrossGroupCalculation,m=ke;return(0,N.Tn)(n.calculateSummaryValue)?m=n.calculateSummaryValue:h&&(m="absoluteVariation"===h?Yt(g):"percentVariation"===h?function(n){var h=Yt(n);return function(g){var m=h(g),T=g.prev(Xe,n),D=T&&T.value();return m!==ke&&D?m/D:ke}}(g):gt[h])&&!n.format&&-1!==h.indexOf("percent")&&oe.Ay.setFieldProperty(n,"format","percent"),m}function Et(n,h,g,m){var T=n.values[h][g]=n.values[h][g]||[],{originalCell:D}=T;D&&((T.allowResetting||!m)&&(n.values[h][g]=D.slice()),n.values[h][g].allowResetting=m)}ut.prototype=(0,Re.X)(ut.prototype,{_getPath(n){return this[Ct(n)]},_getDimension(n){return this._descriptions[n=n===Ve?"rows":"columns"]},_createCell(n){return new ut(n._columnPath||this._columnPath,n._rowPath||this._rowPath,this._data,this._descriptions,this._fieldIndex)},parent(n){var h=this._getPath(n).slice(),g={};return h.shift(),h.length?(g[Ct(n)]=h,this._createCell(g)):ke},children(n){var h=this._getPath(n).slice(),g=h[0],m=[],T={};if(g.children)for(var D=0;D<g.children.length;D+=1)T[Ct(n)]=[g.children[D]].concat(h.slice()),m.push(this._createCell(T));return m},grandTotal(n){var h={},g=this._rowPath,m=this._columnPath,T=this._getPath(n),D=Ct(n);return n?h[D]=[T[T.length-1]]:(h._rowPath=[g[g.length-1]],h._columnPath=[m[m.length-1]]),this._createCell(h)},next(n,h){var D,g=this._getPath(n),m=g[0],T=this.parent(n);if(T){var X=g[1].children.indexOf(m);if((D=T.children(n))[X+1])return D[X+1]}if(h&&T){do{D=(T=T.next(n,h))?T.children(n):[]}while(T&&!D.length);return D[0]||ke}return ke},prev(n,h){var D,g=this._getPath(n),m=g[0],T=this.parent(n);if(T){var X=g[1].children.indexOf(m);if((D=T.children(n))[X-1])return D[X-1]}if(h&&T){do{D=(T=T.prev(n,h))?T.children(n):[]}while(T&&!D.length);return D[D.length-1]||ke}return ke},cell(){return this._cell},field(n){if("data"===n)return this._descriptions.values[this._fieldIndex];var h=this._getPath(n);return this._getDimension(n)[h.length-2]||ke},child(n,h){for(var g,m=this.children(n),T=0;T<m.length;T+=1)if(g=g||m[T].field(n),m[T].value(g)===h)return m[T];return ke},slice(n,h){var g={},m=Kt(this._descriptions,n,this._fieldsCache),{area:T}=m,D=m.index,X=ke;if(T===Ve||T===Xe){var ne=this._getPath(T).slice(),le=-1!==D&&ne.length-2-D;if(ne[le]){for(var ce=le;ce>=0;ce-=1){if(ne[ce+1]){var Z=ne[ce+1].children||[],he=ce===le?h:ne[ce].value;ne[ce]=void 0;for(var fe=0;fe<Z.length;fe+=1)if(Z[fe].value===he){ne[ce]=Z[fe];break}}if(void 0===ne[ce])return X}g[Ct(T)]=ne,X=this._createCell(g)}}return X},value(n,h){var g=this._cell,m=this._fieldIndex,T=!0===n||!1===n,D=T?ke:n,X=T&&n||h;if((0,N.O9)(D)){var ne=Kt(this._descriptions,D,this._fieldsCache);if(m=ne.index,"data"!==ne.area){var le=this._getPath(ne.area),ce=-1!==m&&le.length-2-m;return le[ce]&&le[ce].value}}return g&&g.originalCell?X?g[m]:g.originalCell[m]:ke},isPostProcessed(n){var h=this._fieldIndex;if((0,N.O9)(n)){var g=Kt(this._descriptions,n,this._fieldsCache);if(h=g.index,"data"!==g.area)return!1}return!(!this._cell||!this._cell.postProcessedFlags[h])}});const da_applyRunningTotal=function Ta(n,h){var g=[],m=[{index:h.grandTotalColumnIndex,children:h.columns}],T=[{index:h.grandTotalRowIndex,children:h.rows}],D=n.values,X={fields:{},positions:{}};h.values=h.values||[],(0,oe.Fo)(T,ne=>{var le=ne[0];h.values[le.index]=h.values[le.index]||[],(0,oe.Fo)(m,ce=>{Et(h,le.index,ce[0].index,!0);for(var he=0;he<D.length;he+=1){var Le=g[he]=void 0===g[he]?oa(D[he]):g[he];if(Le){var ze=new ut(ce,ne,h,n,he,X),We=ze.cell();We[he]=Le(ze),We.postProcessedFlags[he]=!0}}},!1)},!1)},da_createMockSummaryCell=function Rt(n,h,g){var m=new ut([],[],{},n,0);return m.value=function(T){if((0,N.O9)(T)){var D=(0,oe.UI)(h,T),X=h[D];!g[D]&&X&&!(0,N.O9)(X.area)&&(n.values.push(X),g[D]=!0)}},m.grandTotal=function(){return this},m.children=function(){return[]},m},da_applyDisplaySummaryMode=function pa(n,h){var g=[],m=[{index:h.grandTotalColumnIndex,children:h.columns}],T=[{index:h.grandTotalRowIndex,children:h.rows}],D=n.values,X={fields:{},positions:{}};h.values=h.values||[],(0,oe.Fo)(m,ne=>{ne[0].isEmpty=[]},!1),(0,oe.Fo)(T,ne=>{var le=ne[0];le.isEmpty=[],h.values[le.index]=h.values[le.index]||[],(0,oe.Fo)(m,ce=>{var he,Z=ce[0];Et(h,le.index,Z.index,!1);for(var fe=0;fe<D.length;fe+=1){var ze=g[fe]=void 0===g[fe]?sa(D[fe]):g[fe];if(he=!1,ze){var We=new ut(ce,ne,h,n,fe,X),Ze=We.cell(),qe=Ze[fe]=ze(We);Ze.postProcessedFlags[fe]=!0,he=null==qe}void 0===Z.isEmpty[fe]&&(Z.isEmpty[fe]=!0),void 0===le.isEmpty[fe]&&(le.isEmpty[fe]=!0),he||(le.isEmpty[fe]=Z.isEmpty[fe]=!1)}},!1)},!1),h.isEmptyGrandTotalRow=T[0].isEmpty,h.isEmptyGrandTotalColumn=m[0].isEmpty};var Qt=B(24292),Qe=B(70370),fa=B(14435),Jt=B(81591),Ea=B(63784),Pa=(0,fa.zk)();const ma={XmlaStore:Ye.A.inherit(function(){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis"><RequestType>{2}</RequestType><Restrictions><RestrictionList><CATALOG_NAME>{0}</CATALOG_NAME><CUBE_NAME>{1}</CUBE_NAME></RestrictionList></Restrictions><Properties><PropertyList><Catalog>{0}</Catalog>{3}</PropertyList></Properties></Discover></Body></Envelope>',h="SELECT {2} FROM {0} {1} CELL PROPERTIES VALUE, FORMAT_STRING, LANGUAGE, BACK_COLOR, FORE_COLOR, FONT_FLAGS";function g(v,A){var b=new ye.cY,{beforeSend:H}=v,z={url:v.url,dataType:"text",data:A,headers:{"Content-Type":"text/xml"},xhrFields:{},method:"POST"};return(0,N.Tn)(H)&&H(z),oe.Ay.sendRequest(z).fail(function(){b.reject(arguments)}).done(W=>{var U,re=new Pa.DOMParser;try{try{U=re.parseFromString(W,"text/xml")}catch{U=void 0}if(!U||U.getElementsByTagName("parsererror").length||0===U.childNodes.length)throw new Jt.sO.Error("E4023",W)}catch(Y){b.reject({statusText:Y.message,stack:Y.stack,responseText:W})}b.resolve(U)}),b}function m(){var v=(0,Ea.G)();return void 0!==v?(0,Qe.GP)("<LocaleIdentifier>{0}</LocaleIdentifier>",v):""}function T(v){return"".concat(v.hierarchyName||v.dataField,".[All]")}function D(v){var A="".concat(v.dataField,".allMembers"),{searchValue:b}=v;return b&&(b=b.replace(/'/g,"''"),A="Filter(".concat(A,", instr(").concat(v.dataField,".currentmember.member_caption,'").concat(b,"') > 0)")),A}function X(v){var A=v.join(",");return v.length>1?(0,Qe.GP)("CrossJoin({0})",A):A}function ne(v,A,b,H,z,W,re,U){for(var Q,Te,be,Y=[],K=W[re],xe=[],me=H;me<=A;me+=1){var Ae=K[me],{dataField:Ge}=Ae,$e=K[me-1]&&K[me-1].hierarchyName,{hierarchyName:He}=Ae,Ue=!He||!K[me+1]||K[me+1].hierarchyName!==He,tt=v.length+b+H;if(Q=null,xe.push(Ae),me<v.length)Ue&&(Q="(".concat(Ge,".").concat(i(v[me],Ge),")"));else if(me<=tt)if(0===me&&0===b){var Be=T(K[H]);Q=He?"".concat(Be,",").concat(K[H].dataField):D(K[H])}else He?(be=i(z[z.length-1]),(Ue||me===tt)&&($e===He?(z.length&&(Te=K[z.length-1]),(!Te||Te.hierarchyName!==He)&&(Te=K[me-1],be=""),wa=Ge,Q="Descendants({".concat(be||Te.dataField,"}, ").concat(wa,", SELF_AND_BEFORE)")):Q=D(Ae))):Q=D(Ae);else(!He||$e!==He)&&(Q="(".concat(T(Ae),")"));Q&&(Q=(0,Qe.GP)("{{0}}",Q),U&&(Q=(0,Qe.GP)("Order({0}, {1}, {2})",Q,(Ae.hierarchyName||Ae.dataField)+("displayText"===Ae.sortBy?".MEMBER_CAPTION":".MEMBER_VALUE"),"desc"===Ae.sortOrder?"DESC":"ASC")),Y.push(Q))}var wa;return X(Y)}function le(v,A,b,H,z,W,re,U,Y,K){var Te,xe=-1,Q=W[re];do{Te=A.length+(xe+=1)+H;var be=ne(A,b,xe,H,z,W,re,Y);!Y&&!K&&(be=(0,Qe.GP)("NonEmpty({0}, {1})",be,U)),v.push(be)}while(Q[Te]&&Q[Te+1]&&Q[Te].expanded)}function ce(v,A,b,H){return b=b||"[DX_Set_".concat(A.length,"]"),A.push((0,Qe.GP)("{0} {1} as {2}",H=H||"set",b,v)),b}function Z(v,A,b,H,z){var Ge,$e,W=v[A],re=[],U=[],Y=[],K=0,xe=0,Q=[],Te=(0,Qe.GP)("{{0}}",b.join(","));if(W&&W.length){v.headerName===A?K=(U=v.path).length:v.headerName&&v.oppositePath?K=(U=v.oppositePath).length:Y=("columns"===A?v.columnExpandedPaths:v.rowExpandedPaths)||Y,xe=(0,oe.G6)(v,A),le(re,[],xe,K,U,v,A,Te,"rows"===A?v.rowTake:v.columnTake,v.totalsOnly),(0,L.__)(Y,(He,Ue)=>{le(re,Ue,xe,K,Ue,v,A,Te)});for(var be=xe;be>=U.length;be-=1)W[be].hierarchyName&&(z.visibleLevels[W[be].hierarchyName]=z.visibleLevels[W[be].hierarchyName]||[],z.visibleLevels[W[be].hierarchyName].push(W[be].dataField))}if(re.length){var me=($e=(Ge=re).join(","),Ge.length>1?"Union(".concat($e,")"):$e);"rows"===A&&v.rowTake&&(me=(0,Qe.GP)("Subset({0}, {1}, {2})",me,v.rowSkip>0?v.rowSkip+1:0,v.rowSkip>0?v.rowTake:v.rowTake+1)),"columns"===A&&v.columnTake&&(me=(0,Qe.GP)("Subset({0}, {1}, {2})",me,v.columnSkip>0?v.columnSkip+1:0,v.columnSkip>0?v.columnTake:v.columnTake+1));var Ae="[DX_".concat(A,"]");Q.push(ce(me,H,Ae)),v.totalsOnly&&Q.push(ce("COUNT(".concat(Ae,")"),H,"[DX_".concat(A,"_count]"),"member"))}return"columns"===A&&b.length&&!v.skipValues&&Q.push(Te),(0,Qe.GP)("{0} DIMENSION PROPERTIES PARENT_UNIQUE_NAME,HIERARCHY_UNIQUE_NAME, MEMBER_VALUE ON {1}",X(Q),A)}function he(v){var A=[];return(0,L.__)(v,(b,H)=>{var U,{dataField:z}=H,W=[],re=H.filterValues||[];H.hierarchyName&&(0,N.kf)(H.groupIndex)||((0,L.__)(re,(Y,K)=>{var xe="".concat(z,".").concat(i(Array.isArray(K)?K[K.length-1]:K,z));"exclude"===H.filterType&&(W.push("".concat(xe,".parent")),xe="Descendants(".concat(xe,")")),W.push(xe)}),re.length&&(U=(0,Qe.GP)("{{0}}",W.join(",")),"exclude"===H.filterType&&(U="Except(".concat(D(H),",").concat(U,")")),A.push(U)))}),A.length?X(A):""}function Le(v,A,b,H,z,W,re){var U=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},Y="",K="".concat(A.length?"with ".concat(A.join(" ")):""," ");if(v.length){var xe;if(U.totalsOnly){var Q=[];H.length&&Q.push("[DX_rows_count]"),b.length&&Q.push("[DX_columns_count]"),xe="{".concat(Q.join(","),"} on columns")}else xe=v.join(",");Y=K+(0,Qe.GP)(h,function fe(v,A,b,H){var z="[".concat(H,"]");return(0,L.__)([v,A,b],(W,re)=>{re&&(z=(0,Qe.GP)("(SELECT {0} FROM {1})","".concat(re,"on 0"),z))}),z}(he(b),he(H),he(z||[]),re),W.length?(0,Qe.GP)("WHERE ({0})",W.join(",")):"",xe)}return Y}function ze(v,A){return(0,L.Tj)(A,b=>((0,N.Kg)(b.expression)&&ce(b.expression,v,b.dataField,"member"),b.dataField))}function We(v,A,b,H){(0,L.__)(H,(z,W)=>{var re=A[b][z];(!re.hierarchyName||re.hierarchyName!==A[b][z+1].hierarchyName)&&v.push("".concat(re.dataField,".").concat(i(W,re.dataField)))})}function Ze(v,A,b){var H=v.columns||[],z=v.rows||[],W=v.values&&v.values.length?v.values:[{dataField:"[Measures]"}],re=[],U=[],Y=[],K=ze(U,W);return b.measureCount=v.skipValues?1:W.length,b.visibleLevels={},v.headerName&&v.path&&We(re,v,v.headerName,v.path),v.headerName&&v.oppositePath&&We(re,v,"rows"===v.headerName?"columns":"rows",v.oppositePath),(H.length||K.length)&&Y.push(Z(v,"columns",K,U,b)),z.length&&Y.push(Z(v,"rows",K,U,b)),Le(Y,U,H,z,v.filters,re,A,v)}function qe(v,A,b){(0,L.__)(b,(H,z)=>{var W=A[H];W.hierarchyName&&(A[H+1]||{}).hierarchyName===W.hierarchyName||v.push("".concat(W.dataField,".").concat(i(z,W.dataField)))})}function Je(v){return parseInt(v,10)}function x(v,A){return l((v.getElementsByTagName(A)||[])[0])}function l(v){return v&&(v.textContent||v.text||v.innerHTML)||""}function d(v,A,b){for(var H=[],z=[],W=0,re=[],U=v.getElementsByTagName("Cell"),Y={},K=0;K<U.length;K+=1){var xe=U[K],Q=xe.getElementsByTagName("Value")[0],Te=Q&&Q.getElementsByTagName("Error")||[],be=0===Te.length?l(Q):"#N/A",me=parseFloat(be),Ae=be-me+1>0,Ge=Je(xe.getAttribute("CellOrdinal"));Te.length&&(Y[l(Te[0].getElementsByTagName("ErrorCode")[0])]=l(Te[0].getElementsByTagName("Description")[0])),re[Ge]={value:Ae?me:be||null}}return(0,L.__)(A[1],()=>{var $e=[];H.push($e),(0,L.__)(A[0],()=>{0==W%b&&$e.push(z=[]),z.push(re[W]?re[W].value:null),W+=1})}),Object.keys(Y).forEach($e=>{Jt.sO.log("W4002",Y[$e])}),H}function i(v,A){return v&&(v=(0,N.Kg)(v)&&v.includes("&")?v:"[".concat(v,"]"),A&&0===v.indexOf("".concat(A,"."))&&(v=v.slice(A.length+1,v.length))),v}function p(v,A,b,H){var z=v[A];return z||(v[A]=z={}),!(0,N.O9)(z.value)&&b&&(z.text=b.caption,z.value=b.value,z.key=A||"",z.levelName=b.levelName,z.hierarchyName=b.hierarchyName,z.parentName=b.parentName,z.index=H,z.level=b.level),z}function y(v,A){var b=[],H=v.children&&(v.children.length?v.children:Object.keys(v.children.grandTotalHash||{}).reduce((U,Y)=>U.concat(v.children.grandTotalHash[Y].children),[])),z=H&&H[0];if(z&&(A[z.hierarchyName]&&A[z.hierarchyName].includes(z.levelName)||!A[z.hierarchyName]||0===z.level)){var W=H.filter(U=>U.hierarchyName===z.hierarchyName);return W.grandTotalHash=H.grandTotalHash,W}if(z)for(var re=0;re<H.length;re+=1)H[re].hierarchyName===z.hierarchyName&&b.push.apply(b,y(H[re],A));return b}function C(v,A,b,H){var z=[];(0,L.__)(A,(U,Y)=>{var K={children:z},xe=(0,N.O9)(b)?Math.floor(U/b):U;(0,L.__)(Y,(Q,Te)=>{K=function(be,me,Ae){var Ge=Ae.children=Ae.children||[],$e=Ge.hash=Ge.hash||{},He=Ge.grandTotalHash=Ge.grandTotalHash||{};me.parentName&&(Ge=(Ae=p($e,me.parentName)).children=Ae.children||[]);var Ue=p($e,me.name,me,be);return me.hasValue&&!Ue.added&&(Ue.index=be,Ue.added=!0,Ge.push(Ue)),Ae.value&&Ae.parentName||!me.parentName?He[Ae.name]&&delete He[me.parentName]:He[me.parentName]=Ae,Ue}(xe,Te,K)})});var W={children:z};W.children=y(W,H);var re=function(U,Y){var K;if(1===U.children.length&&""===U.children[0].parentName){K=U.children[0].index;var{grandTotalHash:xe}=U.children;U.children=U.children[0].children||[],U.children.grandTotalHash=xe,U.children=y(U,Y)}else 0===U.children.length&&(K=0);return K}(W,H);return(0,oe.Fo)(W.children,U=>{var Y=U[0],K=y(Y,H);K.length?Y.children=K:delete Y.children,delete Y.levelName,delete Y.hierarchyName,delete Y.added,delete Y.parentName,delete Y.level},!0),(0,L.__)(W.children||[],(U,Y)=>{v.push(Y)}),re}function O(v){var A=v.getElementsByTagName("soap:Fault"),b=v.getElementsByTagName("Fault"),H=(0,Qt.A)([].slice.call(b.length?b:A)).find("Error");if(H.length){var z=H.attr("Description"),W=new Jt.sO.Error("E4000",z);return Jt.sO.log("E4000",z),W}return null}function R(v,A,b,H){var z=[],W="MEASURE"===A,re=W?"MEASUREGROUP_NAME":"".concat(A,"_DISPLAY_FOLDER");return(0,L.__)(v.getElementsByTagName("row"),(U,Y)=>{var K="LEVEL"===A?x(Y,"HIERARCHY_UNIQUE_NAME"):void 0,xe=x(Y,"LEVEL_NUMBER"),Q=x(Y,re);if(W&&(Q=H[Q]||Q),("0"!==xe||"true"!==x(Y,"".concat(A,"_IS_VISIBLE")))&&"2"!==x(Y,"DIMENSION_TYPE")){var Te=W?"DX_MEASURES":x(Y,"DIMENSION_UNIQUE_NAME"),be=x(Y,"".concat(A,"_UNIQUE_NAME"));z.push({dimension:b.names[Te]||Te,groupIndex:xe?Je(xe)-1:void 0,dataField:be,caption:x(Y,"".concat(A,"_CAPTION")),hierarchyName:K,groupName:K,displayFolder:Q,isMeasure:W,isDefault:!!b.defaultHierarchies[be]})}}),z}function $(v){var A=(v=v.replace(/_x(....)_/g,(b,H)=>String.fromCharCode(parseInt(H,16)))).match(/\[.+?\]/gi);return A&&A.length&&(v=A[A.length-1]),v.replace(/\[/gi,"").replace(/\]/gi,"").replace(/\$/gi,"").replace(/\./gi," ")}function I(v,A){return A=(0,Qt.A)("<div>").text(A).html(),g(v,(0,Qe.GP)('<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>{0}</Statement></Command><Properties><PropertyList><Catalog>{1}</Catalog><ShowHiddenCubes>True</ShowHiddenCubes><SspropInitAppName>Microsoft SQL Server Management Studio</SspropInitAppName><Timeout>3600</Timeout>{2}</PropertyList></Properties></Execute></Body></Envelope>',A,v.catalog,m()))}return{ctor(v){this._options=v},getFields(){var v=this._options,{catalog:A}=v,{cube:b}=v,H=m(),z=g(v,(0,Qe.GP)(n,A,b,"MDSCHEMA_DIMENSIONS",H)),W=g(v,(0,Qe.GP)(n,A,b,"MDSCHEMA_MEASURES",H)),re=g(v,(0,Qe.GP)(n,A,b,"MDSCHEMA_HIERARCHIES",H)),U=g(v,(0,Qe.GP)(n,A,b,"MDSCHEMA_LEVELS",H)),Y=new ye.cY;return(0,ye.z7)(z,W,re,U).then((K,xe,Q,Te)=>{g(v,(0,Qe.GP)(n,A,b,"MDSCHEMA_MEASUREGROUPS",H)).done(be=>{var Be,me=(Be={names:{},defaultHierarchies:{}},(0,L.__)((0,Qt.A)(K).find("row"),function(){var it=(0,Qt.A)(this),Nt="2"===it.children("DIMENSION_TYPE").text()?"DX_MEASURES":it.children("DIMENSION_UNIQUE_NAME").text();Be.names[Nt]=it.children("DIMENSION_CAPTION").text(),Be.defaultHierarchies[it.children("DEFAULT_HIERARCHY").text()]=!0}),Be),Ae=R(Q,"HIERARCHY",me),Ge=R(Te,"LEVEL",me),$e=function(tt){var Be={};return(0,L.__)(tt.getElementsByTagName("row"),(it,st)=>{Be[x(st,"MEASUREGROUP_NAME")]=x(st,"MEASUREGROUP_CAPTION")}),Be}(be),He=R(xe,"MEASURE",me,$e).concat(Ae),Ue={};(0,L.__)(Ge,(tt,Be)=>{Ue[Be.hierarchyName]=Ue[Be.hierarchyName]||[],Ue[Be.hierarchyName].push(Be)}),(0,L.__)(Ae,(tt,Be)=>{Ue[Be.dataField]&&Ue[Be.dataField].length>1&&(Be.groupName=Be.hierarchyName=Be.dataField,He.push.apply(He,Ue[Be.hierarchyName]))}),Y.resolve(He)}).fail(Y.reject)}).fail(Y.reject),Y},load(v){var W,A=new ye.cY,b=this._options,H={skipValues:v.skipValues},z=Ze(v,b.cube,H);(v.rowSkip||v.rowTake||v.columnTake||v.columnSkip)&&(W=Ze((0,Re.X)({},v,{totalsOnly:!0,rowSkip:null,rowTake:null,columnSkip:null,columnTake:null}),b.cube,{}));var re=()=>{z?(0,ye.z7)(I(b,z),W&&I(b,W)).done((U,Y)=>{var K=O(U)||Y&&O(Y);if(K)A.reject(K);else{var xe=function F(v,A){var b={columns:[],rows:[]},{measureCount:H}=A,z=function(W,re){var U=[];for((0,L.__)(W.getElementsByTagName("Axis"),(Y,K)=>{var xe=K.getAttribute("name"),Q=[],Te=0;0===xe.indexOf("Axis")&&(0,N.kf)(Je(xe.substr(4)))&&(U.push(Q),(0,L.__)(K.getElementsByTagName("Tuple"),(be,me)=>{var st,Ae=me.childNodes,Ge=0,$e=[],He=re?Ae.length:Ae.length-1;1===U.length&&(He-=1),Q.push($e);for(var tt=He;tt>=0;tt-=1){var Be=Ae[tt],it=Je(x(Be,"LNum"));$e[tt]={caption:x(Be,"Caption"),value:(st=x(Be,"MEMBER_VALUE"),(0,N.kf)(st)?parseFloat(st):st),level:it,index:Te++,hasValue:!(Ge||!it&&0!==tt),name:x(Be,"UName"),hierarchyName:Ae[tt].getAttribute("Hierarchy"),parentName:x(Be,"PARENT_UNIQUE_NAME"),levelName:x(Be,"LName")},Ge+=it}}))});U.length<2;)U.push([[{level:0}]]);return U}(v,A.skipValues);return b.grandTotalColumnIndex=C(b.columns,z[0],H,A.visibleLevels),b.grandTotalRowIndex=C(b.rows,z[1],void 0,A.visibleLevels),b.values=d(v,z,H),b}(U,H);Y&&function(Q,Te,be){var me=[],Ae=Te.columns||[],Ge=Te.rows||[];Ae.length&&me.push({}),Ge.length&&me.push({});var $e=d(be,[[{}],[{},{}]],1);if(!Ae.length&&Ge.length&&(Q.rowCount=Math.max($e[0][0][0]-1,0)),!Ge.length&&Ae.length&&(Q.columnCount=Math.max($e[0][0][0]-1,0)),Ge.length&&Ae.length&&(Q.rowCount=Math.max($e[0][0][0]-1,0),Q.columnCount=Math.max($e[1][0][0]-1,0)),void 0!==Q.rowCount&&Te.rowTake){Q.rows=[...Array(Te.rowSkip)].concat(Q.rows),Q.rows.length=Q.rowCount;for(var He=0;He<Q.rows.length;He+=1)Q.rows[He]=Q.rows[He]||{}}if(void 0!==Q.columnCount&&Te.columnTake){Q.columns=[...Array(Te.columnSkip)].concat(Q.columns),Q.columns.length=Q.columnCount;for(var Ue=0;Ue<Q.columns.length;Ue+=1)Q.columns[Ue]=Q.columns[Ue]||{}}}(xe,v,Y),A.resolve(xe)}}).fail(A.reject):A.resolve({columns:[],rows:[],values:[],grandTotalColumnIndex:0,grandTotalRowIndex:0})};return v.delay?setTimeout(re,v.delay):re(),A},supportPaging:()=>!0,getDrillDownItems(v,A){var b=new ye.cY,H=this._options,z=function(W,re,U){var Y=W.columns||[],K=W.rows||[],Q=[],Te=[],be=[],me=ze(Te,W.values&&W.values.length?W.values:[{dataField:"[Measures]"}]),{maxRowCount:Ae}=U,Ge=U.customColumns||[],$e=Ge.length>0?" return ".concat(Ge.join(",")):"";qe(Q,Y,U.columnPath||[]),qe(Q,K,U.rowPath||[]),(Y.length||me.length)&&be.push(["".concat(me[U.dataIndex]||me[0]," on 0")]);var He=Le(be,Te,Y,K,W.filters,Q,re);return He&&"drillthrough".concat(Ae>0?" maxrows ".concat(Ae):"").concat(He).concat($e)}(v,H.cube,A);return z?(0,ye.z7)(I(H,z)).done(W=>{var re=O(W);re?b.reject(re):b.resolve(function(U){for(var Y=U.getElementsByTagName("row"),K=[],xe={},Q=0;Q<Y.length;Q+=1){for(var Te=Y[Q].childNodes,be={},me=0;me<Te.length;me+=1){var{tagName:Ae}=Te[me];be[xe[Ae]=xe[Ae]||$(Ae)]=l(Te[me])}K.push(be)}return K}(W))}).fail(b.reject):b.resolve([]),b},key:G.lQ,filter:G.lQ}}()).include(oe.wN)};function _a(n,h,g,m){var T=h[g]||[],X=[];(0,oe.po)(n[g],(ne,le)=>{var Z=X[le]=X[le]||function Xa(n,h,g,m,T){var D=T?"asc":n.sortOrder,X=function Fa(n,h){var g="text";return"none"===n?g="index":(h||"displayText"!==n)&&(g="value"),g}(n.sortBy,T),ne=n.sortingMethod?function(Z,he){return n.sortingMethod(Z,he)}:(0,oe.gK)(Z=>Z[X]),le=!T&&function ba(n,h,g,m){var{values:T}=h,D=(0,oe.UI)(g.values,n.sortBySummaryField),X="rows"===m,le=X?h.grandTotalRowIndex:h.grandTotalColumnIndex,ce=n.sortBySummaryPath||[],Z=ce.length?function Zt(n,h){var g=null,m=(h||[]).join(".");return m.length&&(0,oe.Fo)(n,T=>{var D=T[0],X=(0,oe.AO)(T).join("."),ne=(0,L.Tj)(T,le=>le.text).reverse().join(".");if(m===X||D.key&&ne===m)return g=T[0].index,!1}),g}(X?h.columns:h.rows,ce):le;if(T&&T.length&&D>=0&&(0,N.O9)(Z))return function(he){var ze=((T[X?he.index:Z]||[[]])[X?Z:he.index]||[])[D];return(0,N.O9)(ze)?ze:null}}(n,h,g,m),ce=le&&(0,oe.gK)(le);return function(Z,he){var fe=ce&&ce(Z,he)||ne(Z,he);return"desc"===D?-fe:fe}}(T[le]||{},n,h,g,m);ne.sort(Z)},h.headerName===g?h.path.length:0)}var Gt={row:"rows",column:"columns",data:"values",filter:"filters"},qt=["area","areaIndex","sortOrder","filterType","filterValues","sortBy","sortBySummaryField","sortBySummaryPath","expanded","summaryType","summaryDisplayMode"],Ht=["format","selector","customizeText","caption"],Ca=Ht.concat(["allowSorting","allowSortingBySummary","allowFiltering","allowExpandAll"]);function Mt(n,h){var g=n._initProperties||{};(0,L.__)(h,(m,T)=>{Object.prototype.hasOwnProperty.call(g,T)&&(n[T]=g[T])})}function ca(n,h){Mt(n,h),(0,N.O9)(n.caption)||(0,oe.CE)(n,"caption",function Da(n){var h=n.dataField||n.groupName||"",g=(n.summaryType||"").toLowerCase();return(0,N.Kg)(n.groupInterval)&&(h+="_".concat(n.groupInterval)),g&&"custom"!==g?(g=g.replace(/^./,g[0].toUpperCase()),h.length&&(g=" (".concat(g,")"))):g="",(0,Ne.Ns)(h)+g}(n))}function Ia(n){return n.rows.length||n.columns.length||n.values.length}var xa=Ye.A.inherit(function(){var n=function(l,d){if(l._cacheByPath)return l._cacheByPath[d.join(".")]||null},h=function l(d,i){var p,C,y=-1;if(d)for(p=0;p<d.length;p+=1)void 0!==(C=d[p]).index&&(y=Math.max(y,C.index)),C.children?y=Math.max(y,l(C.children)):C.collapsedChildren&&(y=Math.max(y,l(C.collapsedChildren)));return(0,N.O9)(i)&&(y=Math.max(y,i)),y},g=function(l,d,i,p){var O,y=h(i)+1,C=h(l,p)+1,F=[],R=!1,$=new ye.cY;if(d.children&&d.children.length===i.length)for(var I=0;I<i.length;I+=1){var v=i[I];void 0!==v.index&&(void 0===d.children[I].index?(v.index=F[v.index]=C++,d.children[I]=v):F[v.index]=d.children[I].index)}else{for(R=!0,O=0;O<y;O+=1)F[O]=C++;d.children=i}return(0,ye.z7)((0,oe.vs)(d.children,A=>{R&&(A[0].index=F[A[0].index])})).done(()=>{$.resolve(F)}),$},m=function(l,d,i){var p=new ye.cY,y=i>=0&&h(l,i)+1,C=[];return(0,ye.z7)((0,oe.vs)(l,O=>{delete O[0].collapsedChildren})).done(()=>{(0,ye.z7)((0,oe.vs)(d,(O,F)=>{var R=O[0];if(R.index>=0){var $=n(l,(0,oe.AO)(O));if($&&$.index>=0)C[R.index]=$.index;else if(y){var I=(0,oe.AO)(O.slice(1));$=n(l,I);var v=I.length?$&&$.children:l;v&&(v[F]=R,R.index=C[R.index]=y++)}}})).done(()=>{p.resolve(C)})}),p},T=function(l,d,i,p){var y,C,O,F,R,$,I=l.values;if(d)for(y=0;y<d.length;y+=1)if(O=d[y],(0,N.O9)(R=i[y])||(R=l.grandTotalRowIndex),O&&(0,N.O9)(R))for(I[R]||(I[R]=[]),C=0;C<O.length;C+=1)F=O[C],(0,N.O9)($=p[C])||($=l.grandTotalColumnIndex),(0,N.O9)(F)&&(0,N.O9)($)&&(I[R][$]=F)};function D(l,d){return new(l.remoteOperations||l.paginate?Ie:De)((0,Re.X)((0,Pe.ho)(l),{onChanged:null,onLoadingChanged:null,onProgressChanged:d}))}function X(l,d,i,p){var y=[],C=d&&d[i]||[],O=p&&p[i]||[];return(0,oe.Fo)(l[i],F=>{var R=F[0],$=(0,oe.AO)(F);R.children&&C[$.length-1]&&!C[$.length-1].expanded&&$.length<C.length&&(!p||function(I,v,A){for(var b=0;b<A;b+=1)if(!I[b]||!v[b]||I[b].index!==v[b].index)return!1;return!0}(C,O,$.length))&&y.push($.slice())},!0),y}function ne(l,d,i,p){return d?(0,L.__)(p,(y,C)=>{if(i)l[C]=d[C];else{if(("summaryType"===C||"summaryDisplayMode"===C)&&void 0===d[C])return;(0,oe.CE)(l,C,d[C])}}):Mt(l,p),l}function le(l,d){var i=[];return(0,L.__)(l,(p,y)=>{i.push(ne({dataField:y.dataField,name:y.name},y,!0,d))}),i}function ce(l){return l.name?l.name:"".concat(l.dataField)}function Z(l,d){var i=[];return(0,L.__)(l||[],(p,y)=>{ce(y)===d&&i.push(y)}),i}function he(l,d){l=l||[];var p,i={};return(0,L.__)(d,(y,C)=>{p=ce(C),i[p]||(i[p]=Z(d,ce(C)))}),(0,L.__)(i,(y,C)=>{var O;O=(O=Z(l,y))||[],(0,L.__)(C,(R,$)=>{ne($,O[R],!1,qt),ca($,Ht)})}),d}function fe(l){l.sort((d,i)=>d.areaIndex-i.areaIndex||d.groupIndex-i.groupIndex)}function Le(l,d){var i=l.groupName||"";return(l.dataField||i)+(l.groupInterval?i+l.groupInterval:"NOGROUP")+(d?"":i)}function ze(l,d,i){var F,p=[],y={},C={},O=(0,oe.uz)(l);return d?((0,L.__)(d,(F,R)=>{y[Le(R,i)]=R}),(0,L.__)(l,(F,R)=>{var v,$=Le(R,i),I=y[$]||C[$];I?(I._initProperties&&Mt(I,Ca),v=(0,Re.X)({},I,R,{_initProperties:null})):y[$]=v=R,!v.dataType&&O[R.dataField]&&(v.dataType=O[R.dataField]),delete y[$],C[$]=I,p.push(v)}),i&&(0,L.__)(y,(F,R)=>{p.push(R)})):p=l,p.push.apply(p,[]),(F=p).forEach(R=>{if(R.groupName&&R.groupInterval&&void 0===R.groupIndex){var $=F.filter(I=>I.groupName===R.groupName&&(0,N.kf)(I.groupIndex)).map(I=>I.groupIndex).reduce((I,v)=>Math.max(I,v),-1);R.groupIndex=$+1}}),p}function We(l){var y,d=new ye.cY,i=l._store,p=i&&i.getFields(l._fields);return(0,ye.z7)(p).done(C=>{l._storeFields=C,y=ze(l._fields,C,l._retrieveFields),d.resolve(y)}).fail(d.reject),d}function Ze(l,d,i){return(0,oe.vs)(l[i],p=>{var y=p[0];y.text=y.text||(0,oe.Fl)(y.value,d[i][(0,oe.AO)(p).length-1])})}function qe(l,d){return(0,ye.z7)(Ze(d,l,"columns"),Ze(d,l,"rows"))}function Je(l){var d=new ye.cY,i={};return(0,ye.z7)((0,oe.vs)(l,p=>{var y=(0,oe.AO)(p).join(".");i[y]=p[0]})).done(d.resolve),l._cacheByPath=i,d}function x(l,d){var i=[];return(0,L.__)(l,function(){var p,y,C;p=this,C="data"===(y=d)||!1!==p.visible,p.area===y&&!(0,N.O9)(p.groupIndex)&&C&&i.push(this)}),i}return{ctor(l){l=l||{},this._eventsStrategy=new xt.h(this);var p,y,C,O,d=this,i=(y=p=>{d._eventsStrategy.fireEvent("progressChanged",[p])},(0,N.Qd)(p=l)&&p.load?C=D(p,y):(p&&!p.store&&(p={store:p}),"xmla"===(O=p.store).type?C=new ma.XmlaStore(O):(0,N.Qd)(O)&&O.type||O instanceof kt.A||Array.isArray(O)?C=D(p,y):O instanceof Ye.A&&(C=O)),C);d._store=i,d._paginate=!!l.paginate,d._pageSize=l.pageSize||40,d._data={rows:[],columns:[],values:[]},d._loadingCount=0,d._isFieldsModified=!1,(0,L.__)(["changed","loadError","loadingChanged","progressChanged","fieldsPrepared","expandValueChanging"],(p,y)=>{var C="on".concat(y[0].toUpperCase()).concat(y.slice(1));Object.prototype.hasOwnProperty.call(l,C)&&this.on(y,l[C])}),d._retrieveFields=!(0,N.O9)(l.retrieveFields)||l.retrieveFields,d._fields=l.fields||[],d._descriptions=l.descriptions?(0,Re.X)(d._createDescriptions(),l.descriptions):void 0,i||(0,Re.X)(!0,d._data,l.store||l)},getData(){return this._data},getAreaFields(l,d){var i=[];return d||"data"===l?fe(i=x(this._fields,l)):i=(this._descriptions||{})[Gt[l]]||[],i},getSummaryFields(){return this.getAreaFields("data").filter(l=>(0,N.O9)(l.summaryType))},fields(l){return l&&(this._fields=ze(l,this._storeFields,this._retrieveFields),this._fieldsPrepared(this._fields)),this._fields},field(l,d){var y,i=this._fields,p=i&&i[(0,N.kf)(l)?l:(0,oe.UI)(i,l)];return p&&d&&((0,L.__)(d,(C,O)=>{var F=!qt.includes(C);if((0,oe.CE)(p,C,O,F),"sortOrder"===C){y=p.levels||[];for(var R=0;R<y.length;R+=1)y[R][C]=O}}),ca(p,Ht),this._descriptions=this._createDescriptions(p),this._isFieldsModified=!0,this._eventsStrategy.fireEvent("fieldChanged",[p])),p},getFieldValues(l,d,i){var R,p=this,y=this._fields&&this._fields[l],C=this.store(),O=[],F={columns:O,rows:[],values:this.getAreaFields("data"),filters:d?this._fields.filter(I=>I!==y&&I.area&&I.filterValues&&I.filterValues.length):[],skipValues:!0},$=new ye.cY;return i&&(R=i.searchValue,F.columnSkip=i.skip,F.columnTake=i.take),y&&C?((0,L.__)(y.levels||[y],function(){O.push((0,Re.X)({},this,{expanded:!0,filterValues:null,sortOrder:"asc",sortBySummaryField:null,searchValue:R}))}),C.load(F).done(I=>{F.columnSkip&&(I.columns=I.columns.slice(F.columnSkip)),F.columnTake&&(I.columns=I.columns.slice(0,F.columnTake)),qe(F,I),F.columnTake||p._sort(F,I),$.resolve(I.columns)}).fail($)):$.reject(),$},reload(){return this.load({reload:!0})},filter(){var l=this._store;return l.filter.apply(l,arguments)},load:function(l){var d=this,i=new ye.cY;function p(){d._delayedLoadTask=void 0,d._descriptions?d._loadCore(l,i):(0,ye.z7)(We(d)).done(y=>{d._fieldsPrepared(y),d._loadCore(l,i)}).fail(i.reject).fail(d._loadErrorHandler)}return l=l||{},d.beginLoading(),i.fail(y=>{d._eventsStrategy.fireEvent("loadError",[y])}).always(()=>{d.endLoading()}),d.store()?d._delayedLoadTask=(0,G.uG)(p):p(),i},createDrillDownDataSource(l){return this._store.createDrillDownDataSource(this._descriptions,l)},_createDescriptions(l){var d=this.fields(),i={rows:[],columns:[],values:[],filters:[]};(0,L.__)(["row","column","data","filter"],(y,C)=>{(0,Bt.Il)(x(d,C),"areaIndex",l)}),(0,L.__)(d||[],(y,C)=>{var I,F=i[Gt[C.area]],{groupName:R}=C;R&&!(0,N.kf)(C.groupIndex)&&(C.levels=(I=C,d.filter(v=>v.groupName===I.groupName&&(0,N.kf)(v.groupIndex)&&!1!==v.visible).map(v=>(0,Re.X)(v,{areaIndex:I.areaIndex,area:I.area,expanded:(0,N.O9)(v.expanded)?v.expanded:I.expanded,dataField:v.dataField||I.dataField,dataType:v.dataType||I.dataType,sortBy:v.sortBy||I.sortBy,sortOrder:v.sortOrder||I.sortOrder,sortBySummaryField:v.sortBySummaryField||I.sortBySummaryField,sortBySummaryPath:v.sortBySummaryPath||I.sortBySummaryPath,visible:v.visible||I.visible,showTotals:(0,N.O9)(v.showTotals)?v.showTotals:I.showTotals,showGrandTotals:(0,N.O9)(v.showGrandTotals)?v.showGrandTotals:I.showGrandTotals})).sort((v,A)=>v.groupIndex-A.groupIndex))),!(!F||R&&(0,N.kf)(C.groupIndex)||!1===C.visible&&"data"!==C.area&&"filter"!==C.area)&&(C.levels&&F!==i.filters&&F!==i.values?(F.push.apply(F,C.levels),C.filterValues&&C.filterValues.length&&i.filters.push(C)):F.push(C))}),(0,L.__)(i,(y,C)=>{fe(C)});var p={};return(0,L.__)(i.values,(y,C)=>{var O=C.calculateSummaryValue;(0,N.Tn)(O)&&O(da_createMockSummaryCell(i,d,p))}),i},_fieldsPrepared(l){this._fields=l,(0,L.__)(l,(p,y)=>{y.index=p,ca(y,Ca)});var d=le(l,["caption"]);this._eventsStrategy.fireEvent("fieldsPrepared",[l]);for(var i=0;i<l.length;i+=1)l[i].caption!==d[i].caption&&(0,oe.CE)(l[i],"caption",l[i].caption,!0);this._descriptions=this._createDescriptions()},isLoading(){return this._loadingCount>0},state(l,d){var i=this;return arguments.length?(l=(0,Re.X)({rowExpandedPaths:[],columnExpandedPaths:[]},l),void(i._descriptions?(i._fields=he(l.fields,i._fields),i._descriptions=i._createDescriptions(),!d&&i.load(l)):(i.beginLoading(),(0,ye.z7)(We(i)).done(p=>{i._fields=he(l.fields,p),i._fieldsPrepared(p),!d&&i.load(l)}).always(()=>{i.endLoading()})))):{fields:le(i._fields,qt),columnExpandedPaths:X(i._data,i._descriptions,"columns",i._lastLoadOptions),rowExpandedPaths:X(i._data,i._descriptions,"rows",i._lastLoadOptions)}},beginLoading(){this._changeLoadingCount(1)},endLoading(){this._changeLoadingCount(-1)},_changeLoadingCount(l){var d=this.isLoading();this._loadingCount+=l;var i=this.isLoading();d^i&&this._eventsStrategy.fireEvent("loadingChanged",[i])},_hasPagingValues(l,d,i){var p="".concat(d,"Take"),y="".concat(d,"Skip"),{values:C}=this._data,O=this._data["".concat(d,"s")],F="row"===d?"column":"row",R=[];if(l.path&&l.area===d){var $=n(O,l.path);if(!(O=$&&$.children))return!1}if(l.oppositePath&&l.area===F){var I=n(O,l.oppositePath);if(!(O=I&&I.children))return!1}for(var v=l[y];v<l[y]+l[p];v+=1)O[v]&&R.push(O[v].index);return R.every(A=>{if(void 0!==A)return"row"===d?(C[A]||[])[i]:(C[i]||[])[A]})},_processPagingCacheByArea(l,d,i){var F,p="".concat(i,"Take"),y="".concat(i,"Skip"),C=this._data["".concat(i,"s")],O="row"===i?"column":"row";if(l[p]){if(l.path&&l.area===i){var R=n(C,l.path);C=R&&R.children||[]}if(l.oppositePath&&l.area===O){var $=n(C,l.oppositePath);C=$&&$.children||[]}do{if((F=C[l[y]])&&void 0!==F.index){if(!this._hasPagingValues(l,O,F.index))break;l[y]++,l[p]--}}while(F&&void 0!==F.index&&l[p]);if(l[p]){var I=Math.floor(l[y]/d)*d,v=Math.ceil((l[y]+l[p])/d)*d;l[y]=I,l[p]=v-I}}},_processPagingCache(l){var d=this._pageSize;if(!(d<0))for(var i=0;i<l.length;i+=1)this._processPagingCacheByArea(l[i],d,"row"),this._processPagingCacheByArea(l[i],d,"column")},_loadCore(l,d){var i=this,p=this._store,y=this._descriptions,C=l.reload||this.paginate()&&i._isFieldsModified,O=this.paginate(),F=Gt[l.area];if(l=l||{},p){(0,Re.X)(l,y),l.columnExpandedPaths=l.columnExpandedPaths||X(this._data,l,"columns",i._lastLoadOptions),l.rowExpandedPaths=l.rowExpandedPaths||X(this._data,l,"rows",i._lastLoadOptions),O&&(l.pageSize=this._pageSize),F&&(l.headerName=F),i.beginLoading(),d.always(()=>{i.endLoading()});var R=[l];if(i._eventsStrategy.fireEvent("customizeStoreLoadOptions",[R,C]),C||i._processPagingCache(R),!(R=R.filter(I=>!(I.rows.length&&0===I.rowTake||I.columns.length&&0===I.columnTake))).length)return void i._update(d);var $=R.map(I=>p.load(I));ye.z7.apply(null,$).done(function(){for(var I=arguments,v=0;v<I.length;v+=1){var A=R[v],b=I[v],H=v===I.length-1;A.path?i.applyPartialDataSource(A.area,A.path,b,!!H&&d,A.oppositePath):O&&!C&&Ia(i._data)?i.mergePartialDataSource(b,!!H&&d):((0,Re.X)(i._data,b),i._lastLoadOptions=A,i._update(!!H&&d))}}).fail(d.reject)}else i._update(d)},_sort(l,d,i){this._store&&!this._paginate&&function ha(n,h,g){_a(h,n,"rows",g),_a(h,n,"columns",g)}(l,d,i)},sortLocal(){this._sort(this._descriptions,this._data),this._eventsStrategy.fireEvent("changed")},paginate(){return this._paginate&&this._store&&this._store.supportPaging()},isEmpty(){var l=this.getAreaFields("data").filter(i=>!1!==i.visible),d=this.getData();return!l.length||!d.values.length},_update(l){var d=this,i=d._descriptions,p=d._data,y=i.values,C=function Oa(n){return n.some(h=>h.summaryDisplayMode||h.calculateSummaryValue)}(y);return(0,ye.z7)(qe(i,p),Je(p.rows),Je(p.columns)).done(()=>{C&&(d._sort(i,p,C),!d.isEmpty()&&da_applyDisplaySummaryMode(i,p)),d._sort(i,p),!d.isEmpty()&&function pt(n){return n.some(h=>!!h.runningTotal)}(y)&&da_applyRunningTotal(i,p),d._data=p,!1!==l&&(0,ye.z7)(l).done(()=>{d._isFieldsModified=!1,d._eventsStrategy.fireEvent("changed"),(0,N.O9)(d._data.grandTotalRowIndex)&&(p.grandTotalRowIndex=d._data.grandTotalRowIndex),(0,N.O9)(d._data.grandTotalColumnIndex)&&(p.grandTotalColumnIndex=d._data.grandTotalColumnIndex)}),l&&l.resolve(d._data)}),l},store(){return this._store},collapseHeaderItem(l,d){var p=n("column"===l?this._data.columns:this._data.rows,d),y=this.getAreaFields(l)[d.length-1];return!(!p||!p.children||(this._eventsStrategy.fireEvent("expandValueChanging",[{area:l,path:d,expanded:!1}]),y&&(y.expanded=!1),p.collapsedChildren=p.children,delete p.children,this._update(),this.paginate()&&this.load(),0))},collapseAll(l){var d=!1,i=this.field(l)||{},p=[this.getAreaFields(i.area).indexOf(i)];i.expanded=!1,i&&i.levels&&(p=[],i.levels.forEach(y=>{p.push(this.getAreaFields(i.area).indexOf(y)),y.expanded=!1})),(0,oe.Fo)(this._data["".concat(i.area,"s")],y=>{var C=y[0],O=(0,oe.AO)(y);C&&C.children&&p.includes(O.length-1)&&(C.collapsedChildren=C.children,delete C.children,d=!0)},!0),d&&this._update()},expandAll(l){var d=this.field(l);d&&d.area&&(d.expanded=!0,d&&d.levels&&d.levels.forEach(i=>{i.expanded=!0}),this.load())},expandHeaderItem(l,d){var p=n("column"===l?this._data.columns:this._data.rows,d);if(p&&!p.children){var y=!!p.collapsedChildren,C={area:l,path:d,expanded:!0,needExpandData:!y};return this._eventsStrategy.fireEvent("expandValueChanging",[C]),y?(p.children=p.collapsedChildren,delete p.collapsedChildren,this._update()):this.store()&&this.load(C),y}return!1},mergePartialDataSource(l,d){var y,C,i=this,p=i._data;l&&l.values&&(l.rows=l.rows||[],l.columns=l.columns||[],y=m(p.rows,l.rows,p.grandTotalColumnIndex),C=m(p.columns,l.columns,p.grandTotalColumnIndex),(0,ye.z7)(y,C).done((O,F)=>{(O.length||F.length)&&T(p,l.values,O,F),i._update(d)}))},applyPartialDataSource(l,d,i,p,y){var R,I,v,A,C=this,O=C._data,F="column"===l?O.columns:O.rows,$="column"===l?O.rows:O.columns;i&&i.values&&(i.rows=i.rows||[],i.columns=i.columns||[],R=n(F,d),I=y&&n($,y),R&&("column"===l?(A=g(F,R,i.columns,O.grandTotalColumnIndex),v=I?g($,I,i.rows,O.grandTotalRowIndex):m(O.rows,i.rows,O.grandTotalRowIndex)):(v=g(F,R,i.rows,O.grandTotalRowIndex),A=I?g($,I,i.columns,O.grandTotalColumnIndex):m(O.columns,i.columns,O.grandTotalColumnIndex)),(0,ye.z7)(v,A).done((b,H)=>{("row"===l&&b.length||"column"===l&&H.length)&&T(O,i.values,b,H),C._update(p)})))},on(l,d){return this._eventsStrategy.on(l,d),this},off(l,d){return this._eventsStrategy.off(l,d),this},dispose(){var l=this._delayedLoadTask;this._eventsStrategy.dispose(),l&&l.abort(),this._isDisposed=!0},isDisposed(){return!!this._isDisposed}}}())},59613:(Ua,aa,B)=>{B.d(aa,{FY:()=>_t,Zr:()=>jt,AO:()=>mt,Ay:()=>lt,yg:()=>It,UI:()=>vt,po:()=>Ot,Fo:()=>St,vs:()=>oe,Fl:()=>De,gK:()=>ra,G6:()=>zt,uz:()=>At,Mt:()=>Tt,JL:()=>yt,k2:()=>Xt,CE:()=>ot,wN:()=>na});var Ye=B(17669),xt=B(94461),Bt=B(435),G=B(39407),ye=B(12984),Re=B(87951),Ne=B(12101),L=B(72463),N=B(2097),kt=B(75333),Pe=B(45),nt=B(69259),ot=function(V,q,ie,ae){var Oe=V._initProperties=V._initProperties||{},Ie=ae?ie:V[q];(!Object.prototype.hasOwnProperty.call(Oe,q)||ae)&&"_initProperties"!==q&&(Oe[q]=Ie),V[q]=ie},Fe=new Date;function Dt(V){return function q(ie,ae,Oe,Ie,Ke,Xe){var Ve,ke;function dt(Yt,la,gt){(0,ye.z7)(q(ie,ae,Oe,Ie,la,gt)).done(Yt.resolve)}for(Ie=Ie||[],ie=ie||[],Ve=Ke=Ke||0;Ve<ie.length;Ve+=1){if(V&&Ve>Ke&&Ve%1e4==0&&new Date-Fe>=300)return Fe=new Date,dt(ke=new ye.cY,Ve,!1),ke;var et=ie[Ve];if(!Xe){if(Ie.unshift(et),Oe&&!1===ae(Ie,Ve))return;if(et.children){var Lt=q(et.children,ae,Oe,Ie);if(V&&Lt)return ke=new ye.cY,Lt.done(dt(ke,Ve,!0)),ke}}if(Xe=!1,!Oe&&!1===ae(Ie,Ve))return;Ie.shift(),ie[Ve]!==et&&(Ve-=1)}}}var St=Dt(!1),oe=Dt(!0);function vt(V,q){if(V&&(0,L.O9)(q))for(var ie=0;ie<V.length;ie+=1){var ae=V[ie];if(ae.name===q||ae.caption===q||ae.dataField===q||ae.index===q)return ie}return-1}function De(V,q){var ae={value:V,valueText:V==V&&Pe.A.format(V,q.format)||""};return q.customizeText?q.customizeText.call(q,ae):ae.valueText}function ra(V){return function(q,ie){var ae=0,Oe=V(q),Ie=V(ie),Ke=(0,L.O9)(Oe),Xe=(0,L.O9)(Ie);return Ke&&Xe&&(Oe>Ie?ae=1:Oe<Ie&&(ae=-1)),Ke&&!Xe&&(ae=1),!Ke&&Xe&&(ae=-1),ae}}function mt(V){for(var q=[],ie=V.length-1;ie>=0;ie-=1)q.push(V[ie].key||V[ie].value);return q}function Ot(V,q,ie,ae){ie=ie||0,ae=ae||"children",V.length&&q(V,ie);for(var Oe=0;Oe<V.length;Oe+=1){var Ie=V[Oe];Ie[ae]&&Ie[ae].length&&Ot(Ie[ae],q,ie+1,ae)}}function yt(V,q){for(var ie=[],ae=0;ae<V.length;ae+=1)ie.push(Math.max(V[ae]||0,q[ae]||0));return ie}function zt(V,q){var ie=V[q],ae=0;for(V.headerName===q?ae=V.path.length:V.headerName&&V.headerName!==q&&V.oppositePath?ae=V.oppositePath.length:(0,Ne.__)(("columns"===q?V.columnExpandedPaths:V.rowExpandedPaths)||[],(Ie,Ke)=>{ae=Math.max(ae,Ke.length)});ie[ae+1]&&ie[ae].expanded;)ae+=1;return ae}function $t(V,q,ie,ae){var Oe=[];return Object.keys(q||[]).forEach(Ie=>{if(!Ie||!Ie.startsWith("__")){for(var et,Ke=1,Xe=ie.length?"".concat(ie,".").concat(Ie):Ie,Ve=ae[Xe],ke=(0,G.Hz)(Xe),dt=q[Ie];!(0,L.O9)(dt)&&V[Ke];)dt=ke(V[Ke]),Ke+=1;!Ve&&(0,L.O9)(dt)&&(Ve=(0,L.NW)(dt)),et=[{dataField:Xe,dataType:Ve,groupName:"date"===Ve?Ie:void 0,groupInterval:void 0,displayFolder:ie}],"date"===Ve?et=et.concat(function Wt(V){return(0,Ne.Tj)(["year","quarter","month"],(q,ie)=>(0,Re.X)({},V,{groupInterval:q,groupIndex:ie}))}(et[0])):"object"===Ve&&(et=$t(V,dt,Xe,ae)),Oe.push.apply(Oe,et)}}),Oe}function It(V,q){var ie=At(q);return $t(V,V[0],"",ie)}function At(V){var q={};return(0,Ne.__)(V,(ie,ae)=>{q[ae.dataField]=q[ae.dataField]||ae.dataType}),q}var Ut={month:V=>nt.A.getMonthNames()[V-1],quarter:V=>nt.A.format(new Date(2e3,3*V-1),"quarter"),dayOfWeek:V=>nt.A.getDayNames()[V]};function Xt(V){if("date"===V.dataType)V.format||ot(V,"format",Ut[V.groupInterval]);else if("number"===V.dataType){var q=(0,L.kf)(V.groupInterval)&&V.groupInterval>0&&V.groupInterval;q&&!V.customizeText&&ot(V,"customizeText",ie=>{var Oe=Pe.A.format(ie.value+q,V.format);return ie.valueText&&Oe?"".concat(ie.valueText," - ").concat(Oe):""})}}function Tt(V,q){var ie=[];q=q||[];for(var ae=0;ae<q.length;ae+=1)ie.push((0,Re.X)({},V[ae],{groupIndex:null,groupName:null,filterType:"include",filterValues:[q[ae]]}));return ie}var na={createDrillDownDataSource(V,q){var ie=this.getDrillDownItems(V,q);function ae(Ie){return function(Ke){var Xe;return Xe=new ye.cY,(0,ye.z7)(ie).done(Ve=>{new N.A(Ve)[Ie](Ke).done(Xe.resolve).fail(Xe.reject)}).fail(Xe.reject),Xe}}return new kt.q({load:ae("load"),totalCount:ae("totalCount"),key:this.key()})}};function jt(V){return V.charAt(0).toUpperCase()+V.slice(1)}var rt=V=>V.offsetWidth-V.clientWidth,_t=(0,Bt.A)(()=>{var V=Ye.A.getDocument();V.body.insertAdjacentHTML("beforeend",'<div class="'.concat("dx-pivotgrid-scrollbar-measure-element",'"></div>'));var q=V.body.lastElementChild,ie=rt(q);return q&&V.body.removeChild(q),ie});const lt={setFieldProperty:ot,sendRequest:function ft(V){return xt.A.sendRequest(V)},foreachTree:St,foreachTreeAsync:oe,findField:vt,formatValue:De,getCompareFunction:ra,createPath:mt,foreachDataLevel:Ot,mergeArraysByMaxValue:yt,getExpandedLevel:zt,discoverObjectFields:It,getFieldsDataType:At,setDefaultFieldValueFormatting:Xt,getFiltersByPath:Tt,storeDrillDownMixin:na,capitalizeFirstLetter:jt,getScrollbarWidth:rt,calculateScrollbarWidth:_t}}}]);