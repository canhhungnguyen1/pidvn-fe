"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[8366],{8366:(X,D,o)=>{o.r(D),o.d(D,{IeModule:()=>Q});var m=o(60177),n=o(89417),R=o(53281),z=o(72915),P=o(33514),y=o(12673),e=o(54438),p=(o(98508),o(27380)),g=o(31837);o(345);let G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[[g.POb,p.p_,p.xZ],g.POb,p.xZ]}),i})();var O=o(50513),b=o(74696),x=o(97529),U=o(21011),N=o(43053),I=o(1997),v=o(23359),A=o(9541),f=o(46661);let F=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-ie"]],decls:1,vars:0,template:function(s,c){1&s&&e.nrm(0,"router-outlet")},dependencies:[f.n3],encapsulation:2})}return i})();var B=o(45312),H=o(21626);let a=(()=>{class i{constructor(t){this.httpClient=t,this.baseUrl=B.c.baseUrl}getMachines(){return this.httpClient.get(`${this.baseUrl}/IE/Machine/Machines`)}getMachinesFiles(){return this.httpClient.get(`${this.baseUrl}/IE/Machine/Files`)}uploadFile(t,s){const c=new FormData;t.forEach(_=>{c.append("files",_,_.name)});const h=new Blob([JSON.stringify(s)],{type:"application/json"});return c.append("fileInfo",h),this.httpClient.post(`${this.baseUrl}/IE/Machine/File`,c)}static#e=this.\u0275fac=function(s){return new(s||i)(e.KVO(H.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var E=o(45794),l=o(37736),r=o(16389),d=o(25930);const C=["fileUploader"],$=()=>[""],j=()=>({"aria-label":"Select file"}),w=()=>[10,25,50,100];function L(i,u){if(1&i&&e.nrm(0,"nz-option",22),2&i){const t=u.$implicit;e.Y8G("nzLabel","("+t.code+") - "+t.name)("nzValue",t.code)}}function V(i,u){if(1&i){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const c=e.XpG();return e.Njj(c.uploadFile())}),e.EFF(1," Upload "),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("nzLoading",t.isLoading)}}function Y(i,u){if(1&i){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const c=e.XpG();return e.Njj(c.clearFiles())}),e.EFF(1," X\xf3a c\xe1c file \u0111\xe3 ch\u1ecdn "),e.k0s()}}const W=[{path:"",component:F,children:[{path:"drawing-control",loadChildren:()=>Promise.all([o.e(5154),o.e(7064),o.e(1789),o.e(5703),o.e(5960),o.e(4042),o.e(9462),o.e(6220),o.e(2076),o.e(3767)]).then(o.bind(o,23767)).then(i=>i.DrawingControlModule)},{path:"machine-document",component:(()=>{class i{constructor(t,s,c,h){this.ieMaDoSvc=t,this.activatedRoute=s,this.toastr=c,this.jwtHelperSvc=h,this.isOpenUploadModal=!1,this.machineCode=null,this.isLoading=!1}ngOnInit(){this.getMachines(),this.getMachineFiles()}getMachineFiles(){this.machineFileGrid?.instance.beginCustomLoading("\u0110ang t\u1ea3i d\u1eef li\u1ec7u ..."),this.ieMaDoSvc.getMachinesFiles().subscribe(t=>{this.machineFiles=t.result,this.machineFileGrid.instance.endCustomLoading()})}getMachines(){this.ieMaDoSvc.getMachines().subscribe(t=>{this.machines=t.result})}uploadFile(){if(null==this.machineCode)return void this.toastr.warning("M\xe1y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng","Warning");this.isLoading=!0;const t=this.fileUploader;console.log("uploadFile: ",t.value[0]);let s=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username;this.ieMaDoSvc.uploadFile(t.value,{machineCode:this.machineCode,createdBy:s}).subscribe(h=>{console.log("response: ",h),this.getMachineFiles(),this.isLoading=!1,this.clearFiles()})}clearFiles(){this.fileUploader.instance.reset(),this.machineCode=null}static#e=this.\u0275fac=function(s){return new(s||i)(e.rXU(a),e.rXU(f.nX),e.rXU(E.tw),e.rXU(l.X7))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-ie-ma-do"]],viewQuery:function(s,c){if(1&s&&(e.GBs(y.s,5),e.GBs(C,5)),2&s){let h;e.mGM(h=e.lsd())&&(c.machineFileGrid=h.first),e.mGM(h=e.lsd())&&(c.fileUploader=h.first)}},decls:41,vars:27,consts:[["fileUploader",""],["machineFileGrid",""],["nz-row","","nzJustify","start","nzAlign","top",3,"nzGutter"],["nz-col","","nzXs","8"],["nzActive","true",3,"nzHeader"],["nzSize","small","nzBordered","","nzFrontPagination","false",1,"project-activity",3,"nzData"],["nzShowSearch","true","nzAllowClear","true",2,"width","100%",3,"ngModelChange","ngModel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["selectButtonText","Ch\u1ecdn file","labelText","","accept","image/*, .pdf, .doc, .docx, .ppt, .pptx, .xls, .xlsx","uploadMode","useForm",3,"multiple","inputAttr"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","default",3,"click",4,"ngIf"],["nz-col","","nzXs","16"],["keyExpr","id",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"visible"],["dataField","name","caption","File Name"],["dataField","machineCode","caption","Machine Code",3,"groupIndex"],["dataField","machineName","caption","Machine Name"],["dataField","createdByName","caption","Ng\u01b0\u1eddi upload"],["alignment","center","dataField","createdAt","caption","Time","dataType","date","format","yyyy-MM-dd HH:mm",3,"sortOrder"],["column","machineCode","summaryType","count","displayFormat","{0} files"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-button","","nzType","default",3,"click"]],template:function(s,c){if(1&s){const h=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"nz-collapse")(3,"nz-collapse-panel",4)(4,"nz-table",5)(5,"tbody")(6,"tr")(7,"td")(8,"label"),e.EFF(9,"M\xe1y"),e.k0s()(),e.j41(10,"td")(11,"nz-select",6),e.mxI("ngModelChange",function(M){return e.eBV(h),e.DH7(c.machineCode,M)||(c.machineCode=M),e.Njj(M)}),e.DNE(12,L,1,2,"nz-option",7),e.k0s()()(),e.j41(13,"tr")(14,"td")(15,"label"),e.EFF(16,"File"),e.k0s()(),e.j41(17,"td"),e.nrm(18,"dx-file-uploader",8,0),e.k0s()(),e.j41(20,"tr"),e.nrm(21,"td"),e.j41(22,"td"),e.DNE(23,V,2,1,"button",9)(24,Y,2,0,"button",10),e.k0s()()()()()()(),e.j41(25,"div",11)(26,"nz-collapse")(27,"nz-collapse-panel",4)(28,"dx-data-grid",12,1),e.nrm(30,"dxo-header-filter",13)(31,"dxo-filter-row",13)(32,"dxi-column",14)(33,"dxi-column",15)(34,"dxi-column",16)(35,"dxi-column",17)(36,"dxi-column",18),e.j41(37,"dxo-summary"),e.nrm(38,"dxi-group-item",19),e.k0s(),e.nrm(39,"dxo-paging",20)(40,"dxo-pager",21),e.k0s()()()()()}if(2&s){const h=e.sdS(19);e.Y8G("nzGutter",24),e.R7$(3),e.Y8G("nzHeader","Upload"),e.R7$(),e.Y8G("nzData",e.lJ4(24,$)),e.R7$(7),e.R50("ngModel",c.machineCode),e.R7$(),e.Y8G("ngForOf",c.machines),e.R7$(6),e.Y8G("multiple",!0)("inputAttr",e.lJ4(25,j)),e.R7$(5),e.Y8G("ngIf",h.value.length),e.R7$(),e.Y8G("ngIf",h.value.length),e.R7$(3),e.Y8G("nzHeader","Danh s\xe1ch file"),e.R7$(),e.Y8G("dataSource",c.machineFiles)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("groupIndex",0),e.R7$(3),e.Y8G("sortOrder","desc"),e.R7$(3),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(26,w))}},dependencies:[m.Sq,m.bT,n.BC,n.vS,z.m,v.CP,v.SO,v.aj,v.kt,O.aO,r.c,d.p,I.ld,I.WI,b.Vz,b.pc,x.Uq,x.e,y.s,g.nj_,g.gtJ,g.FTx,g.sVQ,g.PVd,g.XvM,g.ryC]})}return i})()}]}];let k=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[f.iI.forChild(W),f.iI]})}return i})();var J=o(72544);let Q=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[m.MD,n.YN,k,G,A.hM,R.Z,z.b,P.L,v.$G,N.U6,O.Zw,U.j,I.DH,b.GB,x.f3,y.N,J.Y3]})}return i})()},74696:(X,D,o)=>{o.d(D,{GB:()=>H,Vz:()=>B,pc:()=>f});var m=o(15215),n=o(54438),R=o(73586),z=o(7605),P=o(58728),y=o(40713),e=o(16042),T=o(57806),p=o(21025),g=o(70317),S=o(72544),K=o(28203),G=o(26841);const O=["*"],b=["collapseHeader"];function x(a,E){if(1&a&&(n.qex(0),n.nrm(1,"span",7),n.bVm()),2&a){const l=E.$implicit,r=n.XpG(2);n.R7$(),n.Y8G("nzType",l||"right")("nzRotate",r.nzActive?90:0)}}function U(a,E){if(1&a&&(n.j41(0,"div"),n.DNE(1,x,2,2,"ng-container",3),n.k0s()),2&a){const l=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",l.nzExpandedIcon)}}function N(a,E){if(1&a&&(n.qex(0),n.EFF(1),n.bVm()),2&a){const l=n.XpG();n.R7$(),n.JRh(l.nzHeader)}}function I(a,E){if(1&a&&(n.qex(0),n.EFF(1),n.bVm()),2&a){const l=n.XpG(2);n.R7$(),n.JRh(l.nzExtra)}}function v(a,E){if(1&a&&(n.j41(0,"div",4),n.DNE(1,I,2,1,"ng-container",3),n.k0s()),2&a){const l=n.XpG();n.R7$(),n.Y8G("nzStringTemplateOutlet",l.nzExtra)}}const A="collapse";let f=(()=>{class a{constructor(l,r,d,C){this.nzConfigService=l,this.cdr=r,this.directionality=d,this.destroy$=C,this._nzModuleName=A,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(A).pipe((0,z.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,z.Q)(this.destroy$)).subscribe(l=>{this.dir=l,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(l){this.listOfNzCollapsePanelComponent.push(l)}removePanel(l){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(l),1)}click(l){this.nzAccordion&&!l.nzActive&&this.listOfNzCollapsePanelComponent.filter(r=>r!==l).forEach(r=>{r.nzActive&&(r.nzActive=!1,r.nzActiveChange.emit(r.nzActive),r.markForCheck())}),l.nzActive=!l.nzActive,l.nzActiveChange.emit(l.nzActive)}static#e=this.\u0275fac=function(r){return new(r||a)(n.rXU(e.yx),n.rXU(n.gRc),n.rXU(K.dS,8),n.rXU(p.y4))};static#t=this.\u0275cmp=n.VBU({type:a,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(r,d){2&r&&n.AVh("ant-collapse-icon-position-start","left"===d.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===d.nzExpandIconPosition)("ant-collapse-ghost",d.nzGhost)("ant-collapse-borderless",!d.nzBordered)("ant-collapse-rtl","rtl"===d.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[n.Jv_([p.y4]),n.aNF],ngContentSelectors:O,decls:1,vars:0,template:function(r,d){1&r&&(n.NAR(),n.SdG(0))},encapsulation:2,changeDetection:0})}return(0,m.Cg)([(0,e.H4)(),(0,g.H3)()],a.prototype,"nzAccordion",void 0),(0,m.Cg)([(0,e.H4)(),(0,g.H3)()],a.prototype,"nzBordered",void 0),(0,m.Cg)([(0,e.H4)(),(0,g.H3)()],a.prototype,"nzGhost",void 0),a})();const F="collapsePanel";let B=(()=>{class a{markForCheck(){this.cdr.markForCheck()}constructor(l,r,d,C,$,j){this.nzConfigService=l,this.ngZone=r,this.cdr=d,this.destroy$=C,this.nzCollapseComponent=$,this.noAnimation=j,this._nzModuleName=F,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new n.bkB,this.nzConfigService.getConfigChangeEventForComponent(F).pipe((0,z.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,R.R)(this.collapseHeader.nativeElement,"click").pipe((0,P.p)(()=>!this.nzDisabled),(0,z.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#e=this.\u0275fac=function(r){return new(r||a)(n.rXU(e.yx),n.rXU(n.SKi),n.rXU(n.gRc),n.rXU(p.y4),n.rXU(f,1),n.rXU(G.z,8))};static#t=this.\u0275cmp=n.VBU({type:a,selectors:[["nz-collapse-panel"]],viewQuery:function(r,d){if(1&r&&n.GBs(b,7),2&r){let C;n.mGM(C=n.lsd())&&(d.collapseHeader=C.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(r,d){2&r&&n.AVh("ant-collapse-no-arrow",!d.nzShowArrow)("ant-collapse-item-active",d.nzActive)("ant-collapse-item-disabled",d.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[n.Jv_([p.y4]),n.aNF],ngContentSelectors:O,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(r,d){1&r&&(n.NAR(),n.j41(0,"div",1,0),n.DNE(2,U,2,1,"div"),n.j41(3,"span",2),n.DNE(4,N,2,1,"ng-container",3),n.k0s(),n.DNE(5,v,2,1,"div",4),n.k0s(),n.j41(6,"div",5)(7,"div",6),n.SdG(8),n.k0s()()),2&r&&(n.BMQ("aria-expanded",d.nzActive),n.R7$(2),n.vxM(2,d.nzShowArrow?2:-1),n.R7$(2),n.Y8G("nzStringTemplateOutlet",d.nzHeader),n.R7$(),n.vxM(5,d.nzExtra?5:-1),n.R7$(),n.AVh("ant-collapse-content-active",d.nzActive),n.Y8G("@.disabled",!(null==d.noAnimation||!d.noAnimation.nzNoAnimation))("@collapseMotion",d.nzActive?"expanded":"hidden"))},dependencies:[T.C,T.m,S.Y3,S.Dn],encapsulation:2,data:{animation:[y.GE]},changeDetection:0})}return(0,m.Cg)([(0,g.H3)()],a.prototype,"nzActive",void 0),(0,m.Cg)([(0,g.H3)()],a.prototype,"nzDisabled",void 0),(0,m.Cg)([(0,e.H4)(),(0,g.H3)()],a.prototype,"nzShowArrow",void 0),a})(),H=(()=>{class a{static#e=this.\u0275fac=function(r){return new(r||a)};static#t=this.\u0275mod=n.$C({type:a});static#n=this.\u0275inj=n.G2t({imports:[B]})}return a})()}}]);