"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[3238],{53238:(te,V,s)=>{s.r(V),s.d(V,{RelayProcessRecordingModule:()=>We});var g=s(60177),t=s(89417),F=s(33514),x=s(12673),a=s(87018),N=s(28663),y=s(11668),L=s(91062),O=s(53281),M=s(47711),U=s(29462),Y=s(87907),X=s(72898),B=s(34756),w=s(23617),P=s(50513),W=s(74696),$=s(19692),b=s(97529),Q=s(72544),j=s(21011),S=s(43053),G=s(72874),q=s(1997),K=s(97685),p=s(23359),D=s(75699),m=s(46661),e=s(54438);const l=()=>["/admin/relay/relay-process-recording/requests"],v=()=>["/admin/relay/relay-process-recording/scan-to-line"],d=()=>["/admin/relay/material-management/rwh-send-pwh"],T=()=>["/admin/relay/relay-datecode"];let I=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-menu"]],decls:21,vars:17,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","4"],[1,"wrapper"],["nz-flex","",1,"item","receive",3,"routerLink","nzJustify","nzAlign"],[1,"title"],["nz-flex","",1,"item","process_recording",3,"routerLink","nzJustify","nzAlign"],["nz-flex","",1,"item","return_warehouse",3,"routerLink","nzJustify","nzAlign"],["nz-flex","",1,"item","date_code",3,"routerLink","nzJustify","nzAlign"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.EFF(5,"Nh\u1eadn NVL"),e.k0s()()()(),e.j41(6,"div",1)(7,"div",2)(8,"div",5)(9,"span",4),e.EFF(10,"Scan NVL v\xe0o Line"),e.k0s()()()(),e.j41(11,"div",1)(12,"div",2)(13,"div",6)(14,"span",4),e.EFF(15,"Tr\u1ea3 NVL v\u1ec1 Kho"),e.k0s()()()(),e.j41(16,"div",1)(17,"div",2)(18,"div",7)(19,"span",4),e.EFF(20,"Nh\u1eadp Date Code"),e.k0s()()()()()),2&i&&(e.Y8G("nzGutter",24),e.R7$(3),e.Y8G("routerLink",e.lJ4(13,l))("nzJustify","center")("nzAlign","center"),e.R7$(5),e.Y8G("routerLink",e.lJ4(14,v))("nzJustify","center")("nzAlign","center"),e.R7$(5),e.Y8G("routerLink",e.lJ4(15,d))("nzJustify","center")("nzAlign","center"),e.R7$(5),e.Y8G("routerLink",e.lJ4(16,T))("nzJustify","center")("nzAlign","center"))},dependencies:[m.Wk,b.Uq,b.e,$.B],styles:[".wrapper[_ngcontent-%COMP%]{padding:5px 0}.item[_ngcontent-%COMP%]{padding:20px 0}.item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:16px}.item[_ngcontent-%COMP%]:hover{cursor:pointer}.item.receive[_ngcontent-%COMP%]{background:#3498db}.item.process_recording[_ngcontent-%COMP%]{background-color:#e07e37}.item.return_warehouse[_ngcontent-%COMP%]{background-color:#63d171}.item.date_code[_ngcontent-%COMP%]{background-color:#959595c7}"]})}return r})();var Z=s(92887),ee=s(71451),h=s(2578);class k{}var _=s(45794),C=s(45312),R=s(21626);let A=(()=>{class r{constructor(n){this.httpClient=n,this.baseUrl=C.c.baseUrl}getRequests(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/Requests`,n)}getRequestDetail(n){return this.httpClient.get(`${this.baseUrl}/Relay/ProcessRecording/Request?requestNo=${n}`)}onReceiveMaterials(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ReceiveMaterials`,n)}validateLotReceive(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ValidateLotReceive`,n)}deleteLotReceived(n){return this.httpClient.put(`${this.baseUrl}/Relay/ProcessRecording/DeleteLotReceived`,n)}sendToLineWh(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/SendToLineWh`,n)}static#e=this.\u0275fac=function(i){return new(i||r)(e.KVO(R.Qq))};static#n=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var H=s(37736),J=s(27380),z=s(31837),ie=s(16389),ae=s(25930);const le=["qtyIpt"],ce=["qrCodeIpt"],de=["userIdIpt"],pe=["qaCardIpt"],ue=r=>({autoExpandAll:r}),_e=()=>[10,25,50,100],re=()=>[""];function me(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",43),e.bIt("onClick",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.openSendToLineWhModal())}),e.EFF(2,"Chuy\u1ec3n NVL v\xe0o LINE-WH "),e.k0s()()}}function he(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",43),e.bIt("onClick",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.resetFiltersAndSorting())}),e.k0s()()}}function fe(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",44),e.bIt("onClick",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.isOpenLotScanErrorModal=!0)}),e.k0s()()}}function ze(r,E){if(1&r){const n=e.RV6();e.j41(0,"a",47),e.bIt("nzOnConfirm",function(){e.eBV(n);const o=e.XpG().$implicit,c=e.XpG();return e.Njj(c.deleteLotReceived(o))}),e.EFF(1,"X\xf3a"),e.k0s()}}function ge(r,E){if(1&r&&(e.j41(0,"div",45),e.DNE(1,ze,2,0,"a",46),e.k0s()),2&r){const n=E.$implicit;e.R7$(),e.Y8G("ngIf",n.data.id)}}function Ce(r,E){if(1&r){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",56)(6,"div",57),e.bIt("click",function(){const o=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.startEdit(o))}),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"input",58,5),e.mxI("ngModelChange",function(o){const c=e.eBV(n).$implicit;return e.DH7(c.qty,o)||(c.qty=o),e.Njj(o)}),e.bIt("blur",function(){const o=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.stopEdit(o))}),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.j41(14,"td",59),e.bIt("nzOnConfirm",function(){const o=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.deleteLotScanned(o))}),e.j41(15,"a",60),e.EFF(16,"X\xf3a"),e.k0s()()()}if(2&r){const n=E.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(n.model),e.R7$(2),e.JRh(n.lotNo),e.R7$(2),e.Y8G("hidden",i.lotNoEdit===n.lotNo),e.R7$(),e.SpI(" ",e.i5U(8,7,n.qty,"1.0-3")," "),e.R7$(2),e.Y8G("hidden",i.lotNoEdit!==n.lotNo),e.R50("ngModel",n.qty),e.R7$(3),e.JRh(e.i5U(13,10,n.remainQty,"1.0-3"))}}function ve(r,E){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"nz-table",48)(2,"thead")(3,"tr")(4,"th")(5,"div",49)(6,"div",50)(7,"dx-text-box",51,2),e.bIt("keydown.enter",function(o){e.eBV(n);const c=e.XpG();return e.Njj(c.scanUserId(o))})("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.selectTextInput("userIdIpt"))}),e.k0s()(),e.j41(9,"div",52)(10,"dx-text-box",53,3),e.bIt("keydown.enter",function(o){e.eBV(n);const c=e.XpG();return e.Njj(c.scanQRCode(o))})("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.selectTextInput("qrCodeIpt"))}),e.k0s()()()()()()(),e.j41(12,"nz-table",54,4)(14,"thead")(15,"tr")(16,"th"),e.EFF(17,"Part No"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Lot No"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Qty"),e.k0s(),e.j41(22,"th"),e.EFF(23,"T\u1ed3n"),e.k0s(),e.j41(24,"th"),e.EFF(25,"Action"),e.k0s()()(),e.j41(26,"tbody"),e.DNE(27,Ce,17,13,"tr",55),e.k0s()(),e.bVm()}if(2&r){const n=e.sdS(13),i=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(7,re)),e.R7$(4),e.Y8G("nzGutter",24),e.R7$(2),e.Y8G("labelMode","static"),e.R7$(3),e.Y8G("labelMode","static"),e.R7$(2),e.Y8G("nzData",i.litsLotScanOk)("nzFrontPagination",!0),e.R7$(15),e.Y8G("ngForOf",n.data)}}function Re(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.isOpenReceiveModal=!1)}),e.nrm(2,"span",61),e.EFF(3," \u0110\xf3ng "),e.k0s(),e.j41(4,"button",62),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.onReceiveMaterial())}),e.nrm(5,"span",63),e.EFF(6," L\u01b0u "),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("nzLoading",n.isLoading)("disabled",n.litsLotScanOk.length<=0)}}function Ee(r,E){if(1&r&&(e.j41(0,"div")(1,"dx-data-grid",64,6),e.nrm(3,"dxi-column",65)(4,"dxi-column",27)(5,"dxi-column",66),e.k0s()()),2&r){const n=e.XpG();e.R7$(),e.Y8G("dataSource",n.lotScanErrors)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0)}}function xe(r,E){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"nz-table",48)(2,"thead")(3,"tr")(4,"th")(5,"dx-text-box",67,7),e.bIt("keydown.enter",function(o){e.eBV(n);const c=e.XpG();return e.Njj(c.scanQRCard(o))})("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.selectTextInput("qaCardIpt"))}),e.k0s()()()()(),e.bVm()}2&r&&(e.R7$(),e.Y8G("nzData",e.lJ4(2,re)),e.R7$(4),e.Y8G("labelMode","static"))}function Te(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.isOpenSendToLineWhModal=!1)}),e.nrm(2,"span",61),e.EFF(3," \u0110\xf3ng "),e.k0s(),e.j41(4,"button",62),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.sendToLineWh())}),e.nrm(5,"span",63),e.EFF(6," L\u01b0u "),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("nzLoading",n.isLoading)("disabled",n.litsLotScanOk.length<=0)}}let ye=(()=>{class r{constructor(n,i,o,c,f,u){this.toastr=n,this.rePrSvc=i,this.jwtHelperSvc=o,this.router=c,this.activatedRoute=f,this.datePipe=u,this.lots=[],this.expandAll=!0,this.isLoading=!1,this.isOpenReceiveModal=!1,this.isOpenLotScanErrorModal=!1,this.lotScanErrors=[],this.litsLotScanOk=[],this.mapLotScanned=new Map,this.lotNoEdit=null,this.isOpenSendToLineWhModal=!1}ngOnInit(){this.requestNo=this.activatedRoute.snapshot.queryParamMap.get("requestNo")}ngAfterViewInit(){this.getRequestDetail()}getRequestDetail(){let n=this.activatedRoute.snapshot.queryParamMap.get("requestNo");this.lotGrid?.instance.beginCustomLoading("\u0110ang load d\u1eef li\u1ec7u ..."),this.rePrSvc.getRequestDetail(n).subscribe(i=>{this.lots=i.result,this.lotGrid.instance.endCustomLoading()})}onExportClient(n){console.log(n);const i=new Z.Workbook,o=i.addWorksheet("Main sheet");(0,ee.V)({component:n.component,worksheet:o}).then(function(){i.xlsx.writeBuffer().then(function(c){h(new Blob([c],{type:"application/octet-stream"}),"Data.xlsx")})})}toggleExpandAll(){this.expandAll=!this.expandAll}statusCellTemplate(n,i){}onCellPreparedLotGrid(n){if("data"===n.rowType){if("statusName"===n.column.dataField){const i=n.row.data.status;0===i?n.cellElement.style.color="red":1===i&&(n.cellElement.style.color="green")}"lotNo"===n.column.dataField&&1===n.row.data.status&&(n.cellElement.style.backgroundColor="rgb(197, 225, 165)",n.cellElement.style.fontWeight="bold")}}resetFiltersAndSorting(){this.lotGrid.instance.clearFilter(),this.lotGrid.instance.clearSorting()}openReceiveModal(){this.lotScanErrors=new Array,this.mapLotScanned=new Map,this.litsLotScanOk=new Array;let n=!0;for(const i of this.lots)if(0===i.status){n=!1;break}n?this.toastr.warning("\u0110\xe3 nh\u1eadn \u0111\u1ee7 NVL","Warning"):(this.isOpenReceiveModal=!0,setTimeout(()=>{this.userIdIpt&&this.userIdIpt.instance&&this.userIdIpt.instance.focus()},500))}scanUserId(n){let i=n.target.value.toUpperCase();const o=this.userIdIpt.instance.element().querySelector("input");if(7!==i.length||isNaN(Number(i)))return this.toastr.warning("ID kh\xf4ng h\u1ee3p l\u1ec7","Warning"),void(o&&o.select());this.qrCodeIpt.instance.focus()}scanQRCode(n){const i=this.userIdIpt.instance.option("value");if(!i)return this.toastr.warning("C\u1ea7n scan m\xe3 nh\xe2n vi\xean","Warning"),void this.userIdIpt.instance.focus();let o=n.target.value.toUpperCase().split(";");this.selectTextInput("qrCodeIpt");let c=!1,f=new k;f.model=o[0],f.lotNo=o[3],f.qty=o[2],f.receiver=i,f.date=new Date,f.recordType="RNP",f.flag="5",f.reqNo=this.requestNo,f.qrCode=n.target.value.toUpperCase();for(const u of this.lots)if(o[3]===u.lotNo){if(1==u.status)return c=!1,f.errorInfo=`Lot \u0111\xe3 \u0111\u01b0\u1ee3c scan nh\u1eadn l\xfac: ${this.datePipe.transform(u.createdAt,"yyyy-MM-dd HH:mm")}`,this.lotScanErrors.push(f),void this.toastr.warning("Lot \u0111\xe3 \u0111\u01b0\u1ee3c scan nh\u1eadn","Warning");if(0==u.status&&(c=!0,u.lotNo===f.lotNo)){f.whUserCode=u.whUserCode,f.sender=u.sender;break}}if(!c)return f.errorInfo="Lot kh\xf4ng thu\u1ed9c phi\u1ebfu request",this.toastr.warning("Lot kh\xf4ng thu\u1ed9c phi\u1ebfu request","Warning"),this.lotScanErrors.push(f),void this.selectTextInput("qrCodeIpt");this.rePrSvc.validateLotReceive(f).subscribe(u=>{let ne=u.result;ne.date=new Date,this.mapLotScanned.set(f.lotNo,ne),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse()})}selectTextInput(n){if("userIdIpt"===n){const i=this.userIdIpt.instance.element().querySelector("input");if(i)return void i.select()}if("qrCodeIpt"===n){const i=this.qrCodeIpt.instance.element().querySelector("input");if(i)return void i.select()}if("qaCardIpt"===n){const i=this.qaCardIpt.instance.element().querySelector("input");if(i)return void i.select()}}onReceiveMaterial(){this.isLoading=!0;let n=[...this.litsLotScanOk];this.rePrSvc.onReceiveMaterials(n).subscribe(i=>{this.getRequestDetail(),this.isOpenReceiveModal=!1,this.isLoading=!1,this.toastr.success("L\u01b0u th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")},i=>{this.getRequestDetail(),this.isOpenReceiveModal=!1,this.isLoading=!1}),this.getRequestDetail(),this.isOpenReceiveModal=!1,this.isLoading=!1}startEdit(n){setTimeout(()=>{this.qtyIpt.nativeElement.focus()},500),this.lotNoEdit=n.lotNo}stopEdit(n){console.log("stopEdit: ",n),n.qty>n.remainQty?n.qty=n.remainQty:n.qty<0&&(n.qty=0),this.lotNoEdit=null}deleteLotScanned(n){console.log(this.mapLotScanned),this.mapLotScanned.delete(n.lotNo),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse()}deleteLotReceived(n){console.log("deleteLotReceived: ",n),this.rePrSvc.deleteLotReceived(n.data).subscribe(o=>{this.getRequestDetail(),this.toastr.success("X\xf3a th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")})}openSendToLineWhModal(){this.isOpenSendToLineWhModal=!0,setTimeout(()=>{this.qaCardIpt&&this.qaCardIpt.instance&&this.qaCardIpt.instance.focus()},500)}scanQRCard(n){this.selectTextInput("qaCardIpt")}sendToLineWh(){if(!this.qaCardIpt.value)return void this.toastr.warning("C\u1ea7n scan QA card","Warning");let n=this.qaCardIpt.value.toLocaleUpperCase().split("*"),i=[...this.litsLotScanOk];for(const o of i)o.recordType="RDC",o.flag="5",o.reqNo=null,o.parent=n[0],o.line=n[1],o.date=new Date(n[2]),o.shift=n[3],o.qaCard=this.qaCardIpt.value,o.sender=o.receiver,o.createdAt=new Date,o.updatedAt=new Date;this.isLoading=!0,this.rePrSvc.sendToLineWh(i).subscribe(o=>{this.isOpenSendToLineWhModal=!1,this.isLoading=!1,this.toastr.success("Chuy\u1ec3n v\xe0o xe NVL th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")},o=>{this.isOpenSendToLineWhModal=!1,this.isLoading=!1,this.toastr.error(`Error: ${o}`,"L\u1ed7i")})}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(_.tw),e.rXU(A),e.rXU(H.X7),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(g.vh))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-receive"]],viewQuery:function(i,o){if(1&i&&(e.GBs(x.s,5),e.GBs(le,5),e.GBs(ce,5),e.GBs(de,5),e.GBs(pe,5)),2&i){let c;e.mGM(c=e.lsd())&&(o.lotGrid=c.first),e.mGM(c=e.lsd())&&(o.qtyIpt=c.first),e.mGM(c=e.lsd())&&(o.qrCodeIpt=c.first),e.mGM(c=e.lsd())&&(o.userIdIpt=c.first),e.mGM(c=e.lsd())&&(o.qaCardIpt=c.first)}},features:[e.Jv_([g.vh])],decls:59,vars:50,consts:[["lotGrid",""],["columnChooser",""],["userIdIpt",""],["qrCodeIpt",""],["lotScanTbl",""],["qtyIpt",""],["lotScanErrorGrid",""],["qaCardIpt",""],[3,"nzColor"],["keyExpr","id",2,"margin-top","10px",3,"onExporting","onCellPrepared","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled","grouping"],[3,"autoExpandAll"],[3,"enabled","mode","title"],[3,"visible"],[3,"enabled"],["location","before"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","qrcode"],["nz-button","","nzType","default",3,"click"],["nz-icon","",3,"nzType"],["location","after"],[4,"dxTemplate"],["location","after","name","searchPanel"],["name","exportButton","location","after"],["name","columnChooserButton","location","after"],["dataField","model","caption","Model",3,"visible","groupIndex"],[3,"allowSelectAll"],["dataField","lotGroup","caption","Lot Group",3,"visible","groupIndex"],["dataField","lotNo","caption","LotNo",3,"visible"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["dataField","receiverName","caption","Ng\u01b0\u1eddi nh\u1eadn",3,"visible"],["dataField","updatedAt","caption","Ng\xe0y nh\u1eadn","dataType","date","format","yyyy-MM-dd HH:mm",3,"visible"],["dataField","statusName","caption","Status",3,"visible"],["caption","Action","cellTemplate","actionTemplate","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","lotGroup","summaryType","count","displayFormat","{0} boxes"],["column","qty","summaryType","sum","displayFormat","Total Qty: {0}","valueFormat","#,##0.0",3,"showInGroupFooter","alignByColumn"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Nh\u1eadn nguy\xean v\u1eadt li\u1ec7u","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Th\xf4ng tin l\u1ed7i khi scan nh\u1eadn NVL","nzWidth","100%",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["nzTitle","Chuy\u1ec3n NVL \u0111\xe3 nh\u1eadn v\xe0o LINE-WH","nzWidth","750px",3,"nzVisibleChange","nzVisible"],["icon","refresh",3,"onClick"],["icon","info","type","danger","stylingMode","outlined",3,"onClick"],[2,"text-align","center"],["nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a ?","nzPopconfirmPlacement","bottom","style","color: red",3,"nzOnConfirm",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a ?","nzPopconfirmPlacement","bottom",2,"color","red",3,"nzOnConfirm"],["nzBordered","","nzFrontPagination","false",3,"nzData"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","6","nzSm","6","nzMd","6","nzLg","6"],["label","Scan ID ng\u01b0\u1eddi nh\u1eadn","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"],["nz-col","","nzXs","18","nzSm","18","nzMd","18","nzLg","18"],["label","Scan tem NVL","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"],["nzBordered","","nzSize","small",3,"nzData","nzFrontPagination"],[4,"ngFor","ngForOf"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-icon","","nzType","close"],["nz-button","","nzType","primary",3,"click","nzLoading","disabled"],["nz-icon","","nzType","save"],["keyExpr","lotNo",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["dataField","model","caption","Model",3,"visible"],["dataField","errorInfo","caption","Th\xf4ng tin l\u1ed7i",3,"visible"],["label","QA card","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"]],template:function(i,o){if(1&i){const c=e.RV6();e.j41(0,"nz-tag",8),e.EFF(1),e.k0s(),e.j41(2,"dx-data-grid",9,0),e.bIt("onExporting",function(u){return e.eBV(c),e.Njj(o.onExportClient(u))})("onCellPrepared",function(u){return e.eBV(c),e.Njj(o.onCellPreparedLotGrid(u))}),e.nrm(4,"dxo-grouping",10)(5,"dxo-column-chooser",11,1)(7,"dxo-search-panel",12)(8,"dxo-load-panel",13)(9,"dxo-export",13),e.j41(10,"dxo-toolbar")(11,"dxi-item",14)(12,"button",15),e.bIt("click",function(){return e.eBV(c),e.Njj(o.openReceiveModal())}),e.nrm(13,"span",16),e.EFF(14," Nh\u1eadn NVL "),e.k0s()(),e.j41(15,"dxi-item",14)(16,"button",17),e.bIt("click",function(){return e.eBV(c),e.Njj(o.toggleExpandAll())}),e.nrm(17,"span",18),e.EFF(18),e.k0s()(),e.j41(19,"dxi-item",19),e.DNE(20,me,3,0,"div",20),e.k0s(),e.nrm(21,"dxi-item",21),e.j41(22,"dxi-item",19),e.DNE(23,he,2,0,"div",20),e.k0s(),e.nrm(24,"dxi-item",22)(25,"dxi-item",23),e.j41(26,"dxi-item",19),e.DNE(27,fe,2,0,"div",20),e.k0s()(),e.nrm(28,"dxo-grouping",10)(29,"dxo-filter-row",12)(30,"dxo-header-filter",12),e.j41(31,"dxi-column",24)(32,"dxo-header-filter",25),e.nrm(33,"dxo-search",13),e.k0s()(),e.j41(34,"dxi-column",26)(35,"dxo-header-filter",25),e.nrm(36,"dxo-search",13),e.k0s()(),e.nrm(37,"dxi-column",27)(38,"dxi-column",28),e.j41(39,"dxi-column",29)(40,"dxo-header-filter",25),e.nrm(41,"dxo-search",13),e.k0s()(),e.nrm(42,"dxi-column",30)(43,"dxi-column",31)(44,"dxi-column",32),e.DNE(45,ge,2,1,"div",33),e.j41(46,"dxo-summary"),e.nrm(47,"dxi-group-item",34)(48,"dxi-group-item",35),e.k0s(),e.nrm(49,"dxo-paging",36)(50,"dxo-pager",37),e.k0s(),e.j41(51,"nz-modal",38),e.mxI("nzVisibleChange",function(u){return e.eBV(c),e.DH7(o.isOpenReceiveModal,u)||(o.isOpenReceiveModal=u),e.Njj(u)}),e.DNE(52,ve,28,8,"ng-container",39)(53,Re,7,2,"div",40),e.k0s(),e.j41(54,"nz-modal",41),e.mxI("nzVisibleChange",function(u){return e.eBV(c),e.DH7(o.isOpenLotScanErrorModal,u)||(o.isOpenLotScanErrorModal=u),e.Njj(u)}),e.bIt("nzOnCancel",function(){return e.eBV(c),e.Njj(o.isOpenLotScanErrorModal=!1)})("nzOnOk",function(){return e.eBV(c),e.Njj(o.isOpenLotScanErrorModal=!1)}),e.DNE(55,Ee,6,10,"div",39),e.k0s(),e.j41(56,"nz-modal",42),e.mxI("nzVisibleChange",function(u){return e.eBV(c),e.DH7(o.isOpenSendToLineWhModal,u)||(o.isOpenSendToLineWhModal=u),e.Njj(u)}),e.DNE(57,xe,7,3,"ng-container",39)(58,Te,7,2,"div",40),e.k0s()}2&i&&(e.Y8G("nzColor","purple"),e.R7$(),e.SpI("RequestNo: ",o.requestNo,""),e.R7$(),e.Y8G("dataSource",o.lots)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!1)("grouping",e.eq3(47,ue,o.expandAll)),e.R7$(2),e.Y8G("autoExpandAll",o.expandAll),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(8),e.Y8G("nzType",o.expandAll?"minus":"plus"),e.R7$(),e.SpI(" ",o.expandAll?"Thu g\u1ecdn":"M\u1edf r\u1ed9ng"," "),e.R7$(10),e.Y8G("autoExpandAll",o.expandAll),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0)("groupIndex",0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0)("groupIndex",1),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(3),e.Y8G("showInGroupFooter",!1)("alignByColumn",!0),e.R7$(),e.Y8G("pageSize",100),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(49,_e)),e.R7$(),e.R50("nzVisible",o.isOpenReceiveModal),e.R7$(3),e.R50("nzVisible",o.isOpenLotScanErrorModal),e.R7$(2),e.R50("nzVisible",o.isOpenSendToLineWhModal))},dependencies:[g.Sq,g.bT,t.me,t.Q0,t.BC,t.vS,b.Uq,b.e,F.e,J.eC,x.s,z.i2Q,z.ZWy,z.nj_,z.gtJ,z.CVf,z.ZJU,z.FTx,z.UYU,z.xzc,z.sVQ,z.PVd,z.hXY,z.XvM,z.ryC,z.KOr,P.aO,ie.c,ae.p,Q.Dn,S.F2,S.Oj,S.A9,p.CP,p.SO,p._4,p.IL,p.aj,p.kt,p.OL,O.m,D.s,j.Sy,G.PV,g.QX]})}return r})();class Pe{}const be=()=>[10,15,25,50,100];function Se(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",18),e.bIt("onClick",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.onSearch())}),e.k0s()()}}function Oe(r,E){if(1&r&&(e.j41(0,"div",19)(1,"span",20),e.EFF(2),e.k0s()()),2&r){const n=E.$implicit;e.R7$(),e.HbH(n.data.totalLotReceive<n.data.totalLotRequest?"red-color":"blue-color"),e.R7$(),e.Lme(" ",n.data.totalLotReceive," / ",n.data.totalLotRequest," ")}}function Me(r,E){if(1&r&&(e.j41(0,"div",19)(1,"span",20),e.EFF(2),e.k0s()()),2&r){const n=E.$implicit;e.R7$(),e.HbH(n.data.totalLotReceive<n.data.totalLotRequest?"red-color":"blue-color"),e.R7$(),e.SpI(" ",n.data.totalLotReceive<n.data.totalLotRequest?"Not yet":"\u0110\xe3 nh\u1eadn \u0111\u1ee7"," ")}}let De=(()=>{class r{constructor(n,i,o,c){this.toastr=n,this.rePrSvc=i,this.jwtHelperSvc=o,this.router=c,this.requests=[],this.searchParam=new Pe}ngOnInit(){const n=new Date,i=new Date;i.setDate(n.getDate()-120),this.searchParam.dateRange=[i,n]}ngAfterViewInit(){this.getRequests()}onSearch(){this.getRequests()}getRequests(){this.requestGrid?.instance.beginCustomLoading("\u0110ang t\u1ea3i d\u1eef li\u1ec7u ..."),this.rePrSvc.getRequests(this.searchParam).subscribe(n=>{this.requests=n.result,this.requestGrid.instance.endCustomLoading()})}onRowClick(n){console.log("onRowClick: ",n),this.router.navigate(["/admin/relay/relay-process-recording/request"],{queryParams:{requestNo:n.data.requestNo}})}onDateRangeChanged(n){console.log("Selected Date Range:",n.value)}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(_.tw),e.rXU(A),e.rXU(H.X7),e.rXU(m.Ix))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-request"]],viewQuery:function(i,o){if(1&i&&e.GBs(x.s,5),2&i){let c;e.mGM(c=e.lsd())&&(o.requestGrid=c.first)}},decls:22,vars:27,consts:[["requestGrid",""],["columnChooser",""],["keyExpr","id",3,"onRowClick","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["location","before"],["startDateLabel","Ng\xe0y b\u1eaft \u0111\u1ea7u","endDateLabel","Ng\xe0y k\u1ebft th\xfac",2,"width","300px",3,"valueChange","startDateChange","endDateChange","onValueChanged","value","startDate","endDate","displayFormat"],[4,"dxTemplate"],[3,"enabled","mode","title"],[3,"visible"],[3,"enabled"],["dataField","requestNo","caption","Request No",3,"visible"],["dataField","createdAt","caption","Ng\xe0y t\u1ea1o","dataType","date","format","yyyy-MM-dd HH:mm",3,"visible"],["dataField","line","caption","Line",3,"visible"],["dataField","parent","caption","Parent",3,"visible"],["caption","S\u1ed1 lot \u0111\xe3 nh\u1eadn","cellTemplate","lotReceivedTemplate"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["caption","Status","cellTemplate","statusTemplate"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["icon","search",2,"margin-top","8px",3,"onClick"],[2,"text-align","center"],[2,"font-weight","bold"]],template:function(i,o){if(1&i){const c=e.RV6();e.j41(0,"dx-data-grid",2,0),e.bIt("onRowClick",function(u){return e.eBV(c),e.Njj(o.onRowClick(u))}),e.j41(2,"dxo-toolbar")(3,"dxi-item",3)(4,"dx-date-range-box",4),e.mxI("valueChange",function(u){return e.eBV(c),e.DH7(o.searchParam.dateRange,u)||(o.searchParam.dateRange=u),e.Njj(u)})("startDateChange",function(u){return e.eBV(c),e.DH7(o.searchParam.dateRange[0],u)||(o.searchParam.dateRange[0]=u),e.Njj(u)})("endDateChange",function(u){return e.eBV(c),e.DH7(o.searchParam.dateRange[1],u)||(o.searchParam.dateRange[1]=u),e.Njj(u)}),e.bIt("onValueChanged",function(u){return e.eBV(c),e.Njj(o.onDateRangeChanged(u))}),e.k0s()(),e.j41(5,"dxi-item",3),e.DNE(6,Se,2,0,"div",5),e.k0s()(),e.nrm(7,"dxo-column-chooser",6,1)(9,"dxo-header-filter",7)(10,"dxo-filter-row",7)(11,"dxo-export",8)(12,"dxi-column",9)(13,"dxi-column",10)(14,"dxi-column",11)(15,"dxi-column",12)(16,"dxi-column",13),e.DNE(17,Oe,3,4,"div",14),e.nrm(18,"dxi-column",15),e.DNE(19,Me,3,3,"div",14),e.nrm(20,"dxo-paging",16)(21,"dxo-pager",17),e.k0s()}2&i&&(e.Y8G("dataSource",o.requests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(4),e.R50("value",o.searchParam.dateRange)("startDate",o.searchParam.dateRange[0])("endDate",o.searchParam.dateRange[1]),e.Y8G("displayFormat","yyyy/MM/dd"),e.R7$(3),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("dxTemplateOf","lotReceivedTemplate"),e.R7$(2),e.Y8G("dxTemplateOf","statusTemplate"),e.R7$(),e.Y8G("pageSize",15),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(26,be)))},dependencies:[F.e,J.eC,x.s,z.i2Q,z.nj_,z.gtJ,z.CVf,z.ZJU,z.FTx,z.sVQ,z.PVd,z.KOr,N.e],styles:[".red-color[_ngcontent-%COMP%]{color:red}.blue-color[_ngcontent-%COMP%]{color:#00f}"]})}return r})();class Ie{constructor(E="",n="",i="",o="",c="",f="",u=0,ne=""){this.qaCard=E,this.model=n,this.line=i,this.date=o,this.shift=c,this.user=f,this.processId=u,this.processName=ne}isAllPropertiesHaveValue(){return Object.values(this).every(n=>n)}}class Ae{}let Ne=(()=>{class r{constructor(n){this.httpClient=n,this.baseUrl=C.c.baseUrl}scanMaterial(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ScanToLine/ScanMaterial`,n)}insertToLine(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ScanToLine/InsertToLine`,n)}getMaterialsInsertToLine(n){return this.httpClient.get(`${this.baseUrl}/Relay/ProcessRecording/ScanToLine/MaterialsInsertToLine?qaCard=${n}`)}static#e=this.\u0275fac=function(i){return new(i||r)(e.KVO(R.Qq))};static#n=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var oe=s(9541);const Le=["infoIpt"],ke=["qrCodeIpt"],Fe=["qtyIpt"],se=()=>[""],je=()=>({color:"red"}),Ge=()=>[10,15,25,50];function Be(r,E){1&r&&(e.j41(0,"div",31)(1,"a",32),e.EFF(2,"X\xf3a"),e.k0s()())}function we(r,E){if(1&r&&e.nrm(0,"nz-alert",38),2&r){const n=e.XpG(2);e.Y8G("nzMessage",null==n.responseQRScan?null:n.responseQRScan.information)("nzDescription",null==n.responseQRScan?null:n.responseQRScan.message)}}function $e(r,E){if(1&r){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",39)(6,"div",40),e.bIt("click",function(){const o=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.startEdit(o))}),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"input",41,4),e.mxI("ngModelChange",function(o){const c=e.eBV(n).$implicit;return e.DH7(c.qty,o)||(c.qty=o),e.Njj(o)}),e.bIt("blur",function(){const o=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.stopEdit(o))}),e.k0s()(),e.j41(11,"td",42),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.j41(14,"td",43),e.bIt("nzOnConfirm",function(){const o=e.eBV(n).$implicit,c=e.XpG(2);return e.Njj(c.deleteLotScanned(o))}),e.j41(15,"a",44),e.EFF(16,"X\xf3a"),e.k0s()()()}if(2&r){const n=E.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(n.model),e.R7$(2),e.JRh(n.lotNo),e.R7$(2),e.Y8G("hidden",i.lotNoEdit===n.lotNo),e.R7$(),e.SpI(" ",e.i5U(8,7,n.qty,"1.0-3")," "),e.R7$(2),e.Y8G("hidden",i.lotNoEdit!==n.lotNo),e.R50("ngModel",n.qty),e.R7$(3),e.SpI(" ",e.i5U(13,10,n.remainQty,"1.0-3")," ")}}function Ve(r,E){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"div",5)(2,"div",8)(3,"nz-table",33)(4,"thead")(5,"tr")(6,"th")(7,"dx-text-box",34,2),e.bIt("keydown.enter",function(o){e.eBV(n);const c=e.XpG();return e.Njj(c.scanQRCode(o))})("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.selectTextInput("qrCodeIpt"))}),e.k0s(),e.DNE(9,we,1,2,"nz-alert",35),e.k0s()()()()(),e.j41(10,"div",8)(11,"nz-table",36,3)(13,"thead")(14,"tr")(15,"th"),e.EFF(16,"Part No"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Lot No"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Qty"),e.k0s(),e.j41(21,"th"),e.EFF(22,"T\u1ed3n"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Action"),e.k0s()()(),e.j41(25,"tbody"),e.DNE(26,$e,17,13,"tr",37),e.k0s()()()(),e.bVm()}if(2&r){const n=e.sdS(12),i=e.XpG();e.R7$(),e.Y8G("nzGutter",24),e.R7$(2),e.Y8G("nzData",e.lJ4(7,se)),e.R7$(4),e.Y8G("labelMode","static"),e.R7$(2),e.Y8G("ngIf","ERROR"==(null==i.responseQRScan?null:i.responseQRScan.status)),e.R7$(2),e.Y8G("nzData",i.litsLotScanOk)("nzFrontPagination",!0),e.R7$(15),e.Y8G("ngForOf",n.data)}}function Ue(r,E){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"button",45),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.isOpenScanQRCodeModal=!1)}),e.EFF(2," \u0110\xf3ng "),e.k0s(),e.j41(3,"button",46),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.insertToLine())}),e.EFF(4," L\u01b0u "),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(3),e.Y8G("nzLoading",n.isLoading)}}const Ye=[{path:"menu",component:I},{path:"requests",component:De},{path:"request",component:ye},{path:"scan-to-line",component:(()=>{class r{constructor(n,i,o,c,f,u){this.toastr=n,this.rePrScanToLineSvc=i,this.jwtHelperSvc=o,this.router=c,this.activatedRoute=f,this.datePipe=u,this.processes=[{id:29,name:"WIP-1"},{id:30,name:"WIP-2"},{id:31,name:"WIP-3"},{id:32,name:"WIP-4"}],this.infoScan=new Ie,this.isOpenScanQRCodeModal=!1,this.nzTitleScanQRCodeModal="Scan NVL v\xe0o Line",this.lotScanErrors=[],this.litsLotScanOk=[],this.mapLotScanned=new Map,this.lotNoEdit=null,this.isLoading=!1,this.materials=[],this.count=0}ngOnInit(){}scanInfo(n){let i=n.target.value,o=i.split("*");if(5===o.length){if(i.includes(";"))return this.toastr.warning("C\u1ea7n scan ID, QA card, WIP","Warning"),void this.selectTextInput("infoIpt");this.infoScan.qaCard=i,this.infoScan.model=o[0],this.infoScan.line=o[1],this.infoScan.date=o[2],this.infoScan.shift=o[3],this.rePrScanToLineSvc.getMaterialsInsertToLine(this.infoScan.qaCard).subscribe(f=>{this.materials=f.result})}if(7===i.length&&(this.infoScan.user=i),/^WIP-/.test(i)){this.infoScan.processName=i;for(const f of this.processes)if(this.infoScan.processName==f.name){this.infoScan.processId=f.id;break}}this.selectTextInput("infoIpt"),this.infoScan.isAllPropertiesHaveValue()&&this.openScanQRCodeModal()}selectTextInput(n){if("infoIpt"===n){const i=this.infoIpt.instance.element().querySelector("input");if(i)return void i.select()}if("qrCodeIpt"===n){const i=this.qrCodeIpt.instance.element().querySelector("input");if(i)return void i.select()}}openScanQRCodeModal(){this.count=0,this.nzTitleScanQRCodeModal=`Nh\u1eadp NVL v\xe0o LINE: ${this.infoScan.line}; Process: ${this.infoScan.processName}`,console.log("this.nzTitleScanQRCodeModal: ",this.nzTitleScanQRCodeModal),this.isOpenScanQRCodeModal=!0,setTimeout(()=>{this.qrCodeIpt.instance.focus()},500)}scanQRCode(n){let i=n.target.value,o=new k;o.lotNo=i.split(";")[3],this.mapLotScanned.has(o.lotNo)?this.responseQRScan.status="OK":this.rePrScanToLineSvc.scanMaterial(o).subscribe(c=>{this.responseQRScan=c.result,"ERROR"!=this.responseQRScan.status&&(this.count++,this.responseQRScan.data.ordinal=this.count,this.mapLotScanned.set(o.lotNo,this.responseQRScan.data),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse())})}startEdit(n){setTimeout(()=>{this.qtyIpt.nativeElement.focus()},500),this.lotNoEdit=n.lotNo}stopEdit(n){console.log("stopEdit: ",n),n.qty>n.remainQty?n.qty=n.remainQty:n.qty<0&&(n.qty=0),this.lotNoEdit=null}deleteLotScanned(n){console.log(this.mapLotScanned),this.mapLotScanned.delete(n.lotNo),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse()}insertToLine(){let n=new Array;for(const i of this.litsLotScanOk){if(i.qty<=0)continue;let o=new Ae;o.ppn=this.infoScan.model,o.cpn=i.model,o.line=this.infoScan.line,o.date=new Date(this.infoScan.date),o.shift=this.infoScan.shift,o.plotno=this.infoScan.qaCard,o.clotno=i.lotNo,o.qty=i.qty,o.frBox=0,o.user1=this.infoScan.user,o.user2=this.infoScan.user,o.keyUser=this.infoScan.user,o.ngQty=0,o.recordType="CDL",o.processId=this.infoScan.processId,o.ordinal=i.ordinal,o.remark="HungTest 2024-29-11",n.push(o)}n.length<=0?this.toastr.warning("Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","Warning"):(this.isLoading=!0,this.rePrScanToLineSvc.insertToLine(n).subscribe(i=>{this.isLoading=!1,this.mapLotScanned=new Map,this.litsLotScanOk=new Array},i=>{this.isLoading=!1}))}static#e=this.\u0275fac=function(i){return new(i||r)(e.rXU(_.tw),e.rXU(Ne),e.rXU(H.X7),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(g.vh))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-scan-to-line"]],viewQuery:function(i,o){if(1&i&&(e.GBs(Le,5),e.GBs(ke,5),e.GBs(Fe,5)),2&i){let c;e.mGM(c=e.lsd())&&(o.infoIpt=c.first),e.mGM(c=e.lsd())&&(o.qrCodeIpt=c.first),e.mGM(c=e.lsd())&&(o.qtyIpt=c.first)}},features:[e.Jv_([g.vh])],decls:68,vars:38,consts:[["infoTbl",""],["infoIpt",""],["qrCodeIpt",""],["lotScanTbl",""],["qtyIpt",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","18","nzLg","18"],[1,"attention"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["colspan","3"],["label","Scan th\xf4ng tin","labelLocation","left","showColonAfterLabel","true","placeholder","Scan theo th\u1ee9 t\u1ef1 User ID, QA card, Process",3,"click","keydown.enter","labelMode","ngStyle"],[2,"margin-top","-30px"],["nzTitle","Danh s\xe1ch theo model"],["keyExpr","id",2,"margin-top","-15px",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"visible"],[3,"enabled"],["dataField","cpn","caption","PartNo",3,"groupIndex","visible"],[3,"allowSelectAll"],["dataField","clotno","caption","LotNo",3,"visible"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["caption","Action","cellTemplate","actionTemplate","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","cpn","summaryType","count","displayFormat","{0} boxes"],["column","qty","summaryType","sum","displayFormat","Total Qty: {0}","valueFormat","#,##0.0",3,"showInGroupFooter","alignByColumn"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Danh s\xe1ch theo th\u1ee9 t\u1ef1"],["id","importMaterialModal","nzWidth","100%",3,"nzVisibleChange","nzVisible","nzTitle"],[4,"nzModalContent"],[4,"nzModalFooter"],[2,"text-align","center"],[2,"color","red"],["nzBordered","","nzFrontPagination","false","nzSize","small",2,"margin-top","-15px",3,"nzData"],["label","Scan tem NVL","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"],["nzType","error","nzShowIcon","","style","margin-top: 5px",3,"nzMessage","nzDescription",4,"ngIf"],["nzBordered","","nzSize","small",2,"margin-top","-15px",3,"nzData","nzFrontPagination"],[4,"ngFor","ngForOf"],["nzType","error","nzShowIcon","",2,"margin-top","5px",3,"nzMessage","nzDescription"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],[2,"text-align","right"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"]],template:function(i,o){if(1&i){const c=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"span",7),e.EFF(3,"* L\u01b0u \xfd: Scan theo th\u1ee9 t\u1ef1 User ID, QA card, Process"),e.k0s()(),e.j41(4,"div",8)(5,"nz-table",9,0)(7,"thead")(8,"tr")(9,"th",10)(10,"dx-text-box",11,1),e.bIt("click",function(){return e.eBV(c),e.Njj(o.selectTextInput("infoIpt"))})("keydown.enter",function(u){return e.eBV(c),e.Njj(o.scanInfo(u))}),e.k0s()()()(),e.j41(12,"tbody")(13,"tr")(14,"td")(15,"label"),e.EFF(16,"Model: "),e.k0s(),e.j41(17,"span"),e.EFF(18),e.k0s()(),e.j41(19,"td")(20,"label"),e.EFF(21,"Line: "),e.k0s(),e.j41(22,"span"),e.EFF(23),e.k0s()(),e.j41(24,"td")(25,"label"),e.EFF(26,"Date: "),e.k0s(),e.j41(27,"span"),e.EFF(28),e.k0s()()(),e.j41(29,"tr")(30,"td")(31,"label"),e.EFF(32,"User: "),e.k0s(),e.j41(33,"span"),e.EFF(34),e.k0s()(),e.j41(35,"td")(36,"label"),e.EFF(37,"Shift: "),e.k0s(),e.j41(38,"span"),e.EFF(39),e.k0s()(),e.j41(40,"td")(41,"label"),e.EFF(42,"Process: "),e.k0s(),e.j41(43,"span"),e.EFF(44),e.k0s()()()()()(),e.j41(45,"div",8)(46,"nz-tabset",12)(47,"nz-tab",13)(48,"dx-data-grid",14),e.nrm(49,"dxo-header-filter",15)(50,"dxo-filter-row",15)(51,"dxo-export",16),e.j41(52,"dxi-column",17)(53,"dxo-header-filter",18),e.nrm(54,"dxo-search",16),e.k0s()(),e.nrm(55,"dxi-column",19)(56,"dxi-column",20)(57,"dxi-column",21),e.DNE(58,Be,3,0,"div",22),e.j41(59,"dxo-summary"),e.nrm(60,"dxi-group-item",23)(61,"dxi-group-item",24),e.k0s(),e.nrm(62,"dxo-paging",25)(63,"dxo-pager",26),e.k0s()(),e.nrm(64,"nz-tab",27),e.k0s()()(),e.j41(65,"nz-modal",28),e.mxI("nzVisibleChange",function(u){return e.eBV(c),e.DH7(o.isOpenScanQRCodeModal,u)||(o.isOpenScanQRCodeModal=u),e.Njj(u)}),e.DNE(66,Ve,27,8,"ng-container",29)(67,Ue,5,1,"div",30),e.k0s()}2&i&&(e.Y8G("nzGutter",24),e.R7$(5),e.Y8G("nzData",e.lJ4(35,se)),e.R7$(5),e.Y8G("labelMode","static")("ngStyle",e.lJ4(36,je)),e.R7$(8),e.JRh(o.infoScan.model),e.R7$(5),e.JRh(o.infoScan.line),e.R7$(5),e.JRh(o.infoScan.date),e.R7$(6),e.JRh(o.infoScan.user),e.R7$(5),e.JRh(o.infoScan.shift),e.R7$(5),e.JRh(o.infoScan.processName),e.R7$(4),e.Y8G("dataSource",o.materials)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!1),e.R7$(),e.Y8G("groupIndex",1)("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(3),e.Y8G("showInGroupFooter",!1)("alignByColumn",!0),e.R7$(),e.Y8G("pageSize",15),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(37,Ge)),e.R7$(2),e.R50("nzVisible",o.isOpenScanQRCodeModal),e.Y8G("nzTitle",o.nzTitleScanQRCodeModal))},dependencies:[g.Sq,g.bT,g.B3,t.me,t.Q0,t.BC,t.vS,b.Uq,b.e,J.eC,x.s,z.ZWy,z.nj_,z.gtJ,z.ZJU,z.FTx,z.sVQ,z.PVd,z.XvM,z.ryC,P.aO,ie.c,ae.p,S.F2,S.Oj,S.A9,p.CP,p.SO,p._4,p.IL,p.aj,p.kt,p.OL,O.m,j.Sy,G.PV,w.Y,oe.JZ,oe.rE,g.QX],styles:["span.attention[_ngcontent-%COMP%]{font-style:italic;color:red}#infoTbl[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#000;font-weight:700}#infoTbl[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#00f}#materialEditTbl[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}"]})}return r})()}];let Xe=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#n=this.\u0275mod=e.$C({type:r});static#t=this.\u0275inj=e.G2t({imports:[m.iI.forChild(Ye),m.iI]})}return r})(),We=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#n=this.\u0275mod=e.$C({type:r});static#t=this.\u0275inj=e.G2t({imports:[g.MD,t.YN,Xe,b.f3,$.y,K.pc,W.GB,q.DH,F.L,x.N,a.S,P.Zw,Q.Y3,N.B,S.U6,p.$G,y.F,L.D,O.Z,M.p,U.W,Y.X,X.L,B.V,D.T,j.j,G.g9,w.$,oe.hM]})}return r})()},23617:(te,V,s)=>{s.d(V,{$:()=>e,Y:()=>m});var g=s(15215),t=s(54438),F=s(45286),x=s(7605),a=s(40713),N=s(16042),y=s(57806),L=s(70317),O=s(72544),M=s(28203);function U(l,v){1&l&&t.eu8(0)}function Y(l,v){if(1&l&&t.DNE(0,U,1,0,"ng-container",6),2&l){const d=t.XpG(3);t.Y8G("nzStringTemplateOutlet",d.nzIcon)}}function X(l,v){if(1&l&&t.nrm(0,"span",7),2&l){const d=t.XpG(3);t.Y8G("nzType",d.nzIconType||d.inferredIconType)("nzTheme",d.iconTheme)}}function B(l,v){if(1&l&&(t.j41(0,"div",2),t.DNE(1,Y,1,1,"ng-container")(2,X,1,2),t.k0s()),2&l){const d=t.XpG(2);t.R7$(),t.vxM(1,d.nzIcon?1:2)}}function w(l,v){if(1&l&&(t.qex(0),t.EFF(1),t.bVm()),2&l){const d=t.XpG(4);t.R7$(),t.JRh(d.nzMessage)}}function P(l,v){if(1&l&&(t.j41(0,"span",8),t.DNE(1,w,2,1,"ng-container",6),t.k0s()),2&l){const d=t.XpG(3);t.R7$(),t.Y8G("nzStringTemplateOutlet",d.nzMessage)}}function W(l,v){if(1&l&&(t.qex(0),t.EFF(1),t.bVm()),2&l){const d=t.XpG(4);t.R7$(),t.JRh(d.nzDescription)}}function $(l,v){if(1&l&&(t.j41(0,"span",9),t.DNE(1,W,2,1,"ng-container",6),t.k0s()),2&l){const d=t.XpG(3);t.R7$(),t.Y8G("nzStringTemplateOutlet",d.nzDescription)}}function b(l,v){if(1&l&&(t.j41(0,"div",3),t.DNE(1,P,2,1,"span",8)(2,$,2,1,"span",9),t.k0s()),2&l){const d=t.XpG(2);t.R7$(),t.vxM(1,d.nzMessage?1:-1),t.R7$(),t.vxM(2,d.nzDescription?2:-1)}}function Q(l,v){if(1&l&&(t.qex(0),t.EFF(1),t.bVm()),2&l){const d=t.XpG(3);t.R7$(),t.JRh(d.nzAction)}}function j(l,v){if(1&l&&(t.j41(0,"div",4),t.DNE(1,Q,2,1,"ng-container",6),t.k0s()),2&l){const d=t.XpG(2);t.R7$(),t.Y8G("nzStringTemplateOutlet",d.nzAction)}}function S(l,v){if(1&l&&(t.qex(0),t.j41(1,"span",11),t.EFF(2),t.k0s(),t.bVm()),2&l){const d=t.XpG(4);t.R7$(2),t.JRh(d.nzCloseText)}}function G(l,v){if(1&l&&t.DNE(0,S,3,1,"ng-container",6),2&l){const d=t.XpG(3);t.Y8G("nzStringTemplateOutlet",d.nzCloseText)}}function q(l,v){1&l&&t.nrm(0,"span",12)}function K(l,v){if(1&l){const d=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(d);const I=t.XpG(2);return t.Njj(I.closeAlert())}),t.DNE(1,G,1,1,"ng-container")(2,q,1,0),t.k0s()}if(2&l){const d=t.XpG(2);t.R7$(),t.vxM(1,d.nzCloseText?1:2)}}function p(l,v){if(1&l){const d=t.RV6();t.j41(0,"div",1),t.bIt("@slideAlertMotion.done",function(){t.eBV(d);const I=t.XpG();return t.Njj(I.onFadeAnimationDone())}),t.DNE(1,B,3,1,"div",2)(2,b,3,2,"div",3)(3,j,2,1,"div",4)(4,K,3,1,"button",5),t.k0s()}if(2&l){const d=t.XpG();t.AVh("ant-alert-rtl","rtl"===d.dir)("ant-alert-success","success"===d.nzType)("ant-alert-info","info"===d.nzType)("ant-alert-warning","warning"===d.nzType)("ant-alert-error","error"===d.nzType)("ant-alert-no-icon",!d.nzShowIcon)("ant-alert-banner",d.nzBanner)("ant-alert-closable",d.nzCloseable)("ant-alert-with-description",!!d.nzDescription),t.Y8G("@.disabled",d.nzNoAnimation)("@slideAlertMotion",void 0),t.R7$(),t.vxM(1,d.nzShowIcon?1:-1),t.R7$(),t.vxM(2,d.nzMessage||d.nzDescription?2:-1),t.R7$(),t.vxM(3,d.nzAction?3:-1),t.R7$(),t.vxM(4,d.nzCloseable||d.nzCloseText?4:-1)}}const D="alert";let m=(()=>{class l{constructor(d,T,I){this.nzConfigService=d,this.cdr=T,this.directionality=I,this._nzModuleName=D,this.nzAction=null,this.nzCloseText=null,this.nzIconType=null,this.nzMessage=null,this.nzDescription=null,this.nzType="info",this.nzCloseable=!1,this.nzShowIcon=!1,this.nzBanner=!1,this.nzNoAnimation=!1,this.nzIcon=null,this.nzOnClose=new t.bkB,this.closed=!1,this.iconTheme="fill",this.inferredIconType="info-circle",this.dir="ltr",this.isTypeSet=!1,this.isShowIconSet=!1,this.destroy$=new F.B7,this.nzConfigService.getConfigChangeEventForComponent(D).pipe((0,x.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,x.Q)(this.destroy$)).subscribe(d=>{this.dir=d,this.cdr.detectChanges()}),this.dir=this.directionality.value}closeAlert(){this.closed=!0}onFadeAnimationDone(){this.closed&&this.nzOnClose.emit(!0)}ngOnChanges(d){const{nzShowIcon:T,nzDescription:I,nzType:Z,nzBanner:ee}=d;if(T&&(this.isShowIconSet=!0),Z)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle"}I&&(this.iconTheme=this.nzDescription?"outline":"fill"),ee&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static#e=this.\u0275fac=function(T){return new(T||l)(t.rXU(N.yx),t.rXU(t.gRc),t.rXU(M.dS,8))};static#n=this.\u0275cmp=t.VBU({type:l,selectors:[["nz-alert"]],inputs:{nzAction:"nzAction",nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzCloseable:"nzCloseable",nzShowIcon:"nzShowIcon",nzBanner:"nzBanner",nzNoAnimation:"nzNoAnimation",nzIcon:"nzIcon"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],standalone:!0,features:[t.OA$,t.aNF],decls:1,vars:1,consts:[[1,"ant-alert",3,"ant-alert-rtl","ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description"],[1,"ant-alert"],[1,"ant-alert-icon"],[1,"ant-alert-content"],[1,"ant-alert-action"],["type","button","tabindex","0",1,"ant-alert-close-icon"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType","nzTheme"],[1,"ant-alert-message"],[1,"ant-alert-description"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],[1,"ant-alert-close-text"],["nz-icon","","nzType","close"]],template:function(T,I){1&T&&t.DNE(0,p,5,24,"div",0),2&T&&t.vxM(0,I.closed?-1:0)},dependencies:[O.Y3,O.Dn,y.C,y.m],encapsulation:2,data:{animation:[a.Sn]},changeDetection:0})}return(0,g.Cg)([(0,N.H4)(),(0,L.H3)()],l.prototype,"nzCloseable",void 0),(0,g.Cg)([(0,N.H4)(),(0,L.H3)()],l.prototype,"nzShowIcon",void 0),(0,g.Cg)([(0,L.H3)()],l.prototype,"nzBanner",void 0),(0,g.Cg)([(0,L.H3)()],l.prototype,"nzNoAnimation",void 0),l})(),e=(()=>{class l{static#e=this.\u0275fac=function(T){return new(T||l)};static#n=this.\u0275mod=t.$C({type:l});static#t=this.\u0275inj=t.G2t({imports:[m]})}return l})()},74696:(te,V,s)=>{s.d(V,{GB:()=>K,Vz:()=>q,pc:()=>S});var g=s(15215),t=s(54438),F=s(73586),x=s(7605),a=s(58728),N=s(40713),y=s(16042),L=s(57806),O=s(21025),M=s(70317),U=s(72544),Y=s(28203),X=s(26841);const B=["*"],w=["collapseHeader"];function P(p,D){if(1&p&&(t.qex(0),t.nrm(1,"span",7),t.bVm()),2&p){const m=D.$implicit,e=t.XpG(2);t.R7$(),t.Y8G("nzType",m||"right")("nzRotate",e.nzActive?90:0)}}function W(p,D){if(1&p&&(t.j41(0,"div"),t.DNE(1,P,2,2,"ng-container",3),t.k0s()),2&p){const m=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",m.nzExpandedIcon)}}function $(p,D){if(1&p&&(t.qex(0),t.EFF(1),t.bVm()),2&p){const m=t.XpG();t.R7$(),t.JRh(m.nzHeader)}}function b(p,D){if(1&p&&(t.qex(0),t.EFF(1),t.bVm()),2&p){const m=t.XpG(2);t.R7$(),t.JRh(m.nzExtra)}}function Q(p,D){if(1&p&&(t.j41(0,"div",4),t.DNE(1,b,2,1,"ng-container",3),t.k0s()),2&p){const m=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",m.nzExtra)}}const j="collapse";let S=(()=>{class p{constructor(m,e,l,v){this.nzConfigService=m,this.cdr=e,this.directionality=l,this.destroy$=v,this._nzModuleName=j,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(j).pipe((0,x.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,x.Q)(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(m){this.listOfNzCollapsePanelComponent.push(m)}removePanel(m){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(m),1)}click(m){this.nzAccordion&&!m.nzActive&&this.listOfNzCollapsePanelComponent.filter(e=>e!==m).forEach(e=>{e.nzActive&&(e.nzActive=!1,e.nzActiveChange.emit(e.nzActive),e.markForCheck())}),m.nzActive=!m.nzActive,m.nzActiveChange.emit(m.nzActive)}static#e=this.\u0275fac=function(e){return new(e||p)(t.rXU(y.yx),t.rXU(t.gRc),t.rXU(Y.dS,8),t.rXU(O.y4))};static#n=this.\u0275cmp=t.VBU({type:p,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(e,l){2&e&&t.AVh("ant-collapse-icon-position-start","left"===l.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===l.nzExpandIconPosition)("ant-collapse-ghost",l.nzGhost)("ant-collapse-borderless",!l.nzBordered)("ant-collapse-rtl","rtl"===l.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[t.Jv_([O.y4]),t.aNF],ngContentSelectors:B,decls:1,vars:0,template:function(e,l){1&e&&(t.NAR(),t.SdG(0))},encapsulation:2,changeDetection:0})}return(0,g.Cg)([(0,y.H4)(),(0,M.H3)()],p.prototype,"nzAccordion",void 0),(0,g.Cg)([(0,y.H4)(),(0,M.H3)()],p.prototype,"nzBordered",void 0),(0,g.Cg)([(0,y.H4)(),(0,M.H3)()],p.prototype,"nzGhost",void 0),p})();const G="collapsePanel";let q=(()=>{class p{markForCheck(){this.cdr.markForCheck()}constructor(m,e,l,v,d,T){this.nzConfigService=m,this.ngZone=e,this.cdr=l,this.destroy$=v,this.nzCollapseComponent=d,this.noAnimation=T,this._nzModuleName=G,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new t.bkB,this.nzConfigService.getConfigChangeEventForComponent(G).pipe((0,x.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,F.R)(this.collapseHeader.nativeElement,"click").pipe((0,a.p)(()=>!this.nzDisabled),(0,x.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#e=this.\u0275fac=function(e){return new(e||p)(t.rXU(y.yx),t.rXU(t.SKi),t.rXU(t.gRc),t.rXU(O.y4),t.rXU(S,1),t.rXU(X.z,8))};static#n=this.\u0275cmp=t.VBU({type:p,selectors:[["nz-collapse-panel"]],viewQuery:function(e,l){if(1&e&&t.GBs(w,7),2&e){let v;t.mGM(v=t.lsd())&&(l.collapseHeader=v.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(e,l){2&e&&t.AVh("ant-collapse-no-arrow",!l.nzShowArrow)("ant-collapse-item-active",l.nzActive)("ant-collapse-item-disabled",l.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[t.Jv_([O.y4]),t.aNF],ngContentSelectors:B,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(e,l){1&e&&(t.NAR(),t.j41(0,"div",1,0),t.DNE(2,W,2,1,"div"),t.j41(3,"span",2),t.DNE(4,$,2,1,"ng-container",3),t.k0s(),t.DNE(5,Q,2,1,"div",4),t.k0s(),t.j41(6,"div",5)(7,"div",6),t.SdG(8),t.k0s()()),2&e&&(t.BMQ("aria-expanded",l.nzActive),t.R7$(2),t.vxM(2,l.nzShowArrow?2:-1),t.R7$(2),t.Y8G("nzStringTemplateOutlet",l.nzHeader),t.R7$(),t.vxM(5,l.nzExtra?5:-1),t.R7$(),t.AVh("ant-collapse-content-active",l.nzActive),t.Y8G("@.disabled",!(null==l.noAnimation||!l.noAnimation.nzNoAnimation))("@collapseMotion",l.nzActive?"expanded":"hidden"))},dependencies:[L.C,L.m,U.Y3,U.Dn],encapsulation:2,data:{animation:[N.GE]},changeDetection:0})}return(0,g.Cg)([(0,M.H3)()],p.prototype,"nzActive",void 0),(0,g.Cg)([(0,M.H3)()],p.prototype,"nzDisabled",void 0),(0,g.Cg)([(0,y.H4)(),(0,M.H3)()],p.prototype,"nzShowArrow",void 0),p})(),K=(()=>{class p{static#e=this.\u0275fac=function(e){return new(e||p)};static#n=this.\u0275mod=t.$C({type:p});static#t=this.\u0275inj=t.G2t({imports:[q]})}return p})()},72874:(te,V,s)=>{s.d(V,{PV:()=>I,g9:()=>ee});var g=s(15215),t=s(10851),F=s(32753),x=s(60177),a=s(54438),N=s(45286),y=s(7605),L=s(84046),O=s(77312),M=s(50513),U=s(40713),Y=s(16042),X=s(26841),B=s(57806),w=s(65463),P=s(70317),W=s(89450),$=s(72544),b=s(35154),Q=s(28203),j=s(16389),S=s(25930);const G=["okBtn"],q=["cancelBtn"];function K(h,k){1&h&&(a.j41(0,"div",6),a.nrm(1,"span",14),a.k0s())}function p(h,k){if(1&h&&(a.qex(0),a.j41(1,"span",16),a.nrm(2,"span",17),a.k0s(),a.bVm()),2&h){const _=k.$implicit;a.R7$(2),a.Y8G("nzType",_||"exclamation-circle")}}function D(h,k){if(1&h&&(a.qex(0),a.DNE(1,p,3,1,"ng-container",10),a.j41(2,"div",15),a.EFF(3),a.k0s(),a.bVm()),2&h){const _=a.XpG(2);a.R7$(),a.Y8G("nzStringTemplateOutlet",_.nzIcon),a.R7$(2),a.JRh(_.nzTitle)}}function m(h,k){if(1&h&&a.EFF(0),2&h){const _=a.XpG(2);a.SpI(" ",_.nzCancelText," ")}}function e(h,k){1&h&&(a.EFF(0),a.nI1(1,"nzI18n")),2&h&&a.SpI(" ",a.bMT(1,1,"Modal.cancelText")," ")}function l(h,k){if(1&h&&a.EFF(0),2&h){const _=a.XpG(2);a.SpI(" ",_.nzOkText," ")}}function v(h,k){1&h&&(a.EFF(0),a.nI1(1,"nzI18n")),2&h&&a.SpI(" ",a.bMT(1,1,"Modal.okText")," ")}function d(h,k){if(1&h){const _=a.RV6();a.j41(0,"div",4)(1,"div",5),a.DNE(2,K,2,0,"div",6),a.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),a.DNE(7,D,4,2,"ng-container",10),a.k0s(),a.j41(8,"div",11)(9,"button",12,1),a.bIt("click",function(){a.eBV(_);const R=a.XpG();return a.Njj(R.onCancel())}),a.DNE(11,m,1,1)(12,e,2,3),a.k0s(),a.j41(13,"button",13,2),a.bIt("click",function(){a.eBV(_);const R=a.XpG();return a.Njj(R.onConfirm())}),a.DNE(15,l,1,1)(16,v,2,3),a.k0s()()()()()()()}if(2&h){const _=a.XpG();a.AVh("ant-popover-rtl","rtl"===_.dir),a.Y8G("cdkTrapFocusAutoCapture",null!==_.nzAutoFocus)("ngClass",_._classMap)("ngStyle",_.nzOverlayStyle)("@.disabled",!(null==_.noAnimation||!_.noAnimation.nzNoAnimation))("nzNoAnimation",null==_.noAnimation?null:_.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),a.R7$(2),a.vxM(2,_.nzPopconfirmShowArrow?2:-1),a.R7$(5),a.Y8G("nzStringTemplateOutlet",_.nzTitle),a.R7$(2),a.Y8G("nzSize","small"),a.BMQ("cdkFocusInitial","cancel"===_.nzAutoFocus||null),a.R7$(2),a.vxM(11,_.nzCancelText?11:12),a.R7$(2),a.Y8G("nzSize","small")("nzType","danger"!==_.nzOkType?_.nzOkType:"primary")("nzDanger",_.nzOkDanger||"danger"===_.nzOkType)("nzLoading",_.confirmLoading)("disabled",_.nzOkDisabled),a.BMQ("cdkFocusInitial","ok"===_.nzAutoFocus||null),a.R7$(2),a.vxM(15,_.nzOkText?15:16)}}let I=(()=>{class h extends b.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(Z),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new a.bkB,this.nzOnCancel=new a.bkB,this.nzOnConfirm=new a.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#e=this.\u0275fac=function(C){return new(C||h)};static#n=this.\u0275dir=a.FsC({type:h,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(C,R){2&C&&a.AVh("ant-popover-open",R.visible)},inputs:{arrowPointAtCenter:[a.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[a.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[a.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[a.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[a.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[a.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[a.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[a.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[a.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[a.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[a.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[a.Vt3]})}return(0,g.Cg)([(0,P.H3)()],h.prototype,"arrowPointAtCenter",void 0),(0,g.Cg)([(0,P.H3)()],h.prototype,"nzOkDisabled",void 0),(0,g.Cg)([(0,P.H3)()],h.prototype,"nzOkDanger",void 0),(0,g.Cg)([(0,P.H3)()],h.prototype,"nzCondition",void 0),(0,g.Cg)([(0,P.H3)()],h.prototype,"nzPopconfirmShowArrow",void 0),(0,g.Cg)([(0,Y.H4)()],h.prototype,"nzPopconfirmBackdrop",void 0),(0,g.Cg)([(0,Y.H4)()],h.prototype,"nzAutofocus",void 0),h})(),Z=(()=>{class h extends b.VJ{constructor(_,C,R,A,H){super(_,R,H),this.elementRef=C,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new N.B7,this.nzOnConfirm=new N.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=A}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const _=(0,P.cG)(this.nzBeforeConfirm()).pipe((0,L.$)());this.confirmLoading=!0,_.pipe((0,O.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,y.Q)(this.nzVisibleChange),(0,y.Q)(this.destroy$)).subscribe(C=>{C&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const _=this.elementFocusedBeforeModalWasOpened;if(_&&"function"==typeof _.focus){const C=this.document.activeElement,R=this.elementRef.nativeElement;(!C||C===this.document.body||C===R||R.contains(C))&&_.focus()}}static#e=this.\u0275fac=function(C){return new(C||h)(a.rXU(a.gRc),a.rXU(a.aKT),a.rXU(Q.dS,8),a.rXU(x.qQ,8),a.rXU(X.z,9))};static#n=this.\u0275cmp=a.VBU({type:h,selectors:[["nz-popconfirm"]],viewQuery:function(C,R){if(1&C&&(a.GBs(G,5,a.aKT),a.GBs(q,5,a.aKT)),2&C){let A;a.mGM(A=a.lsd())&&(R.okBtn=A),a.mGM(A=a.lsd())&&(R.cancelBtn=A)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[a.Vt3,a.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(C,R){if(1&C){const A=a.RV6();a.DNE(0,d,17,20,"ng-template",3,0,a.C5r),a.bIt("overlayOutsideClick",function(J){return a.eBV(A),a.Njj(R.onClickOutside(J))})("detach",function(){return a.eBV(A),a.Njj(R.hide())})("positionChange",function(J){return a.eBV(A),a.Njj(R.onPositionChange(J))})}2&C&&a.Y8G("cdkConnectedOverlayHasBackdrop",R.nzBackdrop)("cdkConnectedOverlayOrigin",R.origin)("cdkConnectedOverlayPositions",R._positions)("cdkConnectedOverlayOpen",R._visible)("cdkConnectedOverlayPush",R.cdkConnectedOverlayPush)("nzArrowPointAtCenter",R.nzArrowPointAtCenter)},dependencies:[F.z_,F.WB,w.$_,w.vT,t.Pd,t.kB,x.YU,x.B3,X.z,B.C,B.m,$.Y3,$.Dn,M.Zw,M.aO,j.c,S.p,W.bP,W.Vc],encapsulation:2,data:{animation:[U.uX]},changeDetection:0})}return h})(),ee=(()=>{class h{static#e=this.\u0275fac=function(C){return new(C||h)};static#n=this.\u0275mod=a.$C({type:h});static#t=this.\u0275inj=a.G2t({imports:[Z]})}return h})()}}]);