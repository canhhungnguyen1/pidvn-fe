"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[6328],{16328:(ee,U,r)=>{r.r(U),r.d(U,{TrainingRecordModule:()=>re});var h=r(60177),T=r(89417),j=r(11668),R=r(12673),n=r(33514),D=r(34756),y=r(72915),Y=r(37712),z=r(31958),w=r(50513),F=r(74696),B=r(58960),v=r(97529),k=r(72544),S=r(79116),C=r(21011),M=r(43053),P=r(72874),$=r(1997),f=r(23359),G=r(82358),O=r(46661),e=r(54438),I=r(45312),V=r(21626);let b=(()=>{class a{constructor(t){this.httpClient=t,this.baseUrl=I.c.baseUrl}getTrainingRecordMaster(t){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Masters`,t)}saveTrainingRecordMaster(t,i){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Master?action=${i}`,t)}createTrainingRecordMaster(t){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Master`,t)}getTrainingRecordDetail(t){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Details`,t)}saveTrainingRecordDetail(t,i,o,c){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Detail?master=${i}&type=${o}&scoreOfPass=${c}`,t)}getTrainingRecordType(){return this.httpClient.get(`${this.baseUrl}/Relay/TrainingRecord/Types`)}getUsers(){return this.httpClient.get(`${this.baseUrl}/Relay/TrainingRecord/Users`)}approveTrainingRecord(t,i){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Approval?master=${t}&username=${i}`,null)}attendanceUser(t){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Attendance`,t)}getCourses(){return this.httpClient.get(`${this.baseUrl}/Relay/TrainingRecord/Courses`)}getHistories(){return this.httpClient.get(`${this.baseUrl}/Relay/TrainingRecord/Histories`)}showGuideline(){return this.httpClient.get(`${this.baseUrl}/Relay/TrainingRecord/GuideLines`,{responseType:"arraybuffer"})}saveCourse(t,i){return this.httpClient.post(`${this.baseUrl}/Relay/TrainingRecord/Course?action=${i}`,t)}static#e=this.\u0275fac=function(i){return new(i||a)(e.KVO(V.Qq))};static#n=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var N=r(45794),d=r(31837);let K=(()=>{class a{constructor(t,i){this.trainingRecordSvc=t,this.toastr=i}ngOnInit(){this.getCourses(),this.getTrainingRecordType()}getCourses(){this.trainingRecordSvc.getCourses().subscribe(t=>{this.courses=t,console.log("Courses: ",this.courses)})}getTrainingRecordType(){this.trainingRecordSvc.getTrainingRecordType().subscribe(t=>{this.courseTypies=t})}onSaved(t){let i=t.changes[0].key,o=t.changes[0].type;console.log("course: ",t),this.trainingRecordSvc.saveCourse(i,o).subscribe(c=>{this.toastr.success("OK","Saved !"),this.getCourses()})}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(b),e.rXU(N.tw))};static#n=this.\u0275cmp=e.VBU({type:a,selectors:[["app-tr-course"]],decls:23,vars:14,consts:[[2,"margin-top","10px",3,"onSaved","dataSource","showColumnLines","showRowLines","showBorders"],["location","before","name","addRowButton","showText","always"],["mode","popup",3,"allowUpdating","allowAdding","allowDeleting"],["title","Kh\xf3a h\u1ecdc",3,"showTitle","width","height"],["itemType","group",3,"colCount","colSpan"],["dataField","name"],["dataField","type"],[3,"visible"],["caption","Name","dataField","name","alignment","left"],["type","required"],["dataField","type","caption","Type"],["displayExpr","name","valueExpr","id",3,"dataSource"],["dataField","createdAt","alignment","center","dataType","date","format","yyyy-MM-dd"]],template:function(i,o){1&i&&(e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," Relay Factory"),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," Training Record "),e.k0s(),e.j41(5,"nz-breadcrumb-item"),e.EFF(6," Kh\xf3a h\u1ecdc "),e.k0s()(),e.j41(7,"dx-data-grid",0),e.bIt("onSaved",function(m){return o.onSaved(m)}),e.j41(8,"dxo-toolbar"),e.nrm(9,"dxi-item",1),e.k0s(),e.j41(10,"dxo-editing",2),e.nrm(11,"dxo-popup",3),e.j41(12,"dxo-form")(13,"dxi-item",4),e.nrm(14,"dxi-item",5)(15,"dxi-item",6),e.k0s()()(),e.nrm(16,"dxo-filter-row",7),e.j41(17,"dxi-column",8),e.nrm(18,"dxi-validation-rule",9),e.k0s(),e.j41(19,"dxi-column",10),e.nrm(20,"dxi-validation-rule",9)(21,"dxo-lookup",11),e.k0s(),e.nrm(22,"dxi-column",12),e.k0s()),2&i&&(e.R7$(7),e.Y8G("dataSource",o.courses)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0),e.R7$(3),e.Y8G("allowUpdating",!0)("allowAdding",!0)("allowDeleting",!0),e.R7$(),e.Y8G("showTitle",!0)("width",525)("height",400),e.R7$(2),e.Y8G("colCount",1)("colSpan",2),e.R7$(3),e.Y8G("visible",!0),e.R7$(5),e.Y8G("dataSource",o.courseTypies))},dependencies:[d.CVf,d.Inh,R.s,d.nj_,d.b4U,d.$Xk,d.dDC,d.Tot,d.FTx,d.KOr,z.hL,z.K7]})}return a})();var X=r(71451),W=r(92887),H=r(2578),J=r(37736),Q=r(27380),L=r(16389),Z=r(25930);const l=()=>[10,25,50,100],_=()=>({width:500}),s=a=>[a];function u(a,x){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"dx-data-grid",41),e.bIt("onSelectionChanged",function(o){const c=e.eBV(t).$implicit,m=e.XpG().$implicit,ae=e.XpG();return e.Njj(ae.onSelectionChanged(o.selectedRowKeys,m,c.component))}),e.nrm(2,"dxo-filter-row",9)(3,"dxi-column",42)(4,"dxi-column",43)(5,"dxo-paging",44)(6,"dxo-scrolling",45)(7,"dxo-selection",46),e.k0s()()}if(2&a){const t=e.XpG().$implicit,i=e.XpG();e.R7$(),e.Y8G("dataSource",i.users)("remoteOperations",!0)("height",250)("selectedRowKeys",e.eq3(10,s,t.value))("focusedRowEnabled",!0)("focusedRowKey",t.value)("hoverStateEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(3),e.Y8G("enabled",!0)("pageSize",10)}}function p(a,x){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"dx-drop-down-box",40),e.mxI("valueChange",function(o){const c=e.eBV(t).$implicit;return e.DH7(c.value,o)||(c.value=o),e.Njj(o)}),e.DNE(2,u,8,12,"div",29),e.k0s()()}if(2&a){const t=x.$implicit,i=e.XpG();e.R7$(),e.Y8G("dropDownOptions",e.lJ4(4,_))("dataSource",i.users),e.R50("value",t.value),e.R7$(),e.Y8G("dxTemplateOf","contentTemplate")}}function g(a,x){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",2)(2,"div",47)(3,"nz-upload",48)(4,"button",49),e.nrm(5,"i",50),e.EFF(6," Click to Upload "),e.k0s()()(),e.j41(7,"div",47)(8,"label",51),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.openGuideline())}),e.EFF(9,"Guideline"),e.k0s()()(),e.bVm()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("nzGutter",24),e.R7$(2),e.Y8G("nzAction",t.usersUploadApi)}}function E(a,x){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&a){const t=x.$implicit;e.R7$(2),e.JRh(t.username),e.R7$(2),e.JRh(t.name)}}function A(a,x){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",2)(2,"div",52)(3,"div",53)(4,"input",54),e.bIt("keydown.enter",function(o){e.eBV(t);const c=e.XpG();return e.Njj(c.attendanceUser(o))}),e.k0s()()()(),e.j41(5,"div",55)(6,"div",52)(7,"label"),e.EFF(8,"Attendance List"),e.k0s(),e.j41(9,"nz-table",56,0)(11,"thead")(12,"tr")(13,"th"),e.EFF(14,"ID"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Name"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,E,5,2,"tr",57),e.k0s()()()(),e.bVm()}if(2&a){const t=e.sdS(10),i=e.XpG();e.R7$(),e.Y8G("nzGutter",24),e.R7$(4),e.Y8G("nzGutter",24),e.R7$(4),e.Y8G("nzData",i.attendanceUsers)("nzSize","small"),e.R7$(9),e.Y8G("ngForOf",t.data)}}let ne=(()=>{class a{constructor(t,i,o,c,m){this.activatedRoute=t,this.trainingRecordSvc=i,this.jwtHelperService=o,this.toastr=c,this.nzImageService=m,this.baseUrl=I.c.baseUrl,this.testResult=[{id:"PASS",value:"PASS"},{id:"FAIL",value:"FAIL"}],this.options=[{id:"YES",value:"YES"},{id:"NO",value:"NO"}],this.attendanceUsers=new Array,this.isOpenAddUserModal=!1,this.isOpenAttendanceModal=!1}ngOnInit(){this.getUsers(),this.getTrainingRecordMaster(),this.getTrainingRecordDetail()}getTrainingRecordMaster(){let t={id:Number(this.activatedRoute.snapshot.paramMap.get("id"))};this.trainingRecordSvc.getTrainingRecordMaster(t).subscribe(i=>{this.trainingRecordMaster=i[0],console.log("trainingRecordMaster: ",this.trainingRecordMaster)})}getTrainingRecordDetail(){let i={trainingRecordMaster:this.activatedRoute.snapshot.paramMap.get("id")};this.trainingRecordSvc.getTrainingRecordDetail(i).subscribe(o=>{this.trainingRecordDetail=o})}getUsers(){this.trainingRecordSvc.getUsers().subscribe(t=>{this.users=t})}onSaved(t){let i=this.activatedRoute.snapshot.paramMap.get("id"),c=t.changes[0].type;this.trainingRecordSvc.saveTrainingRecordDetail(t.changes[0].key,Number(i),c,this.trainingRecordMaster.scoreOfPass).subscribe(m=>{this.getTrainingRecordDetail()})}onSelectionChanged(t,i,o){i.setValue(t[0]),t.length>0&&o.close()}gridBox_displayExpr(t){return t&&`${t.username} <${t.name}>`}onFocusedCellChanging(t){t.isHighlighted=!0}onApprove(){let t=this.trainingRecordMaster.id,i=this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).Username;this.trainingRecordSvc.approveTrainingRecord(t,i).subscribe(o=>{this.toastr.success("Approved !","OK"),this.getTrainingRecordMaster()})}openAddUserModal(){this.isOpenAddUserModal=!0;let t=this.activatedRoute.snapshot.paramMap.get("id");this.usersUploadApi=`${this.baseUrl}/Relay/TrainingRecord/UploadUsers?master=${t}`}uploadUsers(){this.getTrainingRecordDetail(),this.isOpenAddUserModal=!1}attendanceUser(t){let o={trainingRecordMaster:this.activatedRoute.snapshot.paramMap.get("id"),username:t.target.value};this.trainingRecordSvc.attendanceUser(o).subscribe(c=>{this.attendanceUsers.push(c),this.attendanceUsers=[...this.attendanceUsers],t.target.value=null})}onOpenAttendanceModal(){this.isOpenAttendanceModal=!0,this.attendanceUsers=[]}onCloseAttendanceModal(){this.isOpenAttendanceModal=!1,this.getTrainingRecordDetail()}onExporting(t){const i=new W.Workbook,o=i.addWorksheet("Main sheet");(0,X.V)({component:t.component,worksheet:o}).then(function(){i.xlsx.writeBuffer().then(function(c){H(new Blob([c],{type:"application/octet-stream"}),"Data.xlsx")})})}openGuideline(){this.nzImageService.preview([{src:`${this.baseUrl}/images/relay/training-record/Guideline.png`,alt:"ng-zorro"}],{nzZoom:1.5,nzRotate:0})}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(O.nX),e.rXU(b),e.rXU(J.X7),e.rXU(N.tw),e.rXU(S.zn))};static#n=this.\u0275cmp=e.VBU({type:a,selectors:[["app-training-record-detail"]],decls:81,vars:58,consts:[["attendanceTable",""],["nzHeader","Master",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","3"],["nzXs","24","nzSm","24","nzLg","24"],["nz-col","","nzXs","12","nzSm","12","nzLg","5"],["type","text","nz-input","",3,"disabled","ngModel"],["nz-row","","nzJustify","start","nzAlign","middle",2,"margin-top","10px",3,"nzGutter"],["id","gridContainer",3,"onFocusedCellChanging","onSaved","onExporting","dataSource","showBorders","showColumnLines","showRowLines","columnAutoWidth","allowColumnResizing","columnResizingMode","allowColumnReordering","rowAlternationEnabled"],[3,"visible"],[3,"enabled"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["mode","cell","startEditAction","click",3,"allowUpdating","allowAdding","allowDeleting"],[3,"editOnKeyPress","enterKeyAction","enterKeyDirection"],["caption","Id","dataField","username","editCellTemplate","singleDropDownBoxEditor",3,"width","allowFiltering"],["displayExpr","username","valueExpr","username",3,"dataSource"],["type","required"],["dataField","name","caption","Name",3,"allowEditing"],["dataField","subsectionName","caption","Section",3,"allowFiltering","allowEditing"],["dataField","positionName","caption","Position",3,"allowFiltering","allowEditing"],["caption","Signature"],["dataField","attendance","caption","Attendance"],["displayExpr","value","valueExpr","value",3,"dataSource"],["dataField","materialReceived","caption","Material Received"],["caption","Test Result"],["dataField","score","caption","Score",3,"allowEditing"],["dataField","testResult","caption","Result",3,"allowEditing"],["dataField","remark","caption","Remark",3,"allowEditing"],[4,"dxTemplate","dxTemplateOf"],["location","before"],["stylingMode","outlined","type","default","icon","inserttable","text","Th\xeam Users",3,"onClick"],["stylingMode","outlined","type","success","icon","group","text","\u0110i\u1ec3m danh",3,"onClick"],["location","before","name","addRowButton","showText","always"],["location","after"],["stylingMode","outlined","type","default","icon","fieldchooser","text","Approve","nz-popconfirm","","nzPopconfirmTitle","Are you sure approve","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm"],["name","exportButton"],["nzTitle","Add Users",3,"nzVisibleChange","nzOnOk","nzOnCancel","nzVisible"],[4,"nzModalContent"],["nzTitle","Attendance",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["displayExpr","username","valueExpr","username","contentTemplate","contentTemplate",3,"valueChange","dropDownOptions","dataSource","value"],["keyExpr","username",3,"onSelectionChanged","dataSource","remoteOperations","height","selectedRowKeys","focusedRowEnabled","focusedRowKey","hoverStateEnabled"],["dataField","username"],["dataField","name"],[3,"enabled","pageSize"],["mode","virtual"],["mode","single"],["nz-col","","nzXs","12","nzSm","12","nzLg","12"],[3,"nzAction"],["nz-button",""],["nz-icon","","nzType","upload"],[3,"click"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24"],["nzXs","24","nzSm","12","nzLg","24"],["nz-input","","placeholder","ID QR Code",3,"keydown.enter"],["nz-row","","nzJustify","start","nzAlign","middle",2,"margin-top","5px",3,"nzGutter"],["nzBordered","",3,"nzData","nzSize"],[4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," Relay Factory"),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," Training Record "),e.k0s(),e.j41(5,"nz-breadcrumb-item"),e.EFF(6," Detail "),e.k0s()(),e.nrm(7,"br"),e.j41(8,"nz-collapse")(9,"nz-collapse-panel",1)(10,"div",2)(11,"div",3)(12,"label",4),e.EFF(13,"Course Name"),e.k0s()(),e.j41(14,"div",5),e.nrm(15,"input",6),e.k0s(),e.j41(16,"div",3)(17,"label",4),e.EFF(18,"Course Type"),e.k0s()(),e.j41(19,"div",5),e.nrm(20,"input",6),e.k0s(),e.j41(21,"div",3)(22,"label",4),e.EFF(23,"Trainer"),e.k0s()(),e.j41(24,"div",5),e.nrm(25,"input",6),e.k0s()(),e.j41(26,"div",7)(27,"div",3)(28,"label",4),e.EFF(29,"Date"),e.k0s()(),e.j41(30,"div",5),e.nrm(31,"input",6),e.nI1(32,"date"),e.k0s(),e.j41(33,"div",3)(34,"label",4),e.EFF(35,"Approval By"),e.k0s()(),e.j41(36,"div",5),e.nrm(37,"input",6),e.k0s(),e.j41(38,"div",3)(39,"label",4),e.EFF(40,"Score Of Pass"),e.k0s()(),e.j41(41,"div",5),e.nrm(42,"input",6),e.k0s()()()(),e.nrm(43,"br"),e.j41(44,"dx-data-grid",8),e.bIt("onFocusedCellChanging",function(m){return o.onFocusedCellChanging(m)})("onSaved",function(m){return o.onSaved(m)})("onExporting",function(m){return o.onExporting(m)}),e.nrm(45,"dxo-filter-row",9)(46,"dxo-export",10)(47,"dxo-paging",11)(48,"dxo-pager",12)(49,"dxo-editing",13)(50,"dxo-keyboard-navigation",14),e.j41(51,"dxi-column",15),e.nrm(52,"dxo-lookup",16)(53,"dxi-validation-rule",17),e.k0s(),e.nrm(54,"dxi-column",18)(55,"dxi-column",19)(56,"dxi-column",20),e.j41(57,"dxi-column",21)(58,"dxi-column",22),e.nrm(59,"dxo-lookup",23),e.k0s(),e.j41(60,"dxi-column",24),e.nrm(61,"dxo-lookup",23),e.k0s()(),e.j41(62,"dxi-column",25),e.nrm(63,"dxi-column",26),e.j41(64,"dxi-column",27),e.nrm(65,"dxo-lookup",23),e.k0s()(),e.nrm(66,"dxi-column",28),e.DNE(67,p,3,5,"div",29),e.j41(68,"dxo-toolbar")(69,"dxi-item",30)(70,"dx-button",31),e.bIt("onClick",function(){return o.openAddUserModal()}),e.k0s()(),e.j41(71,"dxi-item",30)(72,"dx-button",32),e.bIt("onClick",function(){return o.onOpenAttendanceModal()}),e.k0s()(),e.nrm(73,"dxi-item",33),e.j41(74,"dxi-item",34)(75,"dx-button",35),e.bIt("nzOnConfirm",function(){return o.onApprove()}),e.k0s()(),e.nrm(76,"dxi-item",36),e.k0s()(),e.j41(77,"nz-modal",37),e.mxI("nzVisibleChange",function(m){return e.DH7(o.isOpenAddUserModal,m)||(o.isOpenAddUserModal=m),m}),e.bIt("nzOnOk",function(){return o.uploadUsers()})("nzOnCancel",function(){return o.isOpenAddUserModal=!1}),e.DNE(78,g,10,2,"ng-container",38),e.k0s(),e.j41(79,"nz-modal",39),e.mxI("nzVisibleChange",function(m){return e.DH7(o.isOpenAttendanceModal,m)||(o.isOpenAttendanceModal=m),m}),e.bIt("nzOnCancel",function(){return o.isOpenAttendanceModal=!1})("nzOnOk",function(){return o.onCloseAttendanceModal()}),e.DNE(80,A,19,5,"ng-container",38),e.k0s()),2&i&&(e.R7$(9),e.Y8G("nzActive",!0)("nzShowArrow",!0),e.R7$(),e.Y8G("nzGutter",24),e.R7$(5),e.Y8G("disabled",!0)("ngModel",null==o.trainingRecordMaster?null:o.trainingRecordMaster.courseName),e.R7$(5),e.Y8G("disabled",!0)("ngModel",null==o.trainingRecordMaster?null:o.trainingRecordMaster.courseTypeName),e.R7$(5),e.Y8G("disabled",!0)("ngModel",null==o.trainingRecordMaster||null==o.trainingRecordMaster.trainerName?null:o.trainingRecordMaster.trainerName.split("-")[0]),e.R7$(),e.Y8G("nzGutter",24),e.R7$(5),e.Y8G("disabled",!0)("ngModel",e.i5U(32,54,null==o.trainingRecordMaster?null:o.trainingRecordMaster.date,"yyyy-MM-dd")),e.R7$(6),e.Y8G("disabled",!0)("ngModel",null==o.trainingRecordMaster||null==o.trainingRecordMaster.approvalByName?null:o.trainingRecordMaster.approvalByName.split("-")[0]),e.R7$(5),e.Y8G("disabled",!0)("ngModel",(null==o.trainingRecordMaster?null:o.trainingRecordMaster.scoreOfPass)+" / "+(null==o.trainingRecordMaster?null:o.trainingRecordMaster.scoreOfMax)),e.R7$(2),e.Y8G("dataSource",o.trainingRecordDetail)("showBorders",!0)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("columnAutoWidth",!0)("allowColumnResizing",!0)("columnResizingMode","widget")("allowColumnReordering",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(57,l)),e.R7$(),e.Y8G("allowUpdating",!0)("allowAdding",!0)("allowDeleting",!0),e.R7$(),e.Y8G("editOnKeyPress",!0)("enterKeyAction","startEdit")("enterKeyDirection","column"),e.R7$(),e.Y8G("width",150)("allowFiltering",!1),e.R7$(),e.Y8G("dataSource",o.users),e.R7$(2),e.Y8G("allowEditing",!1),e.R7$(),e.Y8G("allowFiltering",!1)("allowEditing",!1),e.R7$(),e.Y8G("allowFiltering",!1)("allowEditing",!1),e.R7$(3),e.Y8G("dataSource",o.options),e.R7$(2),e.Y8G("dataSource",o.options),e.R7$(2),e.Y8G("allowEditing",null!=((null==o.trainingRecordMaster?null:o.trainingRecordMaster.scoreOfMax)&&(null==o.trainingRecordMaster?null:o.trainingRecordMaster.scoreOfPass))),e.R7$(),e.Y8G("allowEditing",null==(o.trainingRecordMaster.scoreOfMax||o.trainingRecordMaster.scoreOfPass)),e.R7$(),e.Y8G("dataSource",o.testResult),e.R7$(),e.Y8G("allowEditing",!0),e.R7$(),e.Y8G("dxTemplateOf","singleDropDownBoxEditor"),e.R7$(10),e.R50("nzVisible",o.isOpenAddUserModal),e.R7$(2),e.R50("nzVisible",o.isOpenAttendanceModal))},dependencies:[h.Sq,T.me,T.BC,T.vS,d.CVf,d.Inh,Q.eC,R.s,d.hVU,d.nj_,d.b4U,d.$Xk,d.ZJU,d.FTx,d.WUv,d.sVQ,d.PVd,d.eA9,d.KOr,n.e,D.E,z.hL,z.K7,w.aO,L.c,Z.p,k.Dn,M.F2,M.A9,v.Uq,v.e,C.Sy,f.CP,f.SO,f._4,f.IL,f.aj,f.kt,F.Vz,F.pc,P.PV,G.$W,h.vh],styles:["label[_ngcontent-%COMP%]{font-weight:700}nz-collapse[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:green}"]})}return a})(),te=(()=>{class a{constructor(t){this.trainingRecordSvc=t}ngOnInit(){this.getHistories()}getHistories(){this.trainingRecordSvc.getHistories().subscribe(t=>{this.histories=t,console.log(this.histories)})}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(b))};static#n=this.\u0275cmp=e.VBU({type:a,selectors:[["app-training-record-history"]],decls:16,vars:8,consts:[["id","gridMaster",2,"margin-top","10px",3,"dataSource","showColumnLines","showRowLines","showBorders","rowAlternationEnabled","allowColumnResizing","columnResizingMode","allowColumnReordering"],["caption","ID","dataField","username","alignment","left"],["caption","Name","dataField","name","alignment","left"],["caption","Section","dataField","subsectionName","alignment","left"],["caption","Position","dataField","positionName","alignment","left"],["caption","Date","dataField","date","alignment","left"],["caption","Course","dataField","courseName","alignment","left"],["caption","Result","dataField","testResult","alignment","left"]],template:function(i,o){1&i&&(e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," Relay Factory"),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," Training Record "),e.k0s(),e.j41(5,"nz-breadcrumb-item"),e.EFF(6," L\u1ecbch s\u1eed \u0111\xe0o t\u1ea1o "),e.k0s()(),e.nrm(7,"br"),e.j41(8,"dx-data-grid",0),e.nrm(9,"dxi-column",1)(10,"dxi-column",2)(11,"dxi-column",3)(12,"dxi-column",4)(13,"dxi-column",5)(14,"dxi-column",6)(15,"dxi-column",7),e.k0s()),2&i&&(e.R7$(8),e.Y8G("dataSource",o.histories)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("rowAlternationEnabled",!0)("allowColumnResizing",!0)("columnResizingMode","widget")("allowColumnReordering",!0))},dependencies:[R.s,d.nj_,z.hL,z.K7]})}return a})();var q=r(89450);const oe=[{path:"masters",component:(()=>{class a{constructor(t,i,o){this.i18n=t,this.router=i,this.trainingRecordSvc=o,this.isVisible=!1,this.trainingRecordMaster={},this.trainingRecordMasters={}}ngOnInit(){this.i18n.setLocale(q.Bh),this.getCourses(),this.getUsers(),this.getTrainingRecordMaster(),this.getTrainingRecordType()}createTrainingRecord(){this.trainingRecordSvc.createTrainingRecordMaster(this.trainingRecordMaster).subscribe(t=>{this.getTrainingRecordMaster(),this.isVisible=!1,this.trainingRecordMaster={}})}getTrainingRecordType(){this.trainingRecordSvc.getTrainingRecordType().subscribe(t=>{this.trainingRecordType=t})}getUsers(){this.trainingRecordSvc.getUsers().subscribe(t=>{this.users=t})}getTrainingRecordMaster(){this.trainingRecordSvc.getTrainingRecordMaster({}).subscribe(t=>{this.trainingRecordMasters=t})}showGuideline(){this.trainingRecordSvc.showGuideline().subscribe(t=>{let i=new Blob([t],{type:"application/pdf"});var o=URL.createObjectURL(i);window.open(o)})}getCourses(){this.trainingRecordSvc.getCourses().subscribe(t=>{this.courses=t})}onSaved(t){this.trainingRecordSvc.saveTrainingRecordMaster(t.changes[0].key,t.changes[0].type).subscribe(c=>{this.getTrainingRecordMaster()})}onRowClick(t){this.router.navigate([`admin/relay/training-record/master/${t.data.id}`])}static#e=this.\u0275fac=function(i){return new(i||a)(e.rXU(q.Og),e.rXU(O.Ix),e.rXU(b))};static#n=this.\u0275cmp=e.VBU({type:a,selectors:[["app-training-record-master"]],decls:37,vars:22,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","12"],[2,"float","right"],[3,"click"],["id","gridMaster",2,"margin-top","10px",3,"onRowClick","onSaved","dataSource","showColumnLines","showRowLines","showBorders","rowAlternationEnabled","allowColumnResizing","columnResizingMode","allowColumnReordering"],["location","before","name","addRowButton","showText","always"],["mode","popup",3,"allowUpdating","allowAdding","allowDeleting"],["title","Ca h\u1ecdc",3,"showTitle","width","height"],["itemType","group",3,"colCount","colSpan"],["dataField","course"],["dataField","trainer"],["dataField","date"],["dataField","scoreOfMax"],["dataField","scoreOfPass"],[3,"visible"],["dataField","course","caption","Course"],["type","required"],["displayExpr","name","valueExpr","id",3,"dataSource"],["dataField","trainer","caption","Trainer"],["displayExpr","name","valueExpr","username",3,"dataSource"],["dataField","date","alignment","center","dataType","date","format","yyyy-MM-dd"],["caption","Approval","dataField","approvalByName","alignment","left"],["dataField","scoreOfPass","alignment","right"],["dataField","scoreOfMax","alignment","right"]],template:function(i,o){1&i&&(e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," Relay Factory"),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," Training Record "),e.k0s(),e.j41(5,"nz-breadcrumb-item"),e.EFF(6," L\u1ecbch \u0111\xe0o t\u1ea1o "),e.k0s()(),e.nrm(7,"br"),e.j41(8,"div",0),e.nrm(9,"div",1),e.j41(10,"div",1)(11,"label",2)(12,"a",3),e.bIt("click",function(){return o.showGuideline()}),e.EFF(13,"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng"),e.k0s()()()(),e.j41(14,"dx-data-grid",4),e.bIt("onRowClick",function(m){return o.onRowClick(m)})("onSaved",function(m){return o.onSaved(m)}),e.j41(15,"dxo-toolbar"),e.nrm(16,"dxi-item",5),e.k0s(),e.j41(17,"dxo-editing",6),e.nrm(18,"dxo-popup",7),e.j41(19,"dxo-form")(20,"dxi-item",8),e.nrm(21,"dxi-item",9)(22,"dxi-item",10)(23,"dxi-item",11),e.k0s(),e.j41(24,"dxi-item",8),e.nrm(25,"dxi-item",12)(26,"dxi-item",13),e.k0s()()(),e.nrm(27,"dxo-filter-row",14),e.j41(28,"dxi-column",15),e.nrm(29,"dxi-validation-rule",16)(30,"dxo-lookup",17),e.k0s(),e.j41(31,"dxi-column",18),e.nrm(32,"dxo-lookup",19),e.k0s(),e.nrm(33,"dxi-column",20)(34,"dxi-column",21)(35,"dxi-column",22)(36,"dxi-column",23),e.k0s()),2&i&&(e.R7$(8),e.Y8G("nzGutter",24),e.R7$(6),e.Y8G("dataSource",o.trainingRecordMasters)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("rowAlternationEnabled",!0)("allowColumnResizing",!0)("columnResizingMode","widget")("allowColumnReordering",!0),e.R7$(3),e.Y8G("allowUpdating",!0)("allowAdding",!0)("allowDeleting",!0),e.R7$(),e.Y8G("showTitle",!0)("width",525)("height",400),e.R7$(2),e.Y8G("colCount",1)("colSpan",2),e.R7$(4),e.Y8G("colCount",2)("colSpan",2),e.R7$(3),e.Y8G("visible",!0),e.R7$(3),e.Y8G("dataSource",o.courses),e.R7$(2),e.Y8G("dataSource",o.users))},dependencies:[d.CVf,d.Inh,R.s,d.nj_,d.b4U,d.$Xk,d.dDC,d.Tot,d.FTx,d.KOr,z.hL,z.K7,v.Uq,v.e],styles:["nz-select[_ngcontent-%COMP%], nz-date-picker[_ngcontent-%COMP%]{width:100%}label[_ngcontent-%COMP%]{font-weight:700}"]})}return a})()},{path:"master/:id",component:ne},{path:"courses",component:K},{path:"history",component:te}];let ie=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#n=this.\u0275mod=e.$C({type:a});static#t=this.\u0275inj=e.G2t({imports:[O.iI.forChild(oe),O.iI]})}return a})(),re=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#n=this.\u0275mod=e.$C({type:a});static#t=this.\u0275inj=e.G2t({imports:[h.MD,T.YN,ie,j.F,R.N,n.L,D.V,y.b,Y.U,z.EJ,w.Zw,k.Y3,M.U6,v.f3,$.DH,C.j,B.LE,f.$G,F.GB,P.g9,G.SE,S.et]})}return a})()},72874:(ee,U,r)=>{r.d(U,{PV:()=>Q,g9:()=>Z});var h=r(15215),T=r(10851),j=r(32753),R=r(60177),n=r(54438),D=r(45286),y=r(7605),Y=r(84046),z=r(77312),w=r(50513),F=r(40713),B=r(16042),v=r(26841),k=r(57806),S=r(65463),C=r(70317),M=r(89450),P=r(72544),$=r(35154),f=r(28203),G=r(16389),O=r(25930);const e=["okBtn"],I=["cancelBtn"];function V(l,_){1&l&&(n.j41(0,"div",6),n.nrm(1,"span",14),n.k0s())}function b(l,_){if(1&l&&(n.qex(0),n.j41(1,"span",16),n.nrm(2,"span",17),n.k0s(),n.bVm()),2&l){const s=_.$implicit;n.R7$(2),n.Y8G("nzType",s||"exclamation-circle")}}function N(l,_){if(1&l&&(n.qex(0),n.DNE(1,b,3,1,"ng-container",10),n.j41(2,"div",15),n.EFF(3),n.k0s(),n.bVm()),2&l){const s=n.XpG(2);n.R7$(),n.Y8G("nzStringTemplateOutlet",s.nzIcon),n.R7$(2),n.JRh(s.nzTitle)}}function d(l,_){if(1&l&&n.EFF(0),2&l){const s=n.XpG(2);n.SpI(" ",s.nzCancelText," ")}}function K(l,_){1&l&&(n.EFF(0),n.nI1(1,"nzI18n")),2&l&&n.SpI(" ",n.bMT(1,1,"Modal.cancelText")," ")}function X(l,_){if(1&l&&n.EFF(0),2&l){const s=n.XpG(2);n.SpI(" ",s.nzOkText," ")}}function W(l,_){1&l&&(n.EFF(0),n.nI1(1,"nzI18n")),2&l&&n.SpI(" ",n.bMT(1,1,"Modal.okText")," ")}function H(l,_){if(1&l){const s=n.RV6();n.j41(0,"div",4)(1,"div",5),n.DNE(2,V,2,0,"div",6),n.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),n.DNE(7,N,4,2,"ng-container",10),n.k0s(),n.j41(8,"div",11)(9,"button",12,1),n.bIt("click",function(){n.eBV(s);const p=n.XpG();return n.Njj(p.onCancel())}),n.DNE(11,d,1,1)(12,K,2,3),n.k0s(),n.j41(13,"button",13,2),n.bIt("click",function(){n.eBV(s);const p=n.XpG();return n.Njj(p.onConfirm())}),n.DNE(15,X,1,1)(16,W,2,3),n.k0s()()()()()()()}if(2&l){const s=n.XpG();n.AVh("ant-popover-rtl","rtl"===s.dir),n.Y8G("cdkTrapFocusAutoCapture",null!==s.nzAutoFocus)("ngClass",s._classMap)("ngStyle",s.nzOverlayStyle)("@.disabled",!(null==s.noAnimation||!s.noAnimation.nzNoAnimation))("nzNoAnimation",null==s.noAnimation?null:s.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),n.R7$(2),n.vxM(2,s.nzPopconfirmShowArrow?2:-1),n.R7$(5),n.Y8G("nzStringTemplateOutlet",s.nzTitle),n.R7$(2),n.Y8G("nzSize","small"),n.BMQ("cdkFocusInitial","cancel"===s.nzAutoFocus||null),n.R7$(2),n.vxM(11,s.nzCancelText?11:12),n.R7$(2),n.Y8G("nzSize","small")("nzType","danger"!==s.nzOkType?s.nzOkType:"primary")("nzDanger",s.nzOkDanger||"danger"===s.nzOkType)("nzLoading",s.confirmLoading)("disabled",s.nzOkDisabled),n.BMQ("cdkFocusInitial","ok"===s.nzAutoFocus||null),n.R7$(2),n.vxM(15,s.nzOkText?15:16)}}let Q=(()=>{class l extends $.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(L),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new n.bkB,this.nzOnCancel=new n.bkB,this.nzOnConfirm=new n.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#e=this.\u0275fac=function(u){return new(u||l)};static#n=this.\u0275dir=n.FsC({type:l,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(u,p){2&u&&n.AVh("ant-popover-open",p.visible)},inputs:{arrowPointAtCenter:[n.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[n.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[n.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[n.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[n.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[n.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[n.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[n.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[n.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[n.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[n.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[n.Vt3]})}return(0,h.Cg)([(0,C.H3)()],l.prototype,"arrowPointAtCenter",void 0),(0,h.Cg)([(0,C.H3)()],l.prototype,"nzOkDisabled",void 0),(0,h.Cg)([(0,C.H3)()],l.prototype,"nzOkDanger",void 0),(0,h.Cg)([(0,C.H3)()],l.prototype,"nzCondition",void 0),(0,h.Cg)([(0,C.H3)()],l.prototype,"nzPopconfirmShowArrow",void 0),(0,h.Cg)([(0,B.H4)()],l.prototype,"nzPopconfirmBackdrop",void 0),(0,h.Cg)([(0,B.H4)()],l.prototype,"nzAutofocus",void 0),l})(),L=(()=>{class l extends $.VJ{constructor(s,u,p,g,E){super(s,p,E),this.elementRef=u,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new D.B7,this.nzOnConfirm=new D.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=g}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const s=(0,C.cG)(this.nzBeforeConfirm()).pipe((0,Y.$)());this.confirmLoading=!0,s.pipe((0,z.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,y.Q)(this.nzVisibleChange),(0,y.Q)(this.destroy$)).subscribe(u=>{u&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const s=this.elementFocusedBeforeModalWasOpened;if(s&&"function"==typeof s.focus){const u=this.document.activeElement,p=this.elementRef.nativeElement;(!u||u===this.document.body||u===p||p.contains(u))&&s.focus()}}static#e=this.\u0275fac=function(u){return new(u||l)(n.rXU(n.gRc),n.rXU(n.aKT),n.rXU(f.dS,8),n.rXU(R.qQ,8),n.rXU(v.z,9))};static#n=this.\u0275cmp=n.VBU({type:l,selectors:[["nz-popconfirm"]],viewQuery:function(u,p){if(1&u&&(n.GBs(e,5,n.aKT),n.GBs(I,5,n.aKT)),2&u){let g;n.mGM(g=n.lsd())&&(p.okBtn=g),n.mGM(g=n.lsd())&&(p.cancelBtn=g)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[n.Vt3,n.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(u,p){if(1&u){const g=n.RV6();n.DNE(0,H,17,20,"ng-template",3,0,n.C5r),n.bIt("overlayOutsideClick",function(A){return n.eBV(g),n.Njj(p.onClickOutside(A))})("detach",function(){return n.eBV(g),n.Njj(p.hide())})("positionChange",function(A){return n.eBV(g),n.Njj(p.onPositionChange(A))})}2&u&&n.Y8G("cdkConnectedOverlayHasBackdrop",p.nzBackdrop)("cdkConnectedOverlayOrigin",p.origin)("cdkConnectedOverlayPositions",p._positions)("cdkConnectedOverlayOpen",p._visible)("cdkConnectedOverlayPush",p.cdkConnectedOverlayPush)("nzArrowPointAtCenter",p.nzArrowPointAtCenter)},dependencies:[j.z_,j.WB,S.$_,S.vT,T.Pd,T.kB,R.YU,R.B3,v.z,k.C,k.m,P.Y3,P.Dn,w.Zw,w.aO,G.c,O.p,M.bP,M.Vc],encapsulation:2,data:{animation:[F.uX]},changeDetection:0})}return l})(),Z=(()=>{class l{static#e=this.\u0275fac=function(u){return new(u||l)};static#n=this.\u0275mod=n.$C({type:l});static#t=this.\u0275inj=n.G2t({imports:[L]})}return l})()}}]);