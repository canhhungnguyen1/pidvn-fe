"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[4053],{24053:(lt,B,o)=>{o.d(B,{T:()=>ot});var s=o(54438),I=o(12101),S=o(91269),V=o(17669),H=o(72463),Z=o(6322),A=o(87951),R=o(49104),b=o(24159),U=o(43458),c=o(24292),N=o(6867),_=o(5042),W=o(25188),F=o(43985),O="sparkline-tooltip",C=(0,R.b4)([b.A.down,b.A.move],O),E=A.X,w=Math.floor;function Q(t){var{data:a}=t,e=a.widget;e._enableOutHandler(),e._showTooltip()}function P(t){var a=new N.$({},{},{shiftZeroValue:!t,isHorizontal:!!t});return{getTranslator:function(){return a},update:function(e,i,n){a.update(e,i,n)},getVisibleArea(){var e=a.getCanvasVisibleArea();return[e.min,e.max]},visualRange:_.lQ,calculateInterval:_.lQ,getMarginOptions:()=>({}),aggregatedPointBetweenTicks:()=>!1}}var D,p=Z.A.inherit({_getLayoutItems:_.lQ,_useLinks:!1,_themeDependentChanges:["OPTIONS"],_initCore:function(){this._tooltipTracker=this._renderer.root,this._tooltipTracker.attr({"pointer-events":"visible"}),this._createHtmlElements(),this._initTooltipEvents(),this._argumentAxis=P(!0),this._valueAxis=P()},_getDefaultSize:function(){return this._defaultSize},_disposeCore:function(){this._disposeWidgetElements(),this._disposeTooltipEvents(),this._ranges=null},_optionChangesOrder:["OPTIONS"],_change_OPTIONS:function(){this._prepareOptions(),this._change(["UPDATE"])},_customChangesOrder:["UPDATE"],_change_UPDATE:function(){this._update()},_update:function(){this._tooltipShown&&(this._tooltipShown=!1,this._tooltip.hide()),this._cleanWidgetElements(),this._updateWidgetElements(),this._drawWidgetElements()},_updateWidgetElements:function(){var t=this._getCorrectCanvas();this._updateRange(),this._argumentAxis.update(this._ranges.arg,t,this._getStick()),this._valueAxis.update(this._ranges.val,t)},_getStick:function(){},_applySize:function(t){this._allOptions.size={width:t[2]-t[0],height:t[3]-t[1]},this._change(["UPDATE"])},_setupResizeHandler:_.lQ,_prepareOptions:function(){return E(!0,{},this._themeManager.theme(),this.option())},_getTooltipCoords:function(){var t=this._canvas,a=this._renderer.getRootOffset();return{x:t.width/2+a.left,y:t.height/2+a.top}},_initTooltipEvents(){var t={widget:this};this._renderer.root.off("."+O).on(C,t,Q)},_showTooltip(){this._tooltipShown||(this._tooltipShown=!0,this._getTooltip().isEnabled()&&this._tooltip.show(this._getTooltipData(),this._getTooltipCoords(),{}))},_hideTooltip(){this._tooltipShown&&(this._tooltipShown=!1,this._tooltip.hide())},_stopCurrentHandling(){this._hideTooltip()},_enableOutHandler(){var t=this;if(!t._outHandler){var a=e=>{var{pageX:i,pageY:n}=e,{left:r,top:u}=t._renderer.getRootOffset(),d=w(i-r),l=w(n-u);(function G(t,a,e){var{width:i,height:n}=t;return(0,U.Oh)({left:0,top:0,right:i,bottom:n,width:i,height:n},a,e)})(t._canvas,d,l)||(t._hideTooltip(),t._disableOutHandler())};S.A.on(V.A.getDocument(),C,a),this._outHandler=a}},_disableOutHandler(){this._outHandler&&S.A.off(V.A.getDocument(),C,this._outHandler),this._outHandler=null},_disposeTooltipEvents:function(){this._tooltipTracker.off(),this._disableOutHandler(),this._renderer.root.off("."+O)},_getTooltip:function(){var t=this;return t._tooltip||(D.apply(this,arguments),t._setTooltipRendererOptions(t._tooltipRendererOptions),t._tooltipRendererOptions=null,t._setTooltipOptions()),t._tooltip}});const K=p;p.addPlugin(W.I),D=p.prototype._initTooltip,p.prototype._initTooltip=_.lQ;var j=p.prototype._disposeTooltip;p.prototype._disposeTooltip=function(){this._tooltip&&j.apply(this,arguments)},p.prototype._setTooltipRendererOptions=function(){var t=this._getRendererOptions();this._tooltip?this._tooltip.setRendererOptions(t):this._tooltipRendererOptions=t},p.prototype._setTooltipOptions=function(){if(this._tooltip){var t=this._getOption("tooltip"),a=this._getDefaultTooltipTemplate(t),i=E(a?{contentTemplate:a}:{},t,{enabled:t.enabled&&this._isTooltipEnabled()});this._tooltip.update(i)}},p.prototype._getDefaultTooltipTemplate=function(t){var a=!0,e=this.option("rtlEnabled")?"left":"right";if((0,H.Tn)(t.customizeTooltip)){var i;this._tooltip.update(t);var n=this._getTooltipData(),r=null!==(i=t.customizeTooltip.call(n,n))&&void 0!==i?i:{};a=!("html"in r)&&!("text"in r)}return a&&function J(t,a){var{lineSpacing:e,size:i}=t,n="".concat((e??2)+i,"px");return function(r,u){for(var{valueText:d}=r,l=(0,c.A)("<table>").css({borderSpacing:0,lineHeight:n}),g=0;g<d.length;g+=2){var T=(0,c.A)("<tr>");(0,c.A)("<td>").text(d[g]).appendTo(T),(0,c.A)("<td>").css({width:15}).appendTo(T),(0,c.A)("<td>").css({textAlign:a}).text(d[g+1]).appendTo(T),l.append(T)}u.append(l)}}(t.font,e)};var $=(0,A.X)(!0,{},F.IQ,{init:_.lQ,dispose:_.lQ,customize:null,members:{_getExportMenuOptions:null}});p.addPlugin($);var q=o(64905),m=Number,f=isFinite,x=K.inherit({_rootClassPrefix:"dxb",_rootClass:"dxb-bullet",_themeSection:"bullet",_defaultSize:{width:300,height:30,left:1,right:1,top:2,bottom:2},_disposeWidgetElements:function(){delete this._zeroLevelPath,delete this._targetPath,delete this._barValuePath},_cleanWidgetElements:function(){this._zeroLevelPath.remove(),this._targetPath.remove(),this._barValuePath.remove()},_drawWidgetElements:function(){this._drawBullet(),this._drawn()},_createHtmlElements:function(){var t=this._renderer;this._zeroLevelPath=t.path(void 0,"line").attr({class:"dxb-zero-level","stroke-linecap":"square"}),this._targetPath=t.path(void 0,"line").attr({class:"dxb-target","stroke-linecap":"square"}),this._barValuePath=t.path(void 0,"line").attr({class:"dxb-bar-value","stroke-linecap":"square"})},_prepareOptions:function(){var t,a,e,i,n,r;this._allOptions=t=this.callBase();var u=void 0===this._allOptions.value,d=void 0===this._allOptions.target;this._tooltipEnabled=!(u&&d),u&&(this._allOptions.value=0),d&&(this._allOptions.target=0),t.value=n=m(t.value),t.target=r=m(t.target),void 0===this._allOptions.startScaleValue&&(this._allOptions.startScaleValue=r<n?r:n,this._allOptions.startScaleValue=this._allOptions.startScaleValue<0?this._allOptions.startScaleValue:0),void 0===this._allOptions.endScaleValue&&(this._allOptions.endScaleValue=r>n?r:n),t.startScaleValue=a=m(t.startScaleValue),t.endScaleValue=e=m(t.endScaleValue),e<a&&(i=e,this._allOptions.endScaleValue=a,this._allOptions.startScaleValue=i,this._allOptions.inverted=!0)},_updateRange:function(){var t=this._allOptions;this._ranges={arg:{invert:t.rtlEnabled?!t.inverted:t.inverted,min:t.startScaleValue,max:t.endScaleValue,axisType:"continuous",dataType:"numeric"},val:{min:0,max:1,axisType:"continuous",dataType:"numeric"}}},_drawBullet:function(){var t=this._allOptions,a=t.startScaleValue!==t.endScaleValue,e=f(t.startScaleValue),i=f(t.endScaleValue),n=f(t.value),r=f(t.target);a&&i&&e&&r&&n&&(this._drawBarValue(),this._drawTarget(),this._drawZeroLevel())},_getTargetParams:function(){var t=this._allOptions,a=this._valueAxis.getTranslator(),e=this._argumentAxis.getTranslator().translate(t.target);return{points:[e,a.translate(.02),e,a.translate(.98)],stroke:t.targetColor,"stroke-width":t.targetWidth}},_getBarValueParams:function(){var l,g,t=this._allOptions,a=this._argumentAxis.getTranslator(),e=this._valueAxis.getTranslator(),i=t.startScaleValue,n=t.endScaleValue,r=t.value,u=e.translate(.1),d=e.translate(.9);return r>0?(l=i<=0?0:i,g=r>=n?n:r<l?l:r):(l=n>=0?0:n,g=r<i?i:r>l?l:r),{points:[l=a.translate(l),d,g=a.translate(g),d,g,u,l,u],fill:t.color}},_getCorrectCanvas:function(){return this._canvas},_getZeroLevelParams:function(){var t=this._valueAxis.getTranslator(),a=this._argumentAxis.getTranslator().translate(0);return{points:[a,t.translate(.02),a,t.translate(.98)],stroke:this._allOptions.targetColor,"stroke-width":1}},_drawZeroLevel:function(){var t=this._allOptions;0>t.endScaleValue||0<t.startScaleValue||!t.showZeroLevel||this._zeroLevelPath.attr(this._getZeroLevelParams()).sharp().append(this._renderer.root)},_drawTarget:function(){var t=this._allOptions,a=t.target;a>t.endScaleValue||a<t.startScaleValue||!t.showTarget||this._targetPath.attr(this._getTargetParams()).sharp().append(this._renderer.root)},_drawBarValue:function(){this._barValuePath.attr(this._getBarValueParams()).append(this._renderer.root)},_getTooltipCoords:function(){var t=this._canvas,a=this._renderer.getRootOffset(),e=this._barValuePath.getBBox();return{x:e.x+e.width/2+a.left,y:t.height/2+a.top}},_getTooltipData:function(){var t=this._tooltip,a=this._allOptions,e=a.value,i=a.target,n=t.formatValue(e),r=t.formatValue(i);return{originalValue:e,originalTarget:i,value:n,target:r,valueText:["Actual Value:",n,"Target Value:",r]}},_isTooltipEnabled:function(){return this._tooltipEnabled}});(0,I.__)(["color","targetColor","targetWidth","showTarget","showZeroLevel","value","target","startScaleValue","endScaleValue"],function(t,a){x.prototype._optionChangesMap[a]="OPTIONS"}),(0,q.A)("dxBullet",x);var v=o(27380),h=o(31837);o(345);let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.$C({type:t}),t.\u0275inj=s.G2t({imports:[[h.Yh3,h.hzo,h.Vku,h.A1g,h.r2Z,h.Pxf,h.cug,v.p_,v.xZ],h.Yh3,h.hzo,h.Vku,h.A1g,h.r2Z,h.Pxf,h.cug,v.xZ]}),t})()}}]);