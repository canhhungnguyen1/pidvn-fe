"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[9116],{79116:(se,N,l)=>{l.d(N,{as:()=>x,et:()=>oe,r:()=>ne,zn:()=>D});var _=l(15215),A=l(60177),e=l(54438),v=l(73586),z=l(45286),h=l(7605),I=l(58728),L=l(19493),W=l(49090),d=l(16042),g=l(70317),P=l(5667),B=l(40713),S=l(21025),M=l(72544),F=l(345),C=l(32753),U=l(76939),p=l(67336),k=l(28203);const Z=["imgRef"],$=["imagePreviewWrapper"];function H(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",13),e.bIt("click",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onSwitchLeft(n))}),e.nrm(1,"span",14),e.k0s(),e.j41(2,"div",15),e.bIt("click",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onSwitchRight(n))}),e.nrm(3,"span",16),e.k0s()}if(2&i){const t=e.XpG();e.AVh("ant-image-preview-switch-left-disabled",t.index<=0),e.R7$(2),e.AVh("ant-image-preview-switch-right-disabled",t.index>=t.images.length-1)}}function V(i,r){if(1&i&&(e.j41(0,"li",5),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Lme("",t.index+1," / ",t.images.length,"")}}function j(i,r){if(1&i){const t=e.RV6();e.j41(0,"li",17),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.onClick())}),e.nrm(1,"span",18),e.k0s()}if(2&i){let t;const o=r.$implicit,n=e.XpG();e.AVh("ant-image-preview-operations-operation-disabled",n.zoomOutDisabled&&"zoomOut"===o.type),e.R7$(),e.Y8G("nzType",o.icon)("nzRotate",null!==(t=o.rotate)&&void 0!==t?t:0)}}function K(i,r){if(1&i&&e.nrm(0,"img",20,1),2&i){const t=e.XpG().$implicit,o=e.XpG();e.xc7("width",t.width)("height",t.height)("transform",o.previewImageTransform),e.BMQ("src",o.sanitizerResourceUrl(t.src),e.B4B)("srcset",t.srcset)("alt",t.alt)}}function G(i,r){if(1&i&&e.DNE(0,K,2,9,"img",19),2&i){const t=r.$index,o=e.XpG();e.vxM(0,t===o.index?0:-1)}}const X=["*"],O="image";function T(i,r,t){const o=i+r,n=(r-t)/2;let s=null;return r>t?(i>0&&(s=n),i<0&&o<t&&(s=-n)):(i<0||o>t)&&(s=i<0?n:-n),s}class E{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}}const R={x:0,y:0};let b=(()=>{class i{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){const t=this.nzConfigService.getConfigForComponent(O)||{};return this.config.nzMaskClosable??t.nzMaskClosable??!0}constructor(t,o,n,s,c,a){this.ngZone=t,this.cdr=o,this.nzConfigService=n,this.config=s,this.destroy$=c,this.sanitizer=a,this._defaultNzZoom=1,this._defaultNzScaleStep=.5,this._defaultNzRotate=0,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationStateChanged=new e.bkB,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"},{icon:"swap",onClick:()=>{this.onHorizontalFlip()},type:"flipHorizontally"},{icon:"swap",onClick:()=>{this.onVerticalFlip()},type:"flipVertically",rotate:90}],this.zoomOutDisabled=!1,this.position={...R},this.closeClick=new e.bkB,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=this.config.nzFlipHorizontally??!1,this.flipVertically=this.config.nzFlipVertically??!1,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,v.R)(this.imagePreviewWrapper.nativeElement,"mousedown").pipe((0,h.Q)(this.destroy$)).subscribe(()=>{this.isDragging=!0}),(0,v.R)(this.imagePreviewWrapper.nativeElement,"wheel").pipe((0,h.Q)(this.destroy$)).subscribe(t=>{this.ngZone.run(()=>this.wheelZoomEventHandler(t))})})}setImages(t,o){o&&(this.scaleStepMap=o),this.images=t,this.markForCheck()}switchTo(t){this.index=t,this.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.visible=!1,this.closeClick.emit()}onZoomIn(){const t=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=t,this.updatePreviewImageTransform(),this.updateZoomOutDisabled()}onZoomOut(){if(this.zoom>1){const t=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=t,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.zoom<=1&&this.reCenterImage()}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(t){t.preventDefault(),t.stopPropagation(),this.prev()}onSwitchRight(t){t.preventDefault(),t.stopPropagation(),this.next()}onHorizontalFlip(){this.flipHorizontally=!this.flipHorizontally,this.updatePreviewImageTransform()}onVerticalFlip(){this.flipVertically=!this.flipVertically,this.updatePreviewImageTransform()}wheelZoomEventHandler(t){t.preventDefault(),t.stopPropagation(),this.handlerImageTransformationWhileZoomingWithMouse(t,t.deltaY),this.handleImageScaleWhileZoomingWithMouse(t.deltaY),this.updatePreviewImageWrapperTransform(),this.updatePreviewImageTransform(),this.markForCheck()}onAnimationStart(t){this.animationStateChanged.emit(t)}onAnimationDone(t){this.animationStateChanged.emit(t)}onDragEnd(t){this.isDragging=!1;const o=this.imageRef.nativeElement.offsetWidth*this.zoom,n=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:s,top:c}=function Y(i){const r=i.getBoundingClientRect(),t=document.documentElement;return{left:r.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:r.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}(this.imageRef.nativeElement),{width:a,height:m}=function J(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}(),w=this.rotate%180!=0,u=function Q(i){let r={};return i.width<=i.clientWidth&&i.height<=i.clientHeight&&(r={x:0,y:0}),(i.width>i.clientWidth||i.height>i.clientHeight)&&(r={x:T(i.left,i.width,i.clientWidth),y:T(i.top,i.height,i.clientHeight)}),r}({width:w?n:o,height:w?o:n,left:s,top:c,clientWidth:a,clientHeight:m});(0,g.n9)(u.x)||(0,g.n9)(u.y)?this.position={...this.position,...u}:!(0,g.n9)(u.x)&&!(0,g.n9)(u.y)&&(this.position={x:t.source.getFreeDragPosition().x,y:t.source.getFreeDragPosition().y})}sanitizerResourceUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom*(this.flipHorizontally?-1:1)}, ${this.zoom*(this.flipVertically?-1:1)}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}handlerImageTransformationWhileZoomingWithMouse(t,o){let n;const s=this.imageRef.nativeElement,a=getComputedStyle(s).transform.match(/matrix.*\((.+)\)/);n=a?+a[1].split(", ")[0]:this.zoom;const m=(t.clientX-s.getBoundingClientRect().x)/n,w=(t.clientY-s.getBoundingClientRect().y)/n,f=o<0?this.scaleStep/2:-this.scaleStep/2;this.position.x+=-m*f*2+s.offsetWidth*f,this.position.y+=-w*f*2+s.offsetHeight*f}handleImageScaleWhileZoomingWithMouse(t){this.isZoomedInWithMouseWheel(t)?this.onZoomIn():this.onZoomOut(),this.zoom<=1&&this.reCenterImage()}isZoomedInWithMouseWheel(t){return t<0}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=!1,this.flipVertically=!1,this.reCenterImage()}reCenterImage(){this.position={...R}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.SKi),e.rXU(e.gRc),e.rXU(d.yx),e.rXU(E),e.rXU(S.y4),e.rXU(F.up))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["nz-image-preview"]],viewQuery:function(o,n){if(1&o&&(e.GBs(Z,5),e.GBs($,7)),2&o){let s;e.mGM(s=e.lsd())&&(n.imageRef=s.first),e.mGM(s=e.lsd())&&(n.imagePreviewWrapper=s.first)}},hostAttrs:[1,"ant-image-preview-root"],hostVars:6,hostBindings:function(o,n){1&o&&e.Kam("@fadeMotion.start",function(c){return n.onAnimationStart(c)})("@fadeMotion.done",function(c){return n.onAnimationDone(c)}),2&o&&(e.zvX("@.disabled",n.config.nzNoAnimation)("@fadeMotion",n.visible?"enter":"leave"),e.xc7("z-index",n.config.nzZIndex),e.AVh("ant-image-preview-moving",n.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[e.Jv_([S.y4]),e.aNF],decls:17,vars:5,consts:[["imagePreviewWrapper",""],["imgRef",""],[1,"ant-image-preview-mask"],[1,"ant-image-preview-operations-wrapper"],[1,"ant-image-preview-operations"],[1,"ant-image-preview-operations-progress"],[1,"ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled"],["tabindex","-1",1,"ant-image-preview-wrap",3,"click"],["role","dialog","aria-modal","true",1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragEnded","cdkDragFreeDragPosition"],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType","nzRotate"],["cdkDragHandle","",1,"ant-image-preview-img",3,"width","height","transform"],["cdkDragHandle","",1,"ant-image-preview-img"]],template:function(o,n){if(1&o){const s=e.RV6();e.nrm(0,"div",2),e.j41(1,"div",3),e.DNE(2,H,4,4),e.j41(3,"ul",4),e.DNE(4,V,2,2,"li",5),e.Z7z(5,j,2,4,"li",6,e.fX1),e.k0s()(),e.j41(7,"div",7),e.bIt("click",function(a){return e.eBV(s),e.Njj(n.maskClosable&&a.target===a.currentTarget&&n.onClose())}),e.j41(8,"div",8),e.nrm(9,"div",9),e.j41(10,"div",10)(11,"div",11)(12,"div",12,0),e.bIt("cdkDragEnded",function(a){return e.eBV(s),e.Njj(n.onDragEnd(a))}),e.Z7z(14,G,1,1,null,null,e.fX1),e.k0s()()(),e.nrm(16,"div",9),e.k0s()()}2&o&&(e.R7$(2),e.vxM(2,n.images.length>1?2:-1),e.R7$(2),e.vxM(4,n.images.length>1?4:-1),e.R7$(),e.Dyx(n.operations),e.R7$(7),e.xc7("transform",n.previewImageWrapperTransform),e.Y8G("cdkDragFreeDragPosition",n.position),e.R7$(2),e.Dyx(n.images))},dependencies:[M.Y3,M.Dn,P.Fb,P.T1],encapsulation:2,data:{animation:[B.LD]},changeDetection:0})}return i})();class te{constructor(r,t,o){this.previewInstance=r,this.config=t,this.overlayRef=o,this.destroy$=new z.B7,o.keydownEvents().pipe((0,I.p)(n=>this.config.nzKeyboard&&(n.keyCode===p._f||n.keyCode===p.UQ||n.keyCode===p.LE)&&!(0,p.rp)(n))).subscribe(n=>{n.preventDefault(),n.keyCode===p._f&&r.onClose(),n.keyCode===p.UQ&&this.prev(),n.keyCode===p.LE&&this.next()}),o.detachments().subscribe(()=>{this.overlayRef.dispose()}),r.closeClick.pipe((0,L.s)(1),(0,W.n)(()=>r.animationStateChanged),(0,I.p)(n=>"done"===n.phaseName),(0,h.Q)(this.destroy$)).subscribe(()=>{this.close()})}switchTo(r){this.previewInstance.switchTo(r)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.destroy$.next(),this.overlayRef.dispose()}}let D=(()=>{class i{constructor(t,o,n,s){this.overlay=t,this.injector=o,this.nzConfigService=n,this.directionality=s}preview(t,o,n){return this.display(t,o,n)}display(t,o,n){const s={...new E,...o??{}},c=this.createOverlay(s),a=this.attachPreviewComponent(c,s);a.setImages(t,n);const m=new te(a,s,c);return a.previewRef=m,m}attachPreviewComponent(t,o){const n=e.zZn.create({parent:this.injector,providers:[{provide:C.yY,useValue:t},{provide:E,useValue:o}]}),s=new U.A8(b,null,n);return t.attach(s).instance}createOverlay(t){const o=this.nzConfigService.getConfigForComponent(O)||{},n=new C.rR({scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:t.nzCloseOnNavigation??o.nzCloseOnNavigation??!0,direction:t.nzDirection||o.nzDirection||this.directionality.value});return this.overlay.create(n)}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(C.hJ),e.KVO(e.zZn),e.KVO(d.yx),e.KVO(k.dS,8))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac})}return i})(),x=(()=>{class i{constructor(){this.nzScaleStep=null,this.images=[]}addImage(t){this.images.push(t)}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[e.aNF],ngContentSelectors:X,decls:1,vars:0,template:function(o,n){1&o&&(e.NAR(),e.SdG(0))},encapsulation:2,changeDetection:0})}return i})(),ne=(()=>{class i{get previewable(){return!this.nzDisablePreview&&"error"!==this.status}constructor(t,o,n,s,c,a,m){this.document=t,this.nzConfigService=o,this.elementRef=n,this.nzImageService=s,this.cdr=c,this.parentGroup=a,this.directionality=m,this._nzModuleName="image",this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new z.B7,this.destroy$=new z.B7}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe((0,h.Q)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){const t=this.parentGroup.images.filter(a=>a.previewable),o=t.map(a=>({src:a.nzSrc,srcset:a.nzSrcset})),n=t.findIndex(a=>this===a),s=new Map;t.forEach(a=>{s.set(a.nzSrc??a.nzSrcset,a.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??.5)}),this.nzImageService.preview(o,{nzDirection:this.dir},s).switchTo(n)}else this.nzImageService.preview([{src:this.nzSrc,srcset:this.nzSrcset}],{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??.5})}getElement(){return this.elementRef}ngOnChanges(t){const{nzSrc:o}=t;o&&(this.getElement().nativeElement.src=o.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new z.B7,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),(0,v.R)(this.backLoadImage,"load").pipe((0,h.Q)(this.backLoadDestroy$),(0,h.Q)(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),(0,v.R)(this.backLoadImage,"error").pipe((0,h.Q)(this.backLoadDestroy$),(0,h.Q)(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(A.qQ),e.rXU(d.yx),e.rXU(e.aKT),e.rXU(D),e.rXU(e.gRc),e.rXU(x,8),e.rXU(k.dS,8))};static#t=this.\u0275dir=e.FsC({type:i,selectors:[["img","nz-image",""]],hostBindings:function(o,n){1&o&&e.bIt("click",function(){return n.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[e.OA$]})}return(0,_.Cg)([(0,g.H3)(),(0,d.H4)()],i.prototype,"nzDisablePreview",void 0),(0,_.Cg)([(0,d.H4)()],i.prototype,"nzFallback",void 0),(0,_.Cg)([(0,d.H4)()],i.prototype,"nzPlaceholder",void 0),(0,_.Cg)([(0,d.H4)()],i.prototype,"nzScaleStep",void 0),i})(),oe=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.$C({type:i});static#i=this.\u0275inj=e.G2t({providers:[D],imports:[b]})}return i})()}}]);