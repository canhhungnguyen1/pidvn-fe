"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[3238],{53238:(ee,B,s)=>{s.r(B),s.d(B,{RelayProcessRecordingModule:()=>We});var z=s(60177),a=s(89417),h=s(33514),b=s(12673),i=s(87018),k=s(28663),O=s(11668),j=s(44042),D=s(53281),S=s(47711),w=s(29462),G=s(87907),$=s(72898),T=s(34756),V=s(23617),f=s(50513),y=s(74696),R=s(19692),x=s(97529),F=s(72544),U=s(21011),L=s(43053),Y=s(72874),Q=s(1997),q=s(97685),c=s(23359),A=s(75699),m=s(46661),e=s(54438);const C=()=>["/admin/relay/relay-process-recording/requests"],N=()=>["/admin/relay/relay-process-recording/scan-to-line"],H=()=>["/admin/relay/material-management/rwh-send-pwh"],K=()=>["/admin/relay/relay-datecode"];let ne=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-menu"]],decls:21,vars:17,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","4"],[1,"wrapper"],["nz-flex","",1,"item","receive",3,"routerLink","nzJustify","nzAlign"],[1,"title"],["nz-flex","",1,"item","process_recording",3,"routerLink","nzJustify","nzAlign"],["nz-flex","",1,"item","return_warehouse",3,"routerLink","nzJustify","nzAlign"],["nz-flex","",1,"item","date_code",3,"routerLink","nzJustify","nzAlign"]],template:function(o,t){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.EFF(5,"Nh\u1eadn NVL"),e.k0s()()()(),e.j41(6,"div",1)(7,"div",2)(8,"div",5)(9,"span",4),e.EFF(10,"Scan NVL v\xe0o Line"),e.k0s()()()(),e.j41(11,"div",1)(12,"div",2)(13,"div",6)(14,"span",4),e.EFF(15,"Tr\u1ea3 NVL v\u1ec1 Kho"),e.k0s()()()(),e.j41(16,"div",1)(17,"div",2)(18,"div",7)(19,"span",4),e.EFF(20,"Nh\u1eadp Date Code"),e.k0s()()()()()),2&o&&(e.Y8G("nzGutter",24),e.R7$(3),e.Y8G("routerLink",e.lJ4(13,C))("nzJustify","center")("nzAlign","center"),e.R7$(5),e.Y8G("routerLink",e.lJ4(14,N))("nzJustify","center")("nzAlign","center"),e.R7$(5),e.Y8G("routerLink",e.lJ4(15,H))("nzJustify","center")("nzAlign","center"),e.R7$(5),e.Y8G("routerLink",e.lJ4(16,K))("nzJustify","center")("nzAlign","center"))},dependencies:[m.Wk,x.Uq,x.e,R.B],styles:[".wrapper[_ngcontent-%COMP%]{padding:5px 0}.item[_ngcontent-%COMP%]{padding:20px 0}.item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:16px}.item[_ngcontent-%COMP%]:hover{cursor:pointer}.item.receive[_ngcontent-%COMP%]{background:#3498db}.item.process_recording[_ngcontent-%COMP%]{background-color:#e07e37}.item.return_warehouse[_ngcontent-%COMP%]{background-color:#63d171}.item.date_code[_ngcontent-%COMP%]{background-color:#959595c7}"]})}return r})();var J=s(92887),te=s(71451),u=s(2578);class I{}var p=s(45794),v=s(45312),E=s(21626);let M=(()=>{class r{constructor(n){this.httpClient=n,this.baseUrl=v.c.baseUrl}getRequests(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/Requests`,n)}getRequestDetail(n){return this.httpClient.get(`${this.baseUrl}/Relay/ProcessRecording/Request?requestNo=${n}`)}onReceiveMaterials(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ReceiveMaterials`,n)}validateLotReceive(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ValidateLotReceive`,n)}deleteLotReceived(n){return this.httpClient.put(`${this.baseUrl}/Relay/ProcessRecording/DeleteLotReceived`,n)}sendToLineWh(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/SendToLineWh`,n)}static#e=this.\u0275fac=function(o){return new(o||r)(e.KVO(E.Qq))};static#n=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var X=s(37736),W=s(27380),g=s(31837),ie=s(16389),re=s(25930);const le=["qtyIpt"],ce=["qrCodeIpt"],de=["userIdIpt"],pe=["qaCardIpt"],ue=r=>({autoExpandAll:r}),_e=()=>[10,25,50,100],ae=()=>[""];function me(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",43),e.bIt("onClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.openSendToLineWhModal())}),e.EFF(2,"Chuy\u1ec3n NVL v\xe0o LINE-WH "),e.k0s()()}}function he(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",43),e.bIt("onClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.resetFiltersAndSorting())}),e.k0s()()}}function ge(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",44),e.bIt("onClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.isOpenLotScanErrorModal=!0)}),e.k0s()()}}function fe(r,P){if(1&r){const n=e.RV6();e.j41(0,"a",47),e.bIt("nzOnConfirm",function(){e.eBV(n);const t=e.XpG().$implicit,l=e.XpG();return e.Njj(l.deleteLotReceived(t))}),e.EFF(1,"X\xf3a"),e.k0s()}}function ze(r,P){if(1&r&&(e.j41(0,"div",45),e.DNE(1,fe,2,0,"a",46),e.k0s()),2&r){const n=P.$implicit;e.R7$(),e.Y8G("ngIf",n.data.id)}}function Ce(r,P){if(1&r){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",56)(6,"div",57),e.bIt("click",function(){const t=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.startEdit(t))}),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"input",58,5),e.mxI("ngModelChange",function(t){const l=e.eBV(n).$implicit;return e.DH7(l.qty,t)||(l.qty=t),e.Njj(t)}),e.bIt("blur",function(){const t=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.stopEdit(t))}),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.j41(14,"td",59),e.bIt("nzOnConfirm",function(){const t=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.deleteLotScanned(t))}),e.j41(15,"a",60),e.EFF(16,"X\xf3a"),e.k0s()()()}if(2&r){const n=P.$implicit,o=e.XpG(2);e.R7$(2),e.JRh(n.model),e.R7$(2),e.JRh(n.lotNo),e.R7$(2),e.Y8G("hidden",o.lotNoEdit===n.lotNo),e.R7$(),e.SpI(" ",e.i5U(8,7,n.qty,"1.0-3")," "),e.R7$(2),e.Y8G("hidden",o.lotNoEdit!==n.lotNo),e.R50("ngModel",n.qty),e.R7$(3),e.JRh(e.i5U(13,10,n.remainQty,"1.0-3"))}}function ve(r,P){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"nz-table",48)(2,"thead")(3,"tr")(4,"th")(5,"div",49)(6,"div",50)(7,"dx-text-box",51,2),e.bIt("keydown.enter",function(t){e.eBV(n);const l=e.XpG();return e.Njj(l.scanUserId(t))})("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.selectTextInput("userIdIpt"))}),e.k0s()(),e.j41(9,"div",52)(10,"dx-text-box",53,3),e.bIt("keydown.enter",function(t){e.eBV(n);const l=e.XpG();return e.Njj(l.scanQRCode(t))})("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.selectTextInput("qrCodeIpt"))}),e.k0s()()()()()()(),e.j41(12,"nz-table",54,4)(14,"thead")(15,"tr")(16,"th"),e.EFF(17,"Part No"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Lot No"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Qty"),e.k0s(),e.j41(22,"th"),e.EFF(23,"T\u1ed3n"),e.k0s(),e.j41(24,"th"),e.EFF(25,"Action"),e.k0s()()(),e.j41(26,"tbody"),e.DNE(27,Ce,17,13,"tr",55),e.k0s()(),e.bVm()}if(2&r){const n=e.sdS(13),o=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(7,ae)),e.R7$(4),e.Y8G("nzGutter",24),e.R7$(2),e.Y8G("labelMode","static"),e.R7$(3),e.Y8G("labelMode","static"),e.R7$(2),e.Y8G("nzData",o.litsLotScanOk)("nzFrontPagination",!0),e.R7$(15),e.Y8G("ngForOf",n.data)}}function Re(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.isOpenReceiveModal=!1)}),e.nrm(2,"span",61),e.EFF(3," \u0110\xf3ng "),e.k0s(),e.j41(4,"button",62),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.onReceiveMaterial())}),e.nrm(5,"span",63),e.EFF(6," L\u01b0u "),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("nzLoading",n.isLoading)("disabled",n.litsLotScanOk.length<=0)}}function Ee(r,P){if(1&r&&(e.j41(0,"div")(1,"dx-data-grid",64,6),e.nrm(3,"dxi-column",65)(4,"dxi-column",27)(5,"dxi-column",66),e.k0s()()),2&r){const n=e.XpG();e.R7$(),e.Y8G("dataSource",n.lotScanErrors)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0)}}function Pe(r,P){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"nz-table",48)(2,"thead")(3,"tr")(4,"th")(5,"dx-text-box",67,7),e.bIt("keydown.enter",function(t){e.eBV(n);const l=e.XpG();return e.Njj(l.scanQRCard(t))})("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.selectTextInput("qaCardIpt"))}),e.k0s()()()()(),e.bVm()}2&r&&(e.R7$(),e.Y8G("nzData",e.lJ4(2,ae)),e.R7$(4),e.Y8G("labelMode","static"))}function ye(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.isOpenSendToLineWhModal=!1)}),e.nrm(2,"span",61),e.EFF(3," \u0110\xf3ng "),e.k0s(),e.j41(4,"button",62),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.sendToLineWh())}),e.nrm(5,"span",63),e.EFF(6," L\u01b0u "),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(4),e.Y8G("nzLoading",n.isLoading)("disabled",n.litsLotScanOk.length<=0)}}let Te=(()=>{class r{constructor(n,o,t,l,_,d){this.toastr=n,this.rePrSvc=o,this.jwtHelperSvc=t,this.router=l,this.activatedRoute=_,this.datePipe=d,this.lots=[],this.expandAll=!0,this.isLoading=!1,this.isOpenReceiveModal=!1,this.isOpenLotScanErrorModal=!1,this.lotScanErrors=[],this.litsLotScanOk=[],this.mapLotScanned=new Map,this.lotNoEdit=null,this.isOpenSendToLineWhModal=!1}ngOnInit(){this.requestNo=this.activatedRoute.snapshot.queryParamMap.get("requestNo")}ngAfterViewInit(){this.getRequestDetail()}getRequestDetail(){let n=this.activatedRoute.snapshot.queryParamMap.get("requestNo");this.lotGrid?.instance.beginCustomLoading("\u0110ang load d\u1eef li\u1ec7u ..."),this.rePrSvc.getRequestDetail(n).subscribe(o=>{this.lots=o.result,this.lotGrid.instance.endCustomLoading()})}onExportClient(n){console.log(n);const o=new J.Workbook,t=o.addWorksheet("Main sheet");(0,te.V)({component:n.component,worksheet:t}).then(function(){o.xlsx.writeBuffer().then(function(l){u(new Blob([l],{type:"application/octet-stream"}),"Data.xlsx")})})}toggleExpandAll(){this.expandAll=!this.expandAll}statusCellTemplate(n,o){}onCellPreparedLotGrid(n){if("data"===n.rowType){if("statusName"===n.column.dataField){const o=n.row.data.status;0===o?n.cellElement.style.color="red":1===o&&(n.cellElement.style.color="green")}"lotNo"===n.column.dataField&&1===n.row.data.status&&(n.cellElement.style.backgroundColor="rgb(197, 225, 165)",n.cellElement.style.fontWeight="bold")}}resetFiltersAndSorting(){this.lotGrid.instance.clearFilter(),this.lotGrid.instance.clearSorting()}openReceiveModal(){this.lotScanErrors=new Array,this.mapLotScanned=new Map,this.litsLotScanOk=new Array;let n=!0;for(const o of this.lots)if(0===o.status){n=!1;break}n?this.toastr.warning("\u0110\xe3 nh\u1eadn \u0111\u1ee7 NVL","Warning"):(this.isOpenReceiveModal=!0,setTimeout(()=>{this.userIdIpt&&this.userIdIpt.instance&&this.userIdIpt.instance.focus()},500))}scanUserId(n){let o=n.target.value.toUpperCase();const t=this.userIdIpt.instance.element().querySelector("input");if(7!==o.length||isNaN(Number(o)))return this.toastr.warning("ID kh\xf4ng h\u1ee3p l\u1ec7","Warning"),void(t&&t.select());this.qrCodeIpt.instance.focus()}scanQRCode(n){const o=this.userIdIpt.instance.option("value");if(!o)return this.toastr.warning("C\u1ea7n scan m\xe3 nh\xe2n vi\xean","Warning"),void this.userIdIpt.instance.focus();let t=n.target.value.toUpperCase().split(";");this.selectTextInput("qrCodeIpt");let l=!1,_=new I;_.model=t[0],_.lotNo=t[3],_.qty=t[2],_.receiver=o,_.date=new Date,_.recordType="RNP",_.flag="5",_.reqNo=this.requestNo,_.qrCode=n.target.value.toUpperCase();for(const d of this.lots)if(t[3]===d.lotNo){if(1==d.status)return l=!1,_.errorInfo=`Lot \u0111\xe3 \u0111\u01b0\u1ee3c scan nh\u1eadn l\xfac: ${this.datePipe.transform(d.createdAt,"yyyy-MM-dd HH:mm")}`,this.lotScanErrors.push(_),void this.toastr.warning("Lot \u0111\xe3 \u0111\u01b0\u1ee3c scan nh\u1eadn","Warning");if(0==d.status&&(l=!0,d.lotNo===_.lotNo)){_.whUserCode=d.whUserCode,_.sender=d.sender;break}}if(!l)return _.errorInfo="Lot kh\xf4ng thu\u1ed9c phi\u1ebfu request",this.toastr.warning("Lot kh\xf4ng thu\u1ed9c phi\u1ebfu request","Warning"),this.lotScanErrors.push(_),void this.selectTextInput("qrCodeIpt");this.rePrSvc.validateLotReceive(_).subscribe(d=>{let Z=d.result;Z.date=new Date,this.mapLotScanned.set(_.lotNo,Z),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse()})}selectTextInput(n){if("userIdIpt"===n){const o=this.userIdIpt.instance.element().querySelector("input");if(o)return void o.select()}if("qrCodeIpt"===n){const o=this.qrCodeIpt.instance.element().querySelector("input");if(o)return void o.select()}if("qaCardIpt"===n){const o=this.qaCardIpt.instance.element().querySelector("input");if(o)return void o.select()}}onReceiveMaterial(){this.isLoading=!0;let n=[...this.litsLotScanOk];this.rePrSvc.onReceiveMaterials(n).subscribe(o=>{this.getRequestDetail(),this.isOpenReceiveModal=!1,this.isLoading=!1,this.toastr.success("L\u01b0u th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")},o=>{this.getRequestDetail(),this.isOpenReceiveModal=!1,this.isLoading=!1}),this.getRequestDetail(),this.isOpenReceiveModal=!1,this.isLoading=!1}startEdit(n){setTimeout(()=>{this.qtyIpt.nativeElement.focus()},500),this.lotNoEdit=n.lotNo}stopEdit(n){console.log("stopEdit: ",n),n.qty>n.remainQty?n.qty=n.remainQty:n.qty<0&&(n.qty=0),this.lotNoEdit=null}deleteLotScanned(n){console.log(this.mapLotScanned),this.mapLotScanned.delete(n.lotNo),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse()}deleteLotReceived(n){console.log("deleteLotReceived: ",n),this.rePrSvc.deleteLotReceived(n.data).subscribe(t=>{this.getRequestDetail(),this.toastr.success("X\xf3a th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")})}openSendToLineWhModal(){this.isOpenSendToLineWhModal=!0,setTimeout(()=>{this.qaCardIpt&&this.qaCardIpt.instance&&this.qaCardIpt.instance.focus()},500)}scanQRCard(n){this.selectTextInput("qaCardIpt")}sendToLineWh(){if(!this.qaCardIpt.value)return void this.toastr.warning("C\u1ea7n scan QA card","Warning");let n=this.qaCardIpt.value.toLocaleUpperCase().split("*"),o=[...this.litsLotScanOk];for(const t of o)t.recordType="RDC",t.flag="5",t.reqNo=null,t.parent=n[0],t.line=n[1],t.date=new Date(n[2]),t.shift=n[3],t.qaCard=this.qaCardIpt.value,t.sender=t.receiver,t.createdAt=new Date,t.updatedAt=new Date;this.isLoading=!0,this.rePrSvc.sendToLineWh(o).subscribe(t=>{this.isOpenSendToLineWhModal=!1,this.isLoading=!1,this.toastr.success("Chuy\u1ec3n v\xe0o xe NVL th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")},t=>{this.isOpenSendToLineWhModal=!1,this.isLoading=!1,this.toastr.error(`Error: ${t}`,"L\u1ed7i")})}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(p.tw),e.rXU(M),e.rXU(X.X7),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(z.vh))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-receive"]],viewQuery:function(o,t){if(1&o&&(e.GBs(b.s,5),e.GBs(le,5),e.GBs(ce,5),e.GBs(de,5),e.GBs(pe,5)),2&o){let l;e.mGM(l=e.lsd())&&(t.lotGrid=l.first),e.mGM(l=e.lsd())&&(t.qtyIpt=l.first),e.mGM(l=e.lsd())&&(t.qrCodeIpt=l.first),e.mGM(l=e.lsd())&&(t.userIdIpt=l.first),e.mGM(l=e.lsd())&&(t.qaCardIpt=l.first)}},features:[e.Jv_([z.vh])],decls:59,vars:50,consts:[["lotGrid",""],["columnChooser",""],["userIdIpt",""],["qrCodeIpt",""],["lotScanTbl",""],["qtyIpt",""],["lotScanErrorGrid",""],["qaCardIpt",""],[3,"nzColor"],["keyExpr","id",2,"margin-top","10px",3,"onExporting","onCellPrepared","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled","grouping"],[3,"autoExpandAll"],[3,"enabled","mode","title"],[3,"visible"],[3,"enabled"],["location","before"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","qrcode"],["nz-button","","nzType","default",3,"click"],["nz-icon","",3,"nzType"],["location","after"],[4,"dxTemplate"],["location","after","name","searchPanel"],["name","exportButton","location","after"],["name","columnChooserButton","location","after"],["dataField","model","caption","Model",3,"visible","groupIndex"],[3,"allowSelectAll"],["dataField","lotGroup","caption","Lot Group",3,"visible","groupIndex"],["dataField","lotNo","caption","LotNo",3,"visible"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["dataField","receiverName","caption","Ng\u01b0\u1eddi nh\u1eadn",3,"visible"],["dataField","updatedAt","caption","Ng\xe0y nh\u1eadn","dataType","date","format","yyyy-MM-dd HH:mm",3,"visible"],["dataField","statusName","caption","Status",3,"visible"],["caption","Action","cellTemplate","actionTemplate","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","lotGroup","summaryType","count","displayFormat","{0} boxes"],["column","qty","summaryType","sum","displayFormat","Total Qty: {0}","valueFormat","#,##0.0",3,"showInGroupFooter","alignByColumn"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Nh\u1eadn nguy\xean v\u1eadt li\u1ec7u","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzTitle","Th\xf4ng tin l\u1ed7i khi scan nh\u1eadn NVL","nzWidth","100%",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],["nzTitle","Chuy\u1ec3n NVL \u0111\xe3 nh\u1eadn v\xe0o LINE-WH","nzWidth","750px",3,"nzVisibleChange","nzVisible"],["icon","refresh",3,"onClick"],["icon","info","type","danger","stylingMode","outlined",3,"onClick"],[2,"text-align","center"],["nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a ?","nzPopconfirmPlacement","bottom","style","color: red",3,"nzOnConfirm",4,"ngIf"],["nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a ?","nzPopconfirmPlacement","bottom",2,"color","red",3,"nzOnConfirm"],["nzBordered","","nzFrontPagination","false",3,"nzData"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","6","nzSm","6","nzMd","6","nzLg","6"],["label","Scan ID ng\u01b0\u1eddi nh\u1eadn","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"],["nz-col","","nzXs","18","nzSm","18","nzMd","18","nzLg","18"],["label","Scan tem NVL","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"],["nzBordered","","nzSize","small",3,"nzData","nzFrontPagination"],[4,"ngFor","ngForOf"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-icon","","nzType","close"],["nz-button","","nzType","primary",3,"click","nzLoading","disabled"],["nz-icon","","nzType","save"],["keyExpr","lotNo",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["dataField","model","caption","Model",3,"visible"],["dataField","errorInfo","caption","Th\xf4ng tin l\u1ed7i",3,"visible"],["label","QA card","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"]],template:function(o,t){if(1&o){const l=e.RV6();e.j41(0,"nz-tag",8),e.EFF(1),e.k0s(),e.j41(2,"dx-data-grid",9,0),e.bIt("onExporting",function(d){return e.eBV(l),e.Njj(t.onExportClient(d))})("onCellPrepared",function(d){return e.eBV(l),e.Njj(t.onCellPreparedLotGrid(d))}),e.nrm(4,"dxo-grouping",10)(5,"dxo-column-chooser",11,1)(7,"dxo-search-panel",12)(8,"dxo-load-panel",13)(9,"dxo-export",13),e.j41(10,"dxo-toolbar")(11,"dxi-item",14)(12,"button",15),e.bIt("click",function(){return e.eBV(l),e.Njj(t.openReceiveModal())}),e.nrm(13,"span",16),e.EFF(14," Nh\u1eadn NVL "),e.k0s()(),e.j41(15,"dxi-item",14)(16,"button",17),e.bIt("click",function(){return e.eBV(l),e.Njj(t.toggleExpandAll())}),e.nrm(17,"span",18),e.EFF(18),e.k0s()(),e.j41(19,"dxi-item",19),e.DNE(20,me,3,0,"div",20),e.k0s(),e.nrm(21,"dxi-item",21),e.j41(22,"dxi-item",19),e.DNE(23,he,2,0,"div",20),e.k0s(),e.nrm(24,"dxi-item",22)(25,"dxi-item",23),e.j41(26,"dxi-item",19),e.DNE(27,ge,2,0,"div",20),e.k0s()(),e.nrm(28,"dxo-grouping",10)(29,"dxo-filter-row",12)(30,"dxo-header-filter",12),e.j41(31,"dxi-column",24)(32,"dxo-header-filter",25),e.nrm(33,"dxo-search",13),e.k0s()(),e.j41(34,"dxi-column",26)(35,"dxo-header-filter",25),e.nrm(36,"dxo-search",13),e.k0s()(),e.nrm(37,"dxi-column",27)(38,"dxi-column",28),e.j41(39,"dxi-column",29)(40,"dxo-header-filter",25),e.nrm(41,"dxo-search",13),e.k0s()(),e.nrm(42,"dxi-column",30)(43,"dxi-column",31)(44,"dxi-column",32),e.DNE(45,ze,2,1,"div",33),e.j41(46,"dxo-summary"),e.nrm(47,"dxi-group-item",34)(48,"dxi-group-item",35),e.k0s(),e.nrm(49,"dxo-paging",36)(50,"dxo-pager",37),e.k0s(),e.j41(51,"nz-modal",38),e.mxI("nzVisibleChange",function(d){return e.eBV(l),e.DH7(t.isOpenReceiveModal,d)||(t.isOpenReceiveModal=d),e.Njj(d)}),e.DNE(52,ve,28,8,"ng-container",39)(53,Re,7,2,"div",40),e.k0s(),e.j41(54,"nz-modal",41),e.mxI("nzVisibleChange",function(d){return e.eBV(l),e.DH7(t.isOpenLotScanErrorModal,d)||(t.isOpenLotScanErrorModal=d),e.Njj(d)}),e.bIt("nzOnCancel",function(){return e.eBV(l),e.Njj(t.isOpenLotScanErrorModal=!1)})("nzOnOk",function(){return e.eBV(l),e.Njj(t.isOpenLotScanErrorModal=!1)}),e.DNE(55,Ee,6,10,"div",39),e.k0s(),e.j41(56,"nz-modal",42),e.mxI("nzVisibleChange",function(d){return e.eBV(l),e.DH7(t.isOpenSendToLineWhModal,d)||(t.isOpenSendToLineWhModal=d),e.Njj(d)}),e.DNE(57,Pe,7,3,"ng-container",39)(58,ye,7,2,"div",40),e.k0s()}2&o&&(e.Y8G("nzColor","purple"),e.R7$(),e.SpI("RequestNo: ",t.requestNo,""),e.R7$(),e.Y8G("dataSource",t.lots)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!1)("grouping",e.eq3(47,ue,t.expandAll)),e.R7$(2),e.Y8G("autoExpandAll",t.expandAll),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(8),e.Y8G("nzType",t.expandAll?"minus":"plus"),e.R7$(),e.SpI(" ",t.expandAll?"Thu g\u1ecdn":"M\u1edf r\u1ed9ng"," "),e.R7$(10),e.Y8G("autoExpandAll",t.expandAll),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0)("groupIndex",0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0)("groupIndex",1),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(3),e.Y8G("showInGroupFooter",!1)("alignByColumn",!0),e.R7$(),e.Y8G("pageSize",100),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(49,_e)),e.R7$(),e.R50("nzVisible",t.isOpenReceiveModal),e.R7$(3),e.R50("nzVisible",t.isOpenLotScanErrorModal),e.R7$(2),e.R50("nzVisible",t.isOpenSendToLineWhModal))},dependencies:[z.Sq,z.bT,a.me,a.Q0,a.BC,a.vS,x.Uq,x.e,h.e,W.eC,b.s,g.i2Q,g.ZWy,g.nj_,g.gtJ,g.CVf,g.ZJU,g.FTx,g.UYU,g.xzc,g.sVQ,g.PVd,g.hXY,g.XvM,g.ryC,g.KOr,f.aO,ie.c,re.p,F.Dn,L.F2,L.Oj,L.A9,c.CP,c.SO,c._4,c.IL,c.aj,c.kt,c.OL,D.m,A.s,U.Sy,Y.PV,z.QX]})}return r})();class xe{}const be=()=>[10,15,25,50,100];function Oe(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"dx-button",18),e.bIt("onClick",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.onSearch())}),e.k0s()()}}function Se(r,P){if(1&r&&(e.j41(0,"div",19)(1,"span",20),e.EFF(2),e.k0s()()),2&r){const n=P.$implicit;e.R7$(),e.HbH(n.data.totalLotReceive<n.data.totalLotRequest?"red-color":"blue-color"),e.R7$(),e.Lme(" ",n.data.totalLotReceive," / ",n.data.totalLotRequest," ")}}function Me(r,P){if(1&r&&(e.j41(0,"div",19)(1,"span",20),e.EFF(2),e.k0s()()),2&r){const n=P.$implicit;e.R7$(),e.HbH(n.data.totalLotReceive<n.data.totalLotRequest?"red-color":"blue-color"),e.R7$(),e.SpI(" ",n.data.totalLotReceive<n.data.totalLotRequest?"Not yet":"\u0110\xe3 nh\u1eadn \u0111\u1ee7"," ")}}let ke=(()=>{class r{constructor(n,o,t,l){this.toastr=n,this.rePrSvc=o,this.jwtHelperSvc=t,this.router=l,this.requests=[],this.searchParam=new xe}ngOnInit(){const n=new Date,o=new Date;o.setDate(n.getDate()-120),this.searchParam.dateRange=[o,n]}ngAfterViewInit(){this.getRequests()}onSearch(){this.getRequests()}getRequests(){this.requestGrid?.instance.beginCustomLoading("\u0110ang t\u1ea3i d\u1eef li\u1ec7u ..."),this.rePrSvc.getRequests(this.searchParam).subscribe(n=>{this.requests=n.result,this.requestGrid.instance.endCustomLoading()})}onRowClick(n){console.log("onRowClick: ",n),this.router.navigate(["/admin/relay/relay-process-recording/request"],{queryParams:{requestNo:n.data.requestNo}})}onDateRangeChanged(n){console.log("Selected Date Range:",n.value)}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(p.tw),e.rXU(M),e.rXU(X.X7),e.rXU(m.Ix))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-request"]],viewQuery:function(o,t){if(1&o&&e.GBs(b.s,5),2&o){let l;e.mGM(l=e.lsd())&&(t.requestGrid=l.first)}},decls:22,vars:27,consts:[["requestGrid",""],["columnChooser",""],["keyExpr","id",3,"onRowClick","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["location","before"],["startDateLabel","Ng\xe0y b\u1eaft \u0111\u1ea7u","endDateLabel","Ng\xe0y k\u1ebft th\xfac",2,"width","300px",3,"valueChange","startDateChange","endDateChange","onValueChanged","value","startDate","endDate","displayFormat"],[4,"dxTemplate"],[3,"enabled","mode","title"],[3,"visible"],[3,"enabled"],["dataField","requestNo","caption","Request No",3,"visible"],["dataField","createdAt","caption","Ng\xe0y t\u1ea1o","dataType","date","format","yyyy-MM-dd HH:mm",3,"visible"],["dataField","line","caption","Line",3,"visible"],["dataField","parent","caption","Parent",3,"visible"],["caption","S\u1ed1 lot \u0111\xe3 nh\u1eadn","cellTemplate","lotReceivedTemplate"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["caption","Status","cellTemplate","statusTemplate"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["icon","search",2,"margin-top","8px",3,"onClick"],[2,"text-align","center"],[2,"font-weight","bold"]],template:function(o,t){if(1&o){const l=e.RV6();e.j41(0,"dx-data-grid",2,0),e.bIt("onRowClick",function(d){return e.eBV(l),e.Njj(t.onRowClick(d))}),e.j41(2,"dxo-toolbar")(3,"dxi-item",3)(4,"dx-date-range-box",4),e.mxI("valueChange",function(d){return e.eBV(l),e.DH7(t.searchParam.dateRange,d)||(t.searchParam.dateRange=d),e.Njj(d)})("startDateChange",function(d){return e.eBV(l),e.DH7(t.searchParam.dateRange[0],d)||(t.searchParam.dateRange[0]=d),e.Njj(d)})("endDateChange",function(d){return e.eBV(l),e.DH7(t.searchParam.dateRange[1],d)||(t.searchParam.dateRange[1]=d),e.Njj(d)}),e.bIt("onValueChanged",function(d){return e.eBV(l),e.Njj(t.onDateRangeChanged(d))}),e.k0s()(),e.j41(5,"dxi-item",3),e.DNE(6,Oe,2,0,"div",5),e.k0s()(),e.nrm(7,"dxo-column-chooser",6,1)(9,"dxo-header-filter",7)(10,"dxo-filter-row",7)(11,"dxo-export",8)(12,"dxi-column",9)(13,"dxi-column",10)(14,"dxi-column",11)(15,"dxi-column",12)(16,"dxi-column",13),e.DNE(17,Se,3,4,"div",14),e.nrm(18,"dxi-column",15),e.DNE(19,Me,3,3,"div",14),e.nrm(20,"dxo-paging",16)(21,"dxo-pager",17),e.k0s()}2&o&&(e.Y8G("dataSource",t.requests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(4),e.R50("value",t.searchParam.dateRange)("startDate",t.searchParam.dateRange[0])("endDate",t.searchParam.dateRange[1]),e.Y8G("displayFormat","yyyy/MM/dd"),e.R7$(3),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("dxTemplateOf","lotReceivedTemplate"),e.R7$(2),e.Y8G("dxTemplateOf","statusTemplate"),e.R7$(),e.Y8G("pageSize",15),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(26,be)))},dependencies:[h.e,W.eC,b.s,g.i2Q,g.nj_,g.gtJ,g.CVf,g.ZJU,g.FTx,g.sVQ,g.PVd,g.KOr,k.e],styles:[".red-color[_ngcontent-%COMP%]{color:red}.blue-color[_ngcontent-%COMP%]{color:#00f}"]})}return r})();class De{constructor(P="",n="",o="",t="",l="",_="",d=0,Z=""){this.qaCard=P,this.model=n,this.line=o,this.date=t,this.shift=l,this.user=_,this.processId=d,this.processName=Z}isAllPropertiesHaveValue(){return Object.values(this).every(n=>n)}}class Le{}let Ie=(()=>{class r{constructor(n){this.httpClient=n,this.baseUrl=v.c.baseUrl}scanMaterial(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ScanToLine/ScanMaterial`,n)}insertToLine(n){return this.httpClient.post(`${this.baseUrl}/Relay/ProcessRecording/ScanToLine/InsertToLine`,n)}getMaterialsInsertToLine(n){return this.httpClient.get(`${this.baseUrl}/Relay/ProcessRecording/ScanToLine/MaterialsInsertToLine?qaCard=${n}`)}static#e=this.\u0275fac=function(o){return new(o||r)(e.KVO(E.Qq))};static#n=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var oe=s(9541);const Fe=["infoIpt"],Ae=["qrCodeIpt"],Ne=["qtyIpt"],se=()=>[""],je=()=>({color:"red"}),Ge=()=>[10,15,25,50];function Be(r,P){1&r&&(e.j41(0,"div",31)(1,"a",32),e.EFF(2,"X\xf3a"),e.k0s()())}function we(r,P){if(1&r&&e.nrm(0,"nz-alert",38),2&r){const n=e.XpG(2);e.Y8G("nzMessage",null==n.responseQRScan?null:n.responseQRScan.information)("nzDescription",null==n.responseQRScan?null:n.responseQRScan.message)}}function $e(r,P){if(1&r){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",39)(6,"div",40),e.bIt("click",function(){const t=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.startEdit(t))}),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"input",41,4),e.mxI("ngModelChange",function(t){const l=e.eBV(n).$implicit;return e.DH7(l.qty,t)||(l.qty=t),e.Njj(t)}),e.bIt("blur",function(){const t=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.stopEdit(t))}),e.k0s()(),e.j41(11,"td",42),e.EFF(12),e.nI1(13,"number"),e.k0s(),e.j41(14,"td",43),e.bIt("nzOnConfirm",function(){const t=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.deleteLotScanned(t))}),e.j41(15,"a",44),e.EFF(16,"X\xf3a"),e.k0s()()()}if(2&r){const n=P.$implicit,o=e.XpG(2);e.R7$(2),e.JRh(n.model),e.R7$(2),e.JRh(n.lotNo),e.R7$(2),e.Y8G("hidden",o.lotNoEdit===n.lotNo),e.R7$(),e.SpI(" ",e.i5U(8,7,n.qty,"1.0-3")," "),e.R7$(2),e.Y8G("hidden",o.lotNoEdit!==n.lotNo),e.R50("ngModel",n.qty),e.R7$(3),e.SpI(" ",e.i5U(13,10,n.remainQty,"1.0-3")," ")}}function Ve(r,P){if(1&r){const n=e.RV6();e.qex(0),e.j41(1,"div",5)(2,"div",8)(3,"nz-table",33)(4,"thead")(5,"tr")(6,"th")(7,"dx-text-box",34,2),e.bIt("keydown.enter",function(t){e.eBV(n);const l=e.XpG();return e.Njj(l.scanQRCode(t))})("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.selectTextInput("qrCodeIpt"))}),e.k0s(),e.DNE(9,we,1,2,"nz-alert",35),e.k0s()()()()(),e.j41(10,"div",8)(11,"nz-table",36,3)(13,"thead")(14,"tr")(15,"th"),e.EFF(16,"Part No"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Lot No"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Qty"),e.k0s(),e.j41(21,"th"),e.EFF(22,"T\u1ed3n"),e.k0s(),e.j41(23,"th"),e.EFF(24,"Action"),e.k0s()()(),e.j41(25,"tbody"),e.DNE(26,$e,17,13,"tr",37),e.k0s()()()(),e.bVm()}if(2&r){const n=e.sdS(12),o=e.XpG();e.R7$(),e.Y8G("nzGutter",24),e.R7$(2),e.Y8G("nzData",e.lJ4(7,se)),e.R7$(4),e.Y8G("labelMode","static"),e.R7$(2),e.Y8G("ngIf","ERROR"==(null==o.responseQRScan?null:o.responseQRScan.status)),e.R7$(2),e.Y8G("nzData",o.litsLotScanOk)("nzFrontPagination",!0),e.R7$(15),e.Y8G("ngForOf",n.data)}}function Ue(r,P){if(1&r){const n=e.RV6();e.j41(0,"div")(1,"button",45),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.isOpenScanQRCodeModal=!1)}),e.EFF(2," \u0110\xf3ng "),e.k0s(),e.j41(3,"button",46),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.insertToLine())}),e.EFF(4," L\u01b0u "),e.k0s()()}if(2&r){const n=e.XpG();e.R7$(3),e.Y8G("nzLoading",n.isLoading)}}const Ye=[{path:"menu",component:ne},{path:"requests",component:ke},{path:"request",component:Te},{path:"scan-to-line",component:(()=>{class r{constructor(n,o,t,l,_,d){this.toastr=n,this.rePrScanToLineSvc=o,this.jwtHelperSvc=t,this.router=l,this.activatedRoute=_,this.datePipe=d,this.processes=[{id:29,name:"WIP-1"},{id:30,name:"WIP-2"},{id:31,name:"WIP-3"},{id:32,name:"WIP-4"}],this.infoScan=new De,this.isOpenScanQRCodeModal=!1,this.nzTitleScanQRCodeModal="Scan NVL v\xe0o Line",this.lotScanErrors=[],this.litsLotScanOk=[],this.mapLotScanned=new Map,this.lotNoEdit=null,this.isLoading=!1,this.materials=[],this.count=0}ngOnInit(){}scanInfo(n){let o=n.target.value,t=o.split("*");if(5===t.length){if(o.includes(";"))return this.toastr.warning("C\u1ea7n scan ID, QA card, WIP","Warning"),void this.selectTextInput("infoIpt");this.infoScan.qaCard=o,this.infoScan.model=t[0],this.infoScan.line=t[1],this.infoScan.date=t[2],this.infoScan.shift=t[3],this.rePrScanToLineSvc.getMaterialsInsertToLine(this.infoScan.qaCard).subscribe(_=>{this.materials=_.result})}if(7===o.length&&(this.infoScan.user=o),/^WIP-/.test(o)){this.infoScan.processName=o;for(const _ of this.processes)if(this.infoScan.processName==_.name){this.infoScan.processId=_.id;break}}this.selectTextInput("infoIpt"),this.infoScan.isAllPropertiesHaveValue()&&this.openScanQRCodeModal()}selectTextInput(n){if("infoIpt"===n){const o=this.infoIpt.instance.element().querySelector("input");if(o)return void o.select()}if("qrCodeIpt"===n){const o=this.qrCodeIpt.instance.element().querySelector("input");if(o)return void o.select()}}openScanQRCodeModal(){this.count=0,this.nzTitleScanQRCodeModal=`Nh\u1eadp NVL v\xe0o LINE: ${this.infoScan.line}; Process: ${this.infoScan.processName}`,console.log("this.nzTitleScanQRCodeModal: ",this.nzTitleScanQRCodeModal),this.isOpenScanQRCodeModal=!0,setTimeout(()=>{this.qrCodeIpt.instance.focus()},500)}scanQRCode(n){let o=n.target.value,t=new I;t.lotNo=o.split(";")[3],this.mapLotScanned.has(t.lotNo)?this.responseQRScan.status="OK":this.rePrScanToLineSvc.scanMaterial(t).subscribe(l=>{this.responseQRScan=l.result,"ERROR"!=this.responseQRScan.status&&(this.count++,this.responseQRScan.data.ordinal=this.count,this.mapLotScanned.set(t.lotNo,this.responseQRScan.data),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse())})}startEdit(n){setTimeout(()=>{this.qtyIpt.nativeElement.focus()},500),this.lotNoEdit=n.lotNo}stopEdit(n){console.log("stopEdit: ",n),n.qty>n.remainQty?n.qty=n.remainQty:n.qty<0&&(n.qty=0),this.lotNoEdit=null}deleteLotScanned(n){console.log(this.mapLotScanned),this.mapLotScanned.delete(n.lotNo),this.litsLotScanOk=Array.from(this.mapLotScanned.values()).reverse()}insertToLine(){let n=new Array;for(const o of this.litsLotScanOk){if(o.qty<=0)continue;let t=new Le;t.ppn=this.infoScan.model,t.cpn=o.model,t.line=this.infoScan.line,t.date=new Date(this.infoScan.date),t.shift=this.infoScan.shift,t.plotno=this.infoScan.qaCard,t.clotno=o.lotNo,t.qty=o.qty,t.frBox=0,t.user1=this.infoScan.user,t.user2=this.infoScan.user,t.keyUser=this.infoScan.user,t.ngQty=0,t.recordType="CDL",t.processId=this.infoScan.processId,t.ordinal=o.ordinal,t.remark="HungTest 2024-29-11",n.push(t)}n.length<=0?this.toastr.warning("Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","Warning"):(this.isLoading=!0,this.rePrScanToLineSvc.insertToLine(n).subscribe(o=>{this.isLoading=!1,this.mapLotScanned=new Map,this.litsLotScanOk=new Array},o=>{this.isLoading=!1}))}static#e=this.\u0275fac=function(o){return new(o||r)(e.rXU(p.tw),e.rXU(Ie),e.rXU(X.X7),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(z.vh))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-re-pr-scan-to-line"]],viewQuery:function(o,t){if(1&o&&(e.GBs(Fe,5),e.GBs(Ae,5),e.GBs(Ne,5)),2&o){let l;e.mGM(l=e.lsd())&&(t.infoIpt=l.first),e.mGM(l=e.lsd())&&(t.qrCodeIpt=l.first),e.mGM(l=e.lsd())&&(t.qtyIpt=l.first)}},features:[e.Jv_([z.vh])],decls:68,vars:38,consts:[["infoTbl",""],["infoIpt",""],["qrCodeIpt",""],["lotScanTbl",""],["qtyIpt",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","18","nzLg","18"],[1,"attention"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["colspan","3"],["label","Scan th\xf4ng tin","labelLocation","left","showColonAfterLabel","true","placeholder","Scan theo th\u1ee9 t\u1ef1 User ID, QA card, Process",3,"click","keydown.enter","labelMode","ngStyle"],[2,"margin-top","-30px"],["nzTitle","Danh s\xe1ch theo model"],["keyExpr","id",2,"margin-top","-15px",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"visible"],[3,"enabled"],["dataField","cpn","caption","PartNo",3,"groupIndex","visible"],[3,"allowSelectAll"],["dataField","clotno","caption","LotNo",3,"visible"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["caption","Action","cellTemplate","actionTemplate","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","cpn","summaryType","count","displayFormat","{0} boxes"],["column","qty","summaryType","sum","displayFormat","Total Qty: {0}","valueFormat","#,##0.0",3,"showInGroupFooter","alignByColumn"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Danh s\xe1ch theo th\u1ee9 t\u1ef1"],["id","importMaterialModal","nzWidth","100%",3,"nzVisibleChange","nzVisible","nzTitle"],[4,"nzModalContent"],[4,"nzModalFooter"],[2,"text-align","center"],[2,"color","red"],["nzBordered","","nzFrontPagination","false","nzSize","small",2,"margin-top","-15px",3,"nzData"],["label","Scan tem NVL","labelLocation","left","showColonAfterLabel","true",3,"keydown.enter","click","labelMode"],["nzType","error","nzShowIcon","","style","margin-top: 5px",3,"nzMessage","nzDescription",4,"ngIf"],["nzBordered","","nzSize","small",2,"margin-top","-15px",3,"nzData","nzFrontPagination"],[4,"ngFor","ngForOf"],["nzType","error","nzShowIcon","",2,"margin-top","5px",3,"nzMessage","nzDescription"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],[2,"text-align","right"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"]],template:function(o,t){if(1&o){const l=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"span",7),e.EFF(3,"* L\u01b0u \xfd: Scan theo th\u1ee9 t\u1ef1 User ID, QA card, Process"),e.k0s()(),e.j41(4,"div",8)(5,"nz-table",9,0)(7,"thead")(8,"tr")(9,"th",10)(10,"dx-text-box",11,1),e.bIt("click",function(){return e.eBV(l),e.Njj(t.selectTextInput("infoIpt"))})("keydown.enter",function(d){return e.eBV(l),e.Njj(t.scanInfo(d))}),e.k0s()()()(),e.j41(12,"tbody")(13,"tr")(14,"td")(15,"label"),e.EFF(16,"Model: "),e.k0s(),e.j41(17,"span"),e.EFF(18),e.k0s()(),e.j41(19,"td")(20,"label"),e.EFF(21,"Line: "),e.k0s(),e.j41(22,"span"),e.EFF(23),e.k0s()(),e.j41(24,"td")(25,"label"),e.EFF(26,"Date: "),e.k0s(),e.j41(27,"span"),e.EFF(28),e.k0s()()(),e.j41(29,"tr")(30,"td")(31,"label"),e.EFF(32,"User: "),e.k0s(),e.j41(33,"span"),e.EFF(34),e.k0s()(),e.j41(35,"td")(36,"label"),e.EFF(37,"Shift: "),e.k0s(),e.j41(38,"span"),e.EFF(39),e.k0s()(),e.j41(40,"td")(41,"label"),e.EFF(42,"Process: "),e.k0s(),e.j41(43,"span"),e.EFF(44),e.k0s()()()()()(),e.j41(45,"div",8)(46,"nz-tabset",12)(47,"nz-tab",13)(48,"dx-data-grid",14),e.nrm(49,"dxo-header-filter",15)(50,"dxo-filter-row",15)(51,"dxo-export",16),e.j41(52,"dxi-column",17)(53,"dxo-header-filter",18),e.nrm(54,"dxo-search",16),e.k0s()(),e.nrm(55,"dxi-column",19)(56,"dxi-column",20)(57,"dxi-column",21),e.DNE(58,Be,3,0,"div",22),e.j41(59,"dxo-summary"),e.nrm(60,"dxi-group-item",23)(61,"dxi-group-item",24),e.k0s(),e.nrm(62,"dxo-paging",25)(63,"dxo-pager",26),e.k0s()(),e.nrm(64,"nz-tab",27),e.k0s()()(),e.j41(65,"nz-modal",28),e.mxI("nzVisibleChange",function(d){return e.eBV(l),e.DH7(t.isOpenScanQRCodeModal,d)||(t.isOpenScanQRCodeModal=d),e.Njj(d)}),e.DNE(66,Ve,27,8,"ng-container",29)(67,Ue,5,1,"div",30),e.k0s()}2&o&&(e.Y8G("nzGutter",24),e.R7$(5),e.Y8G("nzData",e.lJ4(35,se)),e.R7$(5),e.Y8G("labelMode","static")("ngStyle",e.lJ4(36,je)),e.R7$(8),e.JRh(t.infoScan.model),e.R7$(5),e.JRh(t.infoScan.line),e.R7$(5),e.JRh(t.infoScan.date),e.R7$(6),e.JRh(t.infoScan.user),e.R7$(5),e.JRh(t.infoScan.shift),e.R7$(5),e.JRh(t.infoScan.processName),e.R7$(4),e.Y8G("dataSource",t.materials)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!1),e.R7$(),e.Y8G("groupIndex",1)("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(3),e.Y8G("showInGroupFooter",!1)("alignByColumn",!0),e.R7$(),e.Y8G("pageSize",15),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(37,Ge)),e.R7$(2),e.R50("nzVisible",t.isOpenScanQRCodeModal),e.Y8G("nzTitle",t.nzTitleScanQRCodeModal))},dependencies:[z.Sq,z.bT,z.B3,a.me,a.Q0,a.BC,a.vS,x.Uq,x.e,W.eC,b.s,g.ZWy,g.nj_,g.gtJ,g.ZJU,g.FTx,g.sVQ,g.PVd,g.XvM,g.ryC,f.aO,ie.c,re.p,L.F2,L.Oj,L.A9,c.CP,c.SO,c._4,c.IL,c.aj,c.kt,c.OL,D.m,U.Sy,Y.PV,V.Y,oe.JZ,oe.rE,z.QX],styles:["span.attention[_ngcontent-%COMP%]{font-style:italic;color:red}#infoTbl[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#000;font-weight:700}#infoTbl[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#00f}#materialEditTbl[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700}"]})}return r})()}];let Xe=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#n=this.\u0275mod=e.$C({type:r});static#t=this.\u0275inj=e.G2t({imports:[m.iI.forChild(Ye),m.iI]})}return r})(),We=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#n=this.\u0275mod=e.$C({type:r});static#t=this.\u0275inj=e.G2t({imports:[z.MD,a.YN,Xe,x.f3,R.y,q.pc,y.GB,Q.DH,h.L,b.N,i.S,f.Zw,F.Y3,k.B,L.U6,c.$G,O.F,j.D,D.Z,S.p,w.W,G.X,$.L,T.V,A.T,U.j,Y.g9,V.$,oe.hM]})}return r})()},74696:(ee,B,s)=>{s.d(B,{GB:()=>q,Vz:()=>Q,pc:()=>L});var z=s(15215),a=s(54438),h=s(73586),b=s(7605),i=s(58728),k=s(40713),O=s(16042),j=s(57806),D=s(21025),S=s(70317),w=s(72544),G=s(28203),$=s(26841);const T=["*"],V=["collapseHeader"];function f(c,A){if(1&c&&(a.qex(0),a.nrm(1,"span",7),a.bVm()),2&c){const m=A.$implicit,e=a.XpG(2);a.R7$(),a.Y8G("nzType",m||"right")("nzRotate",e.nzActive?90:0)}}function y(c,A){if(1&c&&(a.j41(0,"div"),a.DNE(1,f,2,2,"ng-container",3),a.k0s()),2&c){const m=a.XpG();a.R7$(),a.Y8G("nzStringTemplateOutlet",m.nzExpandedIcon)}}function R(c,A){if(1&c&&(a.qex(0),a.EFF(1),a.bVm()),2&c){const m=a.XpG();a.R7$(),a.JRh(m.nzHeader)}}function x(c,A){if(1&c&&(a.qex(0),a.EFF(1),a.bVm()),2&c){const m=a.XpG(2);a.R7$(),a.JRh(m.nzExtra)}}function F(c,A){if(1&c&&(a.j41(0,"div",4),a.DNE(1,x,2,1,"ng-container",3),a.k0s()),2&c){const m=a.XpG();a.R7$(),a.Y8G("nzStringTemplateOutlet",m.nzExtra)}}const U="collapse";let L=(()=>{class c{constructor(m,e,C,N){this.nzConfigService=m,this.cdr=e,this.directionality=C,this.destroy$=N,this._nzModuleName=U,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(U).pipe((0,b.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,b.Q)(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(m){this.listOfNzCollapsePanelComponent.push(m)}removePanel(m){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(m),1)}click(m){this.nzAccordion&&!m.nzActive&&this.listOfNzCollapsePanelComponent.filter(e=>e!==m).forEach(e=>{e.nzActive&&(e.nzActive=!1,e.nzActiveChange.emit(e.nzActive),e.markForCheck())}),m.nzActive=!m.nzActive,m.nzActiveChange.emit(m.nzActive)}static#e=this.\u0275fac=function(e){return new(e||c)(a.rXU(O.yx),a.rXU(a.gRc),a.rXU(G.dS,8),a.rXU(D.y4))};static#n=this.\u0275cmp=a.VBU({type:c,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(e,C){2&e&&a.AVh("ant-collapse-icon-position-start","left"===C.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===C.nzExpandIconPosition)("ant-collapse-ghost",C.nzGhost)("ant-collapse-borderless",!C.nzBordered)("ant-collapse-rtl","rtl"===C.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[a.Jv_([D.y4]),a.aNF],ngContentSelectors:T,decls:1,vars:0,template:function(e,C){1&e&&(a.NAR(),a.SdG(0))},encapsulation:2,changeDetection:0})}return(0,z.Cg)([(0,O.H4)(),(0,S.H3)()],c.prototype,"nzAccordion",void 0),(0,z.Cg)([(0,O.H4)(),(0,S.H3)()],c.prototype,"nzBordered",void 0),(0,z.Cg)([(0,O.H4)(),(0,S.H3)()],c.prototype,"nzGhost",void 0),c})();const Y="collapsePanel";let Q=(()=>{class c{markForCheck(){this.cdr.markForCheck()}constructor(m,e,C,N,H,K){this.nzConfigService=m,this.ngZone=e,this.cdr=C,this.destroy$=N,this.nzCollapseComponent=H,this.noAnimation=K,this._nzModuleName=Y,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new a.bkB,this.nzConfigService.getConfigChangeEventForComponent(Y).pipe((0,b.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,h.R)(this.collapseHeader.nativeElement,"click").pipe((0,i.p)(()=>!this.nzDisabled),(0,b.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#e=this.\u0275fac=function(e){return new(e||c)(a.rXU(O.yx),a.rXU(a.SKi),a.rXU(a.gRc),a.rXU(D.y4),a.rXU(L,1),a.rXU($.z,8))};static#n=this.\u0275cmp=a.VBU({type:c,selectors:[["nz-collapse-panel"]],viewQuery:function(e,C){if(1&e&&a.GBs(V,7),2&e){let N;a.mGM(N=a.lsd())&&(C.collapseHeader=N.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(e,C){2&e&&a.AVh("ant-collapse-no-arrow",!C.nzShowArrow)("ant-collapse-item-active",C.nzActive)("ant-collapse-item-disabled",C.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[a.Jv_([D.y4]),a.aNF],ngContentSelectors:T,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(e,C){1&e&&(a.NAR(),a.j41(0,"div",1,0),a.DNE(2,y,2,1,"div"),a.j41(3,"span",2),a.DNE(4,R,2,1,"ng-container",3),a.k0s(),a.DNE(5,F,2,1,"div",4),a.k0s(),a.j41(6,"div",5)(7,"div",6),a.SdG(8),a.k0s()()),2&e&&(a.BMQ("aria-expanded",C.nzActive),a.R7$(2),a.vxM(2,C.nzShowArrow?2:-1),a.R7$(2),a.Y8G("nzStringTemplateOutlet",C.nzHeader),a.R7$(),a.vxM(5,C.nzExtra?5:-1),a.R7$(),a.AVh("ant-collapse-content-active",C.nzActive),a.Y8G("@.disabled",!(null==C.noAnimation||!C.noAnimation.nzNoAnimation))("@collapseMotion",C.nzActive?"expanded":"hidden"))},dependencies:[j.C,j.m,w.Y3,w.Dn],encapsulation:2,data:{animation:[k.GE]},changeDetection:0})}return(0,z.Cg)([(0,S.H3)()],c.prototype,"nzActive",void 0),(0,z.Cg)([(0,S.H3)()],c.prototype,"nzDisabled",void 0),(0,z.Cg)([(0,O.H4)(),(0,S.H3)()],c.prototype,"nzShowArrow",void 0),c})(),q=(()=>{class c{static#e=this.\u0275fac=function(e){return new(e||c)};static#n=this.\u0275mod=a.$C({type:c});static#t=this.\u0275inj=a.G2t({imports:[Q]})}return c})()},72874:(ee,B,s)=>{s.d(B,{PV:()=>ne,g9:()=>te});var z=s(15215),a=s(10851),h=s(32753),b=s(60177),i=s(54438),k=s(45286),O=s(7605),j=s(84046),D=s(77312),S=s(50513),w=s(40713),G=s(16042),$=s(26841),T=s(57806),V=s(65463),f=s(70317),y=s(89450),R=s(72544),x=s(35154),F=s(28203),U=s(16389),L=s(25930);const Y=["okBtn"],Q=["cancelBtn"];function q(u,I){1&u&&(i.j41(0,"div",6),i.nrm(1,"span",14),i.k0s())}function c(u,I){if(1&u&&(i.qex(0),i.j41(1,"span",16),i.nrm(2,"span",17),i.k0s(),i.bVm()),2&u){const p=I.$implicit;i.R7$(2),i.Y8G("nzType",p||"exclamation-circle")}}function A(u,I){if(1&u&&(i.qex(0),i.DNE(1,c,3,1,"ng-container",10),i.j41(2,"div",15),i.EFF(3),i.k0s(),i.bVm()),2&u){const p=i.XpG(2);i.R7$(),i.Y8G("nzStringTemplateOutlet",p.nzIcon),i.R7$(2),i.JRh(p.nzTitle)}}function m(u,I){if(1&u&&i.EFF(0),2&u){const p=i.XpG(2);i.SpI(" ",p.nzCancelText," ")}}function e(u,I){1&u&&(i.EFF(0),i.nI1(1,"nzI18n")),2&u&&i.SpI(" ",i.bMT(1,1,"Modal.cancelText")," ")}function C(u,I){if(1&u&&i.EFF(0),2&u){const p=i.XpG(2);i.SpI(" ",p.nzOkText," ")}}function N(u,I){1&u&&(i.EFF(0),i.nI1(1,"nzI18n")),2&u&&i.SpI(" ",i.bMT(1,1,"Modal.okText")," ")}function H(u,I){if(1&u){const p=i.RV6();i.j41(0,"div",4)(1,"div",5),i.DNE(2,q,2,0,"div",6),i.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),i.DNE(7,A,4,2,"ng-container",10),i.k0s(),i.j41(8,"div",11)(9,"button",12,1),i.bIt("click",function(){i.eBV(p);const E=i.XpG();return i.Njj(E.onCancel())}),i.DNE(11,m,1,1)(12,e,2,3),i.k0s(),i.j41(13,"button",13,2),i.bIt("click",function(){i.eBV(p);const E=i.XpG();return i.Njj(E.onConfirm())}),i.DNE(15,C,1,1)(16,N,2,3),i.k0s()()()()()()()}if(2&u){const p=i.XpG();i.AVh("ant-popover-rtl","rtl"===p.dir),i.Y8G("cdkTrapFocusAutoCapture",null!==p.nzAutoFocus)("ngClass",p._classMap)("ngStyle",p.nzOverlayStyle)("@.disabled",!(null==p.noAnimation||!p.noAnimation.nzNoAnimation))("nzNoAnimation",null==p.noAnimation?null:p.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),i.R7$(2),i.vxM(2,p.nzPopconfirmShowArrow?2:-1),i.R7$(5),i.Y8G("nzStringTemplateOutlet",p.nzTitle),i.R7$(2),i.Y8G("nzSize","small"),i.BMQ("cdkFocusInitial","cancel"===p.nzAutoFocus||null),i.R7$(2),i.vxM(11,p.nzCancelText?11:12),i.R7$(2),i.Y8G("nzSize","small")("nzType","danger"!==p.nzOkType?p.nzOkType:"primary")("nzDanger",p.nzOkDanger||"danger"===p.nzOkType)("nzLoading",p.confirmLoading)("disabled",p.nzOkDisabled),i.BMQ("cdkFocusInitial","ok"===p.nzAutoFocus||null),i.R7$(2),i.vxM(15,p.nzOkText?15:16)}}let ne=(()=>{class u extends x.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(J),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new i.bkB,this.nzOnCancel=new i.bkB,this.nzOnConfirm=new i.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,O.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,O.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#e=this.\u0275fac=function(v){return new(v||u)};static#n=this.\u0275dir=i.FsC({type:u,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(v,E){2&v&&i.AVh("ant-popover-open",E.visible)},inputs:{arrowPointAtCenter:[i.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[i.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[i.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[i.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[i.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[i.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[i.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[i.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[i.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[i.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[i.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[i.Vt3]})}return(0,z.Cg)([(0,f.H3)()],u.prototype,"arrowPointAtCenter",void 0),(0,z.Cg)([(0,f.H3)()],u.prototype,"nzOkDisabled",void 0),(0,z.Cg)([(0,f.H3)()],u.prototype,"nzOkDanger",void 0),(0,z.Cg)([(0,f.H3)()],u.prototype,"nzCondition",void 0),(0,z.Cg)([(0,f.H3)()],u.prototype,"nzPopconfirmShowArrow",void 0),(0,z.Cg)([(0,G.H4)()],u.prototype,"nzPopconfirmBackdrop",void 0),(0,z.Cg)([(0,G.H4)()],u.prototype,"nzAutofocus",void 0),u})(),J=(()=>{class u extends x.VJ{constructor(p,v,E,M,X){super(p,E,X),this.elementRef=v,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new k.B7,this.nzOnConfirm=new k.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=M}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const p=(0,f.cG)(this.nzBeforeConfirm()).pipe((0,j.$)());this.confirmLoading=!0,p.pipe((0,D.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,O.Q)(this.nzVisibleChange),(0,O.Q)(this.destroy$)).subscribe(v=>{v&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const p=this.elementFocusedBeforeModalWasOpened;if(p&&"function"==typeof p.focus){const v=this.document.activeElement,E=this.elementRef.nativeElement;(!v||v===this.document.body||v===E||E.contains(v))&&p.focus()}}static#e=this.\u0275fac=function(v){return new(v||u)(i.rXU(i.gRc),i.rXU(i.aKT),i.rXU(F.dS,8),i.rXU(b.qQ,8),i.rXU($.z,9))};static#n=this.\u0275cmp=i.VBU({type:u,selectors:[["nz-popconfirm"]],viewQuery:function(v,E){if(1&v&&(i.GBs(Y,5,i.aKT),i.GBs(Q,5,i.aKT)),2&v){let M;i.mGM(M=i.lsd())&&(E.okBtn=M),i.mGM(M=i.lsd())&&(E.cancelBtn=M)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[i.Vt3,i.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(v,E){if(1&v){const M=i.RV6();i.DNE(0,H,17,20,"ng-template",3,0,i.C5r),i.bIt("overlayOutsideClick",function(W){return i.eBV(M),i.Njj(E.onClickOutside(W))})("detach",function(){return i.eBV(M),i.Njj(E.hide())})("positionChange",function(W){return i.eBV(M),i.Njj(E.onPositionChange(W))})}2&v&&i.Y8G("cdkConnectedOverlayHasBackdrop",E.nzBackdrop)("cdkConnectedOverlayOrigin",E.origin)("cdkConnectedOverlayPositions",E._positions)("cdkConnectedOverlayOpen",E._visible)("cdkConnectedOverlayPush",E.cdkConnectedOverlayPush)("nzArrowPointAtCenter",E.nzArrowPointAtCenter)},dependencies:[h.z_,h.WB,V.$_,V.vT,a.Pd,a.kB,b.YU,b.B3,$.z,T.C,T.m,R.Y3,R.Dn,S.Zw,S.aO,U.c,L.p,y.bP,y.Vc],encapsulation:2,data:{animation:[w.uX]},changeDetection:0})}return u})(),te=(()=>{class u{static#e=this.\u0275fac=function(v){return new(v||u)};static#n=this.\u0275mod=i.$C({type:u});static#t=this.\u0275inj=i.G2t({imports:[J]})}return u})()},75699:(ee,B,s)=>{s.d(B,{T:()=>$,s:()=>G});var z=s(15215),a=s(60177),h=s(54438),b=s(45286),i=s(7605),k=s(26006),O=s(70317),j=s(72544),D=s(28203);const S=["*"];function w(T,V){if(1&T){const f=h.RV6();h.j41(0,"span",1),h.bIt("click",function(R){h.eBV(f);const x=h.XpG();return h.Njj(x.closeTag(R))}),h.k0s()}}let G=(()=>{class T{constructor(f,y,R,x){this.cdr=f,this.renderer=y,this.elementRef=R,this.directionality=x,this.isPresetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzBordered=!0,this.nzOnClose=new h.bkB,this.nzCheckedChange=new h.bkB,this.dir="ltr",this.destroy$=new b.B7}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked))}closeTag(f){this.nzOnClose.emit(f),f.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}clearPresetColor(){const f=this.elementRef.nativeElement,y=new RegExp(`(ant-tag-(?:${[...k.un,...k.PA].join("|")}))`,"g"),R=f.classList.toString(),x=[];let F=y.exec(R);for(;null!==F;)x.push(F[1]),F=y.exec(R);f.classList.remove(...x)}setPresetColor(){const f=this.elementRef.nativeElement;this.clearPresetColor(),this.isPresetColor=!!this.nzColor&&((0,k.nP)(this.nzColor)||(0,k.uP)(this.nzColor)),this.isPresetColor&&f.classList.add(`ant-tag-${this.nzColor}`)}ngOnInit(){this.directionality.change?.pipe((0,i.Q)(this.destroy$)).subscribe(f=>{this.dir=f,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(f){const{nzColor:y}=f;y&&this.setPresetColor()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(y){return new(y||T)(h.rXU(h.gRc),h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(D.dS,8))};static#n=this.\u0275cmp=h.VBU({type:T,selectors:[["nz-tag"]],hostAttrs:[1,"ant-tag"],hostVars:12,hostBindings:function(y,R){1&y&&h.bIt("click",function(){return R.updateCheckedStatus()}),2&y&&(h.xc7("background-color",R.isPresetColor?"":R.nzColor),h.AVh("ant-tag-has-color",R.nzColor&&!R.isPresetColor)("ant-tag-checkable","checkable"===R.nzMode)("ant-tag-checkable-checked",R.nzChecked)("ant-tag-rtl","rtl"===R.dir)("ant-tag-borderless",!R.nzBordered))},inputs:{nzMode:"nzMode",nzColor:"nzColor",nzChecked:"nzChecked",nzBordered:"nzBordered"},outputs:{nzOnClose:"nzOnClose",nzCheckedChange:"nzCheckedChange"},exportAs:["nzTag"],standalone:!0,features:[h.OA$,h.aNF],ngContentSelectors:S,decls:2,vars:1,consts:[["nz-icon","","nzType","close","class","ant-tag-close-icon","tabindex","-1",3,"click",4,"ngIf"],["nz-icon","","nzType","close","tabindex","-1",1,"ant-tag-close-icon",3,"click"]],template:function(y,R){1&y&&(h.NAR(),h.SdG(0),h.DNE(1,w,1,0,"span",0)),2&y&&(h.R7$(),h.Y8G("ngIf","closeable"===R.nzMode))},dependencies:[j.Y3,j.Dn,a.bT],encapsulation:2,changeDetection:0})}return(0,z.Cg)([(0,O.H3)()],T.prototype,"nzChecked",void 0),(0,z.Cg)([(0,O.H3)()],T.prototype,"nzBordered",void 0),T})(),$=(()=>{class T{static#e=this.\u0275fac=function(y){return new(y||T)};static#n=this.\u0275mod=h.$C({type:T});static#t=this.\u0275inj=h.G2t({imports:[G]})}return T})()}}]);