"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[4363],{4363:(X,F,s)=>{s.r(F),s.d(F,{IqcModule:()=>He});var f=s(60177),l=s(50513),h=s(72544),x=s(97685),k=s(46661),e=s(54438);let I=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-iqc-menu"]],standalone:!0,features:[e.aNF],decls:2,vars:0,template:function(o,n){1&o&&(e.j41(0,"p"),e.EFF(1,"iqc-menu works!"),e.k0s())}})}return a})();var E=s(12673),M=s(71451),D=s(92887),y=s(2578);class G{}var S=s(45794),b=s(45312),B=s(21626);let C=(()=>{class a{constructor(t){this.httpClient=t,this.baseUrl=b.c.baseUrl}getIqcRequests(t){return this.httpClient.post(`${this.baseUrl}/IQC/IqcRequests`,t)}getIqcRequest(t){return this.httpClient.get(`${this.baseUrl}/IQC/IqcRequest/${t}`)}getSlipNo(){return this.httpClient.get(`${this.baseUrl}/IQC/SlipNo`)}createIqcRequest(t){return this.httpClient.post(`${this.baseUrl}/IQC/IqcRequest`,t)}updateIqcRequest(t){return this.httpClient.put(`${this.baseUrl}/IQC/IqcRequest`,t)}getIqcResults(t){return this.httpClient.get(`${this.baseUrl}/IQC/IqcResults?requestNo=${t}`)}getIqcLevelOfControls(){return this.httpClient.get(`${this.baseUrl}/IQC/IqcLevelOfControls`)}evaluateLotNos(t){return this.httpClient.post(`${this.baseUrl}/IQC/EvaluateLotNos`,t)}getLotsInventory(){return this.httpClient.get(`${this.baseUrl}/IQC/InventoryLots`)}prepareDataCreateRequest(t){return this.httpClient.post(`${this.baseUrl}/IQC/PrepareDataCreateRequest`,t)}getHistoryLevelOfControls(t){return this.httpClient.get(`${this.baseUrl}/IQC/HistoryLevelOfControls?model=${t}`)}exportExcel(t,o){return this.httpClient.post(`${this.baseUrl}/IQC/ExportExcel?type=${o}`,t,{responseType:"blob"})}previewRequestDetail(t,o){return this.httpClient.post(`${this.baseUrl}/IQC/ExportExcel?type=${o}`,t)}viewGuide(t){return this.httpClient.post(`${this.baseUrl}/IQC/ViewGuide`,t,{responseType:"arraybuffer"})}setCheckSample(t,o){return this.httpClient.patch(`${this.baseUrl}/IQC/IqcResult/${t}/SetCheckSample`,o)}static#e=this.\u0275fac=function(o){return new(o||a)(e.KVO(B.Qq))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var q=s(37736),_=s(89417),z=s(33514),j=s(28663),N=s(27380),d=s(31837),O=s(16389),w=s(25930),A=s(35154),c=s(43053),v=s(23359),u=s(1997),p=s(21011);const g=()=>[10,25,50,100],T=()=>[""];function $(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openIqcRequestOutSideModal())}),e.nrm(1,"span",37),e.EFF(2," IQC REQUEST (OUTSIDE) "),e.k0s()}2&a&&e.Y8G("nzTooltipTitle","T\u1ea1o request IQC cho h\xe0ng mua ngo\xe0i")("nzTooltipColor","blue")}function P(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.redirectIqcReCheck())}),e.nrm(1,"span",37),e.EFF(2," IQC REQUEST (RECHECK) "),e.k0s()}2&a&&e.Y8G("nzTooltipTitle","T\u1ea1o request IQC cho h\xe0ng SORTING ho\u1eb7c Re-Check (H\xe0ng qu\xe1 6 th\xe1ng)")("nzTooltipColor","blue")}function ee(a,m){if(1&a){const t=e.RV6();e.j41(0,"dx-date-range-box",38),e.mxI("valueChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.searchParams.dateRange,n)||(i.searchParams.dateRange=n),e.Njj(n)})("startDateChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.searchParams.dateRange[0],n)||(i.searchParams.dateRange[0]=n),e.Njj(n)})("endDateChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.searchParams.dateRange[1],n)||(i.searchParams.dateRange[1]=n),e.Njj(n)}),e.k0s()}if(2&a){const t=e.XpG();e.R50("value",t.searchParams.dateRange)("startDate",t.searchParams.dateRange[0])("endDate",t.searchParams.dateRange[1]),e.Y8G("displayFormat","yyyy/MM/dd")}}function te(a,m){if(1&a){const t=e.RV6();e.j41(0,"dx-button",39),e.bIt("onClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.getIqcRequests())}),e.k0s()}}function ne(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",40)(1,"a",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openIqcRequestDetailModal(n.data))}),e.nrm(2,"span",42),e.k0s()()}}function oe(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,i=e.XpG();return e.Njj(i.handleRequest(n.data))}),e.EFF(1," Ti\u1ebfp nh\u1eadn "),e.k0s()}}function ie(a,m){if(1&a){const t=e.RV6();e.j41(0,"a",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,i=e.XpG();return e.Njj(i.redirectIqcDetail(n.data))}),e.EFF(1,"\u0110\xe1nh gi\xe1"),e.k0s()}}function ae(a,m){if(1&a&&(e.j41(0,"div",40),e.DNE(1,oe,2,0,"button",43)(2,ie,2,0,"a",44),e.k0s()),2&a){const t=m.$implicit;e.R7$(),e.Y8G("ngIf",1==t.data.status),e.R7$(),e.Y8G("ngIf",1!=t.data.status)}}function le(a,m){if(1&a&&e.nrm(0,"nz-option",55),2&a){const t=m.$implicit;e.Y8G("nzValue",t.invoice)("nzLabel",t.invoice)}}function se(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",47)(2,"tbody")(3,"tr")(4,"td",48),e.EFF(5," Slip No "),e.j41(6,"span",49),e.EFF(7,"*"),e.k0s()(),e.j41(8,"td")(9,"input",50),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.iqcRequest.slipNo,n)||(i.iqcRequest.slipNo=n),e.Njj(n)}),e.k0s()()(),e.j41(10,"tr")(11,"td",48),e.EFF(12," Invoice "),e.j41(13,"span",49),e.EFF(14,"*"),e.k0s()(),e.j41(15,"td")(16,"nz-select",51),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.iqcRequest.invoice,n)||(i.iqcRequest.invoice=n),e.Njj(n)}),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectInvoice(n))}),e.DNE(17,le,1,2,"nz-option",52),e.k0s()()(),e.j41(18,"tr")(19,"td",48),e.EFF(20," Supplier "),e.j41(21,"span",49),e.EFF(22,"*"),e.k0s()(),e.j41(23,"td")(24,"input",53),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.iqcRequest.supplier,n)||(i.iqcRequest.supplier=n),e.Njj(n)}),e.k0s()()(),e.j41(25,"tr")(26,"td",48),e.EFF(27,"Ghi ch\xfa"),e.k0s(),e.j41(28,"td")(29,"input",54),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.iqcRequest.remark,n)||(i.iqcRequest.remark=n),e.Njj(n)}),e.k0s()()()()(),e.bVm()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(7,T))("nzFrontPagination",!1),e.R7$(8),e.R50("ngModel",t.iqcRequest.slipNo),e.R7$(7),e.R50("ngModel",t.iqcRequest.invoice),e.R7$(),e.Y8G("ngForOf",t.purWhRecordDtos),e.R7$(7),e.R50("ngModel",t.iqcRequest.supplier),e.R7$(5),e.R50("ngModel",t.iqcRequest.remark)}}function re(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isOpenIqcRequestOutSideModal=!1)}),e.EFF(1," Close "),e.k0s(),e.j41(2,"button",56),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createIqcRequestOutSide())}),e.EFF(3," T\u1ea1o request "),e.k0s()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("nzLoading",t.isLoading)}}function ce(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"dx-data-grid",57,3),e.bIt("onExporting",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.onExportClient(n))})("onCellPrepared",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.onCellPreparedIqcDataGrid(n))}),e.nrm(3,"dxo-grouping",58)(4,"dxo-column-chooser",5,1)(6,"dxo-load-panel",15)(7,"dxo-export",15)(8,"dxo-filter-row",14)(9,"dxo-header-filter",14),e.j41(10,"dxi-column",59)(11,"dxo-header-filter",60),e.nrm(12,"dxo-search",15),e.k0s()(),e.j41(13,"dxi-column",61)(14,"dxo-header-filter",60),e.nrm(15,"dxo-search",15),e.k0s()(),e.nrm(16,"dxi-column",62),e.j41(17,"dxi-column",63),e.nrm(18,"dxi-column",64)(19,"dxi-column",65)(20,"dxi-column",66),e.k0s(),e.j41(21,"dxi-column",67),e.nrm(22,"dxi-column",68)(23,"dxi-column",69),e.k0s(),e.nrm(24,"dxi-column",70)(25,"dxi-column",71)(26,"dxi-column",72)(27,"dxo-paging",30)(28,"dxo-pager",31),e.k0s(),e.bVm()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("dataSource",t.iqcResults)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("autoExpandAll",t.expandAll),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("enabled",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(33,g))}}let ue=(()=>{class a{constructor(t,o,n,i){this.toastr=t,this.iqcSvc=o,this.jwtHelperSvc=n,this.router=i,this.iqcRequest=new G,this.isOpenIqcRequestOutSideModal=!1,this.isOpenIqcRequestDetailModal=!1,this.expandAll=!0,this.isLoading=!1,this.searchParams={dateRange:[new Date,new Date]},this.jwt=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString())}ngAfterViewInit(){const t=new Date((new Date).setMonth((new Date).getMonth()-1));this.searchParams.dateRange=[t,new Date],this.getIqcRequests(),this.getSlipNo()}ngOnInit(){}getIqcRequests(){this.iqcRequestGrid?.instance.beginCustomLoading("\u0110ang load d\u1eef li\u1ec7u ..."),this.iqcSvc.getIqcRequests(this.searchParams).subscribe(t=>{this.iqcRequests=t.result,this.iqcRequestGrid.instance.endCustomLoading()})}getSlipNo(){this.iqcSvc.getSlipNo().subscribe(t=>{this.purWhRecordDtos=t.result})}openIqcRequestOutSideModal(){this.jwt.Roles.includes("Pur WH 1")?(this.iqcRequest=new G,this.isOpenIqcRequestOutSideModal=!0):this.toastr.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec3n t\u1ea1o Request","Warning")}redirectIqcReCheck(){this.jwt.Roles.includes("Pur WH 1")?this.router.navigate(["/admin/iqc/re-check"]):this.toastr.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec3n t\u1ea1o Request","Warning")}onSelectInvoice(t){const o=this.purWhRecordDtos.find(n=>n.invoice===t);o?this.iqcRequest.slipNo=o.slipNo:this.toastr.warning(`Kh\xf4ng t\xecm th\u1ea5y RequestNo t\u01b0\u01a1ng \u1ee9ng v\u1edbi Invoice ${t}`,"Warning")}createIqcRequestOutSide(){if(!this.iqcRequest.invoice||!this.iqcRequest.supplier)return void this.toastr.warning("C\u1ea7n nh\u1eadp \u0111\u1ee7 th\xf4ng tin","Warning");this.isLoading=!0;let t=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username,o=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).UserId;this.iqcRequest.type="N",this.iqcRequest.status=1,this.iqcRequest.requestedBy=t,this.iqcRequest.requestedById=o,console.log(this.iqcRequest),this.iqcSvc.createIqcRequest(this.iqcRequest).subscribe(n=>{this.toastr.success("T\u1ea1o th\xe0nh c\xf4ng","Success"),this.isOpenIqcRequestOutSideModal=!1,this.isLoading=!1,this.getIqcRequests()},n=>{this.isLoading=!1,this.isOpenIqcRequestOutSideModal=!1})}openIqcRequestDetailModal(t){this.iqcResults=[],this.iqcRequest=t,this.isOpenIqcRequestDetailModal=!0,this.iqcDataGrid?.instance.beginCustomLoading("\u0110ang load d\u1eef li\u1ec7u ..."),this.iqcSvc.previewRequestDetail(this.iqcRequest,"group").subscribe(o=>{this.iqcResults=o.result,this.iqcDataGrid.instance.endCustomLoading()})}toggleExpandAll(){this.expandAll=!this.expandAll,this.iqcDataGrid.instance.clearGrouping()}onExportClient(t){console.log(t);const o=new D.Workbook,n=o.addWorksheet("Main sheet");(0,M.V)({component:t.component,worksheet:n}).then(function(){o.xlsx.writeBuffer().then(function(i){y(new Blob([i],{type:"application/octet-stream"}),"IQC-DATA.xlsx")})})}handleRequest(t){let o=this.jwt.Roles;if(o.includes("PIH QA 2")||o.includes("PIH QA-IQC")){if("O"==t.classParam||null==t.classParam){let n={...t};return n.status=2,void this.iqcSvc.updateIqcRequest(n).subscribe(i=>{this.getIqcRequests()})}this.toastr.warning("Ch\u1ec9 \u0111\xe1nh gi\xe1 IQC cho h\xe0ng OUTSIDE","Warining")}else this.toastr.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp","Warning")}redirectIqcDetail(t){let o=this.jwt.Roles;o.includes("PIH QA 2")||o.includes("PIH QA-IQC")?this.router.navigate(["admin/iqc/request",t.requestNo]):this.toastr.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp","Warning")}onCellPreparedIqcRequestGrid(t){if("data"===t.rowType&&"statusName"===t.column.dataField){const o=t.row.data.status;1===o?t.cellElement.style.color="red":2===o?t.cellElement.style.color="green":3===o&&(t.cellElement.style.color="blue")}}onCellPreparedIqcDataGrid(t){"data"===t.rowType&&("result1"===t.column.dataField||"result2"===t.column.dataField||"result3"===t.column.dataField)&&("OK"===t.value&&(t.cellElement.style.color="green"),"NG"===t.value&&(t.cellElement.style.color="red"))}viewGuide(){this.iqcSvc.viewGuide({}).subscribe(t=>{let o=new Blob([t],{type:"application/pdf"});var n=URL.createObjectURL(o);window.open(n)})}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(S.tw),e.rXU(C),e.rXU(q.X7),e.rXU(k.Ix))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-iqc-request"]],viewQuery:function(o,n){if(1&o&&(e.GBs(E.s,5),e.GBs(E.s,5)),2&o){let i;e.mGM(i=e.lsd())&&(n.iqcRequestGrid=i.first),e.mGM(i=e.lsd())&&(n.iqcDataGrid=i.first)}},decls:43,vars:35,consts:[["iqcRequestGrid",""],["columnChooser",""],["iqcRequestDetailModal",""],["iqcDataGrid",""],["keyExpr","id",3,"onCellPrepared","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled","mode","title"],["location","before",2,"margin-bottom","-15px"],["nz-button","","nzType","default","nz-tooltip","",3,"nzTooltipTitle","nzTooltipColor","click",4,"nzSpaceItem"],["location","after"],["startDateLabel","Ng\xe0y b\u1eaft \u0111\u1ea7u","endDateLabel","Ng\xe0y k\u1ebft th\xfac","style","margin-bottom: 8px; margin-right: -8px;",3,"value","startDate","endDate","displayFormat","valueChange","startDateChange","endDateChange",4,"nzSpaceItem"],["icon","search","style","margin-bottom: -28px;",3,"onClick",4,"nzSpaceItem"],["name","exportButton","location","after",2,"margin-top","8px"],["name","columnChooserButton","location","after",2,"margin-top","8px"],["icon","sun",3,"onClick"],[3,"visible"],[3,"enabled"],["caption","","cellTemplate","previewTemplate","fixedPosition","left",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["dataField","requestNo","caption","Request No",3,"visible"],["dataField","slipNo","caption","SlipNo",3,"visible"],["dataField","invoice","caption","Invoice",3,"visible"],["dataField","supplier","caption","Supplier",3,"visible"],["dataField","status","caption","Status Code",3,"visible"],["dataField","statusName","caption","Status",3,"visible"],["dataField","requestedByName","caption","Ng\u01b0\u1eddi t\u1ea1o",3,"visible"],["dataField","createdAt","caption","Ng\xe0y t\u1ea1o","dataType","date","format","yyyy-MM-dd HH:mm",3,"visible"],["dataField","type","caption","Type",3,"visible"],["dataField","classParam","caption","Class",3,"visible"],["dataField","remark","caption","Ghi ch\xfa",3,"visible"],["caption","Action","cellTemplate","actionTemplate","fixedPosition","right",3,"fixed"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","T\u1ea1o request IQC (OUTSIDE)",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[3,"nzModalFooter"],["nzWidth","100%",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],["nz-button","","nzType","default","nz-tooltip","",3,"click","nzTooltipTitle","nzTooltipColor"],["nz-icon","","nzType","plus"],["startDateLabel","Ng\xe0y b\u1eaft \u0111\u1ea7u","endDateLabel","Ng\xe0y k\u1ebft th\xfac",2,"margin-bottom","8px","margin-right","-8px",3,"valueChange","startDateChange","endDateChange","value","startDate","endDate","displayFormat"],["icon","search",2,"margin-bottom","-28px",3,"onClick"],[2,"text-align","center"],[3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"],["nz-button","","nzType","default",3,"click",4,"ngIf"],["nz-button","","nzType","link",3,"click",4,"ngIf"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","link",3,"click"],["nzBordered","","nzSize","small",3,"nzData","nzFrontPagination"],[2,"font-weight","bold"],[2,"color","red"],["nz-input","","readonly","",3,"ngModelChange","ngModel"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","M\xe3 Invoice",2,"width","100%",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nz-input","","placeholder","Nh\xe0 cung c\u1ea5p",3,"ngModelChange","ngModel"],["nz-input","","placeholder","Ghi ch\xfa",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],["nz-button","","nzType","primary",3,"click","nzLoading"],["keyExpr","id",3,"onExporting","onCellPrepared","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"autoExpandAll"],["dataField","model","caption","Model",3,"visible"],[3,"allowSelectAll"],["dataField","lotGroup","caption","Lot Group",3,"visible"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["caption","K\u1ebft qu\u1ea3 IQC"],["dataField","result1","caption","Ngo\u1ea1i Quan",3,"visible"],["dataField","result2","caption","K\xedch th\u01b0\u1edbc",3,"visible"],["dataField","result3","caption","GP",3,"visible"],["caption","M\u1ee9c ki\u1ec3m so\xe1t"],["dataField","levelOfControl1","caption","Ngo\u1ea1i Quan",3,"visible"],["dataField","levelOfControl2","caption","K\xedch th\u01b0\u1edbc",3,"visible"],["dataField","checkDate","caption","Ng\xe0y \u0111\xe1nh gi\xe1","dataType","date","format","yyyy-MM-dd",3,"visible"],["dataField","checkUserName","caption","Ng\u01b0\u1eddi \u0111\xe1nh gi\xe1",3,"visible"],["dataField","remark","caption","Remark",3,"visible"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"dx-data-grid",4,0),e.bIt("onCellPrepared",function(r){return e.eBV(i),e.Njj(n.onCellPreparedIqcRequestGrid(r))}),e.nrm(2,"dxo-column-chooser",5,1),e.j41(4,"dxo-toolbar")(5,"dxi-item",6)(6,"nz-space"),e.DNE(7,$,3,2,"button",7)(8,P,3,2,"button",7),e.k0s()(),e.j41(9,"dxi-item",8)(10,"nz-space"),e.DNE(11,ee,1,4,"dx-date-range-box",9)(12,te,1,0,"dx-button",10),e.k0s()(),e.nrm(13,"dxi-item",11)(14,"dxi-item",12),e.j41(15,"dxi-item",8)(16,"dx-button",13),e.bIt("onClick",function(){return e.eBV(i),e.Njj(n.viewGuide())}),e.k0s()()(),e.nrm(17,"dxo-header-filter",14)(18,"dxo-filter-row",14)(19,"dxo-export",15)(20,"dxi-column",16),e.DNE(21,ne,3,0,"div",17),e.nrm(22,"dxi-column",18)(23,"dxi-column",19)(24,"dxi-column",20)(25,"dxi-column",21)(26,"dxi-column",22)(27,"dxi-column",23)(28,"dxi-column",24)(29,"dxi-column",25)(30,"dxi-column",26)(31,"dxi-column",27)(32,"dxi-column",28)(33,"dxi-column",29),e.DNE(34,ae,3,2,"div",17),e.nrm(35,"dxo-paging",30)(36,"dxo-pager",31),e.k0s(),e.j41(37,"nz-modal",32),e.mxI("nzVisibleChange",function(r){return e.eBV(i),e.DH7(n.isOpenIqcRequestOutSideModal,r)||(n.isOpenIqcRequestOutSideModal=r),e.Njj(r)}),e.DNE(38,se,30,8,"ng-container",33)(39,re,4,1,"ng-template",34),e.k0s(),e.j41(40,"nz-modal",35,2),e.mxI("nzVisibleChange",function(r){return e.eBV(i),e.DH7(n.isOpenIqcRequestDetailModal,r)||(n.isOpenIqcRequestDetailModal=r),e.Njj(r)}),e.bIt("nzOnCancel",function(){return e.eBV(i),e.Njj(n.isOpenIqcRequestDetailModal=!1)})("nzOnOk",function(){return e.eBV(i),e.Njj(n.isOpenIqcRequestDetailModal=!1)}),e.DNE(42,ce,29,34,"ng-container",33),e.k0s()}2&o&&(e.Y8G("dataSource",n.iqcRequests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(15),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","previewTemplate"),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!1),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(34,g)),e.R7$(),e.R50("nzVisible",n.isOpenIqcRequestOutSideModal),e.R7$(3),e.R50("nzVisible",n.isOpenIqcRequestDetailModal),e.Y8G("nzTitle","RequestNo: "+n.iqcRequest.requestNo))},dependencies:[f.Sq,f.bT,_.me,_.BC,_.vS,z.e,N.eC,E.s,d.i2Q,d.ZWy,d.nj_,d.gtJ,d.CVf,d.ZJU,d.FTx,d.UYU,d.xzc,d.sVQ,d.PVd,d.KOr,x.U5,x.Dq,l.aO,O.c,w.p,h.Dn,A.LH,c.F2,c.Oj,c.A9,v.CP,v.SO,v.aj,v.kt,u.ld,u.WI,p.Sy,j.e],styles:["#expand[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return a})();class Q{}var W=s(53281),K=s(29462),Y=s(33190),V=s(74696),L=s(97529),J=s(2986);const de=["iqcDataGrid"],pe=()=>[10,25,50,100],he=()=>[""];function me(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openEvaluateModal())}),e.nrm(1,"span",52),e.EFF(2," \u0110\xe1nh gi\xe1 "),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("disabled",!(null!=t.selectedRows&&t.selectedRows.length))}}function _e(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",53),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openLevelOfControlModal())}),e.nrm(1,"span",54),e.EFF(2," M\u1ee9c ki\u1ec3m so\xe1t "),e.k0s()}}function ge(a,m){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"dx-button",55),e.bIt("onClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.resetFiltersAndSorting())}),e.k0s()()}}function Ce(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",56)(1,"label",57),e.mxI("ngModelChange",function(n){const i=e.eBV(t).$implicit;return e.DH7(i.data.checkSample,n)||(i.data.checkSample=n),e.Njj(n)}),e.bIt("ngModelChange",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.setCheckSample(n))}),e.k0s()()}if(2&a){const t=m.$implicit;e.R7$(),e.R50("ngModel",t.data.checkSample)}}function Re(a,m){if(1&a&&e.nrm(0,"nz-option",69),2&a){const t=m.$implicit;e.Y8G("nzValue",t.name)("nzLabel",t.name)}}function qe(a,m){if(1&a&&e.nrm(0,"nz-option",69),2&a){const t=m.$implicit;e.Y8G("nzValue",t.name)("nzLabel",t.name)}}function be(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",58)(2,"tbody")(3,"tr")(4,"td")(5,"label"),e.EFF(6,"S\u1ed1 ki\u1ec7n"),e.k0s()(),e.j41(7,"td",59),e.EFF(8),e.k0s()(),e.j41(9,"tr")(10,"td")(11,"label"),e.EFF(12,"Ngo\u1ea1i quan"),e.k0s()(),e.j41(13,"td")(14,"nz-radio-group",60),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.evaluateData.result1,n)||(i.evaluateData.result1=n),e.Njj(n)}),e.j41(15,"label",61),e.EFF(16,"OK"),e.k0s(),e.j41(17,"label",62),e.EFF(18,"NG"),e.k0s(),e.j41(19,"label",63),e.EFF(20,"CA"),e.k0s(),e.j41(21,"label",64),e.EFF(22,"NA"),e.k0s()()(),e.j41(23,"td")(24,"label"),e.EFF(25,"M\u1ee9c ki\u1ec3m so\xe1t"),e.k0s()(),e.j41(26,"td")(27,"nz-select",65),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.evaluateData.levelOfControl1,n)||(i.evaluateData.levelOfControl1=n),e.Njj(n)}),e.DNE(28,Re,1,2,"nz-option",66),e.k0s()()(),e.j41(29,"tr")(30,"td")(31,"label"),e.EFF(32,"K\xedch th\u01b0\u1edbc"),e.k0s()(),e.j41(33,"td")(34,"nz-radio-group",60),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.evaluateData.result2,n)||(i.evaluateData.result2=n),e.Njj(n)}),e.j41(35,"label",61),e.EFF(36,"OK"),e.k0s(),e.j41(37,"label",62),e.EFF(38,"NG"),e.k0s(),e.j41(39,"label",63),e.EFF(40,"CA"),e.k0s(),e.j41(41,"label",64),e.EFF(42,"NA"),e.k0s()()(),e.j41(43,"td")(44,"label"),e.EFF(45,"M\u1ee9c ki\u1ec3m so\xe1t"),e.k0s()(),e.j41(46,"td")(47,"nz-select",67),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.evaluateData.levelOfControl2,n)||(i.evaluateData.levelOfControl2=n),e.Njj(n)}),e.DNE(48,qe,1,2,"nz-option",66),e.k0s()()(),e.j41(49,"tr")(50,"td")(51,"label"),e.EFF(52,"GP"),e.k0s()(),e.j41(53,"td",59)(54,"nz-radio-group",60),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.evaluateData.result3,n)||(i.evaluateData.result3=n),e.Njj(n)}),e.j41(55,"label",61),e.EFF(56,"OK"),e.k0s(),e.j41(57,"label",62),e.EFF(58,"NG"),e.k0s(),e.j41(59,"label",63),e.EFF(60,"CA"),e.k0s(),e.j41(61,"label",64),e.EFF(62,"NA"),e.k0s()()()(),e.j41(63,"tr")(64,"td")(65,"label"),e.EFF(66,"Th\xf4ng tin "),e.nrm(67,"br"),e.EFF(68,"NG ho\u1eb7c CA"),e.k0s()(),e.j41(69,"td",59)(70,"textarea",68),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.evaluateData.remark,n)||(i.evaluateData.remark=n),e.Njj(n)}),e.k0s()()()()(),e.bVm()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("nzBordered",!0)("nzData",e.lJ4(15,he))("nzFrontPagination",!1),e.R7$(7),e.JRh(t.selectedRows.length),e.R7$(6),e.R50("ngModel",t.evaluateData.result1),e.R7$(7),e.Y8G("nzTooltipColor","cyan"),e.R7$(6),e.R50("ngModel",t.evaluateData.levelOfControl1),e.R7$(),e.Y8G("ngForOf",t.iqcLevelOfControls),e.R7$(6),e.R50("ngModel",t.evaluateData.result2),e.R7$(7),e.Y8G("nzTooltipColor","cyan"),e.R7$(6),e.R50("ngModel",t.evaluateData.levelOfControl2),e.R7$(),e.Y8G("ngForOf",t.iqcLevelOfControls),e.R7$(6),e.R50("ngModel",t.evaluateData.result3),e.R7$(7),e.Y8G("nzTooltipColor","cyan"),e.R7$(9),e.R50("ngModel",t.evaluateData.remark)}}function ve(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",70),e.EFF(1," X\xf3a d\u1eef li\u1ec7u "),e.k0s(),e.j41(2,"button",53),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeEvaluateModal())}),e.EFF(3," \u0110\xf3ng "),e.k0s(),e.j41(4,"button",71),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveEvaluateData())}),e.EFF(5," L\u01b0u "),e.k0s()}if(2&a){const t=e.XpG();e.R7$(4),e.Y8G("nzLoading",t.isLoading)}}function fe(a,m){if(1&a){const t=e.RV6();e.j41(0,"span",77),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getHistoryLevelOfControls())}),e.k0s()}}function ze(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.levelOfControl1),e.R7$(2),e.JRh(t.levelOfControl2),e.R7$(2),e.JRh(e.i5U(7,4,t.updatedAt,"yyyy-MM-dd HH:mm")),e.R7$(3),e.JRh(t.checkUser)}}function xe(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"table",72)(2,"tr")(3,"th"),e.EFF(4,"Model"),e.k0s(),e.j41(5,"th")(6,"nz-input-group",73)(7,"input",74),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.searchParam.model,n)||(i.searchParam.model=n),e.Njj(n)}),e.k0s()(),e.DNE(8,fe,1,0,"ng-template",null,2,e.C5r),e.k0s()()(),e.nrm(10,"br"),e.j41(11,"nz-table",75,3)(13,"thead")(14,"tr")(15,"th"),e.EFF(16,"Ki\u1ec3m so\xe1t ngo\u1ea1i quan"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Ki\u1ec3m so\xe1t k\xedch th\u01b0\u1edbc"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Ng\xe0y \u0111\xe1nh gi\xe1"),e.k0s(),e.j41(21,"th"),e.EFF(22,"Ng\u01b0\u1eddi \u0111\xe1nh gi\xe1"),e.k0s()()(),e.j41(23,"tbody"),e.DNE(24,ze,10,7,"tr",76),e.k0s()(),e.bVm()}if(2&a){const t=e.sdS(9),o=e.sdS(12),n=e.XpG();e.R7$(6),e.Y8G("nzSuffix",t),e.R7$(),e.R50("ngModel",n.searchParam.model),e.R7$(4),e.Y8G("nzData",n.historyLevelOfControls),e.R7$(13),e.Y8G("ngForOf",o.data)}}function Ee(a,m){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"button",53),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isOpenLevelOfControlModal=!1)}),e.EFF(2," \u0110\xf3ng "),e.k0s()()}}let Ie=(()=>{class a{constructor(t,o,n,i){this.toastr=t,this.iqcSvc=o,this.jwtHelperSvc=n,this.activatedRoute=i,this.isOpenEvaluateModal=!1,this.iqcRequest=new G,this.evaluateData=new Q,this.isLoading=!1,this.isOpenLevelOfControlModal=!1,this.isChecked=!1}ngAfterViewInit(){this.getIqcRequest(),this.getIqcResults(),this.getIqcLevelOfControls()}ngOnInit(){}getIqcRequest(){let t=this.activatedRoute.snapshot.paramMap.get("requestNo")??"";this.iqcSvc.getIqcRequest(t).subscribe(o=>{this.iqcRequest=o.result,this.isChecked=3==this.iqcRequest.status})}getIqcResults(){this.iqcDataGrid?.instance.beginCustomLoading("\u0110ang load d\u1eef li\u1ec7u ...");let t=this.activatedRoute.snapshot.paramMap.get("requestNo")??"";this.iqcSvc.getIqcResults(t).subscribe(o=>{console.log("AAA: ",o),this.iqcResults=o.result,this.iqcDataGrid.instance.endCustomLoading()})}onSelectionChanged(t){this.selectedRows=t.selectedRowsData}openEvaluateModal(){this.evaluateData=new Q,console.log("openEvaluateModal: ",this.selectedRows),this.isOpenEvaluateModal=!0}closeEvaluateModal(){this.resetFiltersAndSorting(),this.isOpenEvaluateModal=!1}resetFiltersAndSorting(){this.iqcDataGrid.instance.clearFilter(),this.iqcDataGrid.instance.clearSorting(),this.iqcDataGrid.instance.clearSelection()}getIqcLevelOfControls(){this.iqcSvc.getIqcLevelOfControls().subscribe(t=>{this.iqcLevelOfControls=t.result})}getHistoryLevelOfControls(){this.iqcSvc.getHistoryLevelOfControls(this.searchParam.model).subscribe(t=>{this.historyLevelOfControls=t.result})}saveEvaluateData(){this.isLoading=!0;let t=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).UserId;for(const o of this.selectedRows)o.result1=this.evaluateData.result1,o.result2=this.evaluateData.result2,o.result3=this.evaluateData.result3,o.levelOfControl1=this.evaluateData.levelOfControl1,o.levelOfControl2=this.evaluateData.levelOfControl2,o.remark=this.evaluateData.remark,o.checkDate=new Date,o.date=new Date,o.checkUser=t;this.iqcSvc.evaluateLotNos(this.selectedRows).subscribe(o=>{this.isLoading=!1,this.isOpenEvaluateModal=!1,this.getIqcResults(),this.iqcDataGrid.instance.clearSelection()},o=>{this.isLoading=!1,this.isOpenEvaluateModal=!1,this.getIqcResults()})}openLevelOfControlModal(){this.searchParam={},this.isOpenLevelOfControlModal=!0}onExportClient(t){this.iqcSvc.exportExcel(this.iqcRequest,"export").subscribe(o=>{const n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(n),R=document.createElement("a");R.href=i,R.download=`${this.iqcRequest.requestNo}.xlsx`,R.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(i),R.remove()},100)})}updateStatusRequest(t){console.log(t),this.iqcRequest.status=!0===t?3:2;let o={...this.iqcRequest};this.iqcSvc.updateIqcRequest(o).subscribe(n=>{this.iqcRequest=n.result})}setCheckSample(t){console.log("setCheckSample: ",t.data),this.iqcSvc.setCheckSample(t.data.id,{checkSample:t.data.checkSample}).subscribe(n=>{this.toastr.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")},n=>{this.toastr.error(n,"C\xf3 l\u1ed7i")})}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(S.tw),e.rXU(C),e.rXU(q.X7),e.rXU(k.nX))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-iqc-request-detail"]],viewQuery:function(o,n){if(1&o&&e.GBs(de,5),2&o){let i;e.mGM(i=e.lsd())&&(n.iqcDataGrid=i.first)}},decls:63,vars:63,consts:[["iqcDataGrid",""],["columnChooser",""],["suffixIconSearch",""],["mucKiemSoatTbl",""],[3,"nzActive","nzShowArrow","nzHeader"],["nz-row","","nzJustify","start",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzLg","4"],["label","Invoice","labelLocation","left","showColonAfterLabel","true",3,"valueChange","labelMode","value","readOnly"],["label","Supplier","labelLocation","left","showColonAfterLabel","true",3,"valueChange","labelMode","value","readOnly"],["label","Ng\u01b0\u1eddi request","labelLocation","left","showColonAfterLabel","true",3,"valueChange","labelMode","value","readOnly"],["label","Ng\xe0y request","labelLocation","left","showColonAfterLabel","true",3,"valueChange","labelMode","value","readOnly","displayFormat"],["label","Tr\u1ea1ng th\xe1i","labelLocation","left","showColonAfterLabel","true",3,"valueChange","labelMode","value","readOnly"],["nz-row","","nzJustify","start",2,"margin-top","5px",3,"nzGutter"],["nz-checkbox","",2,"color","#007bff",3,"ngModelChange","ngModel"],["keyExpr","id",2,"margin-top","10px",3,"onSelectionChanged","onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["mode","multiple",3,"selectAllMode","showCheckBoxesMode"],[3,"visible"],[3,"enabled"],[3,"enabled","mode","title"],["location","before"],["nz-button","","nzType","primary",3,"disabled","click",4,"nzSpaceItem"],["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],["location","after"],[4,"dxTemplate"],["name","exportButton","location","after"],["name","columnChooserButton"],["dataField","model","caption","Model",3,"visible"],[3,"allowSelectAll"],["dataField","lotGroup","caption","Lot Group",3,"visible"],["dataField","lotNo","caption","LotNo",3,"visible"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["caption","K\u1ebft qu\u1ea3 IQC"],["dataField","result1","caption","Ngo\u1ea1i Quan",3,"visible"],["dataField","result2","caption","K\xedch th\u01b0\u1edbc",3,"visible"],["dataField","result3","caption","GP",3,"visible"],["caption","M\u1ee9c ki\u1ec3m so\xe1t"],["dataField","levelOfControl1","caption","Ngo\u1ea1i Quan",3,"visible"],["dataField","levelOfControl2","caption","K\xedch th\u01b0\u1edbc",3,"visible"],["dataField","checkDate","caption","Ng\xe0y \u0111\xe1nh gi\xe1","dataType","date","format","yyyy-MM-dd",3,"visible"],["dataField","date","caption","Ng\xe0y \u0111\xe1nh gi\xe1 (Date)","dataType","date","format","yyyy-MM-dd",3,"visible"],["dataField","checkUserName","caption","Ng\u01b0\u1eddi \u0111\xe1nh gi\xe1",3,"visible"],["dataField","remark","caption","Remark",3,"visible"],["caption","R\xfat m\u1eabu","cellTemplate","checkSampleTemplate","fixedPosition","right",3,"fixed"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzDraggable","","nzCentered","","nzTitle","\u0110\xe1nh gi\xe1 h\xe0ng lo\u1ea1t",3,"nzVisibleChange","nzVisible","nzWidth"],[4,"nzModalContent"],[3,"nzModalFooter"],["nzTitle","T\xecm m\u1ee9c \u0111\u1ed9 ki\u1ec3m so\xe1t","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalFooter"],["nz-button","","nzType","primary",3,"click","disabled"],["nz-icon","","nzType","check-circle","nzTheme","outline"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","control","nzTheme","outline"],["icon","refresh",3,"onClick"],[2,"text-align","center"],["nz-checkbox","",3,"ngModelChange","ngModel"],["nzSize","small",3,"nzBordered","nzData","nzFrontPagination"],["colspan","3"],[3,"ngModelChange","ngModel"],["nz-radio","","nzValue","OK",2,"color","green"],["nz-radio","","nzValue","NG",2,"color","red"],["nz-radio","","nzValue","CA",2,"color","blue"],["nz-radio","","nzValue","NA","nz-tooltip","","nzTooltipTitle","Tr\u01b0\u1eddng h\u1ee3p kh\xf4ng \u0111\xe1nh gi\xe1 th\xec ch\u1ecdn NA",2,"color","black",3,"nzTooltipColor"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","M\u1ee9c ki\u1ec3m so\xe1t ngo\u1ea1i quan",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","M\u1ee9c ki\u1ec3m so\xe1t k\xedch th\u01b0\u1edbc",3,"ngModelChange","ngModel"],["rows","3","nz-input","",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],["nz-button","","nzType","default","nzDanger","",2,"float","left"],["nz-button","","nzType","primary",3,"click","nzLoading"],["id","level-of-control-search",2,"width","100%"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Nh\u1eadp m\xe3 Model",3,"ngModelChange","ngModel"],["nzSize","small","nzBordered","",3,"nzData"],[4,"ngFor","ngForOf"],["nz-icon","","nzType","search",3,"click"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"nz-collapse")(1,"nz-collapse-panel",4)(2,"div",5)(3,"div",6)(4,"dx-text-box",7),e.mxI("valueChange",function(r){return e.eBV(i),e.DH7(n.iqcRequest.invoice,r)||(n.iqcRequest.invoice=r),e.Njj(r)}),e.k0s()(),e.j41(5,"div",6)(6,"dx-text-box",8),e.mxI("valueChange",function(r){return e.eBV(i),e.DH7(n.iqcRequest.supplier,r)||(n.iqcRequest.supplier=r),e.Njj(r)}),e.k0s()(),e.j41(7,"div",6)(8,"dx-text-box",9),e.mxI("valueChange",function(r){return e.eBV(i),e.DH7(n.iqcRequest.requestedByName,r)||(n.iqcRequest.requestedByName=r),e.Njj(r)}),e.k0s()(),e.j41(9,"div",6)(10,"dx-date-box",10),e.mxI("valueChange",function(r){return e.eBV(i),e.DH7(n.iqcRequest.createdAt,r)||(n.iqcRequest.createdAt=r),e.Njj(r)}),e.k0s()(),e.j41(11,"div",6)(12,"dx-text-box",11),e.mxI("valueChange",function(r){return e.eBV(i),e.DH7(n.iqcRequest.statusName,r)||(n.iqcRequest.statusName=r),e.Njj(r)}),e.k0s()()(),e.j41(13,"div",12)(14,"div",6)(15,"label",13),e.mxI("ngModelChange",function(r){return e.eBV(i),e.DH7(n.isChecked,r)||(n.isChecked=r),e.Njj(r)}),e.bIt("ngModelChange",function(r){return e.eBV(i),e.Njj(n.updateStatusRequest(r))}),e.EFF(16,"\u0110\xe1nh d\u1ea5u \u0111\xe3 x\u1eed l\xfd"),e.k0s()()()()(),e.j41(17,"dx-data-grid",14,0),e.bIt("onSelectionChanged",function(r){return e.eBV(i),e.Njj(n.onSelectionChanged(r))})("onExporting",function(r){return e.eBV(i),e.Njj(n.onExportClient(r))}),e.nrm(19,"dxo-selection",15)(20,"dxo-filter-row",16)(21,"dxo-export",17)(22,"dxo-column-chooser",18,1)(24,"dxo-header-filter",16),e.j41(25,"dxo-toolbar")(26,"dxi-item",19)(27,"nz-space"),e.DNE(28,me,3,1,"button",20)(29,_e,3,0,"button",21),e.k0s()(),e.j41(30,"dxi-item",22),e.DNE(31,ge,2,0,"div",23),e.k0s(),e.nrm(32,"dxi-item",24)(33,"dxi-item",25),e.k0s(),e.j41(34,"dxi-column",26)(35,"dxo-header-filter",27),e.nrm(36,"dxo-search",17),e.k0s()(),e.j41(37,"dxi-column",28)(38,"dxo-header-filter",27),e.nrm(39,"dxo-search",17),e.k0s()(),e.nrm(40,"dxi-column",29)(41,"dxi-column",30),e.j41(42,"dxi-column",31),e.nrm(43,"dxi-column",32)(44,"dxi-column",33)(45,"dxi-column",34),e.k0s(),e.j41(46,"dxi-column",35),e.nrm(47,"dxi-column",36)(48,"dxi-column",37),e.k0s(),e.nrm(49,"dxi-column",38)(50,"dxi-column",39)(51,"dxi-column",40)(52,"dxi-column",41)(53,"dxi-column",42),e.DNE(54,Ce,2,1,"div",43),e.nrm(55,"dxo-paging",44)(56,"dxo-pager",45),e.k0s(),e.j41(57,"nz-modal",46),e.mxI("nzVisibleChange",function(r){return e.eBV(i),e.DH7(n.isOpenEvaluateModal,r)||(n.isOpenEvaluateModal=r),e.Njj(r)}),e.DNE(58,be,71,16,"ng-container",47)(59,ve,6,1,"ng-template",48),e.k0s(),e.j41(60,"nz-modal",49),e.mxI("nzVisibleChange",function(r){return e.eBV(i),e.DH7(n.isOpenLevelOfControlModal,r)||(n.isOpenLevelOfControlModal=r),e.Njj(r)}),e.DNE(61,xe,25,4,"ng-container",47)(62,Ee,3,0,"div",50),e.k0s()}2&o&&(e.R7$(),e.Y8G("nzActive",!0)("nzShowArrow",!0)("nzHeader","RequestNo: "+n.iqcRequest.requestNo),e.R7$(),e.Y8G("nzGutter",24),e.R7$(2),e.Y8G("labelMode","static"),e.R50("value",n.iqcRequest.invoice),e.Y8G("readOnly",!0),e.R7$(2),e.Y8G("labelMode","static"),e.R50("value",n.iqcRequest.supplier),e.Y8G("readOnly",!0),e.R7$(2),e.Y8G("labelMode","static"),e.R50("value",n.iqcRequest.requestedByName),e.Y8G("readOnly",!0),e.R7$(2),e.Y8G("labelMode","static"),e.R50("value",n.iqcRequest.createdAt),e.Y8G("readOnly",!0)("displayFormat","yyyy-MM-dd HH:mm"),e.R7$(2),e.Y8G("labelMode","static"),e.R50("value",n.iqcRequest.statusName),e.Y8G("readOnly",!0),e.R7$(),e.Y8G("nzGutter",24),e.R7$(2),e.R50("ngModel",n.isChecked),e.R7$(2),e.Y8G("dataSource",n.iqcResults)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("selectAllMode","allPages")("showCheckBoxesMode","always"),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("visible",!0),e.R7$(10),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!1),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("dxTemplateOf","checkSampleTemplate"),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(62,pe)),e.R7$(),e.R50("nzVisible",n.isOpenEvaluateModal),e.Y8G("nzWidth","900px"),e.R7$(3),e.R50("nzVisible",n.isOpenLevelOfControlModal))},dependencies:[f.Sq,_.me,_.BC,_.vS,z.e,N.eC,E.s,d.i2Q,d.ZWy,d.hVU,d.nj_,d.gtJ,d.CVf,d.ZJU,d.FTx,d.sVQ,d.PVd,d.KOr,x.U5,x.Dq,l.aO,O.c,w.p,h.Dn,A.LH,c.F2,c.Oj,c.A9,v.CP,v.SO,v._4,v.IL,v.aj,v.kt,u.ld,u.WI,p.Sy,p.tg,p.vN,Y.lx,Y.i3,V.Vz,V.pc,L.Uq,L.e,W.m,K.z,J.$g,f.vh],styles:["nz-select[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]{font-weight:700}#level-of-control-search[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], #level-of-control-search[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;border-collapse:collapse;padding:5px}"]})}return a})();var Z=s(87018),U=s(9541);const De=["pihStoreMasterGrid"],Ge=["pihStoreDetailGrid"],H=()=>[10,15,20,50,100],ke=()=>({id:"R",name:"RECHECK (QU\xc1 6 TH\xc1NG (R))"}),Me=()=>({id:"S",name:"SORTING (S)"}),je=(a,m)=>[a,m];function Te(a,m){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"dx-button",34),e.bIt("onClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.resetFiltersAndSorting())}),e.k0s()()}}function ye(a,m){if(1&a){const t=e.RV6();e.j41(0,"div")(1,"dx-button",34),e.bIt("onClick",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.resetFiltersAndSorting())}),e.k0s()()}}function Se(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"dx-data-grid",28),e.nrm(2,"dxo-header-filter",15)(3,"dxo-filter-row",15)(4,"dxo-export",7),e.j41(5,"dxo-toolbar")(6,"dxi-item",8)(7,"nz-space")(8,"dx-select-box",35),e.mxI("valueChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.iqcRequest.type,n)||(i.iqcRequest.type=n),e.Njj(n)}),e.k0s()()()(),e.nrm(9,"dxi-column",17)(10,"dxi-column",18)(11,"dxi-column",36)(12,"dxi-column",37)(13,"dxo-paging",25)(14,"dxo-pager",26),e.k0s(),e.bVm()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("dataSource",t.iqcResultPrepare)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(4),e.Y8G("labelMode","static")("dataSource",e.l_i(23,je,e.lJ4(21,ke),e.lJ4(22,Me)))("showClearButton",!0),e.R50("value",t.iqcRequest.type),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(26,H))}}function Fe(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeCreateModalRequest())}),e.EFF(1," \u0110\xf3ng "),e.k0s(),e.j41(2,"button",9),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createRequest())}),e.EFF(3," T\u1ea1o request "),e.k0s()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("nzLoading",t.isLoading)}}const Ne=[{path:"menu",component:I},{path:"requests",component:ue},{path:"request/:requestNo",component:Ie},{path:"re-check",component:(()=>{class a{constructor(t,o,n,i){this.toastr=t,this.iqcSvc=o,this.jwtHelperSvc=n,this.router=i,this.selectedRows=[],this.isOpenCreateModalRequest=!1,this.isLoading=!1,this.iqcRequest=new G}ngOnInit(){this.getLotsInventory()}getLotsInventory(){this.iqcSvc.getLotsInventory().subscribe(t=>{console.log(t.result),this.pihStoreDetails=t.result.details,this.pihStoreMasters=t.result.masters})}onSelectionChanged(t){this.selectedRows=t.selectedRowsData}resetFiltersAndSorting(){this.pihStoreMasterGrid.instance.clearFilter(),this.pihStoreMasterGrid.instance.clearSorting(),this.pihStoreMasterGrid.instance.clearSelection(),this.pihStoreDetailGrid.instance.clearFilter(),this.pihStoreDetailGrid.instance.clearSorting(),this.pihStoreDetailGrid.instance.clearSelection()}openCreateModalRequest(){let t=new Set,o=new Array;for(const i of this.selectedRows)t.add(i.classParam),o.push(i.lotGroup);console.log(o),t.size>=2?this.toastr.warning("Ch\u1ec9 ch\u1ecdn 1 lo\u1ea1i h\xe0ng cho 1 request (OUTSIDE ho\u1eb7c PIH)","Warning"):(this.isLoading=!0,this.iqcRequest=new G,this.iqcRequest.classParam=t.values().next().value,this.iqcSvc.prepareDataCreateRequest({lotGroups:o}).subscribe(i=>{console.log(i),this.iqcResultPrepare=i.result,this.isOpenCreateModalRequest=!0,this.isLoading=!1},i=>{this.isLoading=!1}))}closeCreateModalRequest(){this.resetFiltersAndSorting(),this.isOpenCreateModalRequest=!1}createRequest(){if(!this.iqcRequest.type)return void this.toastr.warning("C\u1ea7n ch\u1ecdn lo\u1ea1i Request","Warning");let t=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username,o=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).UserId;this.iqcRequest.status=1,this.iqcRequest.requestedBy=t,this.iqcRequest.requestedById=o;let n=new Array;for(const i of this.iqcResultPrepare)n.push(i.lotNo);this.iqcRequest.lotNos=n,this.isLoading=!0,this.iqcSvc.createIqcRequest(this.iqcRequest).subscribe(i=>{console.log(i),this.getLotsInventory(),this.isLoading=!1,this.closeCreateModalRequest(),this.toastr.success("T\u1ea1o request th\xe0nh c\xf4ng","Th\xf4ng b\xe1o")},i=>{this.isLoading=!1,this.isOpenCreateModalRequest=!1,this.closeCreateModalRequest(),this.toastr.error(i,"Error")})}onExportClient(t){console.log(t);const o=new D.Workbook,n=o.addWorksheet("Main sheet");(0,M.V)({component:t.component,worksheet:n}).then(function(){o.xlsx.writeBuffer().then(function(i){y(new Blob([i],{type:"application/octet-stream"}),"DataGrid.xlsx")})})}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(S.tw),e.rXU(C),e.rXU(q.X7),e.rXU(k.Ix))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-iqc-recheck"]],viewQuery:function(o,n){if(1&o&&(e.GBs(De,5),e.GBs(Ge,5)),2&o){let i;e.mGM(i=e.lsd())&&(n.pihStoreMasterGrid=i.first),e.mGM(i=e.lsd())&&(n.pihStoreDetailGrid=i.first)}},decls:62,vars:61,consts:[["pihStoreMasterGrid",""],["columnChooser",""],["pihStoreDetailGrid",""],["nzTitle","Danh s\xe1ch theo LotGroup"],[3,"onSelectionChanged","onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["mode","multiple",3,"selectAllMode","showCheckBoxesMode"],[3,"enabled","mode","title"],[3,"enabled"],["location","before"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-icon","","nzType","plus"],["location","after"],[4,"dxTemplate"],["name","exportButton","location","after"],["name","columnChooserButton"],[3,"visible"],["dataField","classParam","caption","Class",3,"visible"],["dataField","model","caption","Model",3,"visible"],["dataField","lotGroup","caption","Lot Group",3,"visible"],[3,"allowSelectAll"],["dataField","wh","caption","T\u1ed3n kho","dataType","number","format","#,##0.0",3,"visible"],["dataField","iqcDate","caption","Ng\xe0y IQC g\u1ea7n nh\u1ea5t","dataType","date","format","yyyy-MM-dd","alignment","center",3,"visible"],["dataField","requestNo","caption","RequestNo",3,"visible"],["dataField","factoryCode","caption","Nh\xe0 m\xe1y",3,"visible"],["dataField","daySinceIqc","caption","S\u1ed1 ng\xe0y",3,"visible"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Danh s\xe1ch chi ti\u1ebft"],[3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["dataField","lotNo","caption","Lot No",3,"visible"],["dataField","expiredDate","caption","Ng\xe0y h\u1ebft h\u1ea1n","dataType","date","format","yyyy-MM-dd","alignment","center",3,"visible"],["nzTitle","T\u1ea1o request","nzWidth","100%",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[3,"nzModalFooter"],["icon","refresh",3,"onClick"],["label","Lo\u1ea1i Request","labelLocation","left","showColonAfterLabel","true","displayExpr","name","valueExpr","id",3,"valueChange","labelMode","dataSource","showClearButton","value"],["dataField","lotNo","caption","LotNo",3,"visible"],["dataField","wh","caption","Qty","dataType","number","format","#,##0.0",3,"visible"],["nz-button","","nzType","default",3,"click"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"nz-tabset")(1,"nz-tab",3)(2,"dx-data-grid",4,0),e.bIt("onSelectionChanged",function(r){return e.eBV(i),e.Njj(n.onSelectionChanged(r))})("onExporting",function(r){return e.eBV(i),e.Njj(n.onExportClient(r))}),e.nrm(4,"dxo-selection",5)(5,"dxo-column-chooser",6,1)(7,"dxo-load-panel",7)(8,"dxo-export",7),e.j41(9,"dxo-toolbar")(10,"dxi-item",8)(11,"button",9),e.bIt("click",function(){return e.eBV(i),e.Njj(n.openCreateModalRequest())}),e.nrm(12,"span",10),e.EFF(13," T\u1ea1o request "),e.k0s()(),e.j41(14,"dxi-item",11),e.DNE(15,Te,2,0,"div",12),e.k0s(),e.nrm(16,"dxi-item",13)(17,"dxi-item",14),e.k0s(),e.nrm(18,"dxo-header-filter",15)(19,"dxo-filter-row",15)(20,"dxo-export",7)(21,"dxi-column",16)(22,"dxi-column",17),e.j41(23,"dxi-column",18)(24,"dxo-header-filter",19),e.nrm(25,"dxo-search",7),e.k0s()(),e.nrm(26,"dxi-column",20)(27,"dxi-column",21)(28,"dxi-column",22)(29,"dxi-column",23)(30,"dxi-column",24)(31,"dxo-paging",25)(32,"dxo-pager",26),e.k0s()(),e.j41(33,"nz-tab",27)(34,"dx-data-grid",28,2),e.nrm(36,"dxo-load-panel",7),e.j41(37,"dxo-toolbar")(38,"dxi-item",11),e.DNE(39,ye,2,0,"div",12),e.k0s(),e.nrm(40,"dxi-item",13)(41,"dxi-item",14),e.k0s(),e.nrm(42,"dxo-header-filter",15)(43,"dxo-filter-row",15)(44,"dxo-export",7)(45,"dxo-column-chooser",6,1)(47,"dxi-column",16)(48,"dxi-column",17),e.j41(49,"dxi-column",18)(50,"dxo-header-filter",19),e.nrm(51,"dxo-search",7),e.k0s()(),e.nrm(52,"dxi-column",29)(53,"dxi-column",20)(54,"dxi-column",30)(55,"dxi-column",21)(56,"dxi-column",24)(57,"dxo-paging",25)(58,"dxo-pager",26),e.k0s()()(),e.j41(59,"nz-modal",31),e.mxI("nzVisibleChange",function(r){return e.eBV(i),e.DH7(n.isOpenCreateModalRequest,r)||(n.isOpenCreateModalRequest=r),e.Njj(r)}),e.DNE(60,Se,15,27,"ng-container",32)(61,Fe,4,1,"ng-template",33),e.k0s()}2&o&&(e.R7$(2),e.Y8G("dataSource",n.pihStoreMasters)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("selectAllMode","allPages")("showCheckBoxesMode","always"),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("enabled",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(3),e.Y8G("nzLoading",n.isLoading),e.R7$(7),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(59,H)),e.R7$(2),e.Y8G("dataSource",n.pihStoreDetails)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("enabled",!0),e.R7$(6),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("enabled",!0)("mode","select")("title","C\u1ed9t hi\u1ec3n th\u1ecb"),e.R7$(2),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowSelectAll",!1),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(60,H)),e.R7$(),e.R50("nzVisible",n.isOpenCreateModalRequest))},dependencies:[z.e,N.eC,E.s,d.i2Q,d.ZWy,d.hVU,d.nj_,d.gtJ,d.CVf,d.ZJU,d.FTx,d.xzc,d.sVQ,d.PVd,d.KOr,Z.l,x.U5,l.aO,O.c,w.p,h.Dn,c.F2,c.Oj,c.A9,U.JZ,U.rE]})}return a})()}];let Oe=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.$C({type:a});static#n=this.\u0275inj=e.G2t({imports:[k.iI.forChild(Ne),k.iI]})}return a})();var we=s(11668),Ae=s(44042),Be=s(47711),$e=s(87907),Pe=s(72898),Ye=s(34756),Ve=s(31958),Le=s(58960),Ue=s(75699);let He=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.$C({type:a});static#n=this.\u0275inj=e.G2t({imports:[f.MD,_.YN,Oe,z.L,E.N,Z.S,x.pc,l.Zw,h.Y3,A.Qt,Le.LE,c.U6,v.$G,u.DH,p.j,Y.Sw,Ve.EJ,V.GB,L.f3,we.F,Ae.D,W.Z,Be.p,K.W,$e.X,Pe.L,Ye.V,J.IJ,U.hM,Ue.T,j.B]})}return a})()},74696:(X,F,s)=>{s.d(F,{GB:()=>A,Vz:()=>w,pc:()=>d});var f=s(15215),l=s(54438),h=s(73586),x=s(7605),k=s(58728),e=s(40713),I=s(16042),E=s(57806),M=s(21025),D=s(70317),y=s(72544),G=s(28203),S=s(26841);const b=["*"],B=["collapseHeader"];function C(c,v){if(1&c&&(l.qex(0),l.nrm(1,"span",7),l.bVm()),2&c){const u=v.$implicit,p=l.XpG(2);l.R7$(),l.Y8G("nzType",u||"right")("nzRotate",p.nzActive?90:0)}}function q(c,v){if(1&c&&(l.j41(0,"div"),l.DNE(1,C,2,2,"ng-container",3),l.k0s()),2&c){const u=l.XpG();l.R7$(),l.Y8G("nzStringTemplateOutlet",u.nzExpandedIcon)}}function _(c,v){if(1&c&&(l.qex(0),l.EFF(1),l.bVm()),2&c){const u=l.XpG();l.R7$(),l.JRh(u.nzHeader)}}function z(c,v){if(1&c&&(l.qex(0),l.EFF(1),l.bVm()),2&c){const u=l.XpG(2);l.R7$(),l.JRh(u.nzExtra)}}function j(c,v){if(1&c&&(l.j41(0,"div",4),l.DNE(1,z,2,1,"ng-container",3),l.k0s()),2&c){const u=l.XpG();l.R7$(),l.Y8G("nzStringTemplateOutlet",u.nzExtra)}}const N="collapse";let d=(()=>{class c{constructor(u,p,g,T){this.nzConfigService=u,this.cdr=p,this.directionality=g,this.destroy$=T,this._nzModuleName=N,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(N).pipe((0,x.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,x.Q)(this.destroy$)).subscribe(u=>{this.dir=u,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(u){this.listOfNzCollapsePanelComponent.push(u)}removePanel(u){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(u),1)}click(u){this.nzAccordion&&!u.nzActive&&this.listOfNzCollapsePanelComponent.filter(p=>p!==u).forEach(p=>{p.nzActive&&(p.nzActive=!1,p.nzActiveChange.emit(p.nzActive),p.markForCheck())}),u.nzActive=!u.nzActive,u.nzActiveChange.emit(u.nzActive)}static#e=this.\u0275fac=function(p){return new(p||c)(l.rXU(I.yx),l.rXU(l.gRc),l.rXU(G.dS,8),l.rXU(M.y4))};static#t=this.\u0275cmp=l.VBU({type:c,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(p,g){2&p&&l.AVh("ant-collapse-icon-position-start","left"===g.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===g.nzExpandIconPosition)("ant-collapse-ghost",g.nzGhost)("ant-collapse-borderless",!g.nzBordered)("ant-collapse-rtl","rtl"===g.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[l.Jv_([M.y4]),l.aNF],ngContentSelectors:b,decls:1,vars:0,template:function(p,g){1&p&&(l.NAR(),l.SdG(0))},encapsulation:2,changeDetection:0})}return(0,f.Cg)([(0,I.H4)(),(0,D.H3)()],c.prototype,"nzAccordion",void 0),(0,f.Cg)([(0,I.H4)(),(0,D.H3)()],c.prototype,"nzBordered",void 0),(0,f.Cg)([(0,I.H4)(),(0,D.H3)()],c.prototype,"nzGhost",void 0),c})();const O="collapsePanel";let w=(()=>{class c{markForCheck(){this.cdr.markForCheck()}constructor(u,p,g,T,$,P){this.nzConfigService=u,this.ngZone=p,this.cdr=g,this.destroy$=T,this.nzCollapseComponent=$,this.noAnimation=P,this._nzModuleName=O,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new l.bkB,this.nzConfigService.getConfigChangeEventForComponent(O).pipe((0,x.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,h.R)(this.collapseHeader.nativeElement,"click").pipe((0,k.p)(()=>!this.nzDisabled),(0,x.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#e=this.\u0275fac=function(p){return new(p||c)(l.rXU(I.yx),l.rXU(l.SKi),l.rXU(l.gRc),l.rXU(M.y4),l.rXU(d,1),l.rXU(S.z,8))};static#t=this.\u0275cmp=l.VBU({type:c,selectors:[["nz-collapse-panel"]],viewQuery:function(p,g){if(1&p&&l.GBs(B,7),2&p){let T;l.mGM(T=l.lsd())&&(g.collapseHeader=T.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(p,g){2&p&&l.AVh("ant-collapse-no-arrow",!g.nzShowArrow)("ant-collapse-item-active",g.nzActive)("ant-collapse-item-disabled",g.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[l.Jv_([M.y4]),l.aNF],ngContentSelectors:b,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(p,g){1&p&&(l.NAR(),l.j41(0,"div",1,0),l.DNE(2,q,2,1,"div"),l.j41(3,"span",2),l.DNE(4,_,2,1,"ng-container",3),l.k0s(),l.DNE(5,j,2,1,"div",4),l.k0s(),l.j41(6,"div",5)(7,"div",6),l.SdG(8),l.k0s()()),2&p&&(l.BMQ("aria-expanded",g.nzActive),l.R7$(2),l.vxM(2,g.nzShowArrow?2:-1),l.R7$(2),l.Y8G("nzStringTemplateOutlet",g.nzHeader),l.R7$(),l.vxM(5,g.nzExtra?5:-1),l.R7$(),l.AVh("ant-collapse-content-active",g.nzActive),l.Y8G("@.disabled",!(null==g.noAnimation||!g.noAnimation.nzNoAnimation))("@collapseMotion",g.nzActive?"expanded":"hidden"))},dependencies:[E.C,E.m,y.Y3,y.Dn],encapsulation:2,data:{animation:[e.GE]},changeDetection:0})}return(0,f.Cg)([(0,D.H3)()],c.prototype,"nzActive",void 0),(0,f.Cg)([(0,D.H3)()],c.prototype,"nzDisabled",void 0),(0,f.Cg)([(0,I.H4)(),(0,D.H3)()],c.prototype,"nzShowArrow",void 0),c})(),A=(()=>{class c{static#e=this.\u0275fac=function(p){return new(p||c)};static#t=this.\u0275mod=l.$C({type:c});static#n=this.\u0275inj=l.G2t({imports:[w]})}return c})()},75699:(X,F,s)=>{s.d(F,{T:()=>S,s:()=>G});var f=s(15215),l=s(60177),h=s(54438),x=s(45286),k=s(7605),e=s(26006),I=s(70317),E=s(72544),M=s(28203);const D=["*"];function y(b,B){if(1&b){const C=h.RV6();h.j41(0,"span",1),h.bIt("click",function(_){h.eBV(C);const z=h.XpG();return h.Njj(z.closeTag(_))}),h.k0s()}}let G=(()=>{class b{constructor(C,q,_,z){this.cdr=C,this.renderer=q,this.elementRef=_,this.directionality=z,this.isPresetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzBordered=!0,this.nzOnClose=new h.bkB,this.nzCheckedChange=new h.bkB,this.dir="ltr",this.destroy$=new x.B7}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked))}closeTag(C){this.nzOnClose.emit(C),C.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}clearPresetColor(){const C=this.elementRef.nativeElement,q=new RegExp(`(ant-tag-(?:${[...e.un,...e.PA].join("|")}))`,"g"),_=C.classList.toString(),z=[];let j=q.exec(_);for(;null!==j;)z.push(j[1]),j=q.exec(_);C.classList.remove(...z)}setPresetColor(){const C=this.elementRef.nativeElement;this.clearPresetColor(),this.isPresetColor=!!this.nzColor&&((0,e.nP)(this.nzColor)||(0,e.uP)(this.nzColor)),this.isPresetColor&&C.classList.add(`ant-tag-${this.nzColor}`)}ngOnInit(){this.directionality.change?.pipe((0,k.Q)(this.destroy$)).subscribe(C=>{this.dir=C,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(C){const{nzColor:q}=C;q&&this.setPresetColor()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(q){return new(q||b)(h.rXU(h.gRc),h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(M.dS,8))};static#t=this.\u0275cmp=h.VBU({type:b,selectors:[["nz-tag"]],hostAttrs:[1,"ant-tag"],hostVars:12,hostBindings:function(q,_){1&q&&h.bIt("click",function(){return _.updateCheckedStatus()}),2&q&&(h.xc7("background-color",_.isPresetColor?"":_.nzColor),h.AVh("ant-tag-has-color",_.nzColor&&!_.isPresetColor)("ant-tag-checkable","checkable"===_.nzMode)("ant-tag-checkable-checked",_.nzChecked)("ant-tag-rtl","rtl"===_.dir)("ant-tag-borderless",!_.nzBordered))},inputs:{nzMode:"nzMode",nzColor:"nzColor",nzChecked:"nzChecked",nzBordered:"nzBordered"},outputs:{nzOnClose:"nzOnClose",nzCheckedChange:"nzCheckedChange"},exportAs:["nzTag"],standalone:!0,features:[h.OA$,h.aNF],ngContentSelectors:D,decls:2,vars:1,consts:[["nz-icon","","nzType","close","class","ant-tag-close-icon","tabindex","-1",3,"click",4,"ngIf"],["nz-icon","","nzType","close","tabindex","-1",1,"ant-tag-close-icon",3,"click"]],template:function(q,_){1&q&&(h.NAR(),h.SdG(0),h.DNE(1,y,1,0,"span",0)),2&q&&(h.R7$(),h.Y8G("ngIf","closeable"===_.nzMode))},dependencies:[E.Y3,E.Dn,l.bT],encapsulation:2,changeDetection:0})}return(0,f.Cg)([(0,I.H3)()],b.prototype,"nzChecked",void 0),(0,f.Cg)([(0,I.H3)()],b.prototype,"nzBordered",void 0),b})(),S=(()=>{class b{static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275mod=h.$C({type:b});static#n=this.\u0275inj=h.G2t({imports:[G]})}return b})()}}]);