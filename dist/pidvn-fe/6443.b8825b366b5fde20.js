"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[6443],{16443:(tn,U,l)=>{l.r(U),l.d(U,{VrEncProcessRecordingModule:()=>Gn});var f=l(60177),e=l(89417),$=l(66646),O=l(12673),a=l(23617),x=l(31958),v=l(50513),F=l(74696),k=l(58960),P=l(97529),I=l(21011),D=l(43053),Q=l(72874),V=l(1997),b=l(23359),T=l(46661),n=l(54438),N=l(45794),X=l(45312),H=l(21626);let B=(()=>{class r{constructor(t){this.httpClient=t,this.baseUrl=X.c.baseUrl}getModels(){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Models`)}getPartsByModel(t){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Parts?model=${t}`)}getShifts(){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Shifts`)}getLines(t){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Lines?productId=${t}`)}getCustomers(){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Customers`)}getQaCards(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/QaCards`,t)}createQaCard(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/CreateQaCard`,t)}getProcesses(t){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/Processes?productTypeName=${t}`)}getProcessesVer2(t){return this.httpClient.get(`${this.baseUrl}/Relay/VrEncProcessRecording/ProcessesVer2?line=${t}`)}getMaterials(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/Materials`,t)}scanLabel(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/ScanLabel`,t)}insertMaterials(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/InsertMaterials`,t)}updateMaterial(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/UpdateMaterial`,t)}downloadQaCard(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/DownloadQaCard`,t,{responseType:"blob"})}traceability(t){return this.httpClient.post(`${this.baseUrl}/Relay/VrEncProcessRecording/Traceability`,t)}static#n=this.\u0275fac=function(i){return new(i||r)(n.KVO(H.Qq))};static#t=this.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var G=l(16389),L=l(25930);const Y=["infoIpt"],W=["labelIpt"],u=["importQtyIpt"],S=()=>[""];function h(r,g){if(1&r){const t=n.RV6();n.j41(0,"tr")(1,"td"),n.EFF(2),n.k0s(),n.j41(3,"td"),n.EFF(4),n.k0s(),n.j41(5,"td",19),n.EFF(6),n.nI1(7,"number"),n.k0s(),n.j41(8,"td"),n.EFF(9),n.k0s(),n.j41(10,"td",20)(11,"a",21),n.bIt("click",function(){const o=n.eBV(t).$implicit,c=n.XpG();return n.Njj(c.openEditQtyModal(o))}),n.EFF(12,"S\u1eeda"),n.k0s()()()}if(2&r){const t=g.$implicit;n.R7$(2),n.JRh(t.cpn),n.R7$(2),n.JRh(t.clotno),n.R7$(2),n.JRh(n.i5U(7,4,t.qty,"1.0-3")),n.R7$(3),n.JRh(t.processName)}}function C(r,g){if(1&r&&n.nrm(0,"nz-option",30),2&r){const t=g.$implicit;n.Y8G("nzLabel",t.name)("nzValue",t.id)}}function s(r,g){if(1&r&&(n.j41(0,"tbody")(1,"tr")(2,"td",31)(3,"div",32)(4,"span"),n.EFF(5),n.k0s()()()()()),2&r){const t=n.XpG(2);n.R7$(5),n.JRh(t.lotErrMsg)}}function E(r,g){if(1&r){const t=n.RV6();n.j41(0,"tr")(1,"td")(2,"label"),n.EFF(3),n.k0s()(),n.j41(4,"td")(5,"label"),n.EFF(6),n.k0s()(),n.j41(7,"td",33)(8,"div",34),n.bIt("click",function(){const o=n.eBV(t).$implicit,c=n.XpG(2);return n.Njj(c.startEdit(o))}),n.EFF(9),n.nI1(10,"number"),n.k0s(),n.j41(11,"input",35,5),n.mxI("ngModelChange",function(o){const c=n.eBV(t).$implicit;return n.DH7(c.qty,o)||(c.qty=o),n.Njj(o)}),n.bIt("blur",function(){n.eBV(t);const o=n.XpG(2);return n.Njj(o.stopEdit())}),n.k0s()(),n.j41(13,"td",36),n.bIt("nzOnConfirm",function(){const o=n.eBV(t).$implicit,c=n.XpG(2);return n.Njj(c.deleteLabelScanned(o))}),n.j41(14,"a",37),n.EFF(15,"X\xf3a"),n.k0s()()()}if(2&r){const t=g.$implicit,i=n.XpG(2);n.R7$(3),n.JRh(t.cpn),n.R7$(3),n.JRh(t.clotno),n.R7$(2),n.Y8G("hidden",i.lotNoEdit===t.clotno),n.R7$(),n.SpI(" ",n.i5U(10,6,t.qty,"1.0-3")," "),n.R7$(2),n.Y8G("hidden",i.lotNoEdit!==t.clotno),n.R50("ngModel",t.qty)}}function d(r,g){if(1&r){const t=n.RV6();n.qex(0),n.j41(1,"div",7)(2,"nz-table",22)(3,"thead")(4,"tr")(5,"th",23)(6,"input",24,3),n.bIt("keydown.enter",function(o){n.eBV(t);const c=n.XpG();return n.Njj(c.scanLabel(o))})("click",function(){n.eBV(t);const o=n.sdS(7);return n.Njj(o.select())}),n.k0s()(),n.j41(8,"th",25)(9,"nz-select",26),n.bIt("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.Njj(c.onChangeProcess(o))}),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.process,o)||(c.process=o),n.Njj(o)}),n.DNE(10,C,1,2,"nz-option",27),n.k0s()()()(),n.DNE(11,s,6,1,"tbody",28),n.k0s(),n.j41(12,"nz-table",29,4)(14,"thead")(15,"tr")(16,"th"),n.EFF(17,"Part No"),n.k0s(),n.j41(18,"th"),n.EFF(19,"Lot No"),n.k0s(),n.j41(20,"th"),n.EFF(21,"Qty (Nh\u1eadp line)"),n.k0s(),n.j41(22,"th"),n.EFF(23,"Action"),n.k0s()()(),n.j41(24,"tbody"),n.DNE(25,E,16,9,"tr",14),n.k0s()()(),n.bVm()}if(2&r){const t=n.sdS(13),i=n.XpG();n.R7$(),n.Y8G("nzGutter",24),n.R7$(),n.Y8G("nzData",n.lJ4(9,S)),n.R7$(7),n.Y8G("nzAutoFocus",!0)("nzStatus","warning"),n.R50("ngModel",i.process),n.R7$(),n.Y8G("ngForOf",i.processes),n.R7$(),n.Y8G("ngIf",i.lotErrMsg),n.R7$(),n.Y8G("nzData",i.listLotsScanned),n.R7$(13),n.Y8G("ngForOf",t.data)}}function y(r,g){if(1&r){const t=n.RV6();n.j41(0,"button",38),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.closeScanLabelModal())}),n.EFF(1," H\u1ee7y "),n.k0s(),n.j41(2,"button",39),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.insertMaterials())}),n.EFF(3," L\u01b0u "),n.k0s()}if(2&r){const t=n.XpG();n.R7$(2),n.Y8G("nzLoading",t.isLoadingSaveBtn)}}function A(r,g){if(1&r){const t=n.RV6();n.qex(0),n.j41(1,"div",7)(2,"nz-table",40,6)(4,"tbody")(5,"tr")(6,"td")(7,"label"),n.EFF(8,"Part No"),n.k0s()(),n.j41(9,"td"),n.EFF(10),n.k0s()(),n.j41(11,"tr")(12,"td")(13,"label"),n.EFF(14,"Lot No"),n.k0s()(),n.j41(15,"td"),n.EFF(16),n.k0s()(),n.j41(17,"tr")(18,"td")(19,"label"),n.EFF(20,"Qty"),n.k0s()(),n.j41(21,"td")(22,"input",41),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.materialSelected.qty,o)||(c.materialSelected.qty=o),n.Njj(o)}),n.k0s()()(),n.j41(23,"tr")(24,"td")(25,"label"),n.EFF(26,"Remark"),n.k0s()(),n.j41(27,"td")(28,"input",42),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.materialSelected.remark,o)||(c.materialSelected.remark=o),n.Njj(o)}),n.k0s()()()()()(),n.bVm()}if(2&r){const t=n.XpG();n.R7$(),n.Y8G("nzGutter",24),n.R7$(),n.Y8G("nzData",n.lJ4(6,S)),n.R7$(8),n.JRh(t.materialSelected.cpn),n.R7$(6),n.JRh(t.materialSelected.clotno),n.R7$(6),n.R50("ngModel",t.materialSelected.qty),n.R7$(6),n.R50("ngModel",t.materialSelected.remark)}}function K(r,g){if(1&r){const t=n.RV6();n.j41(0,"button",38),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.isOpenEditQtyModal=!1)}),n.EFF(1," H\u1ee7y "),n.k0s(),n.j41(2,"button",39),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.updateQty())}),n.EFF(3," L\u01b0u "),n.k0s()}if(2&r){const t=n.XpG();n.R7$(2),n.Y8G("nzLoading",t.isLoadingSaveBtn)}}let Z=(()=>{class r{constructor(t,i,o){this.toastr=t,this.vrEncPRSvc=i,this.activatedRoute=o,this.infoScan={qaCard:null,model:null,line:null,date:null,shift:null,user:null},this.materialSelected={},this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.lotNoEdit=null,this.isLoadingSaveBtn=!1,this.isOpenEditQtyModal=!1,this.isOpenScanLabelModal=!1,this.lotErrMsg=null}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.infoIpt.nativeElement.focus(),this.scanInfo({target:{value:this.activatedRoute.snapshot.queryParams.qaCard}})},0)}getProcesses(t){this.vrEncPRSvc.getProcesses(t).subscribe(i=>{this.processes=i})}getProcessesVer2(t){this.vrEncPRSvc.getProcessesVer2(t).subscribe(i=>{this.processes=i})}getMaterials(t){this.vrEncPRSvc.getMaterials(t).subscribe(i=>{this.materials=i})}scanInfo(t){let i=t.target.value,o=i.split("*");if(5===o.length){if(i.includes(";"))return this.toastr.warning("C\u1ea7n scan QA card v\xe0 ID"),void this.infoIpt.nativeElement.select();this.infoScan.qaCard=i,this.infoScan.model=o[0],this.infoScan.line=o[1],this.infoScan.date=o[2],this.infoScan.shift=o[3],this.getProcessesVer2(o[1]),this.getPartsByModel(this.infoScan.model),this.getMaterials({qaCard:this.infoScan.qaCard,recordType:"VEP"})}7===i.length&&(this.infoScan.user=i),Object.values(this.infoScan).some(_=>null==_||""==_)?this.toastr.warning("C\u1ea7n scan m\xe3 nh\xe2n vi\xean","Warning"):this.isOpenScanLabelModal=!0,this.infoIpt.nativeElement.select()}scanLabel(t){if(this.labelIpt.nativeElement.select(),!this.process)return void(this.lotErrMsg="B\u1ea1n c\u1ea7n ch\u1ecdn c\xf4ng \u0111o\u1ea1n tr\u01b0\u1edbc khi scan tem NVL");let i=Object.assign(this.infoScan,{processId:this.process},{label:t.target.value.trim()},{type:"VEP"}),o=i.label.split(";"),c="B"==o[0]?o[4]:o[3];if(!this.partsOfModel.includes("B"==o[0]?o[1]:o[0]))return this.lotErrMsg=`Lot ${c} kh\xf4ng d\xf9ng cho model ${i.model}`,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:15e3});this.vrEncPRSvc.scanLabel(i).subscribe(R=>"ERROR"==R.status?(this.lotErrMsg=R.message,void this.toastr.error("C\xf3 l\u1ed7i !","Error",{timeOut:15e3})):"OK"==R.status?(this.lotErrMsg=null,this.mapLotsScanned.set(i.label,R.data),void(this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse())):void 0,R=>{}),this.labelIpt.nativeElement.select()}onChangeProcess(t){console.log(t),this.labelIpt.nativeElement.select()}startEdit(t){setTimeout(()=>{this.importQtyIpt.nativeElement.select()},400),this.lotNoEdit=t.clotno}stopEdit(){this.lotNoEdit=null,this.importQtyIpt.nativeElement.select()}deleteLabelScanned(t){console.log(t),this.mapLotsScanned.delete(t.label),this.listLotsScanned=Array.from(this.mapLotsScanned.values()).reverse()}insertMaterials(){this.isLoadingSaveBtn=!0,console.log(this.listLotsScanned),this.listLotsScanned.length?this.vrEncPRSvc.insertMaterials(this.listLotsScanned).subscribe(t=>{this.toastr.success("OK","Success"),this.isOpenScanLabelModal=!1,this.getMaterials({qaCard:this.infoScan.qaCard}),this.mapLotsScanned=new Map,this.listLotsScanned=new Array,this.isLoadingSaveBtn=!1,this.infoScan.user=null,this.process=null,this.lotErrMsg=null}):this.isLoadingSaveBtn=!1}closeScanLabelModal(){this.lotErrMsg=null,this.isOpenScanLabelModal=!1}getPartsByModel(t){this.vrEncPRSvc.getPartsByModel(t).subscribe(i=>{let o=new Array;for(const c of i)o.push(c.pncomp);this.partsOfModel=o,console.log("Parts: ",this.partsOfModel)})}openEditQtyModal(t){this.materialSelected.id=t.id,this.materialSelected.cpn=t.cpn,this.materialSelected.clotno=t.clotno,this.materialSelected.qty=t.qty,this.materialSelected.remark=t.remark,this.isOpenEditQtyModal=!0}updateQty(){this.vrEncPRSvc.updateMaterial(this.materialSelected).subscribe(t=>{this.toastr.success("Update th\xe0nh c\xf4ng","Success"),this.isOpenEditQtyModal=!1,this.getMaterials({qaCard:this.infoScan.qaCard,recordType:"VEP"})})}static#n=this.\u0275fac=function(i){return new(i||r)(n.rXU(N.tw),n.rXU(B),n.rXU(T.nX))};static#t=this.\u0275cmp=n.VBU({type:r,selectors:[["app-vr-enc-p-r-insert"]],viewQuery:function(i,o){if(1&i&&(n.GBs(Y,5),n.GBs(W,5),n.GBs(u,5)),2&i){let c;n.mGM(c=n.lsd())&&(o.infoIpt=c.first),n.mGM(c=n.lsd())&&(o.labelIpt=c.first),n.mGM(c=n.lsd())&&(o.importQtyIpt=c.first)}},decls:64,vars:13,consts:[["infoTbl",""],["infoIpt",""],["materialsTable",""],["labelIpt",""],["labelTable",""],["importQtyIpt",""],["qtyEditTable",""],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","18","nzLg","18"],[1,"attention"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],["id","infoTbl","nzBordered","","nzSize","small","nzFrontPagination","false",3,"nzData"],["id","infoIpt","nz-input","","nzSize","small","placeholder","Scan User ID, QA card","autocomplete","off",3,"keydown.enter","click"],["nzSize","small","nzBordered","",2,"margin-top","-25px",3,"nzData","nzPageSize"],[4,"ngFor","ngForOf"],["id","importMaterialModal","nzTitle","Scan tem NVL","nzWidth","750px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[3,"nzModalFooter"],["id","editQty","nzTitle","Update Qty",3,"nzVisibleChange","nzVisible"],[2,"text-align","right"],[2,"text-align","center"],[3,"click"],["id","materialEditTbl","nzBordered","","nzFrontPagination","false","nzSize","small",2,"margin-top","-15px",3,"nzData"],[2,"width","60%"],["id","labelIpt","nz-input","","placeholder","Scan tem NVL","autocomplete","off",3,"keydown.enter","click"],[2,"width","40%"],["nzPlaceHolder","Ch\u1ecdn c\xf4ng \u0111o\u1ea1n","nzAllowClear","","nzShowSearch","","nzNotFoundContent","",3,"ngModelChange","nzAutoFocus","nzStatus","ngModel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[4,"ngIf"],["nzSize","small","nzBordered","",2,"margin-top","-20px",3,"nzData"],[3,"nzLabel","nzValue"],["colspan","2"],["id","error-msg"],[1,"editable-row",2,"text-align","right"],[1,"editable-cell",3,"click","hidden"],["type","number","nz-input","",3,"ngModelChange","blur","hidden","ngModel"],["nz-popconfirm","","nzPopconfirmTitle","C\xf3 ch\u1eafc ch\u1eafn x\xf3a kh\xf4ng ?","nzPopconfirmPlacement","top","nzRight","",2,"text-align","center",3,"nzOnConfirm"],[2,"color","red","font-weight","bold"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nzSize","small","nzBordered","","nzFrontPagination","false",3,"nzData"],["nz-input","","type","number",3,"ngModelChange","ngModel"],["nz-input","","placeholder","Nh\u1eadp ghi ch\xfa",3,"ngModelChange","ngModel"]],template:function(i,o){if(1&i){const c=n.RV6();n.j41(0,"div",7)(1,"div",8)(2,"span",9),n.EFF(3,"* H\u01b0\u1edbng d\u1eabn VR-ENC Process Recording: Scan l\u1ea7n l\u01b0\u1ee3t QA card, User ID, Tem NVL"),n.k0s()(),n.j41(4,"div",10)(5,"nz-table",11,0)(7,"tbody")(8,"tr")(9,"td")(10,"label"),n.EFF(11,"Scanner"),n.k0s()(),n.j41(12,"td")(13,"input",12,1),n.bIt("keydown.enter",function(R){return n.eBV(c),n.Njj(o.scanInfo(R))})("click",function(){n.eBV(c);const R=n.sdS(14);return n.Njj(R.select())}),n.k0s()(),n.j41(15,"td")(16,"label"),n.EFF(17,"User ID"),n.k0s()(),n.j41(18,"td"),n.EFF(19),n.k0s()(),n.j41(20,"tr")(21,"td")(22,"label"),n.EFF(23,"Product"),n.k0s()(),n.j41(24,"td"),n.EFF(25),n.k0s(),n.j41(26,"td")(27,"label"),n.EFF(28,"Line"),n.k0s()(),n.j41(29,"td"),n.EFF(30),n.k0s()(),n.j41(31,"tr")(32,"td")(33,"label"),n.EFF(34,"Date"),n.k0s()(),n.j41(35,"td"),n.EFF(36),n.k0s(),n.j41(37,"td")(38,"label"),n.EFF(39,"Shift"),n.k0s()(),n.j41(40,"td"),n.EFF(41),n.k0s()()()()()(),n.j41(42,"nz-table",13,2)(44,"thead")(45,"tr")(46,"th"),n.EFF(47,"Part No"),n.k0s(),n.j41(48,"th"),n.EFF(49,"Lot No (\u0110\xe3 nh\u1eadp v\xe0o LINE)"),n.k0s(),n.j41(50,"th"),n.EFF(51,"Qty"),n.k0s(),n.j41(52,"th"),n.EFF(53,"C\xf4ng \u0111o\u1ea1n"),n.k0s(),n.j41(54,"th"),n.EFF(55,"Action"),n.k0s()()(),n.j41(56,"tbody"),n.DNE(57,h,13,7,"tr",14),n.k0s()(),n.j41(58,"nz-modal",15),n.mxI("nzVisibleChange",function(R){return n.eBV(c),n.DH7(o.isOpenScanLabelModal,R)||(o.isOpenScanLabelModal=R),n.Njj(R)}),n.DNE(59,d,26,10,"ng-container",16)(60,y,4,1,"ng-template",17),n.k0s(),n.j41(61,"nz-modal",18),n.mxI("nzVisibleChange",function(R){return n.eBV(c),n.DH7(o.isOpenEditQtyModal,R)||(o.isOpenEditQtyModal=R),n.Njj(R)}),n.DNE(62,A,29,7,"ng-container",16)(63,K,4,1,"ng-template",17),n.k0s()}if(2&i){const c=n.sdS(43);n.Y8G("nzGutter",24),n.R7$(5),n.Y8G("nzData",n.lJ4(12,S)),n.R7$(14),n.JRh(o.infoScan.user),n.R7$(6),n.JRh(o.infoScan.model),n.R7$(5),n.JRh(o.infoScan.line),n.R7$(6),n.JRh(o.infoScan.date),n.R7$(5),n.JRh(o.infoScan.shift),n.R7$(),n.Y8G("nzData",o.materials)("nzPageSize",20),n.R7$(15),n.Y8G("ngForOf",c.data),n.R7$(),n.R50("nzVisible",o.isOpenScanLabelModal),n.R7$(3),n.R50("nzVisible",o.isOpenEditQtyModal)}},dependencies:[f.Sq,f.bT,e.me,e.Q0,e.BC,e.vS,P.Uq,P.e,b.CP,b.SO,b._4,b.IL,b.aj,b.kt,b.OL,I.Sy,V.ld,V.WI,D.F2,D.Oj,D.A9,Q.PV,v.aO,G.c,L.p,f.QX],styles:["nz-select[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%;font-weight:700}span.attention[_ngcontent-%COMP%]{font-style:italic;color:red}nz-table[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:-34px}nz-table[_ngcontent-%COMP%]   td.ant-table-cell[_ngcontent-%COMP%]{vertical-align:top}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#00f}#error-msg[_ngcontent-%COMP%]{border:3px solid rgb(255,0,0);font-weight:700;width:100%;color:red;padding:5px}#error-msg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red;font-size:20px}"]})}return r})();const m=()=>["/admin/relay/relay-datecode"],w=()=>({area:"VR-ENC"});let p=(()=>{class r{constructor(){}ngOnInit(){}redirectReturnWh(){window.open("https://10.92.176.57:8080/pur_wh_records.material_return")}static#n=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275cmp=n.VBU({type:r,selectors:[["app-vr-enc-p-r-menu"]],decls:35,vars:5,consts:[["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","6"],[1,"item","import",3,"routerLink","queryParams"],["src","./../../../../../../assets/images/schedule.png","alt",""],["routerLink","/admin/relay/vr-enc-process-recording/qa-card",1,"item","qa-card"],["src","./../../../../../../assets/images/printer.png","alt",""],[1,"item","return",3,"click"],["src","./../../../../../../assets/images/return.png","alt",""],["routerLink","/admin/relay/vr-enc-process-recording/traceability",1,"item","data"],["src","./../../../../../../assets/images/traceability.png","alt",""]],template:function(i,o){1&i&&(n.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),n.EFF(2," VR-ENC "),n.k0s(),n.j41(3,"nz-breadcrumb-item"),n.EFF(4," Process Recording "),n.k0s()(),n.nrm(5,"br"),n.j41(6,"div",0)(7,"div",1)(8,"div",2),n.nrm(9,"img",3),n.j41(10,"h6"),n.EFF(11,"Nh\u1eadp Date Code"),n.k0s(),n.j41(12,"h4"),n.EFF(13,"Date Code Input"),n.k0s()()(),n.j41(14,"div",1)(15,"div",4),n.nrm(16,"img",5),n.j41(17,"h6"),n.EFF(18,"QA card"),n.k0s(),n.j41(19,"h4"),n.EFF(20,"QA card"),n.k0s()()(),n.j41(21,"div",1)(22,"div",6),n.bIt("click",function(){return o.redirectReturnWh()}),n.nrm(23,"img",7),n.j41(24,"h6"),n.EFF(25,"Tr\u1ea3 NVL"),n.k0s(),n.j41(26,"h4"),n.EFF(27,"Return"),n.k0s()()(),n.j41(28,"div",1)(29,"div",8),n.nrm(30,"img",9),n.j41(31,"h6"),n.EFF(32,"Truy v\u1ebft d\u1eef li\u1ec7u"),n.k0s(),n.j41(33,"h4"),n.EFF(34,"Traceability"),n.k0s()()()()),2&i&&(n.R7$(6),n.Y8G("nzGutter",8),n.R7$(2),n.Y8G("routerLink",n.lJ4(3,m))("queryParams",n.lJ4(4,w)))},dependencies:[T.Wk,x.hL,x.K7,P.Uq,P.e],styles:[".item[_ngcontent-%COMP%]{text-align:center;border:1px solid #ccc;padding:15px 10px}.item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;color:#fff}.item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:15px;font-size:18px;color:#fff;font-weight:700}.import[_ngcontent-%COMP%]{background:#e07e37;cursor:pointer}.qa-card[_ngcontent-%COMP%]{background:#63d171;cursor:pointer}.return[_ngcontent-%COMP%]{background:#959595c7}.data[_ngcontent-%COMP%]{background:#3498db;cursor:pointer}"]})}return r})();var M=l(37736),z=l(31837),j=l(27380),q=l(72544),J=l(3104),on=l(45398),en=l(97685);const an=()=>[10,25,50,100],rn=()=>["/admin/relay/vr-enc-process-recording/insert"],sn=r=>({qaCard:r}),ln=()=>["/admin/vr/defect-record/input"],cn=r=>({qaCard:r,area:"VR"}),dn=()=>[""];function pn(r,g){if(1&r&&n.nrm(0,"nz-option",31),2&r){const t=g.$implicit;n.Y8G("nzValue",t.name)("nzLabel",t.description)}}function _n(r,g){if(1&r&&n.nrm(0,"nz-option",31),2&r){const t=g.$implicit;n.Y8G("nzValue",t.code)("nzLabel",t.name)}}function mn(r,g){if(1&r){const t=n.RV6();n.j41(0,"div",32),n.bIt("click",function(){const o=n.eBV(t).$implicit,c=n.XpG();return n.Njj(c.openQACardModal(o))}),n.EFF(1),n.k0s()}if(2&r){const t=g.$implicit;n.R7$(),n.SpI(" ",t.data.customerCode?t.data.customerCode:"Ch\u01b0a ch\u1ecdn m\xe3"," ")}}function un(r,g){if(1&r){const t=n.RV6();n.j41(0,"a",37),n.bIt("click",function(){n.eBV(t);const o=n.XpG().$implicit,c=n.XpG();return n.Njj(c.downloadQaCard(o))}),n.EFF(1,"QA"),n.k0s()}}function hn(r,g){if(1&r&&(n.j41(0,"a",38),n.EFF(1,"Scan NVL"),n.k0s()),2&r){const t=n.XpG().$implicit;n.Y8G("routerLink",n.lJ4(2,rn))("queryParams",n.eq3(3,sn,t.data.lotNo))}}function zn(r,g){if(1&r&&(n.j41(0,"a",39),n.EFF(1," Nh\u1eadp l\u1ed7i "),n.k0s()),2&r){const t=n.XpG().$implicit;n.Y8G("routerLink",n.lJ4(2,ln))("queryParams",n.eq3(3,cn,t.data.lotNo))}}function gn(r,g){1&r&&(n.j41(0,"div",33)(1,"nz-space"),n.DNE(2,un,2,0,"a",34)(3,hn,2,5,"a",35)(4,zn,2,5,"a",36),n.k0s()())}function Cn(r,g){1&r&&(n.qex(0),n.j41(1,"nz-spin",40),n.nrm(2,"nz-alert",41),n.k0s(),n.bVm())}function fn(r,g){1&r&&n.nrm(0,"div")}function En(r,g){if(1&r&&n.nrm(0,"nz-option",31),2&r){const t=g.$implicit;n.Y8G("nzValue",t.code)("nzLabel",t.name)}}function Mn(r,g){if(1&r&&n.nrm(0,"nz-option",31),2&r){const t=g.$implicit;n.Y8G("nzValue",t.name)("nzLabel",t.description)}}function Pn(r,g){if(1&r&&n.nrm(0,"nz-option",31),2&r){const t=g.$implicit;n.Y8G("nzValue",t.name)("nzLabel",t.name)}}function Rn(r,g){if(1&r&&n.nrm(0,"nz-option",51),2&r){const t=g.$implicit;n.Y8G("nzLabel",t.code)("nzValue",t.code)}}function vn(r,g){1&r&&n.EFF(0),2&r&&n.SpI(" and ",g.$implicit.length," more selected ")}function bn(r,g){if(1&r&&(n.j41(0,"tr")(1,"td",52)(2,"div",53),n.nrm(3,"span",54),n.j41(4,"span",55),n.EFF(5),n.k0s()()()()),2&r){const t=n.XpG(2);n.R7$(5),n.JRh(t.errorMsg)}}function yn(r,g){if(1&r){const t=n.RV6();n.qex(0),n.j41(1,"nz-table",42)(2,"tbody")(3,"tr")(4,"td")(5,"label"),n.EFF(6,"Ng\xe0y SX"),n.k0s()(),n.j41(7,"td")(8,"nz-date-picker",43),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.date,o)||(c.qaCard.date=o),n.Njj(o)}),n.k0s()(),n.j41(9,"td")(10,"label"),n.EFF(11,"Ca"),n.k0s()(),n.j41(12,"td")(13,"nz-select",44),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.shift,o)||(c.qaCard.shift=o),n.Njj(o)})("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.shiftCode,o)||(c.qaCard.shiftCode=o),n.Njj(o)}),n.DNE(14,En,1,2,"nz-option",6),n.k0s()()(),n.j41(15,"tr")(16,"td")(17,"label"),n.EFF(18,"Line"),n.k0s()(),n.j41(19,"td")(20,"nz-select",45),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.lineCode,o)||(c.qaCard.lineCode=o),n.Njj(o)}),n.DNE(21,Mn,1,2,"nz-option",6),n.k0s()(),n.j41(22,"td")(23,"label"),n.EFF(24,"Part No"),n.k0s()(),n.j41(25,"td")(26,"nz-select",46),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.model,o)||(c.qaCard.model=o),n.Njj(o)}),n.DNE(27,Pn,1,2,"nz-option",6),n.k0s()()(),n.j41(28,"tr")(29,"td")(30,"label"),n.EFF(31,"Customer"),n.k0s()(),n.j41(32,"td")(33,"nz-select",47),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.customers,o)||(c.qaCard.customers=o),n.Njj(o)}),n.DNE(34,Rn,1,2,"nz-option",48),n.k0s(),n.DNE(35,vn,1,1,"ng-template",null,0,n.C5r),n.k0s(),n.j41(37,"td")(38,"label"),n.EFF(39,"Remark"),n.k0s()(),n.j41(40,"td")(41,"input",49),n.mxI("ngModelChange",function(o){n.eBV(t);const c=n.XpG();return n.DH7(c.qaCard.remark,o)||(c.qaCard.remark=o),n.Njj(o)}),n.k0s()()(),n.DNE(42,bn,6,1,"tr",50),n.k0s()(),n.bVm()}if(2&r){const t=n.sdS(36),i=n.XpG();n.R7$(),n.Y8G("nzData",n.lJ4(20,dn)),n.R7$(7),n.R50("ngModel",i.qaCard.date),n.Y8G("nzDisabled",i.isEditMode),n.R7$(5),n.R50("ngModel",i.qaCard.shift)("ngModel",i.qaCard.shiftCode),n.Y8G("nzDisabled",i.isEditMode),n.R7$(),n.Y8G("ngForOf",i.shifts),n.R7$(6),n.R50("ngModel",i.qaCard.lineCode),n.Y8G("nzDisabled",i.isEditMode),n.R7$(),n.Y8G("ngForOf",i.lines),n.R7$(5),n.R50("ngModel",i.qaCard.model),n.Y8G("nzDisabled",i.isEditMode),n.R7$(),n.Y8G("ngForOf",i.models),n.R7$(6),n.Y8G("nzMaxTagCount",3)("nzMaxTagPlaceholder",t),n.R50("ngModel",i.qaCard.customers),n.R7$(),n.Y8G("ngForOf",i.customers),n.R7$(7),n.R50("ngModel",i.qaCard.remark),n.Y8G("disabled",i.isEditMode),n.R7$(),n.Y8G("ngIf",i.errorMsg)}}function Tn(r,g){if(1&r){const t=n.RV6();n.j41(0,"div")(1,"button",56),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.cancelQACard())}),n.EFF(2,"H\u1ee7y"),n.k0s(),n.j41(3,"button",57),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.createQACard())}),n.EFF(4),n.k0s()()}if(2&r){const t=n.XpG();n.R7$(4),n.SpI(" ",t.isEditMode?"C\u1eadp nh\u1eadt":"T\u1ea1o m\u1edbi"," ")}}function On(r,g){if(1&r&&(n.qex(0),n.j41(1,"div",58)(2,"table",59)(3,"tbody")(4,"tr")(5,"td",60)(6,"label"),n.EFF(7),n.k0s()(),n.j41(8,"td",60)(9,"label"),n.EFF(10),n.k0s()(),n.j41(11,"td",61),n.nrm(12,"qrcode",62),n.k0s()(),n.j41(13,"tr")(14,"td",63)(15,"label",64),n.EFF(16),n.k0s()()(),n.j41(17,"tr")(18,"td",63)(19,"label"),n.EFF(20),n.nI1(21,"date"),n.k0s()()()()()(),n.bVm()),2&r){const t=n.XpG();n.R7$(7),n.JRh(null==t.qaCardSelected?null:t.qaCardSelected.lineCode),n.R7$(3),n.JRh(null==t.qaCardSelected?null:t.qaCardSelected.shiftCode),n.R7$(2),n.Y8G("qrdata",null==t.qaCardSelected?null:t.qaCardSelected.lotNo)("allowEmptyString",!0)("cssClass","center")("elementType","img")("errorCorrectionLevel","M")("margin",4)("scale",1)("width",60),n.R7$(4),n.JRh(null==t.qaCardSelected?null:t.qaCardSelected.model),n.R7$(4),n.JRh(n.i5U(21,12,null==t.qaCardSelected?null:t.qaCardSelected.date,"yyyy-MM-dd"))}}function Fn(r,g){if(1&r){const t=n.RV6();n.j41(0,"div")(1,"button",56),n.bIt("click",function(){n.eBV(t);const o=n.XpG();return n.Njj(o.isOpenPrintQAModal=!1)}),n.EFF(2," \u0110\xf3ng "),n.k0s(),n.j41(3,"button",65),n.nrm(4,"span",66),n.EFF(5," In QA card "),n.k0s()()}2&r&&(n.R7$(3),n.Y8G("nzType","primary")("useExistingCss",!0))}let Vn=(()=>{class r{constructor(t,i,o){this.toastr=t,this.vrEncPRSvc=i,this.jwtHelperSvc=o,this.searchVo={line:null,date:new Date,shift:null,model:null},this.qaCard={id:null,date:new Date,line:null,lineCode:null,model:null,shift:null,shiftCode:null,remark:null,userCode:null,customers:[]},this.date=null,this.isOpenModalLoading=!1,this.isOpenQAModal=!1,this.isOpenPrintQAModal=!1,this.isEditMode=!0}ngOnInit(){this.getShifts(),this.getLines(2),this.getModels(),this.getCustomers()}getLines(t){this.vrEncPRSvc.getLines(t).subscribe(i=>{this.lines=i,console.log("Lines: ",this.lines)})}getShifts(){this.vrEncPRSvc.getShifts().subscribe(t=>{this.shifts=t})}getCustomers(){this.vrEncPRSvc.getCustomers().subscribe(t=>{this.customers=t})}getModels(){this.vrEncPRSvc.getModels().subscribe(t=>{this.models=t})}onSearch(){this.searchVo.line&&this.searchVo.date?this.vrEncPRSvc.getQaCards(this.searchVo).subscribe(t=>{this.qaCards=t}):this.toastr.warning("C\u1ea7n ch\u1ecdn Line v\xe0 Date","Warning")}downloadQaCard(t){console.log("EVENT: ",t),this.isOpenModalLoading=!0;let i={qaCard:t.data.lotNo},o=t.data.lotNo.replace("*","_");this.vrEncPRSvc.downloadQaCard(i).subscribe(c=>{this.isOpenModalLoading=!1;const _=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),R=window.URL.createObjectURL(_),nn=document.createElement("a");nn.href=R,nn.download=`${o}.xls`,nn.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout(()=>{window.URL.revokeObjectURL(R),nn.remove()},100)})}openQACardModal(t){if(t){this.isEditMode=!0;let i={...this.qaCard,...t.data,customers:t.data.customerCode.split(";")};this.qaCard=i}else this.isEditMode=!1,this.qaCard={id:null,date:new Date,line:null,lineCode:null,model:null,shift:null,shiftCode:null,remark:null,userCode:null,customers:[]};console.log("QA card: ",this.qaCard),this.isOpenQAModal=!0}createQACard(){let t=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username;this.qaCard.userCode=t,console.log("QA Card: ",this.qaCard),this.vrEncPRSvc.createQaCard(this.qaCard).subscribe(i=>{"ERROR"==i.result?this.errorMsg=i.message:"OK"==i.result&&(this.isOpenQAModal=!1,this.searchVo.line=this.qaCard.lineCode,this.searchVo.date=this.qaCard.date,this.searchVo.model=this.qaCard.model,this.vrEncPRSvc.getQaCards(this.searchVo).subscribe(o=>{this.qaCards=o}))})}cancelQACard(){this.resetComponent(),this.isOpenQAModal=!1}resetComponent(){this.searchVo.date=new Date,this.searchVo.line=null,this.searchVo.model=null,this.searchVo.shift=null,this.qaCard.date=new Date,this.qaCard.line=null,this.qaCard.model=null,this.qaCard.remark=null,this.qaCard.shift=null,this.qaCard.userCode=null}openPrintQaCardModal(t){console.log("item: ",t.data),this.qaCardSelected=t.data,this.isOpenPrintQAModal=!0}printQRCard(){}onCustomerClicked(t){this.qaCardSelected=t.data,this.isOpenQAModal=!0}static#n=this.\u0275fac=function(i){return new(i||r)(n.rXU(N.tw),n.rXU(B),n.rXU(M.X7))};static#t=this.\u0275cmp=n.VBU({type:r,selectors:[["app-vr-enc-p-r-qacard"]],decls:54,vars:32,consts:[["tagPlaceHolder",""],["nzHeader","T\xecm ki\u1ebfm",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","6"],["nzXs","24","nzSm","24","nzLg","24"],["nzPlaceHolder","Line","nzShowSearch","","nzAllowClear","",3,"ngModelChange","ngModel","nzSize"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"ngModelChange","nzSize","ngModel"],["nzPlaceHolder","Shifts","nzShowSearch","","nzAllowClear","",3,"ngModelChange","ngModel","nzSize"],["nz-button","","nzType","primary",3,"click","nzSize"],["nz-button","","nzType","primary",2,"background","green","margin-left","5px",3,"click","nzSize"],[3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"visible"],[3,"enabled"],["dataField","line","caption","Line"],["dataField","model","caption","Product"],["dataField","shift","caption","Shift"],["caption","Customer","cellTemplate","customerCodeTemplate"],[3,"click",4,"dxTemplate","dxTemplateOf"],["dataField","date","dataType","date","caption","Date","format","yyyy-MM-dd"],["caption","Tr\u1ea1ng th\xe1i","cellTemplate","statusTemplate"],["style","text-align: center; color: green",4,"dxTemplate","dxTemplateOf"],["column","lotNo","summaryType","count"],["column","qty","summaryType","sum","valueFormat","#,##0"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Download QA card",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[4,"nzModalFooter"],["nzWidth","750px",3,"nzVisibleChange","nzVisible","nzTitle"],["nzTitle","Print QA card",3,"nzVisibleChange","nzVisible"],[3,"nzValue","nzLabel"],[3,"click"],[2,"text-align","center","color","green"],["nz-button","","style","color: rgb(107, 45, 1)",3,"click",4,"nzSpaceItem"],["nz-button","","style","color: blue",3,"routerLink","queryParams",4,"nzSpaceItem"],["nz-button","",3,"routerLink","queryParams",4,"nzSpaceItem"],["nz-button","",2,"color","rgb(107, 45, 1)",3,"click"],["nz-button","",2,"color","blue",3,"routerLink","queryParams"],["nz-button","",3,"routerLink","queryParams"],["nzTip","Downloading..."],["nzType","info","nzMessage","Downloading","nzDescription","B\u1ea1n vui l\xf2ng ch\u1edd \u0111\u1ec3 h\u1ec7 th\u1ed1ng download QA card"],["nzBordered","","nzFrontPagination","false",3,"nzData"],[3,"ngModelChange","ngModel","nzDisabled"],["nzPlaceHolder","Shifts","nzAllowClear","","nzShowSearch","",3,"ngModelChange","ngModel","nzDisabled"],["nzPlaceHolder","Line","nzAllowClear","","nzShowSearch","",3,"ngModelChange","ngModel","nzDisabled"],["nzPlaceHolder","Model","nzAllowClear","","nzShowSearch","",3,"ngModelChange","ngModel","nzDisabled"],["nzMode","multiple","nzPlaceHolder","Customers",2,"width","100%",3,"ngModelChange","nzMaxTagCount","nzMaxTagPlaceholder","ngModel"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-input","","placeholder","Nh\u1eadp ghi ch\xfa",3,"ngModelChange","ngModel","disabled"],[4,"ngIf"],[3,"nzLabel","nzValue"],["colspan","4"],[1,"error"],["nz-icon","","nzType","warning","nzTheme","outline",2,"color","red"],[2,"color","red","margin-left","5px"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click"],["id","printLabel"],[1,"qa-card-label"],[2,"text-align","center"],["rowspan","3",2,"text-align","center"],[3,"qrdata","allowEmptyString","cssClass","elementType","errorCorrectionLevel","margin","scale","width"],["colspan","2",2,"text-align","center"],[2,"color","green"],["nz-button","","printSectionId","printLabel","ngxPrint","",3,"nzType","useExistingCss"],["nz-icon","","nzType","printer"]],template:function(i,o){1&i&&(n.j41(0,"nz-collapse")(1,"nz-collapse-panel",1)(2,"div",2)(3,"div",3)(4,"label",4),n.EFF(5,"Line"),n.k0s(),n.j41(6,"div",4)(7,"nz-select",5),n.mxI("ngModelChange",function(_){return n.DH7(o.searchVo.line,_)||(o.searchVo.line=_),_}),n.DNE(8,pn,1,2,"nz-option",6),n.k0s()()(),n.j41(9,"div",3)(10,"label",4),n.EFF(11,"Date"),n.k0s(),n.j41(12,"div",4)(13,"nz-date-picker",7),n.mxI("ngModelChange",function(_){return n.DH7(o.searchVo.date,_)||(o.searchVo.date=_),_}),n.k0s()()(),n.j41(14,"div",3)(15,"label",4),n.EFF(16,"Shift"),n.k0s(),n.j41(17,"div",4)(18,"nz-select",8),n.mxI("ngModelChange",function(_){return n.DH7(o.searchVo.shift,_)||(o.searchVo.shift=_),_}),n.DNE(19,_n,1,2,"nz-option",6),n.k0s()()(),n.j41(20,"div",3)(21,"label",4),n.EFF(22,"\xa0"),n.k0s(),n.j41(23,"div",4)(24,"button",9),n.bIt("click",function(){return o.onSearch()}),n.EFF(25," T\xecm ki\u1ebfm "),n.k0s(),n.j41(26,"button",10),n.bIt("click",function(){return o.openQACardModal(null)}),n.EFF(27," T\u1ea1o QA card "),n.k0s()()()()()(),n.nrm(28,"br"),n.j41(29,"dx-data-grid",11),n.nrm(30,"dxo-filter-row",12)(31,"dxo-column-fixing",13)(32,"dxi-column",14)(33,"dxi-column",15)(34,"dxi-column",16)(35,"dxi-column",17),n.DNE(36,mn,2,1,"div",18),n.nrm(37,"dxi-column",19)(38,"dxi-column",20),n.DNE(39,gn,5,0,"div",21),n.j41(40,"dxo-summary"),n.nrm(41,"dxi-total-item",22)(42,"dxi-total-item",23),n.k0s(),n.nrm(43,"dxo-paging",24)(44,"dxo-pager",25),n.k0s(),n.j41(45,"nz-modal",26),n.mxI("nzVisibleChange",function(_){return n.DH7(o.isOpenModalLoading,_)||(o.isOpenModalLoading=_),_}),n.DNE(46,Cn,3,0,"ng-container",27)(47,fn,1,0,"div",28),n.k0s(),n.j41(48,"nz-modal",29),n.mxI("nzVisibleChange",function(_){return n.DH7(o.isOpenQAModal,_)||(o.isOpenQAModal=_),_}),n.DNE(49,yn,43,21,"ng-container",27)(50,Tn,5,1,"div",28),n.k0s(),n.j41(51,"nz-modal",30),n.mxI("nzVisibleChange",function(_){return n.DH7(o.isOpenPrintQAModal,_)||(o.isOpenPrintQAModal=_),_}),n.DNE(52,On,22,15,"ng-container",27)(53,Fn,6,2,"div",28),n.k0s()),2&i&&(n.R7$(),n.Y8G("nzActive",!0)("nzShowArrow",!0),n.R7$(),n.Y8G("nzGutter",24),n.R7$(5),n.R50("ngModel",o.searchVo.line),n.Y8G("nzSize","large"),n.R7$(),n.Y8G("ngForOf",o.lines),n.R7$(5),n.Y8G("nzSize","large"),n.R50("ngModel",o.searchVo.date),n.R7$(5),n.R50("ngModel",o.searchVo.shift),n.Y8G("nzSize","large"),n.R7$(),n.Y8G("ngForOf",o.shifts),n.R7$(5),n.Y8G("nzSize","large"),n.R7$(2),n.Y8G("nzSize","large"),n.R7$(3),n.Y8G("dataSource",o.qaCards)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),n.R7$(),n.Y8G("visible",!0),n.R7$(),n.Y8G("enabled",!0),n.R7$(5),n.Y8G("dxTemplateOf","customerCodeTemplate"),n.R7$(3),n.Y8G("dxTemplateOf","statusTemplate"),n.R7$(4),n.Y8G("pageSize",10),n.R7$(),n.Y8G("showPageSizeSelector",!0)("allowedPageSizes",n.lJ4(31,an)),n.R7$(),n.R50("nzVisible",o.isOpenModalLoading),n.R7$(3),n.R50("nzVisible",o.isOpenQAModal),n.Y8G("nzTitle",o.isEditMode?"C\u1eadp nh\u1eadt QA Card":"T\u1ea1o m\u1edbi QA Card"),n.R7$(3),n.R50("nzVisible",o.isOpenPrintQAModal))},dependencies:[f.Sq,f.bT,e.me,e.BC,e.vS,T.Wk,O.s,z.Omo,z.nj_,z.FTx,z.sVQ,z.PVd,z.XvM,z.CWS,j.eC,a.Y,P.Uq,P.e,b.CP,b.SO,b.aj,b.kt,I.Sy,V.ld,V.WI,D.F2,D.Oj,D.A9,v.aO,G.c,L.p,F.Vz,F.pc,k.SN,$.a,q.Dn,J.G,on.c,en.U5,en.Dq,f.vh],styles:["nz-select[_ngcontent-%COMP%], nz-date-picker[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}nz-table[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{border:1px solid red;font-weight:700;padding:5px}.qa-card-label[_ngcontent-%COMP%]{width:250px;vertical-align:middle}.qa-card-label[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:2px solid black;border-collapse:collapse}.qa-card-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}"]})}return r})(),kn=(()=>{class r{constructor(){}ngOnInit(){}static#n=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275cmp=n.VBU({type:r,selectors:[["app-vr-enc-p-r-return"]],decls:2,vars:0,template:function(i,o){1&i&&(n.j41(0,"p"),n.EFF(1,"vr-enc-p-r-return works!"),n.k0s())}})}return r})();var Dn=l(92887),Sn=l(71451),An=l(2578);const xn=()=>[10,25,50,100];function jn(r,g){if(1&r&&n.nrm(0,"nz-option",28),2&r){const t=g.$implicit;n.Y8G("nzValue",t.name)("nzLabel",t.name)}}const In=[{path:"menu",component:p},{path:"insert",component:Z},{path:"qa-card",component:Vn},{path:"traceability",component:(()=>{class r{constructor(t,i){this.toastr=t,this.vrEncPRSvc=i,this.searchVo={fromDate:new Date,toDate:new Date,line:null},this.date=[new Date,new Date]}ngOnInit(){this.getLines(2)}getLines(t){this.vrEncPRSvc.getLines(t).subscribe(i=>{this.lines=i,console.log("Lines: ",this.lines)})}onSearch(){console.log(this.searchVo),this.vrEncPRSvc.traceability(this.searchVo).subscribe(t=>{this.records=t})}onChangeTime(t){this.searchVo.fromDate=t[0],this.searchVo.toDate=t[1]}onExportClient(t){const i=new Dn.Workbook,o=i.addWorksheet("Main sheet");(0,Sn.V)({component:t.component,worksheet:o}).then(function(){i.xlsx.writeBuffer().then(function(c){An(new Blob([c],{type:"application/octet-stream"}),"VR-Process-Records.xlsx")})})}static#n=this.\u0275fac=function(i){return new(i||r)(n.rXU(N.tw),n.rXU(B))};static#t=this.\u0275cmp=n.VBU({type:r,selectors:[["app-vr-enc-p-r-traceability"]],decls:42,vars:20,consts:[["nzHeader","T\xecm ki\u1ebfm",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","12","nzSm","12","nzLg","5"],["nzXs","24","nzSm","24","nzLg","24"],["nzPlaceHolder","Line",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFormat","yyyy-MM-dd","nzMode","date",3,"ngModelChange","ngModel"],["nz-col","","nzXs","12","nzSm","12","nzLg","14"],["nz-button","","nzType","primary",3,"click"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],[3,"visible"],["dataField","ppn","caption","Model"],["dataField","cpn","caption","Part No"],["dataField","clotno","caption","Lot No"],["dataField","qty","caption","Qty","dataType","number","format","#,##0"],["dataField","line","caption","Line"],["dataField","shift","caption","Shift"],["dataField","processName","caption","Process Name"],["dataField","plotno","caption","QA Card"],["dataField","employee","caption","Employee"],["dataField","username","caption","Username"],["dataField","createdAt","dataType","date","caption","Created At","format","yyyy-MM-dd HH:mm"],["dataField","remark","caption","Remark"],["column","lotNo","summaryType","count"],["column","qty","summaryType","sum","valueFormat","#,##0"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],[3,"nzValue","nzLabel"]],template:function(i,o){1&i&&(n.j41(0,"nz-collapse")(1,"nz-collapse-panel",0)(2,"div",1)(3,"div",2)(4,"label",3),n.EFF(5,"Line"),n.k0s(),n.j41(6,"div",3)(7,"nz-select",4),n.mxI("ngModelChange",function(_){return n.DH7(o.searchVo.line,_)||(o.searchVo.line=_),_}),n.DNE(8,jn,1,2,"nz-option",5),n.k0s()()(),n.j41(9,"div",2)(10,"label",3),n.EFF(11,"Date"),n.k0s(),n.j41(12,"div",3)(13,"nz-range-picker",6),n.mxI("ngModelChange",function(_){return n.DH7(o.date,_)||(o.date=_),_}),n.bIt("ngModelChange",function(_){return o.onChangeTime(_)}),n.k0s()()(),n.j41(14,"div",7)(15,"label",3),n.EFF(16,"\xa0"),n.k0s(),n.j41(17,"div",3)(18,"button",8),n.bIt("click",function(){return o.onSearch()}),n.EFF(19,"Search"),n.k0s()()()()()(),n.nrm(20,"br"),n.j41(21,"dx-data-grid",9),n.bIt("onExporting",function(_){return o.onExportClient(_)}),n.nrm(22,"dxo-export",10)(23,"dxo-filter-row",11)(24,"dxo-column-fixing",10)(25,"dxi-column",12)(26,"dxi-column",13)(27,"dxi-column",14)(28,"dxi-column",15)(29,"dxi-column",16)(30,"dxi-column",17)(31,"dxi-column",18)(32,"dxi-column",19)(33,"dxi-column",20)(34,"dxi-column",21)(35,"dxi-column",22)(36,"dxi-column",23),n.j41(37,"dxo-summary"),n.nrm(38,"dxi-total-item",24)(39,"dxi-total-item",25),n.k0s(),n.nrm(40,"dxo-paging",26)(41,"dxo-pager",27),n.k0s()),2&i&&(n.R7$(),n.Y8G("nzActive",!0)("nzShowArrow",!0),n.R7$(),n.Y8G("nzGutter",24),n.R7$(5),n.R50("ngModel",o.searchVo.line),n.R7$(),n.Y8G("ngForOf",o.lines),n.R7$(5),n.R50("ngModel",o.date),n.R7$(8),n.Y8G("dataSource",o.records)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),n.R7$(),n.Y8G("enabled",!0),n.R7$(),n.Y8G("visible",!0),n.R7$(),n.Y8G("enabled",!0),n.R7$(16),n.Y8G("pageSize",10),n.R7$(),n.Y8G("showPageSizeSelector",!0)("allowedPageSizes",n.lJ4(19,xn)))},dependencies:[f.Sq,e.BC,e.vS,O.s,z.Omo,z.nj_,z.ZJU,z.FTx,z.sVQ,z.PVd,z.XvM,z.CWS,P.Uq,P.e,V.ld,V.WI,v.aO,G.c,L.p,F.Vz,F.pc,k.SN,k.vw],styles:["nz-select[_ngcontent-%COMP%]{width:100%}"]})}return r})()},{path:"return",component:kn}];let Nn=(()=>{class r{static#n=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=n.$C({type:r});static#e=this.\u0275inj=n.G2t({imports:[T.iI.forChild(In),T.iI]})}return r})();var Bn=l(53606);let Gn=(()=>{class r{static#n=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=n.$C({type:r});static#e=this.\u0275inj=n.G2t({imports:[f.MD,e.YN,Nn,O.N,x.EJ,a.$,P.f3,b.$G,I.j,V.DH,D.U6,Q.g9,v.Zw,F.GB,k.LE,$.V,q.Y3,Bn.t,J.j,on.f,en.pc]})}return r})()},23617:(tn,U,l)=>{l.d(U,{$:()=>C,Y:()=>h});var f=l(15215),e=l(54438),$=l(45286),O=l(7605),a=l(40713),x=l(16042),v=l(57806),F=l(70317),k=l(72544),P=l(28203);function I(s,E){1&s&&e.eu8(0)}function D(s,E){if(1&s&&e.DNE(0,I,1,0,"ng-container",6),2&s){const d=e.XpG(3);e.Y8G("nzStringTemplateOutlet",d.nzIcon)}}function Q(s,E){if(1&s&&e.nrm(0,"span",7),2&s){const d=e.XpG(3);e.Y8G("nzType",d.nzIconType||d.inferredIconType)("nzTheme",d.iconTheme)}}function V(s,E){if(1&s&&(e.j41(0,"div",2),e.DNE(1,D,1,1,"ng-container")(2,Q,1,2),e.k0s()),2&s){const d=e.XpG(2);e.R7$(),e.vxM(1,d.nzIcon?1:2)}}function b(s,E){if(1&s&&(e.qex(0),e.EFF(1),e.bVm()),2&s){const d=e.XpG(4);e.R7$(),e.JRh(d.nzMessage)}}function T(s,E){if(1&s&&(e.j41(0,"span",8),e.DNE(1,b,2,1,"ng-container",6),e.k0s()),2&s){const d=e.XpG(3);e.R7$(),e.Y8G("nzStringTemplateOutlet",d.nzMessage)}}function n(s,E){if(1&s&&(e.qex(0),e.EFF(1),e.bVm()),2&s){const d=e.XpG(4);e.R7$(),e.JRh(d.nzDescription)}}function N(s,E){if(1&s&&(e.j41(0,"span",9),e.DNE(1,n,2,1,"ng-container",6),e.k0s()),2&s){const d=e.XpG(3);e.R7$(),e.Y8G("nzStringTemplateOutlet",d.nzDescription)}}function X(s,E){if(1&s&&(e.j41(0,"div",3),e.DNE(1,T,2,1,"span",8)(2,N,2,1,"span",9),e.k0s()),2&s){const d=e.XpG(2);e.R7$(),e.vxM(1,d.nzMessage?1:-1),e.R7$(),e.vxM(2,d.nzDescription?2:-1)}}function H(s,E){if(1&s&&(e.qex(0),e.EFF(1),e.bVm()),2&s){const d=e.XpG(3);e.R7$(),e.JRh(d.nzAction)}}function B(s,E){if(1&s&&(e.j41(0,"div",4),e.DNE(1,H,2,1,"ng-container",6),e.k0s()),2&s){const d=e.XpG(2);e.R7$(),e.Y8G("nzStringTemplateOutlet",d.nzAction)}}function G(s,E){if(1&s&&(e.qex(0),e.j41(1,"span",11),e.EFF(2),e.k0s(),e.bVm()),2&s){const d=e.XpG(4);e.R7$(2),e.JRh(d.nzCloseText)}}function L(s,E){if(1&s&&e.DNE(0,G,3,1,"ng-container",6),2&s){const d=e.XpG(3);e.Y8G("nzStringTemplateOutlet",d.nzCloseText)}}function Y(s,E){1&s&&e.nrm(0,"span",12)}function W(s,E){if(1&s){const d=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(d);const A=e.XpG(2);return e.Njj(A.closeAlert())}),e.DNE(1,L,1,1,"ng-container")(2,Y,1,0),e.k0s()}if(2&s){const d=e.XpG(2);e.R7$(),e.vxM(1,d.nzCloseText?1:2)}}function u(s,E){if(1&s){const d=e.RV6();e.j41(0,"div",1),e.bIt("@slideAlertMotion.done",function(){e.eBV(d);const A=e.XpG();return e.Njj(A.onFadeAnimationDone())}),e.DNE(1,V,3,1,"div",2)(2,X,3,2,"div",3)(3,B,2,1,"div",4)(4,W,3,1,"button",5),e.k0s()}if(2&s){const d=e.XpG();e.AVh("ant-alert-rtl","rtl"===d.dir)("ant-alert-success","success"===d.nzType)("ant-alert-info","info"===d.nzType)("ant-alert-warning","warning"===d.nzType)("ant-alert-error","error"===d.nzType)("ant-alert-no-icon",!d.nzShowIcon)("ant-alert-banner",d.nzBanner)("ant-alert-closable",d.nzCloseable)("ant-alert-with-description",!!d.nzDescription),e.Y8G("@.disabled",d.nzNoAnimation)("@slideAlertMotion",void 0),e.R7$(),e.vxM(1,d.nzShowIcon?1:-1),e.R7$(),e.vxM(2,d.nzMessage||d.nzDescription?2:-1),e.R7$(),e.vxM(3,d.nzAction?3:-1),e.R7$(),e.vxM(4,d.nzCloseable||d.nzCloseText?4:-1)}}const S="alert";let h=(()=>{class s{constructor(d,y,A){this.nzConfigService=d,this.cdr=y,this.directionality=A,this._nzModuleName=S,this.nzAction=null,this.nzCloseText=null,this.nzIconType=null,this.nzMessage=null,this.nzDescription=null,this.nzType="info",this.nzCloseable=!1,this.nzShowIcon=!1,this.nzBanner=!1,this.nzNoAnimation=!1,this.nzIcon=null,this.nzOnClose=new e.bkB,this.closed=!1,this.iconTheme="fill",this.inferredIconType="info-circle",this.dir="ltr",this.isTypeSet=!1,this.isShowIconSet=!1,this.destroy$=new $.B7,this.nzConfigService.getConfigChangeEventForComponent(S).pipe((0,O.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,O.Q)(this.destroy$)).subscribe(d=>{this.dir=d,this.cdr.detectChanges()}),this.dir=this.directionality.value}closeAlert(){this.closed=!0}onFadeAnimationDone(){this.closed&&this.nzOnClose.emit(!0)}ngOnChanges(d){const{nzShowIcon:y,nzDescription:A,nzType:K,nzBanner:Z}=d;if(y&&(this.isShowIconSet=!0),K)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle"}A&&(this.iconTheme=this.nzDescription?"outline":"fill"),Z&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static#n=this.\u0275fac=function(y){return new(y||s)(e.rXU(x.yx),e.rXU(e.gRc),e.rXU(P.dS,8))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["nz-alert"]],inputs:{nzAction:"nzAction",nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzCloseable:"nzCloseable",nzShowIcon:"nzShowIcon",nzBanner:"nzBanner",nzNoAnimation:"nzNoAnimation",nzIcon:"nzIcon"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:1,consts:[[1,"ant-alert",3,"ant-alert-rtl","ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description"],[1,"ant-alert"],[1,"ant-alert-icon"],[1,"ant-alert-content"],[1,"ant-alert-action"],["type","button","tabindex","0",1,"ant-alert-close-icon"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType","nzTheme"],[1,"ant-alert-message"],[1,"ant-alert-description"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],[1,"ant-alert-close-text"],["nz-icon","","nzType","close"]],template:function(y,A){1&y&&e.DNE(0,u,5,24,"div",0),2&y&&e.vxM(0,A.closed?-1:0)},dependencies:[k.Y3,k.Dn,v.C,v.m],encapsulation:2,data:{animation:[a.Sn]},changeDetection:0})}return(0,f.Cg)([(0,x.H4)(),(0,F.H3)()],s.prototype,"nzCloseable",void 0),(0,f.Cg)([(0,x.H4)(),(0,F.H3)()],s.prototype,"nzShowIcon",void 0),(0,f.Cg)([(0,F.H3)()],s.prototype,"nzBanner",void 0),(0,f.Cg)([(0,F.H3)()],s.prototype,"nzNoAnimation",void 0),s})(),C=(()=>{class s{static#n=this.\u0275fac=function(y){return new(y||s)};static#t=this.\u0275mod=e.$C({type:s});static#e=this.\u0275inj=e.G2t({imports:[h]})}return s})()},74696:(tn,U,l)=>{l.d(U,{GB:()=>W,Vz:()=>Y,pc:()=>G});var f=l(15215),e=l(54438),$=l(73586),O=l(7605),a=l(58728),x=l(40713),v=l(16042),F=l(57806),k=l(21025),P=l(70317),I=l(72544),D=l(28203),Q=l(26841);const V=["*"],b=["collapseHeader"];function T(u,S){if(1&u&&(e.qex(0),e.nrm(1,"span",7),e.bVm()),2&u){const h=S.$implicit,C=e.XpG(2);e.R7$(),e.Y8G("nzType",h||"right")("nzRotate",C.nzActive?90:0)}}function n(u,S){if(1&u&&(e.j41(0,"div"),e.DNE(1,T,2,2,"ng-container",3),e.k0s()),2&u){const h=e.XpG();e.R7$(),e.Y8G("nzStringTemplateOutlet",h.nzExpandedIcon)}}function N(u,S){if(1&u&&(e.qex(0),e.EFF(1),e.bVm()),2&u){const h=e.XpG();e.R7$(),e.JRh(h.nzHeader)}}function X(u,S){if(1&u&&(e.qex(0),e.EFF(1),e.bVm()),2&u){const h=e.XpG(2);e.R7$(),e.JRh(h.nzExtra)}}function H(u,S){if(1&u&&(e.j41(0,"div",4),e.DNE(1,X,2,1,"ng-container",3),e.k0s()),2&u){const h=e.XpG();e.R7$(),e.Y8G("nzStringTemplateOutlet",h.nzExtra)}}const B="collapse";let G=(()=>{class u{constructor(h,C,s,E){this.nzConfigService=h,this.cdr=C,this.directionality=s,this.destroy$=E,this._nzModuleName=B,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(B).pipe((0,O.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,O.Q)(this.destroy$)).subscribe(h=>{this.dir=h,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(h){this.listOfNzCollapsePanelComponent.push(h)}removePanel(h){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(h),1)}click(h){this.nzAccordion&&!h.nzActive&&this.listOfNzCollapsePanelComponent.filter(C=>C!==h).forEach(C=>{C.nzActive&&(C.nzActive=!1,C.nzActiveChange.emit(C.nzActive),C.markForCheck())}),h.nzActive=!h.nzActive,h.nzActiveChange.emit(h.nzActive)}static#n=this.\u0275fac=function(C){return new(C||u)(e.rXU(v.yx),e.rXU(e.gRc),e.rXU(D.dS,8),e.rXU(k.y4))};static#t=this.\u0275cmp=e.VBU({type:u,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(C,s){2&C&&e.AVh("ant-collapse-icon-position-start","left"===s.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===s.nzExpandIconPosition)("ant-collapse-ghost",s.nzGhost)("ant-collapse-borderless",!s.nzBordered)("ant-collapse-rtl","rtl"===s.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[e.Jv_([k.y4]),e.aNF],ngContentSelectors:V,decls:1,vars:0,template:function(C,s){1&C&&(e.NAR(),e.SdG(0))},encapsulation:2,changeDetection:0})}return(0,f.Cg)([(0,v.H4)(),(0,P.H3)()],u.prototype,"nzAccordion",void 0),(0,f.Cg)([(0,v.H4)(),(0,P.H3)()],u.prototype,"nzBordered",void 0),(0,f.Cg)([(0,v.H4)(),(0,P.H3)()],u.prototype,"nzGhost",void 0),u})();const L="collapsePanel";let Y=(()=>{class u{markForCheck(){this.cdr.markForCheck()}constructor(h,C,s,E,d,y){this.nzConfigService=h,this.ngZone=C,this.cdr=s,this.destroy$=E,this.nzCollapseComponent=d,this.noAnimation=y,this._nzModuleName=L,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new e.bkB,this.nzConfigService.getConfigChangeEventForComponent(L).pipe((0,O.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,$.R)(this.collapseHeader.nativeElement,"click").pipe((0,a.p)(()=>!this.nzDisabled),(0,O.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#n=this.\u0275fac=function(C){return new(C||u)(e.rXU(v.yx),e.rXU(e.SKi),e.rXU(e.gRc),e.rXU(k.y4),e.rXU(G,1),e.rXU(Q.z,8))};static#t=this.\u0275cmp=e.VBU({type:u,selectors:[["nz-collapse-panel"]],viewQuery:function(C,s){if(1&C&&e.GBs(b,7),2&C){let E;e.mGM(E=e.lsd())&&(s.collapseHeader=E.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(C,s){2&C&&e.AVh("ant-collapse-no-arrow",!s.nzShowArrow)("ant-collapse-item-active",s.nzActive)("ant-collapse-item-disabled",s.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[e.Jv_([k.y4]),e.aNF],ngContentSelectors:V,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(C,s){1&C&&(e.NAR(),e.j41(0,"div",1,0),e.DNE(2,n,2,1,"div"),e.j41(3,"span",2),e.DNE(4,N,2,1,"ng-container",3),e.k0s(),e.DNE(5,H,2,1,"div",4),e.k0s(),e.j41(6,"div",5)(7,"div",6),e.SdG(8),e.k0s()()),2&C&&(e.BMQ("aria-expanded",s.nzActive),e.R7$(2),e.vxM(2,s.nzShowArrow?2:-1),e.R7$(2),e.Y8G("nzStringTemplateOutlet",s.nzHeader),e.R7$(),e.vxM(5,s.nzExtra?5:-1),e.R7$(),e.AVh("ant-collapse-content-active",s.nzActive),e.Y8G("@.disabled",!(null==s.noAnimation||!s.noAnimation.nzNoAnimation))("@collapseMotion",s.nzActive?"expanded":"hidden"))},dependencies:[F.C,F.m,I.Y3,I.Dn],encapsulation:2,data:{animation:[x.GE]},changeDetection:0})}return(0,f.Cg)([(0,P.H3)()],u.prototype,"nzActive",void 0),(0,f.Cg)([(0,P.H3)()],u.prototype,"nzDisabled",void 0),(0,f.Cg)([(0,v.H4)(),(0,P.H3)()],u.prototype,"nzShowArrow",void 0),u})(),W=(()=>{class u{static#n=this.\u0275fac=function(C){return new(C||u)};static#t=this.\u0275mod=e.$C({type:u});static#e=this.\u0275inj=e.G2t({imports:[Y]})}return u})()},72874:(tn,U,l)=>{l.d(U,{PV:()=>A,g9:()=>Z});var f=l(15215),e=l(10851),$=l(32753),O=l(60177),a=l(54438),x=l(45286),v=l(7605),F=l(84046),k=l(77312),P=l(50513),I=l(40713),D=l(16042),Q=l(26841),V=l(57806),b=l(65463),T=l(70317),n=l(89450),N=l(72544),X=l(35154),H=l(28203),B=l(16389),G=l(25930);const L=["okBtn"],Y=["cancelBtn"];function W(m,w){1&m&&(a.j41(0,"div",6),a.nrm(1,"span",14),a.k0s())}function u(m,w){if(1&m&&(a.qex(0),a.j41(1,"span",16),a.nrm(2,"span",17),a.k0s(),a.bVm()),2&m){const p=w.$implicit;a.R7$(2),a.Y8G("nzType",p||"exclamation-circle")}}function S(m,w){if(1&m&&(a.qex(0),a.DNE(1,u,3,1,"ng-container",10),a.j41(2,"div",15),a.EFF(3),a.k0s(),a.bVm()),2&m){const p=a.XpG(2);a.R7$(),a.Y8G("nzStringTemplateOutlet",p.nzIcon),a.R7$(2),a.JRh(p.nzTitle)}}function h(m,w){if(1&m&&a.EFF(0),2&m){const p=a.XpG(2);a.SpI(" ",p.nzCancelText," ")}}function C(m,w){1&m&&(a.EFF(0),a.nI1(1,"nzI18n")),2&m&&a.SpI(" ",a.bMT(1,1,"Modal.cancelText")," ")}function s(m,w){if(1&m&&a.EFF(0),2&m){const p=a.XpG(2);a.SpI(" ",p.nzOkText," ")}}function E(m,w){1&m&&(a.EFF(0),a.nI1(1,"nzI18n")),2&m&&a.SpI(" ",a.bMT(1,1,"Modal.okText")," ")}function d(m,w){if(1&m){const p=a.RV6();a.j41(0,"div",4)(1,"div",5),a.DNE(2,W,2,0,"div",6),a.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),a.DNE(7,S,4,2,"ng-container",10),a.k0s(),a.j41(8,"div",11)(9,"button",12,1),a.bIt("click",function(){a.eBV(p);const z=a.XpG();return a.Njj(z.onCancel())}),a.DNE(11,h,1,1)(12,C,2,3),a.k0s(),a.j41(13,"button",13,2),a.bIt("click",function(){a.eBV(p);const z=a.XpG();return a.Njj(z.onConfirm())}),a.DNE(15,s,1,1)(16,E,2,3),a.k0s()()()()()()()}if(2&m){const p=a.XpG();a.AVh("ant-popover-rtl","rtl"===p.dir),a.Y8G("cdkTrapFocusAutoCapture",null!==p.nzAutoFocus)("ngClass",p._classMap)("ngStyle",p.nzOverlayStyle)("@.disabled",!(null==p.noAnimation||!p.noAnimation.nzNoAnimation))("nzNoAnimation",null==p.noAnimation?null:p.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),a.R7$(2),a.vxM(2,p.nzPopconfirmShowArrow?2:-1),a.R7$(5),a.Y8G("nzStringTemplateOutlet",p.nzTitle),a.R7$(2),a.Y8G("nzSize","small"),a.BMQ("cdkFocusInitial","cancel"===p.nzAutoFocus||null),a.R7$(2),a.vxM(11,p.nzCancelText?11:12),a.R7$(2),a.Y8G("nzSize","small")("nzType","danger"!==p.nzOkType?p.nzOkType:"primary")("nzDanger",p.nzOkDanger||"danger"===p.nzOkType)("nzLoading",p.confirmLoading)("disabled",p.nzOkDisabled),a.BMQ("cdkFocusInitial","ok"===p.nzAutoFocus||null),a.R7$(2),a.vxM(15,p.nzOkText?15:16)}}let A=(()=>{class m extends X.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(K),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new a.bkB,this.nzOnCancel=new a.bkB,this.nzOnConfirm=new a.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,v.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,v.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#n=this.\u0275fac=function(M){return new(M||m)};static#t=this.\u0275dir=a.FsC({type:m,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(M,z){2&M&&a.AVh("ant-popover-open",z.visible)},inputs:{arrowPointAtCenter:[a.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[a.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[a.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[a.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[a.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[a.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[a.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[a.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[a.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[a.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[a.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[a.Vt3]})}return(0,f.Cg)([(0,T.H3)()],m.prototype,"arrowPointAtCenter",void 0),(0,f.Cg)([(0,T.H3)()],m.prototype,"nzOkDisabled",void 0),(0,f.Cg)([(0,T.H3)()],m.prototype,"nzOkDanger",void 0),(0,f.Cg)([(0,T.H3)()],m.prototype,"nzCondition",void 0),(0,f.Cg)([(0,T.H3)()],m.prototype,"nzPopconfirmShowArrow",void 0),(0,f.Cg)([(0,D.H4)()],m.prototype,"nzPopconfirmBackdrop",void 0),(0,f.Cg)([(0,D.H4)()],m.prototype,"nzAutofocus",void 0),m})(),K=(()=>{class m extends X.VJ{constructor(p,M,z,j,q){super(p,z,q),this.elementRef=M,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new x.B7,this.nzOnConfirm=new x.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=j}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const p=(0,T.cG)(this.nzBeforeConfirm()).pipe((0,F.$)());this.confirmLoading=!0,p.pipe((0,k.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,v.Q)(this.nzVisibleChange),(0,v.Q)(this.destroy$)).subscribe(M=>{M&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const p=this.elementFocusedBeforeModalWasOpened;if(p&&"function"==typeof p.focus){const M=this.document.activeElement,z=this.elementRef.nativeElement;(!M||M===this.document.body||M===z||z.contains(M))&&p.focus()}}static#n=this.\u0275fac=function(M){return new(M||m)(a.rXU(a.gRc),a.rXU(a.aKT),a.rXU(H.dS,8),a.rXU(O.qQ,8),a.rXU(Q.z,9))};static#t=this.\u0275cmp=a.VBU({type:m,selectors:[["nz-popconfirm"]],viewQuery:function(M,z){if(1&M&&(a.GBs(L,5,a.aKT),a.GBs(Y,5,a.aKT)),2&M){let j;a.mGM(j=a.lsd())&&(z.okBtn=j),a.mGM(j=a.lsd())&&(z.cancelBtn=j)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[a.Vt3,a.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(M,z){if(1&M){const j=a.RV6();a.DNE(0,d,17,20,"ng-template",3,0,a.C5r),a.bIt("overlayOutsideClick",function(J){return a.eBV(j),a.Njj(z.onClickOutside(J))})("detach",function(){return a.eBV(j),a.Njj(z.hide())})("positionChange",function(J){return a.eBV(j),a.Njj(z.onPositionChange(J))})}2&M&&a.Y8G("cdkConnectedOverlayHasBackdrop",z.nzBackdrop)("cdkConnectedOverlayOrigin",z.origin)("cdkConnectedOverlayPositions",z._positions)("cdkConnectedOverlayOpen",z._visible)("cdkConnectedOverlayPush",z.cdkConnectedOverlayPush)("nzArrowPointAtCenter",z.nzArrowPointAtCenter)},dependencies:[$.z_,$.WB,b.$_,b.vT,e.Pd,e.kB,O.YU,O.B3,Q.z,V.C,V.m,N.Y3,N.Dn,P.Zw,P.aO,B.c,G.p,n.bP,n.Vc],encapsulation:2,data:{animation:[I.uX]},changeDetection:0})}return m})(),Z=(()=>{class m{static#n=this.\u0275fac=function(M){return new(M||m)};static#t=this.\u0275mod=a.$C({type:m});static#e=this.\u0275inj=a.G2t({imports:[K]})}return m})()}}]);