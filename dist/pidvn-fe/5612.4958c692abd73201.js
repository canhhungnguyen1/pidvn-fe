"use strict";(self.webpackChunkpidvn_fe=self.webpackChunkpidvn_fe||[]).push([[5612],{65612:(J,G,l)=>{l.r(G),l.d(G,{WarehouseModule:()=>Ae});var v=l(60177),s=l(89417),x=l(31958),y=l(50513),a=l(74696),V=l(38927),B=l(97529),F=l(72544),f=l(21011),I=l(43053),b=l(72874),M=l(23359),S=l(9541),O=l(46661),D=l(12673),e=l(54438),j=l(45794),w=l(45312),q=l(21626);let X=(()=>{class i{constructor(t){this.httpClient=t,this.baseUrl=w.c.baseUrl}getCheckLotNoIqc(t){return this.httpClient.post(`${this.baseUrl}/WH/Check_date_iqc/Check`,t)}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(q.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var N=l(37736),m=l(31837);const $=()=>[10,25,50,100];let U=(()=>{class i{constructor(t,o,n,r){this.toastr=t,this.checkDateIqcSvc=o,this.jwtHelperService=n,this.datepipe=r,this.isOpenIqcRequestModal=!1,this.isOpenIqcDetailModal=!1,this.searchVo={},this.iqcRequest={}}ngOnInit(){}ngAfterViewInit(){this.getDataIqcCheckDate()}getDataIqcCheckDate(){let t=new Date,o=t.setMonth(t.getMonth()-1),n=this.datepipe.transform(o,"yyyy-MM");this.dataGrid.instance.beginCustomLoading("Loading"),this.checkDateIqcSvc.getCheckLotNoIqc({month:n}).subscribe(r=>{this.dataGrid.instance.endCustomLoading(),this.data=r}),console.log(this.data)}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(j.tw),e.rXU(X),e.rXU(N.X7),e.rXU(v.vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-check-date-iqc"]],viewQuery:function(o,n){if(1&o&&e.GBs(D.s,5),2&o){let r;e.mGM(r=e.lsd())&&(n.dataGrid=r.first)}},decls:20,vars:14,consts:[["dataGrid",""],["id","gridContainer",3,"dataSource","remoteOperations","allowColumnReordering","rowAlternationEnabled","showBorders","columnAutoWidth"],[3,"height","width"],[3,"visible"],[3,"enabled"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["dataField","month","caption","Th\xe1ng ki\u1ec3m k\xea"],["dataField","date","caption","Ng\xe0y IQC IPH","format","yyyy-MM-dd","dataType","date"],["dataField","model","caption","Model"],["dataField","lotNo","caption","Lot No"],["dataField","qty","caption","Qty"],["dataField","lotGroup","caption","Lot Groups"],["dataField","updateAt","caption","Ng\xe0y IQC Outside","format","yyyy-MM-dd","dataType","date"]],template:function(o,n){1&o&&(e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," WAREHOUSE "),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," Ki\u1ec3m tra h\xe0ng IQC qu\xe1 6 th\xe1ng "),e.k0s()(),e.nrm(5,"br"),e.j41(6,"dx-data-grid",1,0),e.nrm(8,"dxo-load-panel",2)(9,"dxo-filter-row",3)(10,"dxo-export",4)(11,"dxo-paging",5)(12,"dxo-pager",6)(13,"dxi-column",7)(14,"dxi-column",8)(15,"dxi-column",9)(16,"dxi-column",10)(17,"dxi-column",11)(18,"dxi-column",12)(19,"dxi-column",13),e.k0s()),2&o&&(e.R7$(6),e.Y8G("dataSource",n.data)("remoteOperations",!1)("allowColumnReordering",!0)("rowAlternationEnabled",!0)("showBorders",!0)("columnAutoWidth",!0),e.R7$(2),e.Y8G("height",100)("width",250),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(13,$)))},dependencies:[x.hL,x.K7,D.s,m.nj_,m.ZJU,m.FTx,m.xzc,m.sVQ,m.PVd]})}return i})();class W{}var h=l(92887),A=l(2578),g=l(71451);let _=(()=>{class i{constructor(t){this.httpClient=t,this.baseUrl=w.c.baseUrl}saveMaterial(t){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt/SaveMaterials`,t)}getMaterials(t){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt`,t)}getLotsByLotNo(t){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt/GetLotsByLotNo`,t)}saveBigBox(t,o){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt/SaveBigBox?invoice=${o}`,t)}findSlipByInvoice(t){return this.httpClient.get(`${this.baseUrl}/Warehouse/Material/Receipt/Slip?invoice=${t}`)}deleteRecord(t){return this.httpClient.put(`${this.baseUrl}/Warehouse/Material/Receipt/Record`,t)}getDetailOuterLabel(t){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt/DetailOuterLabel`,t)}createPurWhHeader(t){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt/CreatePurWhHeader`,t)}getInvoiceDetail(t){return this.httpClient.post(`${this.baseUrl}/Warehouse/Material/Receipt/InvoiceDetail`,t)}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(q.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var z=l(16389),T=l(25930),L=l(58960),Y=l(27380);const Z=()=>[10,25,50,100];function K(i,C){if(1&i){const t=e.RV6();e.j41(0,"i",65),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.clearQrCode())}),e.k0s()}}function ee(i,C){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"uppercase"),e.k0s(),e.j41(4,"td",75),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td",73)(19,"a",76),e.bIt("nzOnConfirm",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.deleteScannedData(n))}),e.EFF(20," X\xf3a "),e.k0s()()()}if(2&i){const t=C.$implicit;e.R7$(2),e.JRh(e.bMT(3,8,t.model)),e.R7$(3),e.JRh(t.qty),e.R7$(2),e.JRh(t.lotNo),e.R7$(2),e.JRh(t.vendorCode),e.R7$(2),e.JRh(t.serial),e.R7$(2),e.JRh(t.invoiceNo),e.R7$(2),e.JRh(t.poNo),e.R7$(2),e.JRh(t.slipNo)}}function p(i,C){if(1&i){const t=e.RV6();e.j41(0,"div",66)(1,"div",67)(2,"div",68)(3,"button",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveData())}),e.EFF(4," L\u01b0u d\u1eef li\u1ec7u "),e.k0s()()(),e.j41(5,"div",67)(6,"div",70)(7,"label",71),e.EFF(8),e.nI1(9,"number"),e.k0s()()()(),e.j41(10,"nz-table",72,2)(12,"thead")(13,"tr")(14,"th",73),e.EFF(15,"Part No"),e.k0s(),e.j41(16,"th",73),e.EFF(17,"Qty"),e.k0s(),e.j41(18,"th",73),e.EFF(19,"Lot"),e.k0s(),e.j41(20,"th",73),e.EFF(21,"Vendor"),e.k0s(),e.j41(22,"th",73),e.EFF(23,"Serial"),e.k0s(),e.j41(24,"th",73),e.EFF(25,"Invoice"),e.k0s(),e.j41(26,"th",73),e.EFF(27,"PO"),e.k0s(),e.j41(28,"th",73),e.EFF(29,"Slip"),e.k0s(),e.j41(30,"th",73),e.EFF(31,"Action"),e.k0s()()(),e.j41(32,"tbody"),e.DNE(33,ee,21,10,"tr",74),e.k0s()()}if(2&i){const t=e.sdS(11),o=e.XpG();e.R7$(3),e.Y8G("nzLoading",o.isLoading),e.R7$(5),e.SpI(" Total Qty: ",e.i5U(9,6,o.totalQtyScanned,"1.3")," "),e.R7$(2),e.Y8G("nzData",o.listBoxScanned)("nzBordered",!0)("nzFrontPagination",!1),e.R7$(23),e.Y8G("ngForOf",t.data)}}function P(i,C){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",73)(4,"a",76),e.bIt("nzOnConfirm",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.deleteBigBoxScanned(n))}),e.EFF(5," X\xf3a "),e.k0s()()()}if(2&i){const t=C.$implicit;e.R7$(2),e.JRh(t.value)}}function d(i,C){if(1&i){const t=e.RV6();e.j41(0,"div",66)(1,"div",67)(2,"div",68)(3,"button",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDetailBigBox())}),e.EFF(4," L\u01b0u d\u1eef li\u1ec7u "),e.k0s()()(),e.j41(5,"div",67)(6,"div",70),e.nrm(7,"label",71),e.k0s()()(),e.j41(8,"nz-table",77,3)(10,"thead")(11,"tr")(12,"th",73),e.EFF(13,"Gi\xe1 tr\u1ecb"),e.k0s(),e.j41(14,"th",73),e.EFF(15,"Action"),e.k0s()()(),e.j41(16,"tbody"),e.DNE(17,P,6,1,"tr",74),e.k0s()()}if(2&i){const t=e.sdS(9),o=e.XpG();e.R7$(3),e.Y8G("nzLoading",o.isLoading),e.R7$(5),e.Y8G("nzData",o.listBigBoxScanned)("nzBordered",!0)("nzFrontPagination",!1),e.R7$(9),e.Y8G("ngForOf",t.data)}}function R(i,C){if(1&i){const t=e.RV6();e.j41(0,"div",78)(1,"a",79),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.deleteRecord(n.data))}),e.EFF(2,"X\xf3a"),e.k0s()()}}function E(i,C){if(1&i&&(e.qex(0),e.j41(1,"div",34)(2,"div",35)(3,"label",36),e.EFF(4),e.nI1(5,"number"),e.k0s(),e.j41(6,"label",37),e.EFF(7),e.nI1(8,"number"),e.k0s()()(),e.j41(9,"dx-data-grid",80),e.nrm(10,"dxo-selection",81)(11,"dxi-column",82)(12,"dxi-column",83)(13,"dxi-column",84)(14,"dxi-column",85),e.j41(15,"dxo-summary"),e.nrm(16,"dxi-group-item",86)(17,"dxi-group-item",87),e.k0s(),e.nrm(18,"dxi-sort-by-group-summary-info",88),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("nzGutter",24),e.R7$(3),e.SpI(" Total Record: ",e.bMT(5,8,t.listBigBoxDetail.length)," "),e.R7$(3),e.SpI(" Total Qty: ",e.i5U(8,10,t.totalQtyDetailBigBox,"1.0-3")," "),e.R7$(2),e.Y8G("dataSource",t.listBigBoxDetail)("showBorders",!0),e.R7$(2),e.Y8G("groupIndex",0),e.R7$(6),e.Y8G("showInGroupFooter",!1)("alignByColumn",!0)}}function k(i,C){if(1&i){const t=e.RV6();e.j41(0,"button",89),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelSaveBigBox())}),e.EFF(1," Close "),e.k0s(),e.j41(2,"button",90),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveBigBox())}),e.EFF(3," L\u01b0u "),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("nzLoading",t.loadingBtnSaveBigBox)}}function H(i,C){if(1&i&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&i){const t=C.$implicit;e.R7$(),e.SpI(" ",t," ")}}function Q(i,C){if(1&i&&(e.j41(0,"ul"),e.DNE(1,H,2,1,"li",74),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.responseMessage.duplicateList)}}function ie(i,C){if(1&i&&(e.qex(0),e.j41(1,"h4"),e.EFF(2),e.k0s(),e.j41(3,"h4"),e.EFF(4),e.k0s(),e.DNE(5,Q,2,1,"ul",91),e.bVm()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" S\u1ed1 l\u01b0\u1ee3ng \u0111\xe3 l\u01b0u: ",t.responseMessage?t.responseMessage.amountSaved:""," "),e.R7$(2),e.SpI(" S\u1ed1 l\u01b0\u1ee3ng b\u1ecb tr\xf9ng: ",t.responseMessage?t.responseMessage.duplicateList.length:""," "),e.R7$(),e.Y8G("ngIf",t.responseMessage)}}function ae(i,C){if(1&i){const t=e.RV6();e.j41(0,"button",92),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isShowResponseModal=!1)}),e.EFF(1," OK "),e.k0s()}}function se(i,C){if(1&i&&(e.qex(0),e.j41(1,"p"),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(2),e.JRh(t.errorMessage)}}function re(i,C){if(1&i){const t=e.RV6();e.j41(0,"button",92),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isShowErrorModal=!1)}),e.EFF(1," OK "),e.k0s()}}let le=(()=>{class i{constructor(t,o,n){this.toastr=t,this.jwtHelperService=o,this.materialReceiptService=n,this.isQrInValid=!1,this.isLoading=!1,this.listBoxScanned=new Array,this.mapBoxScanned=new Map,this.totalBoxScanned=0,this.totalQtyScanned=0,this.totalQtySearch=0,this.recordTotal=0,this.isShowErrorModal=!1,this.isShowResponseModal=!1,this.isShowBigBoxDetailModal=!1,this.searchVo={model:null,lotNo:null,whUserCode:null,currentPage:1,recordPerPage:10,recordStart:0,recordTotal:50,fromDate:null,toDate:null,slipNo:null,invoice:null},this.invoiceInput="",this.listBigBoxScanned=new Array,this.mapBigBoxScanned=new Map,this.listBigBoxDetail=new Array,this.totalQtyDetailBigBox=0,this.loadingBtnSaveBigBox=!1}ngOnInit(){}handleKeyboardEvent(t){if(13==t.keyCode){if(!this.qrCode)return;let o=this.qrCode.split(";");if("B"==o[0].trim()||"b"==o[0].trim())console.log("Scan big box: ",o),console.log("QR Code: ",this.qrCode),this.mapBigBoxScanned.set(this.qrCode,{key:this.qrCode.toUpperCase(),value:this.qrCode.toUpperCase()}),this.listBigBoxScanned=Array.from(this.mapBigBoxScanned.values()),this.totalBoxScanned=this.listBigBoxScanned.length,this.qrCode="";else{let n=new W;"21010284"===o[4]?this.handleElektrisolaVendor(n,o):(n.key=o[3],n.model=o[0],n.qty=parseFloat(o[2]),n.lotNo=o[3].toUpperCase(),n.vendorCode=o[4],n.serial=o[5],n.invoiceNo=this.invoiceInput.toUpperCase(),n.poNo=o[7],n.poSeq=o[8],n.slipNo=this.slipInput.toUpperCase(),n.qrCode=this.qrCode,n.lotGroup="21041684"===o[4]?o[3].split("*")[0]:"21019313"===o[4]?`${o[3].split("*")[0]}*${o[3].split("*")[1]}`:o[3],n.whUserCode=this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).Username),this.mapBoxScanned.set(`${n.key}`,n),this.listBoxScanned=Array.from(this.mapBoxScanned.values()),this.totalBoxScanned=this.listBoxScanned.length,this.totalQtyScanned=this.sumBoxQtyScanned(),this.qrCode=""}console.log("aaa : ",this.listBoxScanned)}}handleElektrisolaVendor(t,o){t.key=`${o[3]}*${o[5]}`,t.model=o[0],t.qty=parseFloat(o[2]),t.lotNo=`${o[3]}${o[5]}`.toUpperCase(),t.vendorCode=o[4],t.serial=o[5],t.invoiceNo=this.invoiceInput?this.invoiceInput.toUpperCase():null,t.poNo=this.poInput,t.slipNo=this.slipInput?this.slipInput.toUpperCase():null,t.qrCode=this.qrCode,t.lotGroup=o[3],t.whUserCode=this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).Username}deleteScannedData(t){this.mapBoxScanned.delete(t.key),this.listBoxScanned=Array.from(this.mapBoxScanned.values()),this.totalBoxScanned=this.listBoxScanned.length,this.totalQtyScanned=this.sumBoxQtyScanned()}saveData(){if(""==this.invoiceInput||""==this.slipInput)return void this.toastr.warning("C\u1ea7n nh\u1eadp s\u1ed1 Invoice v\xe0 Slip");this.isLoading=!0,console.log("Save Data: ",this.listBoxScanned);let t={regNo:this.slipInput,type:"IM",userId:this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).UserId};this.materialReceiptService.createPurWhHeader(t).subscribe(o=>{this.materialReceiptService.saveMaterial(this.listBoxScanned).subscribe(n=>{this.toastr.success("L\u01b0u th\xe0nh c\xf4ng !","Success"),this.isLoading=!1,this.responseMessage=n,this.isShowResponseModal=!0,this.invoiceInput="",this.poInput="",this.slipInput="",this.resetData(),this.getMaterials(this.searchVo)},n=>{this.isLoading=!1,this.errorMessage=n,this.isShowErrorModal=!0})})}getMaterials(t){this.isLoading=!0,this.materialReceiptService.getMaterials(t).subscribe(o=>{console.log("PurWhRecords: ",o),this.purWhRecords=o.data,this.searchVo.recordTotal=o.recordTotal,this.totalQtySearch=o.totalQty,this.recordTotal=o.recordTotal,this.isLoading=!1})}sumBoxQtyScanned(){let t=0;return this.listBoxScanned.forEach(o=>{t+=o.qty}),t}resetData(){this.mapBoxScanned=new Map,this.listBoxScanned=new Array,this.listBigBoxScanned=new Array,this.mapBigBoxScanned=new Map,this.listBigBoxDetail=new Array,this.totalBoxScanned=0,this.totalQtyScanned=0,this.totalQtyDetailBigBox=0,this.qrCode=""}clearQrCode(){this.qrCode="",this.isQrInValid=!1}playErrorSound(){console.log("Playing Sound");let t=new Audio;t.src="../../../../../assets/sounds/ErrorSound.mp3",t.load(),t.play()}nzPageIndexChange(t){console.log("nzPageIndexChange => ",t),this.searchVo.currentPage=t,this.pagingCalculate(this.searchVo)}nzPageSizeChange(t){console.log("nzPageSizeChange => ",t),this.searchVo.recordPerPage=t,this.pagingCalculate(this.searchVo)}pagingCalculate(t){t.recordStart=(t.currentPage-1)*t.recordPerPage,this.getMaterials(this.searchVo)}onChange(t){this.searchVo.fromDate=t[0],this.searchVo.toDate=t[1]}onOk(t){this.searchVo.fromDate=t[0],this.searchVo.toDate=t[1]}onCalendarChange(t){this.searchVo.fromDate=t[0],this.searchVo.toDate=t[1]}searchData(){this.getMaterials(this.searchVo)}deleteBigBoxScanned(t){this.mapBigBoxScanned.delete(t.key),this.listBigBoxScanned=Array.from(this.mapBigBoxScanned.values()),this.totalBoxScanned=this.listBigBoxScanned.length}showDetailBigBox(){this.isLoading=!0;let t=new Array;this.listBigBoxScanned.forEach(o=>{let n=o.value.split(";");n.shift(),n.shift(),n.forEach(r=>{t.push(`${r}`)})}),this.materialReceiptService.getDetailOuterLabel(t).subscribe(o=>{this.isShowBigBoxDetailModal=!0,this.listBigBoxDetail=o,console.log("Detail Big Box: ",this.listBigBoxDetail),this.listBigBoxDetail.forEach(n=>{this.totalQtyDetailBigBox+=n.qty}),this.isLoading=!1})}saveBigBox(){if(this.loadingBtnSaveBigBox=!0,""==this.invoiceInput||""==this.slipInput)return this.toastr.warning("C\u1ea7n nh\u1eadp s\u1ed1 Invoice v\xe0 Slip"),void(this.loadingBtnSaveBigBox=!1);new Array,console.log("this.listBigBoxDetail: ",this.listBigBoxDetail);let o=new Array;this.listBigBoxDetail.forEach(r=>{let u=new W;u.lotNo=r.lotNo.toUpperCase(),u.qty=r.qty,u.model=r.model,u.invoiceNo=r.invoice,u.slipNo=this.slipInput?this.slipInput.toUpperCase():null,u.whUserCode=this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).Username,o.push(u)}),console.log("DATA SAVE: ",o);let n={regNo:this.slipInput,type:"IM",userId:this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).UserId};this.materialReceiptService.createPurWhHeader(n).subscribe(r=>{this.materialReceiptService.saveBigBox(o,this.invoiceInput).subscribe(u=>{console.log(u),this.toastr.success("L\u01b0u th\xe0nh c\xf4ng !","Success"),this.isShowBigBoxDetailModal=!1,this.responseMessage=u,this.isShowResponseModal=!0,this.invoiceInput="",this.poInput="",this.slipInput="",this.resetData(),this.getMaterials(this.searchVo),this.loadingBtnSaveBigBox=!1})})}cancelSaveBigBox(){this.totalQtyDetailBigBox=0,this.isShowBigBoxDetailModal=!1}onSearchSlip(){this.invoiceInput?this.materialReceiptService.findSlipByInvoice(this.invoiceInput).subscribe(t=>{if(!t[0]?.slipNo)return this.toastr.warning("Ch\u01b0a c\xf3 Slip trong h\u1ec7 th\u1ed1ng !"),void(this.slipInput="");this.slipInput=t[0]?.slipNo}):this.toastr.warning("B\u1ea1n c\u1ea7n nh\u1eadp Invoice !")}deleteRecord(t){let o=this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).Username;if("3011934"!=o)return void this.toastr.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n x\xf3a !","note");let n={id:t.id,updatedBy:o};console.log("Delete: ",t),this.materialReceiptService.deleteRecord(n).subscribe(r=>{this.toastr.success(r.lotNo,"\u0110\xe3 x\xf3a"),this.getMaterials(this.searchVo)})}onExportClient(t){console.log(t);const o=new h.Workbook,n=o.addWorksheet("Main sheet");(0,g.V)({component:t.component,worksheet:n}).then(function(){o.xlsx.writeBuffer().then(function(r){A(new Blob([r],{type:"application/octet-stream"}),"Data.xlsx")})})}checkDataSauNhapKho(){this.materialReceiptService.getInvoiceDetail(this.searchVo).subscribe(t=>{const o={};t.forEach(r=>{o[r.model]||(o[r.model]=0),o[r.model]+=r.qty});const n=Object.entries(o).map(([r,u])=>({model:r,qty:u}));this.invoiceDetails=n})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(j.tw),e.rXU(N.X7),e.rXU(_))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-material-receipt"]],hostBindings:function(o,n){1&o&&e.bIt("keydown",function(u){return n.handleKeyboardEvent(u)},!1,e.tSv)},decls:143,vars:60,consts:[["inputQrCode",""],["suffixIconSearch",""],["scanTable",""],["bigBoxScanTable",""],["nzTitle","Nh\u1eadp kho NVL"],["nzHeader","Scan QR code",3,"nzActive","nzShowArrow"],["nz-row","","nzJustify","space-around","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","4","nzLg","3"],["for","qr-code"],["nz-col","","nzXs","24","nzSm","12","nzLg","13"],[3,"nzSuffix"],["nz-input","","autofocus","",2,"text-align","center",3,"ngModelChange","ngModel"],["nz-col","","nzXs","24","nzSm","4","nzLg","5"],["nz-input","","readonly","",2,"text-align","center",3,"ngModelChange","ngModel"],["nz-row","","nzJustify","start","nzAlign","middle",2,"margin-top","10px",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","4","nzLg","7"],["nz-input","",2,"text-align","center","font-weight","bold","color","blue","text-transform","uppercase",3,"ngModelChange","ngModel"],["nz-col","","nzXs","24","nzSm","4","nzLg","2"],["nz-col","","nzXs","24","nzSm","4","nzLg","4"],["nz-row","","nzJustify","start","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","1","nzLg","18"],["nz-col","","nzXs","24","nzSm","1","nzLg","6"],["nz-button","","nzType","default",1,"search-slip",2,"width","100%",3,"click"],["nz-icon","","nzType","search"],[3,"ngIf"],["nzTitle","D\u1eef li\u1ec7u nh\u1eadp kho"],["nzHeader","T\xecm ki\u1ebfm",3,"nzActive","nzShowArrow"],["nz-col","","nzXs","12","nzSm","12","nzLg","4"],["nzXs","24","nzSm","24","nzLg","24"],["nz-input","",3,"ngModelChange","ngModel"],["nz-col","","nzXs","12","nzSm","12","nzLg","6"],["nzFormat","yyyy-MM-dd","ngModel","",3,"ngModelChange","nzOnCalendarChange","nzOnOk"],["nz-col","","nzXs","12","nzSm","12","nzLg","2"],["nz-button","","nzType","primary",1,"btn","btn-success","float-right",2,"float","right",3,"click"],["nz-row","","nzJustify","end","nzAlign","middle",3,"nzGutter"],["nz-col","","nzXs","24","nzSm","24","nzLg","24"],[2,"color","#2196f3","float","left"],[2,"color","#2196f3","float","right"],["keyExpr","id",3,"onExporting","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],[3,"enabled"],[3,"visible"],["dataField","model","caption","PartNo"],["dataField","lotNo","caption","LotNo"],["dataField","qty","dataType","number","format","#,##0.00","caption","Qty"],["dataField","vendorCode","caption","Vendor"],["dataField","createdAt","dataType","date","format","yyyy-MM-dd HH:mm:ss","caption","Date"],["dataField","slipNo","caption","Slip"],["dataField","invoice","caption","Invoice"],["caption","Action","cellTemplate","actionTemplate"],["style","text-align: center",4,"dxTemplate","dxTemplateOf"],["column","lotNo","summaryType","count"],["column","qty","summaryType","sum","valueFormat","#,##0.00"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Check sau nh\u1eadp kho"],["nz-button","","nzType","primary",1,"btn","btn-success","float-right",3,"click"],["keyExpr","model",3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["dataField","model","caption","Part"],["dataField","qty","caption","Qty","dataType","number","format","#,##0.00","alignment","left"],["column","qty","summaryType","sum","valueFormat","#,##0.0"],["nzTitle","Danh s\xe1ch h\u1ed9p con","nzWidth","900px",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[3,"nzModalFooter"],["nzTitle","Information",3,"nzVisibleChange","nzVisible"],["nzTitle","Error",3,"nzVisibleChange","nzVisible"],["id","clearQR","nz-icon","","nzType","close-circle","nzTheme","outline",3,"click"],["nz-row","","nzAlign","middle",2,"margin-bottom","5px"],["nz-col","","nzXs","12","nzSm","12","nzLg","12"],["nz-row","","nzJustify","start"],["nz-button","","nzType","primary",1,"col-md-2",3,"click","nzLoading"],["nz-row","","nzJustify","end"],[2,"color","#2196f3"],["id","scanTable","nzSize","small","nzTitle","D\u1eef li\u1ec7u Scanned",3,"nzData","nzBordered","nzFrontPagination"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-right"],["nz-popconfirm","","nzPopconfirmTitle","B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ?","nzPopconfirmPlacement","top",2,"color","red",3,"nzOnConfirm"],["id","bigBoxScanTable","nzSize","small","nzTitle","D\u1eef li\u1ec7u Scanned",3,"nzData","nzBordered","nzFrontPagination"],[2,"text-align","center"],[2,"color","red",3,"click"],["id","gridContainer","keyExpr","id",3,"dataSource","showBorders"],["mode","single"],["dataField","lotGroup",3,"groupIndex"],["dataField","lotNo","caption","Lot No"],["dataField","model","caption","Model"],["dataField","qty","alignment","right"],["column","lotNo","summaryType","count","displayFormat","{0} Lot"],["column","qty","summaryType","sum",3,"showInGroupFooter","alignByColumn"],["summaryItem","count"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","nzLoading"],[4,"ngIf"],["nz-button","","nzType","primary",3,"click"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," Warehouse "),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," Nh\u1eadp kho nguy\xean v\u1eadt li\u1ec7u "),e.k0s()(),e.nrm(5,"br"),e.j41(6,"nz-tabset")(7,"nz-tab",4)(8,"nz-collapse")(9,"nz-collapse-panel",5)(10,"div",6)(11,"div",7)(12,"label",8),e.EFF(13,"QR Code:"),e.k0s()(),e.j41(14,"div",9)(15,"nz-input-group",10)(16,"input",11,0),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.qrCode,c)||(n.qrCode=c),e.Njj(c)}),e.k0s()(),e.DNE(18,K,1,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(20,"div",7)(21,"label"),e.EFF(22,"\u0110\xe3 scan:"),e.k0s()(),e.j41(23,"div",12)(24,"input",13),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.totalBoxScanned,c)||(n.totalBoxScanned=c),e.Njj(c)}),e.k0s()()(),e.j41(25,"div",14)(26,"div",7)(27,"label"),e.EFF(28,"Invoice:"),e.k0s()(),e.j41(29,"div",15)(30,"input",16),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.invoiceInput,c)||(n.invoiceInput=c),e.Njj(c)}),e.k0s()(),e.j41(31,"div",17)(32,"label"),e.EFF(33,"PO:"),e.k0s()(),e.j41(34,"div",18)(35,"input",16),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.poInput,c)||(n.poInput=c),e.Njj(c)}),e.k0s()(),e.j41(36,"div",7)(37,"label"),e.EFF(38,"Slip:"),e.k0s()(),e.j41(39,"div",12)(40,"div",19)(41,"div",20)(42,"input",16),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.slipInput,c)||(n.slipInput=c),e.Njj(c)}),e.k0s()(),e.j41(43,"div",21)(44,"button",22),e.bIt("click",function(){return e.eBV(r),e.Njj(n.onSearchSlip())}),e.nrm(45,"i",23),e.k0s()()()()()()(),e.nrm(46,"br"),e.DNE(47,p,34,9,"ng-template",24)(48,d,18,5,"ng-template",24),e.k0s(),e.j41(49,"nz-tab",25)(50,"nz-collapse")(51,"nz-collapse-panel",26)(52,"div",19)(53,"div",27)(54,"label",28),e.EFF(55,"Part No"),e.k0s(),e.j41(56,"div",28)(57,"input",29),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.searchVo.model,c)||(n.searchVo.model=c),e.Njj(c)}),e.k0s()()(),e.j41(58,"div",27)(59,"label",28),e.EFF(60,"Lot"),e.k0s(),e.j41(61,"div",28)(62,"input",29),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.searchVo.lotNo,c)||(n.searchVo.lotNo=c),e.Njj(c)}),e.k0s()()(),e.j41(63,"div",27)(64,"label",28),e.EFF(65,"Slip No"),e.k0s(),e.j41(66,"div",28)(67,"input",29),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.searchVo.slipNo,c)||(n.searchVo.slipNo=c),e.Njj(c)}),e.k0s()()(),e.j41(68,"div",27)(69,"label",28),e.EFF(70,"Invoice"),e.k0s(),e.j41(71,"div",28)(72,"input",29),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.searchVo.invoice,c)||(n.searchVo.invoice=c),e.Njj(c)}),e.k0s()()(),e.j41(73,"div",30)(74,"label",28),e.EFF(75,"Date"),e.k0s(),e.j41(76,"div",28)(77,"nz-range-picker",31),e.bIt("ngModelChange",function(c){return e.eBV(r),e.Njj(n.onChange(c))})("nzOnCalendarChange",function(c){return e.eBV(r),e.Njj(n.onCalendarChange(c))})("nzOnOk",function(c){return e.eBV(r),e.Njj(n.onOk(c))}),e.k0s()()(),e.j41(78,"div",32)(79,"label",28),e.EFF(80,"\xa0"),e.k0s(),e.j41(81,"div",28)(82,"button",33),e.bIt("click",function(){return e.eBV(r),e.Njj(n.searchData())}),e.EFF(83," Search "),e.k0s()()()()()(),e.nrm(84,"br"),e.j41(85,"div",34)(86,"div",35)(87,"label",36),e.EFF(88),e.nI1(89,"number"),e.k0s(),e.j41(90,"label",37),e.EFF(91),e.nI1(92,"number"),e.k0s()()(),e.j41(93,"dx-data-grid",38),e.bIt("onExporting",function(c){return e.eBV(r),e.Njj(n.onExportClient(c))}),e.nrm(94,"dxo-export",39)(95,"dxo-filter-row",40)(96,"dxo-column-fixing",39)(97,"dxi-column",41)(98,"dxi-column",42)(99,"dxi-column",43)(100,"dxi-column",44)(101,"dxi-column",45)(102,"dxi-column",46)(103,"dxi-column",47),e.j41(104,"dxi-column",48),e.DNE(105,R,3,0,"div",49),e.k0s(),e.j41(106,"dxo-summary"),e.nrm(107,"dxi-total-item",50)(108,"dxi-total-item",51),e.k0s(),e.nrm(109,"dxo-paging",52)(110,"dxo-pager",53),e.k0s()(),e.j41(111,"nz-tab",54)(112,"nz-collapse")(113,"nz-collapse-panel",26)(114,"div",19)(115,"div",27)(116,"label",28),e.EFF(117,"Invoice"),e.k0s(),e.j41(118,"div",28)(119,"input",29),e.mxI("ngModelChange",function(c){return e.eBV(r),e.DH7(n.searchVo.invoice,c)||(n.searchVo.invoice=c),e.Njj(c)}),e.k0s()()(),e.j41(120,"div",27)(121,"label",28),e.EFF(122,"\xa0"),e.k0s(),e.j41(123,"div",28)(124,"button",55),e.bIt("click",function(){return e.eBV(r),e.Njj(n.checkDataSauNhapKho())}),e.EFF(125," Search "),e.k0s()()()()()(),e.j41(126,"dx-data-grid",56),e.nrm(127,"dxo-paging",52)(128,"dxo-filter-row",40)(129,"dxo-export",39)(130,"dxi-column",57)(131,"dxi-column",58),e.j41(132,"dxo-summary"),e.nrm(133,"dxi-total-item",59),e.k0s()()()(),e.j41(134,"nz-modal",60),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(n.isShowBigBoxDetailModal,c)||(n.isShowBigBoxDetailModal=c),e.Njj(c)}),e.DNE(135,E,19,13,"ng-container",61)(136,k,4,1,"ng-template",62),e.k0s(),e.j41(137,"nz-modal",63),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(n.isShowResponseModal,c)||(n.isShowResponseModal=c),e.Njj(c)}),e.DNE(138,ie,6,3,"ng-container",61)(139,ae,2,0,"ng-template",62),e.k0s(),e.j41(140,"nz-modal",64),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(n.isShowErrorModal,c)||(n.isShowErrorModal=c),e.Njj(c)}),e.DNE(141,se,3,1,"ng-container",61)(142,re,2,0,"ng-template",62),e.k0s()}if(2&o){const r=e.sdS(19);e.R7$(9),e.Y8G("nzActive",!0)("nzShowArrow",!1),e.R7$(),e.Y8G("nzGutter",24),e.R7$(5),e.Y8G("nzSuffix",r),e.R7$(),e.R50("ngModel",n.qrCode),e.R7$(8),e.R50("ngModel",n.totalBoxScanned),e.R7$(),e.Y8G("nzGutter",24),e.R7$(5),e.R50("ngModel",n.invoiceInput),e.R7$(5),e.R50("ngModel",n.poInput),e.R7$(5),e.Y8G("nzGutter",24),e.R7$(2),e.R50("ngModel",n.slipInput),e.R7$(5),e.Y8G("ngIf",n.listBoxScanned.length),e.R7$(),e.Y8G("ngIf",n.listBigBoxScanned.length),e.R7$(3),e.Y8G("nzActive",!0)("nzShowArrow",!1),e.R7$(),e.Y8G("nzGutter",24),e.R7$(5),e.R50("ngModel",n.searchVo.model),e.R7$(5),e.R50("ngModel",n.searchVo.lotNo),e.R7$(5),e.R50("ngModel",n.searchVo.slipNo),e.R7$(5),e.R50("ngModel",n.searchVo.invoice),e.R7$(13),e.Y8G("nzGutter",24),e.R7$(3),e.SpI(" Total Record: ",e.bMT(89,54,n.recordTotal)," "),e.R7$(3),e.SpI(" Total Qty: ",e.i5U(92,56,n.totalQtySearch,"1.3")," "),e.R7$(2),e.Y8G("dataSource",n.purWhRecords)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!0),e.R7$(9),e.Y8G("dxTemplateOf","actionTemplate"),e.R7$(4),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(59,Z)),e.R7$(3),e.Y8G("nzActive",!0)("nzShowArrow",!1),e.R7$(),e.Y8G("nzGutter",24),e.R7$(5),e.R50("ngModel",n.searchVo.invoice),e.R7$(7),e.Y8G("dataSource",n.invoiceDetails)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("pageSize",10),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("enabled",!1),e.R7$(5),e.R50("nzVisible",n.isShowBigBoxDetailModal),e.R7$(3),e.R50("nzVisible",n.isShowResponseModal),e.R7$(3),e.R50("nzVisible",n.isShowErrorModal)}},dependencies:[v.Sq,v.bT,s.me,s.BC,s.vS,x.hL,x.K7,y.aO,z.c,T.p,a.Vz,a.pc,F.Dn,f.Sy,f.tg,f.vN,S.JZ,S.rE,B.Uq,B.e,M.CP,M.SO,M._4,M.IL,M.aj,M.kt,b.PV,L.SN,L.vw,I.F2,I.Oj,I.A9,D.s,m.hVU,m.Omo,m.nj_,m.ZJU,m.FTx,m.sVQ,m.PVd,m.x$q,m.XvM,m.ryC,m.CWS,Y.eC,v.Pc,v.QX],styles:["label[_ngcontent-%COMP%]{font-weight:700}#clearQR[_ngcontent-%COMP%]:hover{cursor:pointer}nz-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{cursor:pointer}nz-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}nz-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}nz-table[_ngcontent-%COMP%]   .text-left[_ngcontent-%COMP%]{text-align:left}"]})}return i})(),ce=(()=>{class i{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-warehouse"]],decls:1,vars:0,template:function(o,n){1&o&&e.nrm(0,"router-outlet")},dependencies:[O.n3]})}return i})(),de=(()=>{class i{constructor(t){this.httpClient=t,this.baseUrl=w.c.baseUrl}getInvoices(){return this.httpClient.get(`${this.baseUrl}/WH/IQC/Invoices`)}getIqcRequests(t){return this.httpClient.post(`${this.baseUrl}/WH/IQC/Requests`,t)}getIqcRequestDetail(t,o){return this.httpClient.post(`${this.baseUrl}/WH/IQC/Requests/${t}`,o)}createIqcRequest(t){return this.httpClient.post(`${this.baseUrl}/WH/IQC/Request`,t)}getSlipNoByInvoice(t){return this.httpClient.get(`${this.baseUrl}/WH/IQC/SlipNo?invoice=${t}`)}createIqcRequestSorting(t,o){return this.httpClient.post(`${this.baseUrl}/WH/IQC/IqcRequestSorting?requestType=${o}`,t)}getIqcDataSortingInfo(t){return this.httpClient.get(`${this.baseUrl}/WH/IQC/IqcDataSorting?requestNo=${t}`)}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(q.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var pe=l(73315),te=l(1997),ne=l(97685);const ue=["qrIpt"],he=()=>({status:1,label:"Ch\u1edd x\u1eed l\xfd"}),ge=()=>({status:2,label:"\u0110ang x\u1eed l\xfd"}),me=()=>({status:3,label:"\u0110\xe3 x\u1eed l\xfd"}),_e=(i,C,t)=>[i,C,t],ze=()=>[10,20,50,100],Ce=()=>[""],oe=()=>[10,25,50,100];function fe(i,C){if(1&i){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isOpenIqcRequestModal=!0)}),e.nrm(1,"i",25),e.EFF(2," IQC Request "),e.k0s()}}function ve(i,C){1&i&&(e.j41(0,"button",26),e.nrm(1,"i",25),e.EFF(2," IQC Request (H\xe0ng sorting) "),e.k0s())}function Re(i,C){1&i&&(e.j41(0,"button",27),e.nrm(1,"i",25),e.EFF(2," IQC Request (H\xe0ng qu\xe1 6 th\xe1ng) "),e.k0s())}function Me(i,C){if(1&i&&e.nrm(0,"nz-option",36),2&i){const t=C.$implicit;e.Y8G("nzValue",t)("nzLabel",t)}}function Ee(i,C){if(1&i&&e.nrm(0,"nz-option",36),2&i){const t=C.$implicit;e.Y8G("nzValue",t.invoice)("nzLabel",t.invoice)}}function Se(i,C){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"nz-table",28)(2,"tbody")(3,"tr")(4,"td",29),e.EFF(5," Request No "),e.j41(6,"span",30),e.EFF(7,"*"),e.k0s()(),e.j41(8,"td")(9,"nz-select",31),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.iqcRequest.requestNo,n)||(r.iqcRequest.requestNo=n),e.Njj(n)}),e.DNE(10,Me,1,2,"nz-option",32),e.k0s()()(),e.j41(11,"tr")(12,"td",29),e.EFF(13," Invoice "),e.j41(14,"span",30),e.EFF(15,"*"),e.k0s()(),e.j41(16,"td")(17,"nz-select",33),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.iqcRequest.invoice,n)||(r.iqcRequest.invoice=n),e.Njj(n)}),e.bIt("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onChangeInvoice(n))}),e.DNE(18,Ee,1,2,"nz-option",32),e.k0s()()(),e.j41(19,"tr")(20,"td",29),e.EFF(21," Supplier "),e.j41(22,"span",30),e.EFF(23,"*"),e.k0s()(),e.j41(24,"td")(25,"input",34,1),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.iqcRequest.supplier,n)||(r.iqcRequest.supplier=n),e.Njj(n)}),e.k0s()()(),e.j41(27,"tr")(28,"td",29),e.EFF(29,"Ghi ch\xfa"),e.k0s(),e.j41(30,"td")(31,"input",35),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.iqcRequest.remark,n)||(r.iqcRequest.remark=n),e.Njj(n)}),e.k0s()()()()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("nzData",e.lJ4(8,Ce))("nzFrontPagination",!1),e.R7$(8),e.R50("ngModel",t.iqcRequest.requestNo),e.R7$(),e.Y8G("ngForOf",t.slipNos),e.R7$(7),e.R50("ngModel",t.iqcRequest.invoice),e.R7$(),e.Y8G("ngForOf",t.invoices),e.R7$(7),e.R50("ngModel",t.iqcRequest.supplier),e.R7$(6),e.R50("ngModel",t.iqcRequest.remark)}}function Ie(i,C){if(1&i){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isOpenIqcRequestModal=!1)}),e.EFF(1," \u0110\xf3ng "),e.k0s(),e.j41(2,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createIqcRequest())}),e.EFF(3," T\u1ea1o y\xeau c\u1ea7u IQC "),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("disabled",!t.iqcRequest.requestNo)}}function Be(i,C){if(1&i&&(e.j41(0,"dx-data-grid",41),e.nrm(1,"dxo-filter-row",7)(2,"dxi-column",42)(3,"dxi-column",43)(4,"dxi-column",44),e.j41(5,"dxi-column",45),e.nrm(6,"dxi-column",46)(7,"dxi-column",47),e.k0s(),e.nrm(8,"dxo-paging",18)(9,"dxo-pager",19),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("dataSource",t.iqcRequestDetails)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowEditing",!1),e.R7$(),e.Y8G("allowEditing",!1),e.R7$(),e.Y8G("allowEditing",!1),e.R7$(4),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(14,oe))}}function ye(i,C){if(1&i&&(e.j41(0,"dx-data-grid",41),e.nrm(1,"dxo-filter-row",7)(2,"dxi-column",42)(3,"dxi-column",43)(4,"dxi-column",48),e.j41(5,"dxi-column",45),e.nrm(6,"dxi-column",49)(7,"dxi-column",50)(8,"dxi-column",51),e.k0s(),e.nrm(9,"dxo-paging",18)(10,"dxo-pager",19),e.k0s()),2&i){const t=e.XpG(2);e.Y8G("dataSource",t.iqcRequestDetails)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(),e.Y8G("visible",!0),e.R7$(),e.Y8G("allowEditing",!1),e.R7$(),e.Y8G("allowEditing",!1),e.R7$(),e.Y8G("allowEditing",!1),e.R7$(5),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(14,oe))}}function xe(i,C){if(1&i&&(e.qex(0),e.j41(1,"label"),e.EFF(2,"Request No: "),e.k0s(),e.j41(3,"span",39),e.EFF(4),e.k0s(),e.EFF(5," \xa0 | \xa0 "),e.j41(6,"label"),e.EFF(7,"Invoice No: "),e.k0s(),e.j41(8,"span",39),e.EFF(9),e.k0s(),e.DNE(10,Be,10,15,"dx-data-grid",40)(11,ye,11,15,"dx-data-grid",40),e.bVm()),2&i){const t=e.XpG();e.R7$(4),e.JRh(t.iqcRequestSelected.requestNo),e.R7$(5),e.JRh(t.iqcRequestSelected.invoice),e.R7$(),e.Y8G("ngIf","INSIDE"==(null==t.iqcRequestSelected?null:t.iqcRequestSelected.goodsType)),e.R7$(),e.Y8G("ngIf","INSIDE"!=(null==t.iqcRequestSelected?null:t.iqcRequestSelected.goodsType))}}function be(i,C){if(1&i){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.isOpenIqcDetailModal=!1)}),e.EFF(1," \u0110\xf3ng "),e.k0s()}}let De=(()=>{class i{constructor(t,o,n,r){this.toastr=t,this.whIqcSvc=o,this.jwtHelperService=n,this.qaIqcSvc=r,this.isOpenIqcRequestModal=!1,this.isOpenIqcDetailModal=!1,this.searchVo={},this.iqcRequest={}}ngOnInit(){this.getIQCRequests(),this.getInvoices()}onSearch(){console.log("SearchVo: ",this.searchVo),this.getIQCRequests()}getInvoices(){this.whIqcSvc.getInvoices().subscribe(t=>{this.invoices=t})}getSlipNoByInvoice(t){this.whIqcSvc.getSlipNoByInvoice(t).subscribe(o=>{this.slipNos=o})}getIQCRequests(){this.whIqcSvc.getIqcRequests(this.searchVo).subscribe(t=>{console.log(t),this.iqcRequests=t})}createIqcRequest(){if(!this.iqcRequest?.requestNo||!this.iqcRequest?.invoice||!this.iqcRequest?.supplier)return void this.toastr.warning("C\u1ea7n nh\u1eadp \u0111\u1ee7 th\xf4ng tin !","Warning");let t=this.jwtHelperService.decodeToken(localStorage.getItem("accessToken")?.toString()).Username;this.iqcRequest.requestedBy=t,this.whIqcSvc.createIqcRequest(this.iqcRequest).subscribe(o=>{this.toastr.success("\u0110\xe3 t\u1ea1o request IQC","Success"),this.getIQCRequests(),this.isOpenIqcRequestModal=!1})}openIqcDetailModal(t){this.iqcRequestSelected={...t},console.log("AAAA: ",this.iqcRequestSelected),"6Month"===this.iqcRequestSelected.type&&this.qaIqcSvc.getLotIqcOver6Month(this.iqcRequestSelected.requestNo,this.iqcRequestSelected.goodsType).subscribe(n=>{this.iqcRequestDetails=n.result,console.log("iqcRequestDetails: ",this.iqcRequestDetails)});let o={invoice:t.invoice,requestNo:t.requestNo};this.whIqcSvc.getIqcRequestDetail(o.requestNo,o).subscribe(n=>{this.iqcRequestDetails=n,this.isOpenIqcDetailModal=!0})}onChangeInvoice(t){t?this.getSlipNoByInvoice(t):this.iqcRequest.requestNo=null}onChange(t){this.searchVo.fromDate=t[0],this.searchVo.toDate=t[1]}onCalendarChange(t){this.searchVo.fromDate=t[0],this.searchVo.toDate=t[1]}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(j.tw),e.rXU(de),e.rXU(N.X7),e.rXU(pe.p))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-wh-iqc-request"]],viewQuery:function(o,n){if(1&o&&e.GBs(ue,5),2&o){let r;e.mGM(r=e.lsd())&&(n.qrIpt=r.first)}},decls:32,vars:22,consts:[["iqcRequestTable",""],["requestNo",""],[3,"onRowClick","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["location","before"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","default",4,"nzSpaceItem"],["nz-button","","nzType","default","routerLink","/admin/warehouse/iqc-recheck",4,"nzSpaceItem"],[3,"visible"],["dataField","requestNo","caption","Request No"],["dataField","invoice","caption","Invoice"],["dataField","supplier","caption","Supplier"],["dataField","status","caption","IQC Status"],["displayExpr","label","valueExpr","status",3,"dataSource"],["dataField","requestedByName","caption","Ng\u01b0\u1eddi request"],["dataField","createdAt","caption","Ng\xe0y t\u1ea1o","dataType","date","format","yyyy-MM-dd HH:mm"],["dataField","remark","caption","Ghi ch\xfa"],["dataField","type","caption","Request Type"],["dataField","goodsType","caption","Goods Type"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"],["nzTitle","Y\xeau c\u1ea7u IQC ki\u1ec3m tra ch\u1ea5t l\u01b0\u1ee3ng",3,"nzVisibleChange","nzVisible"],[4,"nzModalContent"],[3,"nzModalFooter"],["nzTitle","Th\xf4ng tin ki\u1ec3m tra ch\u1ea5t l\u01b0\u1ee3ng","nzWidth","100%",3,"nzVisibleChange","nzVisible"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default"],["nz-button","","nzType","default","routerLink","/admin/warehouse/iqc-recheck"],["nzBordered","","nzSize","small",3,"nzData","nzFrontPagination"],[2,"font-weight","bold"],[2,"color","red"],[3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","M\xe3 Invoice",3,"ngModelChange","ngModel"],["nz-input","","placeholder","Nh\xe0 cung c\u1ea5p",3,"ngModelChange","ngModel"],["nz-input","","placeholder","Ghi ch\xfa",3,"ngModelChange","ngModel"],[3,"nzValue","nzLabel"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"click","disabled"],[2,"color","green"],[3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled",4,"ngIf"],[3,"dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["dataField","model","caption","Model",3,"allowEditing"],["dataField","lotGroup","caption","Lot Group",3,"allowEditing"],["dataField","lotNo","caption","LotNo",3,"allowEditing"],["caption","K\u1ebft qu\u1ea3 IQC"],["dataField","result1","caption","Ngo\u1ea1i quan"],["dataField","result2","caption","K\xedch th\u01b0\u1edbc"],["dataField","qty","caption","Qty","dataType","number","format","#,##0",3,"allowEditing"],["dataField","result1","caption","GP"],["dataField","result2","caption","Ngo\u1ea1i quan"],["dataField","result3","caption","K\xedch th\u01b0\u1edbc"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"nz-breadcrumb")(1,"nz-breadcrumb-item"),e.EFF(2," Warehouse "),e.k0s(),e.j41(3,"nz-breadcrumb-item"),e.EFF(4," IQC Request"),e.k0s()(),e.j41(5,"dx-data-grid",2,0),e.bIt("onRowClick",function(c){return e.eBV(r),e.Njj(n.openIqcDetailModal(c.data))}),e.j41(7,"dxo-toolbar")(8,"dxi-item",3)(9,"nz-space"),e.DNE(10,fe,3,0,"button",4)(11,ve,3,0,"button",5)(12,Re,3,0,"button",6),e.k0s()()(),e.nrm(13,"dxo-filter-row",7)(14,"dxi-column",8)(15,"dxi-column",9)(16,"dxi-column",10),e.j41(17,"dxi-column",11),e.nrm(18,"dxo-lookup",12),e.k0s(),e.nrm(19,"dxi-column",13)(20,"dxi-column",14)(21,"dxi-column",15)(22,"dxi-column",16)(23,"dxi-column",17)(24,"dxo-paging",18)(25,"dxo-pager",19),e.k0s(),e.j41(26,"nz-modal",20),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(n.isOpenIqcRequestModal,c)||(n.isOpenIqcRequestModal=c),e.Njj(c)}),e.DNE(27,Se,32,9,"ng-container",21)(28,Ie,4,1,"ng-template",22),e.k0s(),e.j41(29,"nz-modal",23),e.mxI("nzVisibleChange",function(c){return e.eBV(r),e.DH7(n.isOpenIqcDetailModal,c)||(n.isOpenIqcDetailModal=c),e.Njj(c)}),e.DNE(30,xe,12,4,"ng-container",21)(31,be,2,0,"ng-template",22),e.k0s()}2&o&&(e.R7$(5),e.Y8G("dataSource",n.iqcRequests)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(8),e.Y8G("visible",!0),e.R7$(5),e.Y8G("dataSource",e.sMw(17,_e,e.lJ4(14,he),e.lJ4(15,ge),e.lJ4(16,me))),e.R7$(6),e.Y8G("pageSize",20),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(21,ze)),e.R7$(),e.R50("nzVisible",n.isOpenIqcRequestModal),e.R7$(3),e.R50("nzVisible",n.isOpenIqcDetailModal))},dependencies:[v.Sq,v.bT,s.me,s.BC,s.vS,O.Wk,x.hL,x.K7,y.aO,z.c,T.p,F.Dn,f.Sy,M.CP,M.SO,M.aj,M.kt,I.F2,I.Oj,I.A9,te.ld,te.WI,D.s,m.nj_,m.b4U,m.CVf,m.FTx,m.sVQ,m.PVd,m.KOr,ne.U5,ne.Dq],styles:["label[_ngcontent-%COMP%]{font-weight:700}nz-input[_ngcontent-%COMP%], nz-select[_ngcontent-%COMP%]{width:100%}nz-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{cursor:pointer}nz-table[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}nz-table[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{text-align:right}nz-table[_ngcontent-%COMP%]   .text-left[_ngcontent-%COMP%]{text-align:left}nz-table[_ngcontent-%COMP%]   .text-primary[_ngcontent-%COMP%]{color:#007bff}nz-table[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:#28a745}nz-table[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#dc3545}#scanTbl[_ngcontent-%COMP%]{width:100%}#scanTbl[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;border-collapse:collapse;padding:5px}#scanTbl[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#2d2dda}#scanTbl[_ngcontent-%COMP%]   #evaluate[_ngcontent-%COMP%]{text-align:center;font-weight:700}"]})}return i})();class Te{}let ke=(()=>{class i{constructor(t){this.httpClient=t,this.baseUrl=w.c.baseUrl}createIqcRequest(t){return this.httpClient.post(`${this.baseUrl}/WH/IQC-Recheck/Request`,t)}getLotGroupsIqcOver6Month(){return this.httpClient.get(`${this.baseUrl}/WH/IQC-Recheck/LotGroupsIqcOver6Month`)}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(q.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Fe=["qrIpt"],Oe=()=>[10,25,50,100],Pe=[{path:"",component:ce,children:[{path:"material-receipt",component:le},{path:"iqc-request",component:De},{path:"check-date-iqc",component:U},{path:"iqc-recheck",component:(()=>{class i{ngOnInit(){}constructor(t,o,n){this.toastr=t,this.whIqcRecheckSvc=o,this.jwtHelperSvc=n,this.isOpenCreateIqcRequestModal=!1}ngAfterViewInit(){this.getLotGroupsIqcOver6Month()}createRequest(){let t=new Set,o=new Array;for(const c of this.selectedRows)o.push(c.lotGroup),t.add(c.classified);if(t.size>=2)return void this.toastr.warning("Ch\u1ec9 ch\u1ecdn 1 lo\u1ea1i h\xe0ng cho 1 request","Warning");let n=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).Username,r=this.jwtHelperSvc.decodeToken(localStorage.getItem("accessToken")?.toString()).UserId,u=new Te;u.requestedBy=n,u.type="6Month",u.lotGroups=o,u.goodsType=t.values().next().value,u.userId=r,this.whIqcRecheckSvc.createIqcRequest(u).subscribe(c=>{this.lotsOver6MonthGrid.instance.clearSelection(),this.toastr.success("OK","Success")})}getLotGroupsIqcOver6Month(){this.lotsOver6MonthGrid?.instance.beginCustomLoading("\u0110ang l\u1ea5y d\u1eef li\u1ec7u h\xe0ng t\u1ed3n kho qu\xe1 6 th\xe1ng ch\u01b0a IQC"),this.whIqcRecheckSvc.getLotGroupsIqcOver6Month().subscribe(t=>{this.lotsOver6Month=t.result,this.lotsOver6MonthGrid.instance.endCustomLoading()},t=>{this.lotsOver6MonthGrid.instance.endCustomLoading()})}onSelectionChanged(t){this.selectedRows=t.selectedRowsData}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(j.tw),e.rXU(ke),e.rXU(N.X7))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-wh-iqc-recheck"]],viewQuery:function(o,n){if(1&o&&(e.GBs(Fe,5),e.GBs(D.s,5)),2&o){let r;e.mGM(r=e.lsd())&&(n.qrIpt=r.first),e.mGM(r=e.lsd())&&(n.lotsOver6MonthGrid=r.first)}},decls:15,vars:15,consts:[["lotsOver6MonthGrid",""],[3,"onSelectionChanged","dataSource","showColumnLines","showRowLines","showBorders","allowColumnResizing","columnAutoWidth","rowAlternationEnabled"],["mode","multiple",3,"selectAllMode","showCheckBoxesMode"],["location","before"],["nz-button","","nzType","primary",3,"click","disabled"],["nz-icon","","nzType","plus"],[3,"visible"],["dataField","model","caption","Model"],["dataField","lotGroup","caption","LotGroup"],["dataField","classified","caption","Classified"],["dataField","amount","caption","Boxes"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes"]],template:function(o,n){if(1&o){const r=e.RV6();e.j41(0,"dx-data-grid",1,0),e.bIt("onSelectionChanged",function(c){return e.eBV(r),e.Njj(n.onSelectionChanged(c))}),e.nrm(2,"dxo-selection",2),e.j41(3,"dxo-toolbar")(4,"dxi-item",3)(5,"button",4),e.bIt("click",function(){return e.eBV(r),e.Njj(n.createRequest())}),e.nrm(6,"span",5),e.EFF(7," T\u1ea1o request IQC h\xe0ng qu\xe1 6 th\xe1ng "),e.k0s()()(),e.nrm(8,"dxo-filter-row",6)(9,"dxi-column",7)(10,"dxi-column",8)(11,"dxi-column",9)(12,"dxi-column",10)(13,"dxo-paging",11)(14,"dxo-pager",12),e.k0s()}2&o&&(e.Y8G("dataSource",n.lotsOver6Month)("showColumnLines",!0)("showRowLines",!0)("showBorders",!0)("allowColumnResizing",!0)("columnAutoWidth",!0)("rowAlternationEnabled",!0),e.R7$(2),e.Y8G("selectAllMode","allPages")("showCheckBoxesMode","always"),e.R7$(3),e.Y8G("disabled",!(null!=n.selectedRows&&n.selectedRows.length)),e.R7$(3),e.Y8G("visible",!0),e.R7$(5),e.Y8G("pageSize",10),e.R7$(),e.Y8G("showPageSizeSelector",!0)("allowedPageSizes",e.lJ4(14,Oe)))},dependencies:[y.aO,z.c,T.p,F.Dn,D.s,m.hVU,m.nj_,m.CVf,m.FTx,m.sVQ,m.PVd,m.KOr],styles:["#scanTbl[_ngcontent-%COMP%]{width:100%}#scanTbl[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;border-collapse:collapse;padding:5px}#scanTbl[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#2d2dda}#scanTbl[_ngcontent-%COMP%]   #evaluate[_ngcontent-%COMP%]{text-align:center;font-weight:700}"]})}return i})()}]}];let je=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[O.iI.forChild(Pe),O.iI]})}return i})();var we=l(86505),qe=l(35154),Ne=l(19448);let Ae=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({providers:[v.vh],imports:[v.MD,s.YN,je,x.EJ,y.Zw,a.GB,F.Y3,f.j,S.hM,B.f3,V.PQ,M.$G,b.g9,L.LE,I.U6,we.Hf,qe.Qt,te.DH,D.N,ne.pc,Ne.g]})}return i})()},74696:(J,G,l)=>{l.d(G,{GB:()=>W,Vz:()=>U,pc:()=>m});var v=l(15215),s=l(54438),x=l(73586),y=l(7605),a=l(58728),V=l(40713),B=l(16042),F=l(57806),f=l(21025),I=l(70317),b=l(72544),M=l(28203),S=l(26841);const O=["*"],D=["collapseHeader"];function e(h,A){if(1&h&&(s.qex(0),s.nrm(1,"span",7),s.bVm()),2&h){const g=A.$implicit,_=s.XpG(2);s.R7$(),s.Y8G("nzType",g||"right")("nzRotate",_.nzActive?90:0)}}function j(h,A){if(1&h&&(s.j41(0,"div"),s.DNE(1,e,2,2,"ng-container",3),s.k0s()),2&h){const g=s.XpG();s.R7$(),s.Y8G("nzStringTemplateOutlet",g.nzExpandedIcon)}}function w(h,A){if(1&h&&(s.qex(0),s.EFF(1),s.bVm()),2&h){const g=s.XpG();s.R7$(),s.JRh(g.nzHeader)}}function q(h,A){if(1&h&&(s.qex(0),s.EFF(1),s.bVm()),2&h){const g=s.XpG(2);s.R7$(),s.JRh(g.nzExtra)}}function X(h,A){if(1&h&&(s.j41(0,"div",4),s.DNE(1,q,2,1,"ng-container",3),s.k0s()),2&h){const g=s.XpG();s.R7$(),s.Y8G("nzStringTemplateOutlet",g.nzExtra)}}const N="collapse";let m=(()=>{class h{constructor(g,_,z,T){this.nzConfigService=g,this.cdr=_,this.directionality=z,this.destroy$=T,this._nzModuleName=N,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(N).pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,y.Q)(this.destroy$)).subscribe(g=>{this.dir=g,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(g){this.listOfNzCollapsePanelComponent.push(g)}removePanel(g){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(g),1)}click(g){this.nzAccordion&&!g.nzActive&&this.listOfNzCollapsePanelComponent.filter(_=>_!==g).forEach(_=>{_.nzActive&&(_.nzActive=!1,_.nzActiveChange.emit(_.nzActive),_.markForCheck())}),g.nzActive=!g.nzActive,g.nzActiveChange.emit(g.nzActive)}static#e=this.\u0275fac=function(_){return new(_||h)(s.rXU(B.yx),s.rXU(s.gRc),s.rXU(M.dS,8),s.rXU(f.y4))};static#t=this.\u0275cmp=s.VBU({type:h,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(_,z){2&_&&s.AVh("ant-collapse-icon-position-start","left"===z.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===z.nzExpandIconPosition)("ant-collapse-ghost",z.nzGhost)("ant-collapse-borderless",!z.nzBordered)("ant-collapse-rtl","rtl"===z.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[s.Jv_([f.y4]),s.aNF],ngContentSelectors:O,decls:1,vars:0,template:function(_,z){1&_&&(s.NAR(),s.SdG(0))},encapsulation:2,changeDetection:0})}return(0,v.Cg)([(0,B.H4)(),(0,I.H3)()],h.prototype,"nzAccordion",void 0),(0,v.Cg)([(0,B.H4)(),(0,I.H3)()],h.prototype,"nzBordered",void 0),(0,v.Cg)([(0,B.H4)(),(0,I.H3)()],h.prototype,"nzGhost",void 0),h})();const $="collapsePanel";let U=(()=>{class h{markForCheck(){this.cdr.markForCheck()}constructor(g,_,z,T,L,Y){this.nzConfigService=g,this.ngZone=_,this.cdr=z,this.destroy$=T,this.nzCollapseComponent=L,this.noAnimation=Y,this._nzModuleName=$,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new s.bkB,this.nzConfigService.getConfigChangeEventForComponent($).pipe((0,y.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,x.R)(this.collapseHeader.nativeElement,"click").pipe((0,a.p)(()=>!this.nzDisabled),(0,y.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#e=this.\u0275fac=function(_){return new(_||h)(s.rXU(B.yx),s.rXU(s.SKi),s.rXU(s.gRc),s.rXU(f.y4),s.rXU(m,1),s.rXU(S.z,8))};static#t=this.\u0275cmp=s.VBU({type:h,selectors:[["nz-collapse-panel"]],viewQuery:function(_,z){if(1&_&&s.GBs(D,7),2&_){let T;s.mGM(T=s.lsd())&&(z.collapseHeader=T.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(_,z){2&_&&s.AVh("ant-collapse-no-arrow",!z.nzShowArrow)("ant-collapse-item-active",z.nzActive)("ant-collapse-item-disabled",z.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[s.Jv_([f.y4]),s.aNF],ngContentSelectors:O,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(_,z){1&_&&(s.NAR(),s.j41(0,"div",1,0),s.DNE(2,j,2,1,"div"),s.j41(3,"span",2),s.DNE(4,w,2,1,"ng-container",3),s.k0s(),s.DNE(5,X,2,1,"div",4),s.k0s(),s.j41(6,"div",5)(7,"div",6),s.SdG(8),s.k0s()()),2&_&&(s.BMQ("aria-expanded",z.nzActive),s.R7$(2),s.vxM(2,z.nzShowArrow?2:-1),s.R7$(2),s.Y8G("nzStringTemplateOutlet",z.nzHeader),s.R7$(),s.vxM(5,z.nzExtra?5:-1),s.R7$(),s.AVh("ant-collapse-content-active",z.nzActive),s.Y8G("@.disabled",!(null==z.noAnimation||!z.noAnimation.nzNoAnimation))("@collapseMotion",z.nzActive?"expanded":"hidden"))},dependencies:[F.C,F.m,b.Y3,b.Dn],encapsulation:2,data:{animation:[V.GE]},changeDetection:0})}return(0,v.Cg)([(0,I.H3)()],h.prototype,"nzActive",void 0),(0,v.Cg)([(0,I.H3)()],h.prototype,"nzDisabled",void 0),(0,v.Cg)([(0,B.H4)(),(0,I.H3)()],h.prototype,"nzShowArrow",void 0),h})(),W=(()=>{class h{static#e=this.\u0275fac=function(_){return new(_||h)};static#t=this.\u0275mod=s.$C({type:h});static#n=this.\u0275inj=s.G2t({imports:[U]})}return h})()},19448:(J,G,l)=>{l.d(G,{g:()=>F,j:()=>B});var v=l(15215),s=l(54438),x=l(57806),y=l(70317);function a(f,I){if(1&f&&(s.qex(0),s.EFF(1),s.bVm()),2&f){const b=s.XpG(2);s.R7$(),s.JRh(b.nzText)}}function V(f,I){if(1&f&&(s.j41(0,"span",0),s.DNE(1,a,2,1,"ng-container",1),s.k0s()),2&f){const b=s.XpG();s.R7$(),s.Y8G("nzStringTemplateOutlet",b.nzText)}}let B=(()=>{class f{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}static#e=this.\u0275fac=function(M){return new(M||f)};static#t=this.\u0275cmp=s.VBU({type:f,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(M,S){2&M&&s.AVh("ant-divider-horizontal","horizontal"===S.nzType)("ant-divider-vertical","vertical"===S.nzType)("ant-divider-with-text",S.nzText)("ant-divider-plain",S.nzPlain)("ant-divider-with-text-left",S.nzText&&"left"===S.nzOrientation)("ant-divider-with-text-right",S.nzText&&"right"===S.nzOrientation)("ant-divider-with-text-center",S.nzText&&"center"===S.nzOrientation)("ant-divider-dashed",S.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:"nzDashed",nzPlain:"nzPlain"},exportAs:["nzDivider"],standalone:!0,features:[s.aNF],decls:1,vars:1,consts:[[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(M,S){1&M&&s.DNE(0,V,2,1,"span",0),2&M&&s.vxM(0,S.nzText?0:-1)},dependencies:[x.C,x.m],encapsulation:2,changeDetection:0})}return(0,v.Cg)([(0,y.H3)()],f.prototype,"nzDashed",void 0),(0,v.Cg)([(0,y.H3)()],f.prototype,"nzPlain",void 0),f})(),F=(()=>{class f{static#e=this.\u0275fac=function(M){return new(M||f)};static#t=this.\u0275mod=s.$C({type:f});static#n=this.\u0275inj=s.G2t({imports:[B]})}return f})()},72874:(J,G,l)=>{l.d(G,{PV:()=>Z,g9:()=>ee});var v=l(15215),s=l(10851),x=l(32753),y=l(60177),a=l(54438),V=l(45286),B=l(7605),F=l(84046),f=l(77312),I=l(50513),b=l(40713),M=l(16042),S=l(26841),O=l(57806),D=l(65463),e=l(70317),j=l(89450),w=l(72544),q=l(35154),X=l(28203),N=l(16389),m=l(25930);const $=["okBtn"],U=["cancelBtn"];function W(p,P){1&p&&(a.j41(0,"div",6),a.nrm(1,"span",14),a.k0s())}function h(p,P){if(1&p&&(a.qex(0),a.j41(1,"span",16),a.nrm(2,"span",17),a.k0s(),a.bVm()),2&p){const d=P.$implicit;a.R7$(2),a.Y8G("nzType",d||"exclamation-circle")}}function A(p,P){if(1&p&&(a.qex(0),a.DNE(1,h,3,1,"ng-container",10),a.j41(2,"div",15),a.EFF(3),a.k0s(),a.bVm()),2&p){const d=a.XpG(2);a.R7$(),a.Y8G("nzStringTemplateOutlet",d.nzIcon),a.R7$(2),a.JRh(d.nzTitle)}}function g(p,P){if(1&p&&a.EFF(0),2&p){const d=a.XpG(2);a.SpI(" ",d.nzCancelText," ")}}function _(p,P){1&p&&(a.EFF(0),a.nI1(1,"nzI18n")),2&p&&a.SpI(" ",a.bMT(1,1,"Modal.cancelText")," ")}function z(p,P){if(1&p&&a.EFF(0),2&p){const d=a.XpG(2);a.SpI(" ",d.nzOkText," ")}}function T(p,P){1&p&&(a.EFF(0),a.nI1(1,"nzI18n")),2&p&&a.SpI(" ",a.bMT(1,1,"Modal.okText")," ")}function L(p,P){if(1&p){const d=a.RV6();a.j41(0,"div",4)(1,"div",5),a.DNE(2,W,2,0,"div",6),a.j41(3,"div",7)(4,"div")(5,"div",8)(6,"div",9),a.DNE(7,A,4,2,"ng-container",10),a.k0s(),a.j41(8,"div",11)(9,"button",12,1),a.bIt("click",function(){a.eBV(d);const E=a.XpG();return a.Njj(E.onCancel())}),a.DNE(11,g,1,1)(12,_,2,3),a.k0s(),a.j41(13,"button",13,2),a.bIt("click",function(){a.eBV(d);const E=a.XpG();return a.Njj(E.onConfirm())}),a.DNE(15,z,1,1)(16,T,2,3),a.k0s()()()()()()()}if(2&p){const d=a.XpG();a.AVh("ant-popover-rtl","rtl"===d.dir),a.Y8G("cdkTrapFocusAutoCapture",null!==d.nzAutoFocus)("ngClass",d._classMap)("ngStyle",d.nzOverlayStyle)("@.disabled",!(null==d.noAnimation||!d.noAnimation.nzNoAnimation))("nzNoAnimation",null==d.noAnimation?null:d.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),a.R7$(2),a.vxM(2,d.nzPopconfirmShowArrow?2:-1),a.R7$(5),a.Y8G("nzStringTemplateOutlet",d.nzTitle),a.R7$(2),a.Y8G("nzSize","small"),a.BMQ("cdkFocusInitial","cancel"===d.nzAutoFocus||null),a.R7$(2),a.vxM(11,d.nzCancelText?11:12),a.R7$(2),a.Y8G("nzSize","small")("nzType","danger"!==d.nzOkType?d.nzOkType:"primary")("nzDanger",d.nzOkDanger||"danger"===d.nzOkType)("nzLoading",d.confirmLoading)("disabled",d.nzOkDisabled),a.BMQ("cdkFocusInitial","ok"===d.nzAutoFocus||null),a.R7$(2),a.vxM(15,d.nzOkText?15:16)}}let Z=(()=>{class p extends q.ME{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzOkDisabled:["nzOkDisabled",()=>this.nzOkDisabled],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(){super(K),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new a.bkB,this.nzOnCancel=new a.bkB,this.nzOnConfirm=new a.bkB}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,B.Q)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,B.Q)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#e=this.\u0275fac=function(R){return new(R||p)};static#t=this.\u0275dir=a.FsC({type:p,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(R,E){2&R&&a.AVh("ant-popover-open",E.visible)},inputs:{arrowPointAtCenter:[a.Mj6.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[a.Mj6.None,"nzPopconfirmTitle","title"],directiveTitle:[a.Mj6.None,"nz-popconfirm","directiveTitle"],trigger:[a.Mj6.None,"nzPopconfirmTrigger","trigger"],placement:[a.Mj6.None,"nzPopconfirmPlacement","placement"],origin:[a.Mj6.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[a.Mj6.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[a.Mj6.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[a.Mj6.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[a.Mj6.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[a.Mj6.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDisabled:"nzOkDisabled",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[a.Vt3]})}return(0,v.Cg)([(0,e.H3)()],p.prototype,"arrowPointAtCenter",void 0),(0,v.Cg)([(0,e.H3)()],p.prototype,"nzOkDisabled",void 0),(0,v.Cg)([(0,e.H3)()],p.prototype,"nzOkDanger",void 0),(0,v.Cg)([(0,e.H3)()],p.prototype,"nzCondition",void 0),(0,v.Cg)([(0,e.H3)()],p.prototype,"nzPopconfirmShowArrow",void 0),(0,v.Cg)([(0,M.H4)()],p.prototype,"nzPopconfirmBackdrop",void 0),(0,v.Cg)([(0,M.H4)()],p.prototype,"nzAutofocus",void 0),p})(),K=(()=>{class p extends q.VJ{constructor(d,R,E,k,H){super(d,E,H),this.elementRef=R,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzOkDisabled=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new V.B7,this.nzOnConfirm=new V.B7,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=k}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const d=(0,e.cG)(this.nzBeforeConfirm()).pipe((0,F.$)());this.confirmLoading=!0,d.pipe((0,f.j)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,B.Q)(this.nzVisibleChange),(0,B.Q)(this.destroy$)).subscribe(R=>{R&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const d=this.elementFocusedBeforeModalWasOpened;if(d&&"function"==typeof d.focus){const R=this.document.activeElement,E=this.elementRef.nativeElement;(!R||R===this.document.body||R===E||E.contains(R))&&d.focus()}}static#e=this.\u0275fac=function(R){return new(R||p)(a.rXU(a.gRc),a.rXU(a.aKT),a.rXU(X.dS,8),a.rXU(y.qQ,8),a.rXU(S.z,9))};static#t=this.\u0275cmp=a.VBU({type:p,selectors:[["nz-popconfirm"]],viewQuery:function(R,E){if(1&R&&(a.GBs($,5,a.aKT),a.GBs(U,5,a.aKT)),2&R){let k;a.mGM(k=a.lsd())&&(E.okBtn=k),a.mGM(k=a.lsd())&&(E.cancelBtn=k)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[a.Vt3,a.aNF],decls:2,vars:6,consts:[["overlay","cdkConnectedOverlay"],["cancelBtn",""],["okBtn",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],[1,"ant-popover-arrow"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"click","nzSize"],["nz-button","",3,"click","nzSize","nzType","nzDanger","nzLoading","disabled"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],[1,"ant-popover-message-icon"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(R,E){if(1&R){const k=a.RV6();a.DNE(0,L,17,20,"ng-template",3,0,a.C5r),a.bIt("overlayOutsideClick",function(Q){return a.eBV(k),a.Njj(E.onClickOutside(Q))})("detach",function(){return a.eBV(k),a.Njj(E.hide())})("positionChange",function(Q){return a.eBV(k),a.Njj(E.onPositionChange(Q))})}2&R&&a.Y8G("cdkConnectedOverlayHasBackdrop",E.nzBackdrop)("cdkConnectedOverlayOrigin",E.origin)("cdkConnectedOverlayPositions",E._positions)("cdkConnectedOverlayOpen",E._visible)("cdkConnectedOverlayPush",E.cdkConnectedOverlayPush)("nzArrowPointAtCenter",E.nzArrowPointAtCenter)},dependencies:[x.z_,x.WB,D.$_,D.vT,s.Pd,s.kB,y.YU,y.B3,S.z,O.C,O.m,w.Y3,w.Dn,I.Zw,I.aO,N.c,m.p,j.bP,j.Vc],encapsulation:2,data:{animation:[b.uX]},changeDetection:0})}return p})(),ee=(()=>{class p{static#e=this.\u0275fac=function(R){return new(R||p)};static#t=this.\u0275mod=a.$C({type:p});static#n=this.\u0275inj=a.G2t({imports:[K]})}return p})()}}]);