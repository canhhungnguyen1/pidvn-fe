<div>Bảng Kiểm Kê Hàng Spare Part</div>
<input
  nz-input
  [(ngModel)]="scannedCode"
  autofocus
  placeholder="Scan Material Code"
  type="text"
  (keydown.enter)="onEnter($event)"
  style="width: 30%"
/>

<div id="data-grid-demo">
  <dx-data-grid
    id="gridContainer"
    [dataSource]="dataSource"
    keyExpr="ID"
    [showBorders]="true"
  >
    <dxo-paging [enabled]="false"></dxo-paging>

    <!-- Chế độ chỉnh sửa Batch -->
    <dxo-editing mode="cell" [allowUpdating]="true"> </dxo-editing>

    <!-- Các cột của DataGrid -->
    <dxi-column
      dataField="ID"
      caption="ID"
      [width]="70"
      [allowEditing]="false"
    ></dxi-column>
    <dxi-column
      dataField="code"
      caption="Code"
      [allowEditing]="false"
    ></dxi-column>
    <dxi-column
      dataField="name"
      caption="Name"
      [allowEditing]="false"
    ></dxi-column>
    <dxi-column
      dataField="tondau"
      caption="Tồn Đầu Kỳ"
      [allowEditing]="false"
    ></dxi-column>
    <dxi-column
      dataField="tonkho"
      caption="Tồn Cuối Kỳ"
      [allowEditing]="false"
    ></dxi-column>

    <!-- Cột Số Lượng Thực Tế cho phép chỉnh sửa -->
    <dxi-column
      dataField="default"
      caption="Thực Tế"
      dataType="number"
    ></dxi-column>
    <dxi-column
      dataField=""
      caption="Chênh Lệch"
      dataType="number"
      [calculateCellValue]="calculateDifference"
      cellTemplate="chenhlechTemplate"
    >
    </dxi-column>
    <div
      *dxTemplate="let item of 'chenhlechTemplate'"
    >
      <span
        [class]="
          item.data.subtraction < 0
            ? 'red-color'
            : item.data.subtraction > 0
            ? 'green-color'
            : 'blue-color'
        "
        style="font-weight: bold"
      >
        {{ item.data.subtraction }}
      </span>
    </div>

    <dxi-column dataField="date" dataType="date" caption="Ngày"></dxi-column>
  </dx-data-grid>


</div>

<button nz-button nzType="primary" (click)="Save_data()">
  <span nz-icon nzType="save" style="color: white" ></span>
  Save
</button>


